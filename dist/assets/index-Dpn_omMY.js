function nw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const A in n)if(A!=="default"&&!(A in e)){const a=Object.getOwnPropertyDescriptor(n,A);a&&Object.defineProperty(e,A,a.get?a:{enumerable:!0,get:()=>n[A]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))n(A);new MutationObserver(A=>{for(const a of A)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(A){const a={};return A.integrity&&(a.integrity=A.integrity),A.referrerPolicy&&(a.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?a.credentials="include":A.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(A){if(A.ep)return;A.ep=!0;const a=r(A);fetch(A.href,a)}})();var Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Aw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var A=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,A.get?A:{enumerable:!0,get:function(){return e[n]}})}),r}var iw={exports:{}},vu={},aw={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),sC=Symbol.for("react.portal"),AC=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),aC=Symbol.for("react.profiler"),oC=Symbol.for("react.provider"),lC=Symbol.for("react.context"),cC=Symbol.for("react.forward_ref"),uC=Symbol.for("react.suspense"),dC=Symbol.for("react.memo"),hC=Symbol.for("react.lazy"),Ex=Symbol.iterator;function fC(e){return e===null||typeof e!="object"?null:(e=Ex&&e[Ex]||e["@@iterator"],typeof e=="function"?e:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,cw={};function da(e,t,r){this.props=e,this.context=t,this.refs=cw,this.updater=r||ow}da.prototype.isReactComponent={};da.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};da.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uw(){}uw.prototype=da.prototype;function Xf(e,t,r){this.props=e,this.context=t,this.refs=cw,this.updater=r||ow}var qf=Xf.prototype=new uw;qf.constructor=Xf;lw(qf,da.prototype);qf.isPureReactComponent=!0;var bx=Array.isArray,dw=Object.prototype.hasOwnProperty,$f={current:null},hw={key:!0,ref:!0,__self:!0,__source:!0};function fw(e,t,r){var n,A={},a=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)dw.call(t,n)&&!hw.hasOwnProperty(n)&&(A[n]=t[n]);var g=arguments.length-2;if(g===1)A.children=r;else if(1<g){for(var f=Array(g),h=0;h<g;h++)f[h]=arguments[h+2];A.children=f}if(e&&e.defaultProps)for(n in g=e.defaultProps,g)A[n]===void 0&&(A[n]=g[n]);return{$$typeof:Jo,type:e,key:a,ref:u,props:A,_owner:$f.current}}function xC(e,t){return{$$typeof:Jo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jo}function gC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var _x=/\/+/g;function v0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gC(""+e.key):t.toString(36)}function fc(e,t,r,n,A){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Jo:case sC:u=!0}}if(u)return u=e,A=A(u),e=n===""?"."+v0(u,0):n,bx(A)?(r="",e!=null&&(r=e.replace(_x,"$&/")+"/"),fc(A,t,r,"",function(h){return h})):A!=null&&(Yf(A)&&(A=xC(A,r+(!A.key||u&&u.key===A.key?"":(""+A.key).replace(_x,"$&/")+"/")+e)),t.push(A)),1;if(u=0,n=n===""?".":n+":",bx(e))for(var g=0;g<e.length;g++){a=e[g];var f=n+v0(a,g);u+=fc(a,t,r,f,A)}else if(f=fC(e),typeof f=="function")for(e=f.call(e),g=0;!(a=e.next()).done;)a=a.value,f=n+v0(a,g++),u+=fc(a,t,r,f,A);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Cl(e,t,r){if(e==null)return e;var n=[],A=0;return fc(e,n,"","",function(a){return t.call(r,a,A++)}),n}function pC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Hr={current:null},xc={transition:null},mC={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:xc,ReactCurrentOwner:$f};function xw(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Cl,forEach:function(e,t,r){Cl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cl(e,function(){t++}),t},toArray:function(e){return Cl(e,function(t){return t})||[]},only:function(e){if(!Yf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=da;Ge.Fragment=AC;Ge.Profiler=aC;Ge.PureComponent=Xf;Ge.StrictMode=iC;Ge.Suspense=uC;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;Ge.act=xw;Ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=lw({},e.props),A=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=$f.current),t.key!==void 0&&(A=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(f in t)dw.call(t,f)&&!hw.hasOwnProperty(f)&&(n[f]=t[f]===void 0&&g!==void 0?g[f]:t[f])}var f=arguments.length-2;if(f===1)n.children=r;else if(1<f){g=Array(f);for(var h=0;h<f;h++)g[h]=arguments[h+2];n.children=g}return{$$typeof:Jo,type:e.type,key:A,ref:a,props:n,_owner:u}};Ge.createContext=function(e){return e={$$typeof:lC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oC,_context:e},e.Consumer=e};Ge.createElement=fw;Ge.createFactory=function(e){var t=fw.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:cC,render:e}};Ge.isValidElement=Yf;Ge.lazy=function(e){return{$$typeof:hC,_payload:{_status:-1,_result:e},_init:pC}};Ge.memo=function(e,t){return{$$typeof:dC,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=xc.transition;xc.transition={};try{e()}finally{xc.transition=t}};Ge.unstable_act=xw;Ge.useCallback=function(e,t){return Hr.current.useCallback(e,t)};Ge.useContext=function(e){return Hr.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return Hr.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return Hr.current.useEffect(e,t)};Ge.useId=function(){return Hr.current.useId()};Ge.useImperativeHandle=function(e,t,r){return Hr.current.useImperativeHandle(e,t,r)};Ge.useInsertionEffect=function(e,t){return Hr.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return Hr.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return Hr.current.useMemo(e,t)};Ge.useReducer=function(e,t,r){return Hr.current.useReducer(e,t,r)};Ge.useRef=function(e){return Hr.current.useRef(e)};Ge.useState=function(e){return Hr.current.useState(e)};Ge.useSyncExternalStore=function(e,t,r){return Hr.current.useSyncExternalStore(e,t,r)};Ge.useTransition=function(){return Hr.current.useTransition()};Ge.version="18.3.1";aw.exports=Ge;var H=aw.exports;const Kt=sw(H),wC=nw({__proto__:null,default:Kt},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=H,BC=Symbol.for("react.element"),vC=Symbol.for("react.fragment"),CC=Object.prototype.hasOwnProperty,EC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bC={key:!0,ref:!0,__self:!0,__source:!0};function gw(e,t,r){var n,A={},a=null,u=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)CC.call(t,n)&&!bC.hasOwnProperty(n)&&(A[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)A[n]===void 0&&(A[n]=t[n]);return{$$typeof:BC,type:e,key:a,ref:u,props:A,_owner:EC.current}}vu.Fragment=vC;vu.jsx=gw;vu.jsxs=gw;iw.exports=vu;var o=iw.exports,pw={exports:{}},dn={},mw={exports:{}},ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(le,Y){var ue=le.length;le.push(Y);e:for(;0<ue;){var ee=ue-1>>>1,$=le[ee];if(0<A($,Y))le[ee]=Y,le[ue]=$,ue=ee;else break e}}function r(le){return le.length===0?null:le[0]}function n(le){if(le.length===0)return null;var Y=le[0],ue=le.pop();if(ue!==Y){le[0]=ue;e:for(var ee=0,$=le.length,Ae=$>>>1;ee<Ae;){var se=2*(ee+1)-1,Qe=le[se],fe=se+1,qe=le[fe];if(0>A(Qe,ue))fe<$&&0>A(qe,Qe)?(le[ee]=qe,le[fe]=ue,ee=fe):(le[ee]=Qe,le[se]=ue,ee=se);else if(fe<$&&0>A(qe,ue))le[ee]=qe,le[fe]=ue,ee=fe;else break e}}return Y}function A(le,Y){var ue=le.sortIndex-Y.sortIndex;return ue!==0?ue:le.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,g=u.now();e.unstable_now=function(){return u.now()-g}}var f=[],h=[],p=1,w=null,y=3,C=!1,b=!1,F=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(le){for(var Y=r(h);Y!==null;){if(Y.callback===null)n(h);else if(Y.startTime<=le)n(h),Y.sortIndex=Y.expirationTime,t(f,Y);else break;Y=r(h)}}function S(le){if(F=!1,_(le),!b)if(r(f)!==null)b=!0,re(j);else{var Y=r(h);Y!==null&&oe(S,Y.startTime-le)}}function j(le,Y){b=!1,F&&(F=!1,N(L),L=-1),C=!0;var ue=y;try{for(_(Y),w=r(f);w!==null&&(!(w.expirationTime>Y)||le&&!P());){var ee=w.callback;if(typeof ee=="function"){w.callback=null,y=w.priorityLevel;var $=ee(w.expirationTime<=Y);Y=e.unstable_now(),typeof $=="function"?w.callback=$:w===r(f)&&n(f),_(Y)}else n(f);w=r(f)}if(w!==null)var Ae=!0;else{var se=r(h);se!==null&&oe(S,se.startTime-Y),Ae=!1}return Ae}finally{w=null,y=ue,C=!1}}var Q=!1,D=null,L=-1,M=5,k=-1;function P(){return!(e.unstable_now()-k<M)}function z(){if(D!==null){var le=e.unstable_now();k=le;var Y=!0;try{Y=D(!0,le)}finally{Y?X():(Q=!1,D=null)}}else Q=!1}var X;if(typeof v=="function")X=function(){v(z)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,G=ce.port2;ce.port1.onmessage=z,X=function(){G.postMessage(null)}}else X=function(){I(z,0)};function re(le){D=le,Q||(Q=!0,X())}function oe(le,Y){L=I(function(){le(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(le){le.callback=null},e.unstable_continueExecution=function(){b||C||(b=!0,re(j))},e.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<le?Math.floor(1e3/le):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(le){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var ue=y;y=Y;try{return le()}finally{y=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(le,Y){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ue=y;y=le;try{return Y()}finally{y=ue}},e.unstable_scheduleCallback=function(le,Y,ue){var ee=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ee+ue:ee):ue=ee,le){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ue+$,le={id:p++,callback:Y,priorityLevel:le,startTime:ue,expirationTime:$,sortIndex:-1},ue>ee?(le.sortIndex=ue,t(h,le),r(f)===null&&le===r(h)&&(F?(N(L),L=-1):F=!0,oe(S,ue-ee))):(le.sortIndex=$,t(f,le),b||C||(b=!0,re(j))),le},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(le){var Y=y;return function(){var ue=y;y=Y;try{return le.apply(this,arguments)}finally{y=ue}}}})(ww);mw.exports=ww;var _C=mw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=H,un=_C;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,No={};function ti(e,t){ta(e,t),ta(e+"Capture",t)}function ta(e,t){for(No[e]=t,e=0;e<t.length;e++)yw.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uh=Object.prototype.hasOwnProperty,FC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nx={},Fx={};function IC(e){return uh.call(Fx,e)?!0:uh.call(Nx,e)?!1:FC.test(e)?Fx[e]=!0:(Nx[e]=!0,!1)}function SC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UC(e,t,r,n){if(t===null||typeof t>"u"||SC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pr(e,t,r,n,A,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=A,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var _r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_r[e]=new Pr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_r[t]=new Pr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_r[e]=new Pr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_r[e]=new Pr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_r[e]=new Pr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_r[e]=new Pr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_r[e]=new Pr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_r[e]=new Pr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_r[e]=new Pr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zf=/[\-:]([a-z])/g;function Jf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zf,Jf);_r[t]=new Pr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zf,Jf);_r[t]=new Pr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zf,Jf);_r[t]=new Pr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_r[e]=new Pr(e,1,!1,e.toLowerCase(),null,!1,!1)});_r.xlinkHref=new Pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_r[e]=new Pr(e,1,!1,e.toLowerCase(),null,!0,!0)});function e1(e,t,r,n){var A=_r.hasOwnProperty(t)?_r[t]:null;(A!==null?A.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UC(t,r,A,n)&&(r=null),n||A===null?IC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):A.mustUseProperty?e[A.propertyName]=r===null?A.type===3?!1:"":r:(t=A.attributeName,n=A.attributeNamespace,r===null?e.removeAttribute(t):(A=A.type,r=A===3||A===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ss=NC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),Si=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),t1=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),Bw=Symbol.for("react.provider"),vw=Symbol.for("react.context"),r1=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),fh=Symbol.for("react.suspense_list"),n1=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),Cw=Symbol.for("react.offscreen"),Ix=Symbol.iterator;function Da(e){return e===null||typeof e!="object"?null:(e=Ix&&e[Ix]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,C0;function Wa(e){if(C0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);C0=t&&t[1]||""}return`
`+C0+e}var E0=!1;function b0(e,t){if(!e||E0)return"";E0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var A=h.stack.split(`
`),a=n.stack.split(`
`),u=A.length-1,g=a.length-1;1<=u&&0<=g&&A[u]!==a[g];)g--;for(;1<=u&&0<=g;u--,g--)if(A[u]!==a[g]){if(u!==1||g!==1)do if(u--,g--,0>g||A[u]!==a[g]){var f=`
`+A[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=g);break}}}finally{E0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wa(e):""}function QC(e){switch(e.tag){case 5:return Wa(e.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return e=b0(e.type,!1),e;case 11:return e=b0(e.type.render,!1),e;case 1:return e=b0(e.type,!0),e;default:return""}}function xh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ui:return"Fragment";case Si:return"Portal";case dh:return"Profiler";case t1:return"StrictMode";case hh:return"Suspense";case fh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vw:return(e.displayName||"Context")+".Consumer";case Bw:return(e._context.displayName||"Context")+".Provider";case r1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case n1:return t=e.displayName||null,t!==null?t:xh(e.type)||"Memo";case zs:t=e._payload,e=e._init;try{return xh(e(t))}catch{}}return null}function DC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xh(t);case 8:return t===t1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mA(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ew(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TC(e){var t=Ew(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var A=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return A.call(this)},set:function(u){n=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bl(e){e._valueTracker||(e._valueTracker=TC(e))}function bw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ew(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Uc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gh(e,t){var r=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Sx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=mA(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _w(e,t){t=t.checked,t!=null&&e1(e,"checked",t,!1)}function ph(e,t){_w(e,t);var r=mA(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mh(e,t.type,r):t.hasOwnProperty("defaultValue")&&mh(e,t.type,mA(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ux(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mh(e,t,r){(t!=="number"||Uc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xa=Array.isArray;function zi(e,t,r,n){if(e=e.options,t){t={};for(var A=0;A<r.length;A++)t["$"+r[A]]=!0;for(r=0;r<e.length;r++)A=t.hasOwnProperty("$"+e[r].value),e[r].selected!==A&&(e[r].selected=A),A&&n&&(e[r].defaultSelected=!0)}else{for(r=""+mA(r),t=null,A=0;A<e.length;A++){if(e[A].value===r){e[A].selected=!0,n&&(e[A].defaultSelected=!0);return}t!==null||e[A].disabled||(t=e[A])}t!==null&&(t.selected=!0)}}function wh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(me(92));if(Xa(r)){if(1<r.length)throw Error(me(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mA(r)}}function Nw(e,t){var r=mA(t.value),n=mA(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Dx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _l,Iw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,A){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,A)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(e){RC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),io[t]=io[e]})});function Sw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||io.hasOwnProperty(e)&&io[e]?(""+t).trim():t+"px"}function Uw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,A=Sw(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,A):e[r]=A}}var jC=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bh(e,t){if(t){if(jC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function vh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function s1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Eh=null,Wi=null,Xi=null;function Tx(e){if(e=rl(e)){if(typeof Eh!="function")throw Error(me(280));var t=e.stateNode;t&&(t=Nu(t),Eh(e.stateNode,e.type,t))}}function Qw(e){Wi?Xi?Xi.push(e):Xi=[e]:Wi=e}function Dw(){if(Wi){var e=Wi,t=Xi;if(Xi=Wi=null,Tx(e),t)for(e=0;e<t.length;e++)Tx(t[e])}}function Tw(e,t){return e(t)}function Rw(){}var _0=!1;function jw(e,t,r){if(_0)return e(t,r);_0=!0;try{return Tw(e,t,r)}finally{_0=!1,(Wi!==null||Xi!==null)&&(Rw(),Dw())}}function Io(e,t){var r=e.stateNode;if(r===null)return null;var n=Nu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(me(231,t,typeof r));return r}var bh=!1;if(Es)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){bh=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{bh=!1}function OC(e,t,r,n,A,a,u,g,f){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(p){this.onError(p)}}var ao=!1,Qc=null,Dc=!1,_h=null,kC={onError:function(e){ao=!0,Qc=e}};function LC(e,t,r,n,A,a,u,g,f){ao=!1,Qc=null,OC.apply(kC,arguments)}function MC(e,t,r,n,A,a,u,g,f){if(LC.apply(this,arguments),ao){if(ao){var h=Qc;ao=!1,Qc=null}else throw Error(me(198));Dc||(Dc=!0,_h=h)}}function ri(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ow(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rx(e){if(ri(e)!==e)throw Error(me(188))}function HC(e){var t=e.alternate;if(!t){if(t=ri(e),t===null)throw Error(me(188));return t!==e?null:e}for(var r=e,n=t;;){var A=r.return;if(A===null)break;var a=A.alternate;if(a===null){if(n=A.return,n!==null){r=n;continue}break}if(A.child===a.child){for(a=A.child;a;){if(a===r)return Rx(A),e;if(a===n)return Rx(A),t;a=a.sibling}throw Error(me(188))}if(r.return!==n.return)r=A,n=a;else{for(var u=!1,g=A.child;g;){if(g===r){u=!0,r=A,n=a;break}if(g===n){u=!0,n=A,r=a;break}g=g.sibling}if(!u){for(g=a.child;g;){if(g===r){u=!0,r=a,n=A;break}if(g===n){u=!0,n=a,r=A;break}g=g.sibling}if(!u)throw Error(me(189))}}if(r.alternate!==n)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?e:t}function kw(e){return e=HC(e),e!==null?Lw(e):null}function Lw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lw(e);if(t!==null)return t;e=e.sibling}return null}var Mw=un.unstable_scheduleCallback,jx=un.unstable_cancelCallback,PC=un.unstable_shouldYield,KC=un.unstable_requestPaint,Vt=un.unstable_now,VC=un.unstable_getCurrentPriorityLevel,A1=un.unstable_ImmediatePriority,Hw=un.unstable_UserBlockingPriority,Tc=un.unstable_NormalPriority,GC=un.unstable_LowPriority,Pw=un.unstable_IdlePriority,Cu=null,is=null;function zC(e){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Cu,e,void 0,(e.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:qC,WC=Math.log,XC=Math.LN2;function qC(e){return e>>>=0,e===0?32:31-(WC(e)/XC|0)|0}var Nl=64,Fl=4194304;function qa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,A=e.suspendedLanes,a=e.pingedLanes,u=r&268435455;if(u!==0){var g=u&~A;g!==0?n=qa(g):(a&=u,a!==0&&(n=qa(a)))}else u=r&~A,u!==0?n=qa(u):a!==0&&(n=qa(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&A)&&(A=n&-n,a=t&-t,A>=a||A===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Hn(t),A=1<<r,n|=e[r],t&=~A;return n}function $C(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,A=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Hn(a),g=1<<u,f=A[u];f===-1?(!(g&r)||g&n)&&(A[u]=$C(g,t)):f<=t&&(e.expiredLanes|=g),a&=~g}}function Nh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kw(){var e=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),e}function N0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function el(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Hn(t),e[t]=r}function ZC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var A=31-Hn(r),a=1<<A;t[A]=0,n[A]=-1,e[A]=-1,r&=~a}}function i1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Hn(r),A=1<<n;A&t|e[n]&t&&(e[n]|=t),r&=~A}}var it=0;function Vw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gw,a1,zw,Ww,Xw,Fh=!1,Il=[],iA=null,aA=null,oA=null,So=new Map,Uo=new Map,$s=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ox(e,t){switch(e){case"focusin":case"focusout":iA=null;break;case"dragenter":case"dragleave":aA=null;break;case"mouseover":case"mouseout":oA=null;break;case"pointerover":case"pointerout":So.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(t.pointerId)}}function Ra(e,t,r,n,A,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[A]},t!==null&&(t=rl(t),t!==null&&a1(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,A!==null&&t.indexOf(A)===-1&&t.push(A),e)}function eE(e,t,r,n,A){switch(t){case"focusin":return iA=Ra(iA,e,t,r,n,A),!0;case"dragenter":return aA=Ra(aA,e,t,r,n,A),!0;case"mouseover":return oA=Ra(oA,e,t,r,n,A),!0;case"pointerover":var a=A.pointerId;return So.set(a,Ra(So.get(a)||null,e,t,r,n,A)),!0;case"gotpointercapture":return a=A.pointerId,Uo.set(a,Ra(Uo.get(a)||null,e,t,r,n,A)),!0}return!1}function qw(e){var t=HA(e.target);if(t!==null){var r=ri(t);if(r!==null){if(t=r.tag,t===13){if(t=Ow(r),t!==null){e.blockedOn=t,Xw(e.priority,function(){zw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ih(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ch=n,r.target.dispatchEvent(n),Ch=null}else return t=rl(r),t!==null&&a1(t),e.blockedOn=r,!1;t.shift()}return!0}function kx(e,t,r){gc(e)&&r.delete(t)}function tE(){Fh=!1,iA!==null&&gc(iA)&&(iA=null),aA!==null&&gc(aA)&&(aA=null),oA!==null&&gc(oA)&&(oA=null),So.forEach(kx),Uo.forEach(kx)}function ja(e,t){e.blockedOn===t&&(e.blockedOn=null,Fh||(Fh=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,tE)))}function Qo(e){function t(A){return ja(A,e)}if(0<Il.length){ja(Il[0],e);for(var r=1;r<Il.length;r++){var n=Il[r];n.blockedOn===e&&(n.blockedOn=null)}}for(iA!==null&&ja(iA,e),aA!==null&&ja(aA,e),oA!==null&&ja(oA,e),So.forEach(t),Uo.forEach(t),r=0;r<$s.length;r++)n=$s[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$s.length&&(r=$s[0],r.blockedOn===null);)qw(r),r.blockedOn===null&&$s.shift()}var qi=Ss.ReactCurrentBatchConfig,jc=!0;function rE(e,t,r,n){var A=it,a=qi.transition;qi.transition=null;try{it=1,o1(e,t,r,n)}finally{it=A,qi.transition=a}}function nE(e,t,r,n){var A=it,a=qi.transition;qi.transition=null;try{it=4,o1(e,t,r,n)}finally{it=A,qi.transition=a}}function o1(e,t,r,n){if(jc){var A=Ih(e,t,r,n);if(A===null)O0(e,t,n,Oc,r),Ox(e,n);else if(eE(A,e,t,r,n))n.stopPropagation();else if(Ox(e,n),t&4&&-1<JC.indexOf(e)){for(;A!==null;){var a=rl(A);if(a!==null&&Gw(a),a=Ih(e,t,r,n),a===null&&O0(e,t,n,Oc,r),a===A)break;A=a}A!==null&&n.stopPropagation()}else O0(e,t,n,null,r)}}var Oc=null;function Ih(e,t,r,n){if(Oc=null,e=s1(n),e=HA(e),e!==null)if(t=ri(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ow(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oc=e,null}function $w(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VC()){case A1:return 1;case Hw:return 4;case Tc:case GC:return 16;case Pw:return 536870912;default:return 16}default:return 16}}var eA=null,l1=null,pc=null;function Yw(){if(pc)return pc;var e,t=l1,r=t.length,n,A="value"in eA?eA.value:eA.textContent,a=A.length;for(e=0;e<r&&t[e]===A[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===A[a-n];n++);return pc=A.slice(e,1<n?1-n:void 0)}function mc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sl(){return!0}function Lx(){return!1}function hn(e){function t(r,n,A,a,u){this._reactName=r,this._targetInst=A,this.type=n,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(r=e[g],this[g]=r?r(a):a[g]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Sl:Lx,this.isPropagationStopped=Lx,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),t}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c1=hn(ha),tl=St({},ha,{view:0,detail:0}),sE=hn(tl),F0,I0,Oa,Eu=St({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&e.type==="mousemove"?(F0=e.screenX-Oa.screenX,I0=e.screenY-Oa.screenY):I0=F0=0,Oa=e),F0)},movementY:function(e){return"movementY"in e?e.movementY:I0}}),Mx=hn(Eu),AE=St({},Eu,{dataTransfer:0}),iE=hn(AE),aE=St({},tl,{relatedTarget:0}),S0=hn(aE),oE=St({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),lE=hn(oE),cE=St({},ha,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uE=hn(cE),dE=St({},ha,{data:0}),Hx=hn(dE),hE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xE[e])?!!t[e]:!1}function u1(){return gE}var pE=St({},tl,{key:function(e){if(e.key){var t=hE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(e){return e.type==="keypress"?mc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mE=hn(pE),wE=St({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Px=hn(wE),yE=St({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),BE=hn(yE),vE=St({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),CE=hn(vE),EE=St({},Eu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bE=hn(EE),_E=[9,13,27,32],d1=Es&&"CompositionEvent"in window,oo=null;Es&&"documentMode"in document&&(oo=document.documentMode);var NE=Es&&"TextEvent"in window&&!oo,Zw=Es&&(!d1||oo&&8<oo&&11>=oo),Kx=" ",Vx=!1;function Jw(e,t){switch(e){case"keyup":return _E.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function FE(e,t){switch(e){case"compositionend":return e2(t);case"keypress":return t.which!==32?null:(Vx=!0,Kx);case"textInput":return e=t.data,e===Kx&&Vx?null:e;default:return null}}function IE(e,t){if(Qi)return e==="compositionend"||!d1&&Jw(e,t)?(e=Yw(),pc=l1=eA=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zw&&t.locale!=="ko"?null:t.data;default:return null}}var SE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SE[e.type]:t==="textarea"}function t2(e,t,r,n){Qw(n),t=kc(t,"onChange"),0<t.length&&(r=new c1("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var lo=null,Do=null;function UE(e){d2(e,0)}function bu(e){var t=Ri(e);if(bw(t))return e}function QE(e,t){if(e==="change")return t}var r2=!1;if(Es){var U0;if(Es){var Q0="oninput"in document;if(!Q0){var zx=document.createElement("div");zx.setAttribute("oninput","return;"),Q0=typeof zx.oninput=="function"}U0=Q0}else U0=!1;r2=U0&&(!document.documentMode||9<document.documentMode)}function Wx(){lo&&(lo.detachEvent("onpropertychange",n2),Do=lo=null)}function n2(e){if(e.propertyName==="value"&&bu(Do)){var t=[];t2(t,Do,e,s1(e)),jw(UE,t)}}function DE(e,t,r){e==="focusin"?(Wx(),lo=t,Do=r,lo.attachEvent("onpropertychange",n2)):e==="focusout"&&Wx()}function TE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bu(Do)}function RE(e,t){if(e==="click")return bu(t)}function jE(e,t){if(e==="input"||e==="change")return bu(t)}function OE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kn=typeof Object.is=="function"?Object.is:OE;function To(e,t){if(Kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var A=r[n];if(!uh.call(t,A)||!Kn(e[A],t[A]))return!1}return!0}function Xx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qx(e,t){var r=Xx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xx(r)}}function s2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?s2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function A2(){for(var e=window,t=Uc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Uc(e.document)}return t}function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kE(e){var t=A2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&s2(r.ownerDocument.documentElement,r)){if(n!==null&&h1(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var A=r.textContent.length,a=Math.min(n.start,A);n=n.end===void 0?a:Math.min(n.end,A),!e.extend&&a>n&&(A=n,n=a,a=A),A=qx(r,a);var u=qx(r,n);A&&u&&(e.rangeCount!==1||e.anchorNode!==A.node||e.anchorOffset!==A.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(A.node,A.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LE=Es&&"documentMode"in document&&11>=document.documentMode,Di=null,Sh=null,co=null,Uh=!1;function $x(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uh||Di==null||Di!==Uc(n)||(n=Di,"selectionStart"in n&&h1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),co&&To(co,n)||(co=n,n=kc(Sh,"onSelect"),0<n.length&&(t=new c1("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Di)))}function Ul(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ti={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},D0={},i2={};Es&&(i2=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function _u(e){if(D0[e])return D0[e];if(!Ti[e])return e;var t=Ti[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in i2)return D0[e]=t[r];return e}var a2=_u("animationend"),o2=_u("animationiteration"),l2=_u("animationstart"),c2=_u("transitionend"),u2=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vA(e,t){u2.set(e,t),ti(t,[e])}for(var T0=0;T0<Yx.length;T0++){var R0=Yx[T0],ME=R0.toLowerCase(),HE=R0[0].toUpperCase()+R0.slice(1);vA(ME,"on"+HE)}vA(a2,"onAnimationEnd");vA(o2,"onAnimationIteration");vA(l2,"onAnimationStart");vA("dblclick","onDoubleClick");vA("focusin","onFocus");vA("focusout","onBlur");vA(c2,"onTransitionEnd");ta("onMouseEnter",["mouseout","mouseover"]);ta("onMouseLeave",["mouseout","mouseover"]);ta("onPointerEnter",["pointerout","pointerover"]);ta("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PE=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function Zx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,MC(n,t,void 0,e),e.currentTarget=null}function d2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],A=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var u=n.length-1;0<=u;u--){var g=n[u],f=g.instance,h=g.currentTarget;if(g=g.listener,f!==a&&A.isPropagationStopped())break e;Zx(A,g,h),a=f}else for(u=0;u<n.length;u++){if(g=n[u],f=g.instance,h=g.currentTarget,g=g.listener,f!==a&&A.isPropagationStopped())break e;Zx(A,g,h),a=f}}}if(Dc)throw e=_h,Dc=!1,_h=null,e}function mt(e,t){var r=t[jh];r===void 0&&(r=t[jh]=new Set);var n=e+"__bubble";r.has(n)||(h2(t,e,2,!1),r.add(n))}function j0(e,t,r){var n=0;t&&(n|=4),h2(r,e,n,t)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ro(e){if(!e[Ql]){e[Ql]=!0,yw.forEach(function(r){r!=="selectionchange"&&(PE.has(r)||j0(r,!1,e),j0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ql]||(t[Ql]=!0,j0("selectionchange",!1,t))}}function h2(e,t,r,n){switch($w(t)){case 1:var A=rE;break;case 4:A=nE;break;default:A=o1}r=A.bind(null,t,r,e),A=void 0,!bh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(A=!0),n?A!==void 0?e.addEventListener(t,r,{capture:!0,passive:A}):e.addEventListener(t,r,!0):A!==void 0?e.addEventListener(t,r,{passive:A}):e.addEventListener(t,r,!1)}function O0(e,t,r,n,A){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var g=n.stateNode.containerInfo;if(g===A||g.nodeType===8&&g.parentNode===A)break;if(u===4)for(u=n.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===A||f.nodeType===8&&f.parentNode===A))return;u=u.return}for(;g!==null;){if(u=HA(g),u===null)return;if(f=u.tag,f===5||f===6){n=a=u;continue e}g=g.parentNode}}n=n.return}jw(function(){var h=a,p=s1(r),w=[];e:{var y=u2.get(e);if(y!==void 0){var C=c1,b=e;switch(e){case"keypress":if(mc(r)===0)break e;case"keydown":case"keyup":C=mE;break;case"focusin":b="focus",C=S0;break;case"focusout":b="blur",C=S0;break;case"beforeblur":case"afterblur":C=S0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Mx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=BE;break;case a2:case o2:case l2:C=lE;break;case c2:C=CE;break;case"scroll":C=sE;break;case"wheel":C=bE;break;case"copy":case"cut":case"paste":C=uE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Px}var F=(t&4)!==0,I=!F&&e==="scroll",N=F?y!==null?y+"Capture":null:y;F=[];for(var v=h,_;v!==null;){_=v;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,N!==null&&(S=Io(v,N),S!=null&&F.push(jo(v,S,_)))),I)break;v=v.return}0<F.length&&(y=new C(y,b,null,r,p),w.push({event:y,listeners:F}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",y&&r!==Ch&&(b=r.relatedTarget||r.fromElement)&&(HA(b)||b[bs]))break e;if((C||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,C?(b=r.relatedTarget||r.toElement,C=h,b=b?HA(b):null,b!==null&&(I=ri(b),b!==I||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(F=Mx,S="onMouseLeave",N="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(F=Px,S="onPointerLeave",N="onPointerEnter",v="pointer"),I=C==null?y:Ri(C),_=b==null?y:Ri(b),y=new F(S,v+"leave",C,r,p),y.target=I,y.relatedTarget=_,S=null,HA(p)===h&&(F=new F(N,v+"enter",b,r,p),F.target=_,F.relatedTarget=I,S=F),I=S,C&&b)t:{for(F=C,N=b,v=0,_=F;_;_=gi(_))v++;for(_=0,S=N;S;S=gi(S))_++;for(;0<v-_;)F=gi(F),v--;for(;0<_-v;)N=gi(N),_--;for(;v--;){if(F===N||N!==null&&F===N.alternate)break t;F=gi(F),N=gi(N)}F=null}else F=null;C!==null&&Jx(w,y,C,F,!1),b!==null&&I!==null&&Jx(w,I,b,F,!0)}}e:{if(y=h?Ri(h):window,C=y.nodeName&&y.nodeName.toLowerCase(),C==="select"||C==="input"&&y.type==="file")var j=QE;else if(Gx(y))if(r2)j=jE;else{j=TE;var Q=DE}else(C=y.nodeName)&&C.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=RE);if(j&&(j=j(e,h))){t2(w,j,r,p);break e}Q&&Q(e,y,h),e==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&mh(y,"number",y.value)}switch(Q=h?Ri(h):window,e){case"focusin":(Gx(Q)||Q.contentEditable==="true")&&(Di=Q,Sh=h,co=null);break;case"focusout":co=Sh=Di=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,$x(w,r,p);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":$x(w,r,p)}var D;if(d1)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Qi?Jw(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Zw&&r.locale!=="ko"&&(Qi||L!=="onCompositionStart"?L==="onCompositionEnd"&&Qi&&(D=Yw()):(eA=p,l1="value"in eA?eA.value:eA.textContent,Qi=!0)),Q=kc(h,L),0<Q.length&&(L=new Hx(L,e,null,r,p),w.push({event:L,listeners:Q}),D?L.data=D:(D=e2(r),D!==null&&(L.data=D)))),(D=NE?FE(e,r):IE(e,r))&&(h=kc(h,"onBeforeInput"),0<h.length&&(p=new Hx("onBeforeInput","beforeinput",null,r,p),w.push({event:p,listeners:h}),p.data=D))}d2(w,t)})}function jo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kc(e,t){for(var r=t+"Capture",n=[];e!==null;){var A=e,a=A.stateNode;A.tag===5&&a!==null&&(A=a,a=Io(e,r),a!=null&&n.unshift(jo(e,a,A)),a=Io(e,t),a!=null&&n.push(jo(e,a,A))),e=e.return}return n}function gi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jx(e,t,r,n,A){for(var a=t._reactName,u=[];r!==null&&r!==n;){var g=r,f=g.alternate,h=g.stateNode;if(f!==null&&f===n)break;g.tag===5&&h!==null&&(g=h,A?(f=Io(r,a),f!=null&&u.unshift(jo(r,f,g))):A||(f=Io(r,a),f!=null&&u.push(jo(r,f,g)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var KE=/\r\n?/g,VE=/\u0000|\uFFFD/g;function eg(e){return(typeof e=="string"?e:""+e).replace(KE,`
`).replace(VE,"")}function Dl(e,t,r){if(t=eg(t),eg(e)!==t&&r)throw Error(me(425))}function Lc(){}var Qh=null,Dh=null;function Th(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,GE=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(e){return tg.resolve(null).then(e).catch(WE)}:Rh;function WE(e){setTimeout(function(){throw e})}function k0(e,t){var r=t,n=0;do{var A=r.nextSibling;if(e.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(n===0){e.removeChild(A),Qo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=A}while(r);Qo(t)}function lA(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),As="__reactFiber$"+fa,Oo="__reactProps$"+fa,bs="__reactContainer$"+fa,jh="__reactEvents$"+fa,XE="__reactListeners$"+fa,qE="__reactHandles$"+fa;function HA(e){var t=e[As];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bs]||r[As]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rg(e);e!==null;){if(r=e[As])return r;e=rg(e)}return t}e=r,r=e.parentNode}return null}function rl(e){return e=e[As]||e[bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ri(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function Nu(e){return e[Oo]||null}var Oh=[],ji=-1;function CA(e){return{current:e}}function Bt(e){0>ji||(e.current=Oh[ji],Oh[ji]=null,ji--)}function xt(e,t){ji++,Oh[ji]=e.current,e.current=t}var wA={},Rr=CA(wA),Jr=CA(!1),qA=wA;function ra(e,t){var r=e.type.contextTypes;if(!r)return wA;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var A={},a;for(a in r)A[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=A),A}function en(e){return e=e.childContextTypes,e!=null}function Mc(){Bt(Jr),Bt(Rr)}function ng(e,t,r){if(Rr.current!==wA)throw Error(me(168));xt(Rr,t),xt(Jr,r)}function f2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var A in n)if(!(A in t))throw Error(me(108,DC(e)||"Unknown",A));return St({},r,n)}function Hc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wA,qA=Rr.current,xt(Rr,e),xt(Jr,Jr.current),!0}function sg(e,t,r){var n=e.stateNode;if(!n)throw Error(me(169));r?(e=f2(e,t,qA),n.__reactInternalMemoizedMergedChildContext=e,Bt(Jr),Bt(Rr),xt(Rr,e)):Bt(Jr),xt(Jr,r)}var ps=null,Fu=!1,L0=!1;function x2(e){ps===null?ps=[e]:ps.push(e)}function $E(e){Fu=!0,x2(e)}function EA(){if(!L0&&ps!==null){L0=!0;var e=0,t=it;try{var r=ps;for(it=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ps=null,Fu=!1}catch(A){throw ps!==null&&(ps=ps.slice(e+1)),Mw(A1,EA),A}finally{it=t,L0=!1}}return null}var Oi=[],ki=0,Pc=null,Kc=0,Bn=[],vn=0,$A=null,ws=1,ys="";function RA(e,t){Oi[ki++]=Kc,Oi[ki++]=Pc,Pc=e,Kc=t}function g2(e,t,r){Bn[vn++]=ws,Bn[vn++]=ys,Bn[vn++]=$A,$A=e;var n=ws;e=ys;var A=32-Hn(n)-1;n&=~(1<<A),r+=1;var a=32-Hn(t)+A;if(30<a){var u=A-A%5;a=(n&(1<<u)-1).toString(32),n>>=u,A-=u,ws=1<<32-Hn(t)+A|r<<A|n,ys=a+e}else ws=1<<a|r<<A|n,ys=e}function f1(e){e.return!==null&&(RA(e,1),g2(e,1,0))}function x1(e){for(;e===Pc;)Pc=Oi[--ki],Oi[ki]=null,Kc=Oi[--ki],Oi[ki]=null;for(;e===$A;)$A=Bn[--vn],Bn[vn]=null,ys=Bn[--vn],Bn[vn]=null,ws=Bn[--vn],Bn[vn]=null}var cn=null,ln=null,_t=!1,Mn=null;function p2(e,t){var r=bn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ag(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cn=e,ln=lA(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cn=e,ln=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$A!==null?{id:ws,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,cn=e,ln=null,!0):!1;default:return!1}}function kh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lh(e){if(_t){var t=ln;if(t){var r=t;if(!Ag(e,t)){if(kh(e))throw Error(me(418));t=lA(r.nextSibling);var n=cn;t&&Ag(e,t)?p2(n,r):(e.flags=e.flags&-4097|2,_t=!1,cn=e)}}else{if(kh(e))throw Error(me(418));e.flags=e.flags&-4097|2,_t=!1,cn=e}}}function ig(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cn=e}function Tl(e){if(e!==cn)return!1;if(!_t)return ig(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Th(e.type,e.memoizedProps)),t&&(t=ln)){if(kh(e))throw m2(),Error(me(418));for(;t;)p2(e,t),t=lA(t.nextSibling)}if(ig(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ln=lA(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ln=null}}else ln=cn?lA(e.stateNode.nextSibling):null;return!0}function m2(){for(var e=ln;e;)e=lA(e.nextSibling)}function na(){ln=cn=null,_t=!1}function g1(e){Mn===null?Mn=[e]:Mn.push(e)}var YE=Ss.ReactCurrentBatchConfig;function ka(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var n=r.stateNode}if(!n)throw Error(me(147,e));var A=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var g=A.refs;u===null?delete g[a]:g[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,e))}return e}function Rl(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ag(e){var t=e._init;return t(e._payload)}function w2(e){function t(N,v){if(e){var _=N.deletions;_===null?(N.deletions=[v],N.flags|=16):_.push(v)}}function r(N,v){if(!e)return null;for(;v!==null;)t(N,v),v=v.sibling;return null}function n(N,v){for(N=new Map;v!==null;)v.key!==null?N.set(v.key,v):N.set(v.index,v),v=v.sibling;return N}function A(N,v){return N=hA(N,v),N.index=0,N.sibling=null,N}function a(N,v,_){return N.index=_,e?(_=N.alternate,_!==null?(_=_.index,_<v?(N.flags|=2,v):_):(N.flags|=2,v)):(N.flags|=1048576,v)}function u(N){return e&&N.alternate===null&&(N.flags|=2),N}function g(N,v,_,S){return v===null||v.tag!==6?(v=z0(_,N.mode,S),v.return=N,v):(v=A(v,_),v.return=N,v)}function f(N,v,_,S){var j=_.type;return j===Ui?p(N,v,_.props.children,S,_.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===zs&&ag(j)===v.type)?(S=A(v,_.props),S.ref=ka(N,v,_),S.return=N,S):(S=bc(_.type,_.key,_.props,null,N.mode,S),S.ref=ka(N,v,_),S.return=N,S)}function h(N,v,_,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=W0(_,N.mode,S),v.return=N,v):(v=A(v,_.children||[]),v.return=N,v)}function p(N,v,_,S,j){return v===null||v.tag!==7?(v=zA(_,N.mode,S,j),v.return=N,v):(v=A(v,_),v.return=N,v)}function w(N,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=z0(""+v,N.mode,_),v.return=N,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case El:return _=bc(v.type,v.key,v.props,null,N.mode,_),_.ref=ka(N,null,v),_.return=N,_;case Si:return v=W0(v,N.mode,_),v.return=N,v;case zs:var S=v._init;return w(N,S(v._payload),_)}if(Xa(v)||Da(v))return v=zA(v,N.mode,_,null),v.return=N,v;Rl(N,v)}return null}function y(N,v,_,S){var j=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:g(N,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case El:return _.key===j?f(N,v,_,S):null;case Si:return _.key===j?h(N,v,_,S):null;case zs:return j=_._init,y(N,v,j(_._payload),S)}if(Xa(_)||Da(_))return j!==null?null:p(N,v,_,S,null);Rl(N,_)}return null}function C(N,v,_,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return N=N.get(_)||null,g(v,N,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return N=N.get(S.key===null?_:S.key)||null,f(v,N,S,j);case Si:return N=N.get(S.key===null?_:S.key)||null,h(v,N,S,j);case zs:var Q=S._init;return C(N,v,_,Q(S._payload),j)}if(Xa(S)||Da(S))return N=N.get(_)||null,p(v,N,S,j,null);Rl(v,S)}return null}function b(N,v,_,S){for(var j=null,Q=null,D=v,L=v=0,M=null;D!==null&&L<_.length;L++){D.index>L?(M=D,D=null):M=D.sibling;var k=y(N,D,_[L],S);if(k===null){D===null&&(D=M);break}e&&D&&k.alternate===null&&t(N,D),v=a(k,v,L),Q===null?j=k:Q.sibling=k,Q=k,D=M}if(L===_.length)return r(N,D),_t&&RA(N,L),j;if(D===null){for(;L<_.length;L++)D=w(N,_[L],S),D!==null&&(v=a(D,v,L),Q===null?j=D:Q.sibling=D,Q=D);return _t&&RA(N,L),j}for(D=n(N,D);L<_.length;L++)M=C(D,N,L,_[L],S),M!==null&&(e&&M.alternate!==null&&D.delete(M.key===null?L:M.key),v=a(M,v,L),Q===null?j=M:Q.sibling=M,Q=M);return e&&D.forEach(function(P){return t(N,P)}),_t&&RA(N,L),j}function F(N,v,_,S){var j=Da(_);if(typeof j!="function")throw Error(me(150));if(_=j.call(_),_==null)throw Error(me(151));for(var Q=j=null,D=v,L=v=0,M=null,k=_.next();D!==null&&!k.done;L++,k=_.next()){D.index>L?(M=D,D=null):M=D.sibling;var P=y(N,D,k.value,S);if(P===null){D===null&&(D=M);break}e&&D&&P.alternate===null&&t(N,D),v=a(P,v,L),Q===null?j=P:Q.sibling=P,Q=P,D=M}if(k.done)return r(N,D),_t&&RA(N,L),j;if(D===null){for(;!k.done;L++,k=_.next())k=w(N,k.value,S),k!==null&&(v=a(k,v,L),Q===null?j=k:Q.sibling=k,Q=k);return _t&&RA(N,L),j}for(D=n(N,D);!k.done;L++,k=_.next())k=C(D,N,L,k.value,S),k!==null&&(e&&k.alternate!==null&&D.delete(k.key===null?L:k.key),v=a(k,v,L),Q===null?j=k:Q.sibling=k,Q=k);return e&&D.forEach(function(z){return t(N,z)}),_t&&RA(N,L),j}function I(N,v,_,S){if(typeof _=="object"&&_!==null&&_.type===Ui&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case El:e:{for(var j=_.key,Q=v;Q!==null;){if(Q.key===j){if(j=_.type,j===Ui){if(Q.tag===7){r(N,Q.sibling),v=A(Q,_.props.children),v.return=N,N=v;break e}}else if(Q.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===zs&&ag(j)===Q.type){r(N,Q.sibling),v=A(Q,_.props),v.ref=ka(N,Q,_),v.return=N,N=v;break e}r(N,Q);break}else t(N,Q);Q=Q.sibling}_.type===Ui?(v=zA(_.props.children,N.mode,S,_.key),v.return=N,N=v):(S=bc(_.type,_.key,_.props,null,N.mode,S),S.ref=ka(N,v,_),S.return=N,N=S)}return u(N);case Si:e:{for(Q=_.key;v!==null;){if(v.key===Q)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){r(N,v.sibling),v=A(v,_.children||[]),v.return=N,N=v;break e}else{r(N,v);break}else t(N,v);v=v.sibling}v=W0(_,N.mode,S),v.return=N,N=v}return u(N);case zs:return Q=_._init,I(N,v,Q(_._payload),S)}if(Xa(_))return b(N,v,_,S);if(Da(_))return F(N,v,_,S);Rl(N,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(r(N,v.sibling),v=A(v,_),v.return=N,N=v):(r(N,v),v=z0(_,N.mode,S),v.return=N,N=v),u(N)):r(N,v)}return I}var sa=w2(!0),y2=w2(!1),Vc=CA(null),Gc=null,Li=null,p1=null;function m1(){p1=Li=Gc=null}function w1(e){var t=Vc.current;Bt(Vc),e._currentValue=t}function Mh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function $i(e,t){Gc=e,p1=Li=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zr=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(p1!==e)if(e={context:e,memoizedValue:t,next:null},Li===null){if(Gc===null)throw Error(me(308));Li=e,Gc.dependencies={lanes:0,firstContext:e}}else Li=Li.next=e;return t}var PA=null;function y1(e){PA===null?PA=[e]:PA.push(e)}function B2(e,t,r,n){var A=t.interleaved;return A===null?(r.next=r,y1(t)):(r.next=A.next,A.next=r),t.interleaved=r,_s(e,n)}function _s(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ws=!1;function B1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cA(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,tt&2){var A=n.pending;return A===null?t.next=t:(t.next=A.next,A.next=t),n.pending=t,_s(e,r)}return A=n.interleaved,A===null?(t.next=t,y1(n)):(t.next=A.next,A.next=t),n.interleaved=t,_s(e,r)}function wc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,i1(e,r)}}function og(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var A=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?A=a=u:a=a.next=u,r=r.next}while(r!==null);a===null?A=a=t:a=a.next=t}else A=a=t;r={baseState:n.baseState,firstBaseUpdate:A,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zc(e,t,r,n){var A=e.updateQueue;Ws=!1;var a=A.firstBaseUpdate,u=A.lastBaseUpdate,g=A.shared.pending;if(g!==null){A.shared.pending=null;var f=g,h=f.next;f.next=null,u===null?a=h:u.next=h,u=f;var p=e.alternate;p!==null&&(p=p.updateQueue,g=p.lastBaseUpdate,g!==u&&(g===null?p.firstBaseUpdate=h:g.next=h,p.lastBaseUpdate=f))}if(a!==null){var w=A.baseState;u=0,p=h=f=null,g=a;do{var y=g.lane,C=g.eventTime;if((n&y)===y){p!==null&&(p=p.next={eventTime:C,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var b=e,F=g;switch(y=t,C=r,F.tag){case 1:if(b=F.payload,typeof b=="function"){w=b.call(C,w,y);break e}w=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=F.payload,y=typeof b=="function"?b.call(C,w,y):b,y==null)break e;w=St({},w,y);break e;case 2:Ws=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,y=A.effects,y===null?A.effects=[g]:y.push(g))}else C={eventTime:C,lane:y,tag:g.tag,payload:g.payload,callback:g.callback,next:null},p===null?(h=p=C,f=w):p=p.next=C,u|=y;if(g=g.next,g===null){if(g=A.shared.pending,g===null)break;y=g,g=y.next,y.next=null,A.lastBaseUpdate=y,A.shared.pending=null}}while(!0);if(p===null&&(f=w),A.baseState=f,A.firstBaseUpdate=h,A.lastBaseUpdate=p,t=A.shared.interleaved,t!==null){A=t;do u|=A.lane,A=A.next;while(A!==t)}else a===null&&(A.shared.lanes=0);ZA|=u,e.lanes=u,e.memoizedState=w}}function lg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],A=n.callback;if(A!==null){if(n.callback=null,n=r,typeof A!="function")throw Error(me(191,A));A.call(n)}}}var nl={},as=CA(nl),ko=CA(nl),Lo=CA(nl);function KA(e){if(e===nl)throw Error(me(174));return e}function v1(e,t){switch(xt(Lo,t),xt(ko,e),xt(as,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yh(t,e)}Bt(as),xt(as,t)}function Aa(){Bt(as),Bt(ko),Bt(Lo)}function C2(e){KA(Lo.current);var t=KA(as.current),r=yh(t,e.type);t!==r&&(xt(ko,e),xt(as,r))}function C1(e){ko.current===e&&(Bt(as),Bt(ko))}var Ft=CA(0);function Wc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var M0=[];function E1(){for(var e=0;e<M0.length;e++)M0[e]._workInProgressVersionPrimary=null;M0.length=0}var yc=Ss.ReactCurrentDispatcher,H0=Ss.ReactCurrentBatchConfig,YA=0,It=null,Zt=null,cr=null,Xc=!1,uo=!1,Mo=0,ZE=0;function Ir(){throw Error(me(321))}function b1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kn(e[r],t[r]))return!1;return!0}function _1(e,t,r,n,A,a){if(YA=a,It=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yc.current=e===null||e.memoizedState===null?r4:n4,e=r(n,A),uo){a=0;do{if(uo=!1,Mo=0,25<=a)throw Error(me(301));a+=1,cr=Zt=null,t.updateQueue=null,yc.current=s4,e=r(n,A)}while(uo)}if(yc.current=qc,t=Zt!==null&&Zt.next!==null,YA=0,cr=Zt=It=null,Xc=!1,t)throw Error(me(300));return e}function N1(){var e=Mo!==0;return Mo=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?It.memoizedState=cr=e:cr=cr.next=e,cr}function Sn(){if(Zt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var t=cr===null?It.memoizedState:cr.next;if(t!==null)cr=t,Zt=e;else{if(e===null)throw Error(me(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},cr===null?It.memoizedState=cr=e:cr=cr.next=e}return cr}function Ho(e,t){return typeof t=="function"?t(e):t}function P0(e){var t=Sn(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var n=Zt,A=n.baseQueue,a=r.pending;if(a!==null){if(A!==null){var u=A.next;A.next=a.next,a.next=u}n.baseQueue=A=a,r.pending=null}if(A!==null){a=A.next,n=n.baseState;var g=u=null,f=null,h=a;do{var p=h.lane;if((YA&p)===p)f!==null&&(f=f.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var w={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};f===null?(g=f=w,u=n):f=f.next=w,It.lanes|=p,ZA|=p}h=h.next}while(h!==null&&h!==a);f===null?u=n:f.next=g,Kn(n,t.memoizedState)||(Zr=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=f,r.lastRenderedState=n}if(e=r.interleaved,e!==null){A=e;do a=A.lane,It.lanes|=a,ZA|=a,A=A.next;while(A!==e)}else A===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function K0(e){var t=Sn(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var n=r.dispatch,A=r.pending,a=t.memoizedState;if(A!==null){r.pending=null;var u=A=A.next;do a=e(a,u.action),u=u.next;while(u!==A);Kn(a,t.memoizedState)||(Zr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function E2(){}function b2(e,t){var r=It,n=Sn(),A=t(),a=!Kn(n.memoizedState,A);if(a&&(n.memoizedState=A,Zr=!0),n=n.queue,F1(F2.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||cr!==null&&cr.memoizedState.tag&1){if(r.flags|=2048,Po(9,N2.bind(null,r,n,A,t),void 0,null),dr===null)throw Error(me(349));YA&30||_2(r,t,A)}return A}function _2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function N2(e,t,r,n){t.value=r,t.getSnapshot=n,I2(t)&&S2(e)}function F2(e,t,r){return r(function(){I2(t)&&S2(e)})}function I2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kn(e,r)}catch{return!0}}function S2(e){var t=_s(e,1);t!==null&&Pn(t,e,1,-1)}function cg(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t.queue=e,e=e.dispatch=t4.bind(null,It,e),[t.memoizedState,e]}function Po(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function U2(){return Sn().memoizedState}function Bc(e,t,r,n){var A=ss();It.flags|=e,A.memoizedState=Po(1|t,r,void 0,n===void 0?null:n)}function Iu(e,t,r,n){var A=Sn();n=n===void 0?null:n;var a=void 0;if(Zt!==null){var u=Zt.memoizedState;if(a=u.destroy,n!==null&&b1(n,u.deps)){A.memoizedState=Po(t,r,a,n);return}}It.flags|=e,A.memoizedState=Po(1|t,r,a,n)}function ug(e,t){return Bc(8390656,8,e,t)}function F1(e,t){return Iu(2048,8,e,t)}function Q2(e,t){return Iu(4,2,e,t)}function D2(e,t){return Iu(4,4,e,t)}function T2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R2(e,t,r){return r=r!=null?r.concat([e]):null,Iu(4,4,T2.bind(null,t,e),r)}function I1(){}function j2(e,t){var r=Sn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&b1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function O2(e,t){var r=Sn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&b1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function k2(e,t,r){return YA&21?(Kn(r,t)||(r=Kw(),It.lanes|=r,ZA|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zr=!0),e.memoizedState=r)}function JE(e,t){var r=it;it=r!==0&&4>r?r:4,e(!0);var n=H0.transition;H0.transition={};try{e(!1),t()}finally{it=r,H0.transition=n}}function L2(){return Sn().memoizedState}function e4(e,t,r){var n=dA(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},M2(e))H2(t,r);else if(r=B2(e,t,r,n),r!==null){var A=Lr();Pn(r,e,n,A),P2(r,t,n)}}function t4(e,t,r){var n=dA(e),A={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(M2(e))H2(t,A);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,g=a(u,r);if(A.hasEagerState=!0,A.eagerState=g,Kn(g,u)){var f=t.interleaved;f===null?(A.next=A,y1(t)):(A.next=f.next,f.next=A),t.interleaved=A;return}}catch{}finally{}r=B2(e,t,A,n),r!==null&&(A=Lr(),Pn(r,e,n,A),P2(r,t,n))}}function M2(e){var t=e.alternate;return e===It||t!==null&&t===It}function H2(e,t){uo=Xc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function P2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,i1(e,r)}}var qc={readContext:In,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},r4={readContext:In,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:ug,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bc(4194308,4,T2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bc(4,2,e,t)},useMemo:function(e,t){var r=ss();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ss();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=e4.bind(null,It,e),[n.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:cg,useDebugValue:I1,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=cg(!1),t=e[0];return e=JE.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=It,A=ss();if(_t){if(r===void 0)throw Error(me(407));r=r()}else{if(r=t(),dr===null)throw Error(me(349));YA&30||_2(n,t,r)}A.memoizedState=r;var a={value:r,getSnapshot:t};return A.queue=a,ug(F2.bind(null,n,a,e),[e]),n.flags|=2048,Po(9,N2.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ss(),t=dr.identifierPrefix;if(_t){var r=ys,n=ws;r=(n&~(1<<32-Hn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Mo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ZE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},n4={readContext:In,useCallback:j2,useContext:In,useEffect:F1,useImperativeHandle:R2,useInsertionEffect:Q2,useLayoutEffect:D2,useMemo:O2,useReducer:P0,useRef:U2,useState:function(){return P0(Ho)},useDebugValue:I1,useDeferredValue:function(e){var t=Sn();return k2(t,Zt.memoizedState,e)},useTransition:function(){var e=P0(Ho)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:E2,useSyncExternalStore:b2,useId:L2,unstable_isNewReconciler:!1},s4={readContext:In,useCallback:j2,useContext:In,useEffect:F1,useImperativeHandle:R2,useInsertionEffect:Q2,useLayoutEffect:D2,useMemo:O2,useReducer:K0,useRef:U2,useState:function(){return K0(Ho)},useDebugValue:I1,useDeferredValue:function(e){var t=Sn();return Zt===null?t.memoizedState=e:k2(t,Zt.memoizedState,e)},useTransition:function(){var e=K0(Ho)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:E2,useSyncExternalStore:b2,useId:L2,unstable_isNewReconciler:!1};function On(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Hh(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:St({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Su={isMounted:function(e){return(e=e._reactInternals)?ri(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Lr(),A=dA(e),a=Bs(n,A);a.payload=t,r!=null&&(a.callback=r),t=cA(e,a,A),t!==null&&(Pn(t,e,A,n),wc(t,e,A))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Lr(),A=dA(e),a=Bs(n,A);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=cA(e,a,A),t!==null&&(Pn(t,e,A,n),wc(t,e,A))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lr(),n=dA(e),A=Bs(r,n);A.tag=2,t!=null&&(A.callback=t),t=cA(e,A,n),t!==null&&(Pn(t,e,n,r),wc(t,e,n))}};function dg(e,t,r,n,A,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,u):t.prototype&&t.prototype.isPureReactComponent?!To(r,n)||!To(A,a):!0}function K2(e,t,r){var n=!1,A=wA,a=t.contextType;return typeof a=="object"&&a!==null?a=In(a):(A=en(t)?qA:Rr.current,n=t.contextTypes,a=(n=n!=null)?ra(e,A):wA),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Su,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=A,e.__reactInternalMemoizedMaskedChildContext=a),t}function hg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Su.enqueueReplaceState(t,t.state,null)}function Ph(e,t,r,n){var A=e.stateNode;A.props=r,A.state=e.memoizedState,A.refs={},B1(e);var a=t.contextType;typeof a=="object"&&a!==null?A.context=In(a):(a=en(t)?qA:Rr.current,A.context=ra(e,a)),A.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Hh(e,t,a,r),A.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(t=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),t!==A.state&&Su.enqueueReplaceState(A,A.state,null),zc(e,r,A,n),A.state=e.memoizedState),typeof A.componentDidMount=="function"&&(e.flags|=4194308)}function ia(e,t){try{var r="",n=t;do r+=QC(n),n=n.return;while(n);var A=r}catch(a){A=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:A,digest:null}}function V0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Kh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var A4=typeof WeakMap=="function"?WeakMap:Map;function V2(e,t,r){r=Bs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yc||(Yc=!0,Jh=n),Kh(e,t)},r}function G2(e,t,r){r=Bs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var A=t.value;r.payload=function(){return n(A)},r.callback=function(){Kh(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Kh(e,t),typeof n!="function"&&(uA===null?uA=new Set([this]):uA.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function fg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new A4;var A=new Set;n.set(t,A)}else A=n.get(t),A===void 0&&(A=new Set,n.set(t,A));A.has(r)||(A.add(r),e=w4.bind(null,e,t,r),t.then(e,e))}function xg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gg(e,t,r,n,A){return e.mode&1?(e.flags|=65536,e.lanes=A,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bs(-1,1),t.tag=2,cA(r,t,1))),r.lanes|=1),e)}var i4=Ss.ReactCurrentOwner,Zr=!1;function kr(e,t,r,n){t.child=e===null?y2(t,null,r,n):sa(t,e.child,r,n)}function pg(e,t,r,n,A){r=r.render;var a=t.ref;return $i(t,A),n=_1(e,t,r,n,a,A),r=N1(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,Ns(e,t,A)):(_t&&r&&f1(t),t.flags|=1,kr(e,t,n,A),t.child)}function mg(e,t,r,n,A){if(e===null){var a=r.type;return typeof a=="function"&&!O1(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,z2(e,t,a,n,A)):(e=bc(r.type,null,n,t,t.mode,A),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&A)){var u=a.memoizedProps;if(r=r.compare,r=r!==null?r:To,r(u,n)&&e.ref===t.ref)return Ns(e,t,A)}return t.flags|=1,e=hA(a,n),e.ref=t.ref,e.return=t,t.child=e}function z2(e,t,r,n,A){if(e!==null){var a=e.memoizedProps;if(To(a,n)&&e.ref===t.ref)if(Zr=!1,t.pendingProps=n=a,(e.lanes&A)!==0)e.flags&131072&&(Zr=!0);else return t.lanes=e.lanes,Ns(e,t,A)}return Vh(e,t,r,n,A)}function W2(e,t,r){var n=t.pendingProps,A=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Hi,on),on|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xt(Hi,on),on|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,xt(Hi,on),on|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,xt(Hi,on),on|=n;return kr(e,t,A,r),t.child}function X2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vh(e,t,r,n,A){var a=en(r)?qA:Rr.current;return a=ra(t,a),$i(t,A),r=_1(e,t,r,n,a,A),n=N1(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~A,Ns(e,t,A)):(_t&&n&&f1(t),t.flags|=1,kr(e,t,r,A),t.child)}function wg(e,t,r,n,A){if(en(r)){var a=!0;Hc(t)}else a=!1;if($i(t,A),t.stateNode===null)vc(e,t),K2(t,r,n),Ph(t,r,n,A),n=!0;else if(e===null){var u=t.stateNode,g=t.memoizedProps;u.props=g;var f=u.context,h=r.contextType;typeof h=="object"&&h!==null?h=In(h):(h=en(r)?qA:Rr.current,h=ra(t,h));var p=r.getDerivedStateFromProps,w=typeof p=="function"||typeof u.getSnapshotBeforeUpdate=="function";w||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==n||f!==h)&&hg(t,u,n,h),Ws=!1;var y=t.memoizedState;u.state=y,zc(t,n,u,A),f=t.memoizedState,g!==n||y!==f||Jr.current||Ws?(typeof p=="function"&&(Hh(t,r,p,n),f=t.memoizedState),(g=Ws||dg(t,r,g,n,y,f,h))?(w||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=f),u.props=n,u.state=f,u.context=h,n=g):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,v2(e,t),g=t.memoizedProps,h=t.type===t.elementType?g:On(t.type,g),u.props=h,w=t.pendingProps,y=u.context,f=r.contextType,typeof f=="object"&&f!==null?f=In(f):(f=en(r)?qA:Rr.current,f=ra(t,f));var C=r.getDerivedStateFromProps;(p=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==w||y!==f)&&hg(t,u,n,f),Ws=!1,y=t.memoizedState,u.state=y,zc(t,n,u,A);var b=t.memoizedState;g!==w||y!==b||Jr.current||Ws?(typeof C=="function"&&(Hh(t,r,C,n),b=t.memoizedState),(h=Ws||dg(t,r,h,n,y,b,f)||!1)?(p||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,b,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,b,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),u.props=n,u.state=b,u.context=f,n=h):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),n=!1)}return Gh(e,t,r,n,a,A)}function Gh(e,t,r,n,A,a){X2(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return A&&sg(t,r,!1),Ns(e,t,a);n=t.stateNode,i4.current=t;var g=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=sa(t,e.child,null,a),t.child=sa(t,null,g,a)):kr(e,t,g,a),t.memoizedState=n.state,A&&sg(t,r,!0),t.child}function q2(e){var t=e.stateNode;t.pendingContext?ng(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ng(e,t.context,!1),v1(e,t.containerInfo)}function yg(e,t,r,n,A){return na(),g1(A),t.flags|=256,kr(e,t,r,n),t.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Wh(e){return{baseLanes:e,cachePool:null,transitions:null}}function $2(e,t,r){var n=t.pendingProps,A=Ft.current,a=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(A&2)!==0),g?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(A|=1),xt(Ft,A&1),e===null)return Lh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,a?(n=t.mode,a=t.child,u={mode:"hidden",children:u},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Du(u,n,0,null),e=zA(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Wh(r),t.memoizedState=zh,e):S1(t,u));if(A=e.memoizedState,A!==null&&(g=A.dehydrated,g!==null))return a4(e,t,u,n,g,A,r);if(a){a=n.fallback,u=t.mode,A=e.child,g=A.sibling;var f={mode:"hidden",children:n.children};return!(u&1)&&t.child!==A?(n=t.child,n.childLanes=0,n.pendingProps=f,t.deletions=null):(n=hA(A,f),n.subtreeFlags=A.subtreeFlags&14680064),g!==null?a=hA(g,a):(a=zA(a,u,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,u=e.child.memoizedState,u=u===null?Wh(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~r,t.memoizedState=zh,n}return a=e.child,e=a.sibling,n=hA(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function S1(e,t){return t=Du({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jl(e,t,r,n){return n!==null&&g1(n),sa(t,e.child,null,r),e=S1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a4(e,t,r,n,A,a,u){if(r)return t.flags&256?(t.flags&=-257,n=V0(Error(me(422))),jl(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,A=t.mode,n=Du({mode:"visible",children:n.children},A,0,null),a=zA(a,A,u,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&sa(t,e.child,null,u),t.child.memoizedState=Wh(u),t.memoizedState=zh,a);if(!(t.mode&1))return jl(e,t,u,null);if(A.data==="$!"){if(n=A.nextSibling&&A.nextSibling.dataset,n)var g=n.dgst;return n=g,a=Error(me(419)),n=V0(a,n,void 0),jl(e,t,u,n)}if(g=(u&e.childLanes)!==0,Zr||g){if(n=dr,n!==null){switch(u&-u){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(n.suspendedLanes|u)?0:A,A!==0&&A!==a.retryLane&&(a.retryLane=A,_s(e,A),Pn(n,e,A,-1))}return j1(),n=V0(Error(me(421))),jl(e,t,u,n)}return A.data==="$?"?(t.flags|=128,t.child=e.child,t=y4.bind(null,e),A._reactRetry=t,null):(e=a.treeContext,ln=lA(A.nextSibling),cn=t,_t=!0,Mn=null,e!==null&&(Bn[vn++]=ws,Bn[vn++]=ys,Bn[vn++]=$A,ws=e.id,ys=e.overflow,$A=t),t=S1(t,n.children),t.flags|=4096,t)}function Bg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Mh(e.return,t,r)}function G0(e,t,r,n,A){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:A}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=A)}function Y2(e,t,r){var n=t.pendingProps,A=n.revealOrder,a=n.tail;if(kr(e,t,n.children,r),n=Ft.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bg(e,r,t);else if(e.tag===19)Bg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(xt(Ft,n),!(t.mode&1))t.memoizedState=null;else switch(A){case"forwards":for(r=t.child,A=null;r!==null;)e=r.alternate,e!==null&&Wc(e)===null&&(A=r),r=r.sibling;r=A,r===null?(A=t.child,t.child=null):(A=r.sibling,r.sibling=null),G0(t,!1,A,r,a);break;case"backwards":for(r=null,A=t.child,t.child=null;A!==null;){if(e=A.alternate,e!==null&&Wc(e)===null){t.child=A;break}e=A.sibling,A.sibling=r,r=A,A=e}G0(t,!0,r,null,a);break;case"together":G0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ns(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ZA|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,r=hA(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hA(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function o4(e,t,r){switch(t.tag){case 3:q2(t),na();break;case 5:C2(t);break;case 1:en(t.type)&&Hc(t);break;case 4:v1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,A=t.memoizedProps.value;xt(Vc,n._currentValue),n._currentValue=A;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(xt(Ft,Ft.current&1),t.flags|=128,null):r&t.child.childLanes?$2(e,t,r):(xt(Ft,Ft.current&1),e=Ns(e,t,r),e!==null?e.sibling:null);xt(Ft,Ft.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Y2(e,t,r);t.flags|=128}if(A=t.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xt(Ft,Ft.current),n)break;return null;case 22:case 23:return t.lanes=0,W2(e,t,r)}return Ns(e,t,r)}var Z2,Xh,J2,ey;Z2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xh=function(){};J2=function(e,t,r,n){var A=e.memoizedProps;if(A!==n){e=t.stateNode,KA(as.current);var a=null;switch(r){case"input":A=gh(e,A),n=gh(e,n),a=[];break;case"select":A=St({},A,{value:void 0}),n=St({},n,{value:void 0}),a=[];break;case"textarea":A=wh(e,A),n=wh(e,n),a=[];break;default:typeof A.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lc)}Bh(r,n);var u;r=null;for(h in A)if(!n.hasOwnProperty(h)&&A.hasOwnProperty(h)&&A[h]!=null)if(h==="style"){var g=A[h];for(u in g)g.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(No.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var f=n[h];if(g=A!=null?A[h]:void 0,n.hasOwnProperty(h)&&f!==g&&(f!=null||g!=null))if(h==="style")if(g){for(u in g)!g.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in f)f.hasOwnProperty(u)&&g[u]!==f[u]&&(r||(r={}),r[u]=f[u])}else r||(a||(a=[]),a.push(h,r)),r=f;else h==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,g=g?g.__html:void 0,f!=null&&g!==f&&(a=a||[]).push(h,f)):h==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(h,""+f):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(No.hasOwnProperty(h)?(f!=null&&h==="onScroll"&&mt("scroll",e),a||g===f||(a=[])):(a=a||[]).push(h,f))}r&&(a=a||[]).push("style",r);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};ey=function(e,t,r,n){r!==n&&(t.flags|=4)};function La(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var A=e.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags&14680064,n|=A.flags&14680064,A.return=e,A=A.sibling;else for(A=e.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags,n|=A.flags,A.return=e,A=A.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function l4(e,t,r){var n=t.pendingProps;switch(x1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return en(t.type)&&Mc(),Sr(t),null;case 3:return n=t.stateNode,Aa(),Bt(Jr),Bt(Rr),E1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mn!==null&&(rf(Mn),Mn=null))),Xh(e,t),Sr(t),null;case 5:C1(t);var A=KA(Lo.current);if(r=t.type,e!==null&&t.stateNode!=null)J2(e,t,r,n,A),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(me(166));return Sr(t),null}if(e=KA(as.current),Tl(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[As]=t,n[Oo]=a,e=(t.mode&1)!==0,r){case"dialog":mt("cancel",n),mt("close",n);break;case"iframe":case"object":case"embed":mt("load",n);break;case"video":case"audio":for(A=0;A<$a.length;A++)mt($a[A],n);break;case"source":mt("error",n);break;case"img":case"image":case"link":mt("error",n),mt("load",n);break;case"details":mt("toggle",n);break;case"input":Sx(n,a),mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},mt("invalid",n);break;case"textarea":Qx(n,a),mt("invalid",n)}Bh(r,a),A=null;for(var u in a)if(a.hasOwnProperty(u)){var g=a[u];u==="children"?typeof g=="string"?n.textContent!==g&&(a.suppressHydrationWarning!==!0&&Dl(n.textContent,g,e),A=["children",g]):typeof g=="number"&&n.textContent!==""+g&&(a.suppressHydrationWarning!==!0&&Dl(n.textContent,g,e),A=["children",""+g]):No.hasOwnProperty(u)&&g!=null&&u==="onScroll"&&mt("scroll",n)}switch(r){case"input":bl(n),Ux(n,a,!0);break;case"textarea":bl(n),Dx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Lc)}n=A,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=A.nodeType===9?A:A.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[As]=t,e[Oo]=n,Z2(e,t,!1,!1),t.stateNode=e;e:{switch(u=vh(r,n),r){case"dialog":mt("cancel",e),mt("close",e),A=n;break;case"iframe":case"object":case"embed":mt("load",e),A=n;break;case"video":case"audio":for(A=0;A<$a.length;A++)mt($a[A],e);A=n;break;case"source":mt("error",e),A=n;break;case"img":case"image":case"link":mt("error",e),mt("load",e),A=n;break;case"details":mt("toggle",e),A=n;break;case"input":Sx(e,n),A=gh(e,n),mt("invalid",e);break;case"option":A=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},A=St({},n,{value:void 0}),mt("invalid",e);break;case"textarea":Qx(e,n),A=wh(e,n),mt("invalid",e);break;default:A=n}Bh(r,A),g=A;for(a in g)if(g.hasOwnProperty(a)){var f=g[a];a==="style"?Uw(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Iw(e,f)):a==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&Fo(e,f):typeof f=="number"&&Fo(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(No.hasOwnProperty(a)?f!=null&&a==="onScroll"&&mt("scroll",e):f!=null&&e1(e,a,f,u))}switch(r){case"input":bl(e),Ux(e,n,!1);break;case"textarea":bl(e),Dx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+mA(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?zi(e,!!n.multiple,a,!1):n.defaultValue!=null&&zi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof A.onClick=="function"&&(e.onclick=Lc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)ey(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(me(166));if(r=KA(Lo.current),KA(as.current),Tl(t)){if(n=t.stateNode,r=t.memoizedProps,n[As]=t,(a=n.nodeValue!==r)&&(e=cn,e!==null))switch(e.tag){case 3:Dl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Dl(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[As]=t,t.stateNode=n}return Sr(t),null;case 13:if(Bt(Ft),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&ln!==null&&t.mode&1&&!(t.flags&128))m2(),na(),t.flags|=98560,a=!1;else if(a=Tl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(me(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(me(317));a[As]=t}else na(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),a=!1}else Mn!==null&&(rf(Mn),Mn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ft.current&1?tr===0&&(tr=3):j1())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return Aa(),Xh(e,t),e===null&&Ro(t.stateNode.containerInfo),Sr(t),null;case 10:return w1(t.type._context),Sr(t),null;case 17:return en(t.type)&&Mc(),Sr(t),null;case 19:if(Bt(Ft),a=t.memoizedState,a===null)return Sr(t),null;if(n=(t.flags&128)!==0,u=a.rendering,u===null)if(n)La(a,!1);else{if(tr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Wc(e),u!==null){for(t.flags|=128,La(a,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return xt(Ft,Ft.current&1|2),t.child}e=e.sibling}a.tail!==null&&Vt()>aa&&(t.flags|=128,n=!0,La(a,!1),t.lanes=4194304)}else{if(!n)if(e=Wc(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),La(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!_t)return Sr(t),null}else 2*Vt()-a.renderingStartTime>aa&&r!==1073741824&&(t.flags|=128,n=!0,La(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(r=a.last,r!==null?r.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Vt(),t.sibling=null,r=Ft.current,xt(Ft,n?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return R1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?on&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function c4(e,t){switch(x1(t),t.tag){case 1:return en(t.type)&&Mc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Aa(),Bt(Jr),Bt(Rr),E1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return C1(t),null;case 13:if(Bt(Ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));na()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Bt(Ft),null;case 4:return Aa(),null;case 10:return w1(t.type._context),null;case 22:case 23:return R1(),null;case 24:return null;default:return null}}var Ol=!1,Dr=!1,u4=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Mi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ot(e,t,n)}else r.current=null}function qh(e,t,r){try{r()}catch(n){Ot(e,t,n)}}var vg=!1;function d4(e,t){if(Qh=jc,e=A2(),h1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var A=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var u=0,g=-1,f=-1,h=0,p=0,w=e,y=null;t:for(;;){for(var C;w!==r||A!==0&&w.nodeType!==3||(g=u+A),w!==a||n!==0&&w.nodeType!==3||(f=u+n),w.nodeType===3&&(u+=w.nodeValue.length),(C=w.firstChild)!==null;)y=w,w=C;for(;;){if(w===e)break t;if(y===r&&++h===A&&(g=u),y===a&&++p===n&&(f=u),(C=w.nextSibling)!==null)break;w=y,y=w.parentNode}w=C}r=g===-1||f===-1?null:{start:g,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(Dh={focusedElem:e,selectionRange:r},jc=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var F=b.memoizedProps,I=b.memoizedState,N=t.stateNode,v=N.getSnapshotBeforeUpdate(t.elementType===t.type?F:On(t.type,F),I);N.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(S){Ot(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return b=vg,vg=!1,b}function ho(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var A=n=n.next;do{if((A.tag&e)===e){var a=A.destroy;A.destroy=void 0,a!==void 0&&qh(t,r,a)}A=A.next}while(A!==n)}}function Uu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function $h(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ty(e){var t=e.alternate;t!==null&&(e.alternate=null,ty(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[As],delete t[Oo],delete t[jh],delete t[XE],delete t[qE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ry(e){return e.tag===5||e.tag===3||e.tag===4}function Cg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ry(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lc));else if(n!==4&&(e=e.child,e!==null))for(Yh(e,t,r),e=e.sibling;e!==null;)Yh(e,t,r),e=e.sibling}function Zh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Zh(e,t,r),e=e.sibling;e!==null;)Zh(e,t,r),e=e.sibling}var Br=null,kn=!1;function Hs(e,t,r){for(r=r.child;r!==null;)ny(e,t,r),r=r.sibling}function ny(e,t,r){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Cu,r)}catch{}switch(r.tag){case 5:Dr||Mi(r,t);case 6:var n=Br,A=kn;Br=null,Hs(e,t,r),Br=n,kn=A,Br!==null&&(kn?(e=Br,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Br.removeChild(r.stateNode));break;case 18:Br!==null&&(kn?(e=Br,r=r.stateNode,e.nodeType===8?k0(e.parentNode,r):e.nodeType===1&&k0(e,r),Qo(e)):k0(Br,r.stateNode));break;case 4:n=Br,A=kn,Br=r.stateNode.containerInfo,kn=!0,Hs(e,t,r),Br=n,kn=A;break;case 0:case 11:case 14:case 15:if(!Dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){A=n=n.next;do{var a=A,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&qh(r,t,u),A=A.next}while(A!==n)}Hs(e,t,r);break;case 1:if(!Dr&&(Mi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(g){Ot(r,t,g)}Hs(e,t,r);break;case 21:Hs(e,t,r);break;case 22:r.mode&1?(Dr=(n=Dr)||r.memoizedState!==null,Hs(e,t,r),Dr=n):Hs(e,t,r);break;default:Hs(e,t,r)}}function Eg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new u4),t.forEach(function(n){var A=B4.bind(null,e,n);r.has(n)||(r.add(n),n.then(A,A))})}}function Tn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var A=r[n];try{var a=e,u=t,g=u;e:for(;g!==null;){switch(g.tag){case 5:Br=g.stateNode,kn=!1;break e;case 3:Br=g.stateNode.containerInfo,kn=!0;break e;case 4:Br=g.stateNode.containerInfo,kn=!0;break e}g=g.return}if(Br===null)throw Error(me(160));ny(a,u,A),Br=null,kn=!1;var f=A.alternate;f!==null&&(f.return=null),A.return=null}catch(h){Ot(A,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sy(t,e),t=t.sibling}function sy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tn(t,e),ts(e),n&4){try{ho(3,e,e.return),Uu(3,e)}catch(F){Ot(e,e.return,F)}try{ho(5,e,e.return)}catch(F){Ot(e,e.return,F)}}break;case 1:Tn(t,e),ts(e),n&512&&r!==null&&Mi(r,r.return);break;case 5:if(Tn(t,e),ts(e),n&512&&r!==null&&Mi(r,r.return),e.flags&32){var A=e.stateNode;try{Fo(A,"")}catch(F){Ot(e,e.return,F)}}if(n&4&&(A=e.stateNode,A!=null)){var a=e.memoizedProps,u=r!==null?r.memoizedProps:a,g=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{g==="input"&&a.type==="radio"&&a.name!=null&&_w(A,a),vh(g,u);var h=vh(g,a);for(u=0;u<f.length;u+=2){var p=f[u],w=f[u+1];p==="style"?Uw(A,w):p==="dangerouslySetInnerHTML"?Iw(A,w):p==="children"?Fo(A,w):e1(A,p,w,h)}switch(g){case"input":ph(A,a);break;case"textarea":Nw(A,a);break;case"select":var y=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?zi(A,!!a.multiple,C,!1):y!==!!a.multiple&&(a.defaultValue!=null?zi(A,!!a.multiple,a.defaultValue,!0):zi(A,!!a.multiple,a.multiple?[]:"",!1))}A[Oo]=a}catch(F){Ot(e,e.return,F)}}break;case 6:if(Tn(t,e),ts(e),n&4){if(e.stateNode===null)throw Error(me(162));A=e.stateNode,a=e.memoizedProps;try{A.nodeValue=a}catch(F){Ot(e,e.return,F)}}break;case 3:if(Tn(t,e),ts(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qo(t.containerInfo)}catch(F){Ot(e,e.return,F)}break;case 4:Tn(t,e),ts(e);break;case 13:Tn(t,e),ts(e),A=e.child,A.flags&8192&&(a=A.memoizedState!==null,A.stateNode.isHidden=a,!a||A.alternate!==null&&A.alternate.memoizedState!==null||(D1=Vt())),n&4&&Eg(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Dr=(h=Dr)||p,Tn(t,e),Dr=h):Tn(t,e),ts(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(Ie=e,p=e.child;p!==null;){for(w=Ie=p;Ie!==null;){switch(y=Ie,C=y.child,y.tag){case 0:case 11:case 14:case 15:ho(4,y,y.return);break;case 1:Mi(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){n=y,r=y.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(F){Ot(n,r,F)}}break;case 5:Mi(y,y.return);break;case 22:if(y.memoizedState!==null){_g(w);continue}}C!==null?(C.return=y,Ie=C):_g(w)}p=p.sibling}e:for(p=null,w=e;;){if(w.tag===5){if(p===null){p=w;try{A=w.stateNode,h?(a=A.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(g=w.stateNode,f=w.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,g.style.display=Sw("display",u))}catch(F){Ot(e,e.return,F)}}}else if(w.tag===6){if(p===null)try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(F){Ot(e,e.return,F)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;p===w&&(p=null),w=w.return}p===w&&(p=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Tn(t,e),ts(e),n&4&&Eg(e);break;case 21:break;default:Tn(t,e),ts(e)}}function ts(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ry(r)){var n=r;break e}r=r.return}throw Error(me(160))}switch(n.tag){case 5:var A=n.stateNode;n.flags&32&&(Fo(A,""),n.flags&=-33);var a=Cg(e);Zh(e,a,A);break;case 3:case 4:var u=n.stateNode.containerInfo,g=Cg(e);Yh(e,g,u);break;default:throw Error(me(161))}}catch(f){Ot(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function h4(e,t,r){Ie=e,Ay(e)}function Ay(e,t,r){for(var n=(e.mode&1)!==0;Ie!==null;){var A=Ie,a=A.child;if(A.tag===22&&n){var u=A.memoizedState!==null||Ol;if(!u){var g=A.alternate,f=g!==null&&g.memoizedState!==null||Dr;g=Ol;var h=Dr;if(Ol=u,(Dr=f)&&!h)for(Ie=A;Ie!==null;)u=Ie,f=u.child,u.tag===22&&u.memoizedState!==null?Ng(A):f!==null?(f.return=u,Ie=f):Ng(A);for(;a!==null;)Ie=a,Ay(a),a=a.sibling;Ie=A,Ol=g,Dr=h}bg(e)}else A.subtreeFlags&8772&&a!==null?(a.return=A,Ie=a):bg(e)}}function bg(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dr||Uu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Dr)if(r===null)n.componentDidMount();else{var A=t.elementType===t.type?r.memoizedProps:On(t.type,r.memoizedProps);n.componentDidUpdate(A,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&lg(t,a,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lg(t,u,r)}break;case 5:var g=t.stateNode;if(r===null&&t.flags&4){r=g;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var w=p.dehydrated;w!==null&&Qo(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Dr||t.flags&512&&$h(t)}catch(y){Ot(t,t.return,y)}}if(t===e){Ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function _g(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function Ng(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Uu(4,t)}catch(f){Ot(t,r,f)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var A=t.return;try{n.componentDidMount()}catch(f){Ot(t,A,f)}}var a=t.return;try{$h(t)}catch(f){Ot(t,a,f)}break;case 5:var u=t.return;try{$h(t)}catch(f){Ot(t,u,f)}}}catch(f){Ot(t,t.return,f)}if(t===e){Ie=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ie=g;break}Ie=t.return}}var f4=Math.ceil,$c=Ss.ReactCurrentDispatcher,U1=Ss.ReactCurrentOwner,Fn=Ss.ReactCurrentBatchConfig,tt=0,dr=null,Wt=null,br=0,on=0,Hi=CA(0),tr=0,Ko=null,ZA=0,Qu=0,Q1=0,fo=null,$r=null,D1=0,aa=1/0,fs=null,Yc=!1,Jh=null,uA=null,kl=!1,tA=null,Zc=0,xo=0,ef=null,Cc=-1,Ec=0;function Lr(){return tt&6?Vt():Cc!==-1?Cc:Cc=Vt()}function dA(e){return e.mode&1?tt&2&&br!==0?br&-br:YE.transition!==null?(Ec===0&&(Ec=Kw()),Ec):(e=it,e!==0||(e=window.event,e=e===void 0?16:$w(e.type)),e):1}function Pn(e,t,r,n){if(50<xo)throw xo=0,ef=null,Error(me(185));el(e,r,n),(!(tt&2)||e!==dr)&&(e===dr&&(!(tt&2)&&(Qu|=r),tr===4&&Ys(e,br)),tn(e,n),r===1&&tt===0&&!(t.mode&1)&&(aa=Vt()+500,Fu&&EA()))}function tn(e,t){var r=e.callbackNode;YC(e,t);var n=Rc(e,e===dr?br:0);if(n===0)r!==null&&jx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jx(r),t===1)e.tag===0?$E(Fg.bind(null,e)):x2(Fg.bind(null,e)),zE(function(){!(tt&6)&&EA()}),r=null;else{switch(Vw(n)){case 1:r=A1;break;case 4:r=Hw;break;case 16:r=Tc;break;case 536870912:r=Pw;break;default:r=Tc}r=hy(r,iy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function iy(e,t){if(Cc=-1,Ec=0,tt&6)throw Error(me(327));var r=e.callbackNode;if(Yi()&&e.callbackNode!==r)return null;var n=Rc(e,e===dr?br:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jc(e,n);else{t=n;var A=tt;tt|=2;var a=oy();(dr!==e||br!==t)&&(fs=null,aa=Vt()+500,GA(e,t));do try{p4();break}catch(g){ay(e,g)}while(!0);m1(),$c.current=a,tt=A,Wt!==null?t=0:(dr=null,br=0,t=tr)}if(t!==0){if(t===2&&(A=Nh(e),A!==0&&(n=A,t=tf(e,A))),t===1)throw r=Ko,GA(e,0),Ys(e,n),tn(e,Vt()),r;if(t===6)Ys(e,n);else{if(A=e.current.alternate,!(n&30)&&!x4(A)&&(t=Jc(e,n),t===2&&(a=Nh(e),a!==0&&(n=a,t=tf(e,a))),t===1))throw r=Ko,GA(e,0),Ys(e,n),tn(e,Vt()),r;switch(e.finishedWork=A,e.finishedLanes=n,t){case 0:case 1:throw Error(me(345));case 2:jA(e,$r,fs);break;case 3:if(Ys(e,n),(n&130023424)===n&&(t=D1+500-Vt(),10<t)){if(Rc(e,0)!==0)break;if(A=e.suspendedLanes,(A&n)!==n){Lr(),e.pingedLanes|=e.suspendedLanes&A;break}e.timeoutHandle=Rh(jA.bind(null,e,$r,fs),t);break}jA(e,$r,fs);break;case 4:if(Ys(e,n),(n&4194240)===n)break;for(t=e.eventTimes,A=-1;0<n;){var u=31-Hn(n);a=1<<u,u=t[u],u>A&&(A=u),n&=~a}if(n=A,n=Vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*f4(n/1960))-n,10<n){e.timeoutHandle=Rh(jA.bind(null,e,$r,fs),n);break}jA(e,$r,fs);break;case 5:jA(e,$r,fs);break;default:throw Error(me(329))}}}return tn(e,Vt()),e.callbackNode===r?iy.bind(null,e):null}function tf(e,t){var r=fo;return e.current.memoizedState.isDehydrated&&(GA(e,t).flags|=256),e=Jc(e,t),e!==2&&(t=$r,$r=r,t!==null&&rf(t)),e}function rf(e){$r===null?$r=e:$r.push.apply($r,e)}function x4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var A=r[n],a=A.getSnapshot;A=A.value;try{if(!Kn(a(),A))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ys(e,t){for(t&=~Q1,t&=~Qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Hn(t),n=1<<r;e[r]=-1,t&=~n}}function Fg(e){if(tt&6)throw Error(me(327));Yi();var t=Rc(e,0);if(!(t&1))return tn(e,Vt()),null;var r=Jc(e,t);if(e.tag!==0&&r===2){var n=Nh(e);n!==0&&(t=n,r=tf(e,n))}if(r===1)throw r=Ko,GA(e,0),Ys(e,t),tn(e,Vt()),r;if(r===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jA(e,$r,fs),tn(e,Vt()),null}function T1(e,t){var r=tt;tt|=1;try{return e(t)}finally{tt=r,tt===0&&(aa=Vt()+500,Fu&&EA())}}function JA(e){tA!==null&&tA.tag===0&&!(tt&6)&&Yi();var t=tt;tt|=1;var r=Fn.transition,n=it;try{if(Fn.transition=null,it=1,e)return e()}finally{it=n,Fn.transition=r,tt=t,!(tt&6)&&EA()}}function R1(){on=Hi.current,Bt(Hi)}function GA(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,GE(r)),Wt!==null)for(r=Wt.return;r!==null;){var n=r;switch(x1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Mc();break;case 3:Aa(),Bt(Jr),Bt(Rr),E1();break;case 5:C1(n);break;case 4:Aa();break;case 13:Bt(Ft);break;case 19:Bt(Ft);break;case 10:w1(n.type._context);break;case 22:case 23:R1()}r=r.return}if(dr=e,Wt=e=hA(e.current,null),br=on=t,tr=0,Ko=null,Q1=Qu=ZA=0,$r=fo=null,PA!==null){for(t=0;t<PA.length;t++)if(r=PA[t],n=r.interleaved,n!==null){r.interleaved=null;var A=n.next,a=r.pending;if(a!==null){var u=a.next;a.next=A,n.next=u}r.pending=n}PA=null}return e}function ay(e,t){do{var r=Wt;try{if(m1(),yc.current=qc,Xc){for(var n=It.memoizedState;n!==null;){var A=n.queue;A!==null&&(A.pending=null),n=n.next}Xc=!1}if(YA=0,cr=Zt=It=null,uo=!1,Mo=0,U1.current=null,r===null||r.return===null){tr=1,Ko=t,Wt=null;break}e:{var a=e,u=r.return,g=r,f=t;if(t=br,g.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var h=f,p=g,w=p.tag;if(!(p.mode&1)&&(w===0||w===11||w===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=xg(u);if(C!==null){C.flags&=-257,gg(C,u,g,a,t),C.mode&1&&fg(a,h,t),t=C,f=h;var b=t.updateQueue;if(b===null){var F=new Set;F.add(f),t.updateQueue=F}else b.add(f);break e}else{if(!(t&1)){fg(a,h,t),j1();break e}f=Error(me(426))}}else if(_t&&g.mode&1){var I=xg(u);if(I!==null){!(I.flags&65536)&&(I.flags|=256),gg(I,u,g,a,t),g1(ia(f,g));break e}}a=f=ia(f,g),tr!==4&&(tr=2),fo===null?fo=[a]:fo.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var N=V2(a,f,t);og(a,N);break e;case 1:g=f;var v=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(uA===null||!uA.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=G2(a,g,t);og(a,S);break e}}a=a.return}while(a!==null)}cy(r)}catch(j){t=j,Wt===r&&r!==null&&(Wt=r=r.return);continue}break}while(!0)}function oy(){var e=$c.current;return $c.current=qc,e===null?qc:e}function j1(){(tr===0||tr===3||tr===2)&&(tr=4),dr===null||!(ZA&268435455)&&!(Qu&268435455)||Ys(dr,br)}function Jc(e,t){var r=tt;tt|=2;var n=oy();(dr!==e||br!==t)&&(fs=null,GA(e,t));do try{g4();break}catch(A){ay(e,A)}while(!0);if(m1(),tt=r,$c.current=n,Wt!==null)throw Error(me(261));return dr=null,br=0,tr}function g4(){for(;Wt!==null;)ly(Wt)}function p4(){for(;Wt!==null&&!PC();)ly(Wt)}function ly(e){var t=dy(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?cy(e):Wt=t,U1.current=null}function cy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=c4(r,t),r!==null){r.flags&=32767,Wt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tr=6,Wt=null;return}}else if(r=l4(r,t,on),r!==null){Wt=r;return}if(t=t.sibling,t!==null){Wt=t;return}Wt=t=e}while(t!==null);tr===0&&(tr=5)}function jA(e,t,r){var n=it,A=Fn.transition;try{Fn.transition=null,it=1,m4(e,t,r,n)}finally{Fn.transition=A,it=n}return null}function m4(e,t,r,n){do Yi();while(tA!==null);if(tt&6)throw Error(me(327));r=e.finishedWork;var A=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ZC(e,a),e===dr&&(Wt=dr=null,br=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kl||(kl=!0,hy(Tc,function(){return Yi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Fn.transition,Fn.transition=null;var u=it;it=1;var g=tt;tt|=4,U1.current=null,d4(e,r),sy(r,e),kE(Dh),jc=!!Qh,Dh=Qh=null,e.current=r,h4(r),KC(),tt=g,it=u,Fn.transition=a}else e.current=r;if(kl&&(kl=!1,tA=e,Zc=A),a=e.pendingLanes,a===0&&(uA=null),zC(r.stateNode),tn(e,Vt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)A=t[r],n(A.value,{componentStack:A.stack,digest:A.digest});if(Yc)throw Yc=!1,e=Jh,Jh=null,e;return Zc&1&&e.tag!==0&&Yi(),a=e.pendingLanes,a&1?e===ef?xo++:(xo=0,ef=e):xo=0,EA(),null}function Yi(){if(tA!==null){var e=Vw(Zc),t=Fn.transition,r=it;try{if(Fn.transition=null,it=16>e?16:e,tA===null)var n=!1;else{if(e=tA,tA=null,Zc=0,tt&6)throw Error(me(331));var A=tt;for(tt|=4,Ie=e.current;Ie!==null;){var a=Ie,u=a.child;if(Ie.flags&16){var g=a.deletions;if(g!==null){for(var f=0;f<g.length;f++){var h=g[f];for(Ie=h;Ie!==null;){var p=Ie;switch(p.tag){case 0:case 11:case 15:ho(8,p,a)}var w=p.child;if(w!==null)w.return=p,Ie=w;else for(;Ie!==null;){p=Ie;var y=p.sibling,C=p.return;if(ty(p),p===h){Ie=null;break}if(y!==null){y.return=C,Ie=y;break}Ie=C}}}var b=a.alternate;if(b!==null){var F=b.child;if(F!==null){b.child=null;do{var I=F.sibling;F.sibling=null,F=I}while(F!==null)}}Ie=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,Ie=u;else e:for(;Ie!==null;){if(a=Ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ho(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,Ie=N;break e}Ie=a.return}}var v=e.current;for(Ie=v;Ie!==null;){u=Ie;var _=u.child;if(u.subtreeFlags&2064&&_!==null)_.return=u,Ie=_;else e:for(u=v;Ie!==null;){if(g=Ie,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Uu(9,g)}}catch(j){Ot(g,g.return,j)}if(g===u){Ie=null;break e}var S=g.sibling;if(S!==null){S.return=g.return,Ie=S;break e}Ie=g.return}}if(tt=A,EA(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Cu,e)}catch{}n=!0}return n}finally{it=r,Fn.transition=t}}return!1}function Ig(e,t,r){t=ia(r,t),t=V2(e,t,1),e=cA(e,t,1),t=Lr(),e!==null&&(el(e,1,t),tn(e,t))}function Ot(e,t,r){if(e.tag===3)Ig(e,e,r);else for(;t!==null;){if(t.tag===3){Ig(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(uA===null||!uA.has(n))){e=ia(r,e),e=G2(t,e,1),t=cA(t,e,1),e=Lr(),t!==null&&(el(t,1,e),tn(t,e));break}}t=t.return}}function w4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Lr(),e.pingedLanes|=e.suspendedLanes&r,dr===e&&(br&r)===r&&(tr===4||tr===3&&(br&130023424)===br&&500>Vt()-D1?GA(e,0):Q1|=r),tn(e,t)}function uy(e,t){t===0&&(e.mode&1?(t=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):t=1);var r=Lr();e=_s(e,t),e!==null&&(el(e,t,r),tn(e,r))}function y4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),uy(e,r)}function B4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,A=e.memoizedState;A!==null&&(r=A.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(me(314))}n!==null&&n.delete(t),uy(e,r)}var dy;dy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jr.current)Zr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zr=!1,o4(e,t,r);Zr=!!(e.flags&131072)}else Zr=!1,_t&&t.flags&1048576&&g2(t,Kc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;vc(e,t),e=t.pendingProps;var A=ra(t,Rr.current);$i(t,r),A=_1(null,t,n,e,A,r);var a=N1();return t.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,en(n)?(a=!0,Hc(t)):a=!1,t.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,B1(t),A.updater=Su,t.stateNode=A,A._reactInternals=t,Ph(t,n,e,r),t=Gh(null,t,n,!0,a,r)):(t.tag=0,_t&&a&&f1(t),kr(null,t,A,r),t=t.child),t;case 16:n=t.elementType;e:{switch(vc(e,t),e=t.pendingProps,A=n._init,n=A(n._payload),t.type=n,A=t.tag=C4(n),e=On(n,e),A){case 0:t=Vh(null,t,n,e,r);break e;case 1:t=wg(null,t,n,e,r);break e;case 11:t=pg(null,t,n,e,r);break e;case 14:t=mg(null,t,n,On(n.type,e),r);break e}throw Error(me(306,n,""))}return t;case 0:return n=t.type,A=t.pendingProps,A=t.elementType===n?A:On(n,A),Vh(e,t,n,A,r);case 1:return n=t.type,A=t.pendingProps,A=t.elementType===n?A:On(n,A),wg(e,t,n,A,r);case 3:e:{if(q2(t),e===null)throw Error(me(387));n=t.pendingProps,a=t.memoizedState,A=a.element,v2(e,t),zc(t,n,null,r);var u=t.memoizedState;if(n=u.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){A=ia(Error(me(423)),t),t=yg(e,t,n,r,A);break e}else if(n!==A){A=ia(Error(me(424)),t),t=yg(e,t,n,r,A);break e}else for(ln=lA(t.stateNode.containerInfo.firstChild),cn=t,_t=!0,Mn=null,r=y2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(na(),n===A){t=Ns(e,t,r);break e}kr(e,t,n,r)}t=t.child}return t;case 5:return C2(t),e===null&&Lh(t),n=t.type,A=t.pendingProps,a=e!==null?e.memoizedProps:null,u=A.children,Th(n,A)?u=null:a!==null&&Th(n,a)&&(t.flags|=32),X2(e,t),kr(e,t,u,r),t.child;case 6:return e===null&&Lh(t),null;case 13:return $2(e,t,r);case 4:return v1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sa(t,null,n,r):kr(e,t,n,r),t.child;case 11:return n=t.type,A=t.pendingProps,A=t.elementType===n?A:On(n,A),pg(e,t,n,A,r);case 7:return kr(e,t,t.pendingProps,r),t.child;case 8:return kr(e,t,t.pendingProps.children,r),t.child;case 12:return kr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,A=t.pendingProps,a=t.memoizedProps,u=A.value,xt(Vc,n._currentValue),n._currentValue=u,a!==null)if(Kn(a.value,u)){if(a.children===A.children&&!Jr.current){t=Ns(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var g=a.dependencies;if(g!==null){u=a.child;for(var f=g.firstContext;f!==null;){if(f.context===n){if(a.tag===1){f=Bs(-1,r&-r),f.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?f.next=f:(f.next=p.next,p.next=f),h.pending=f}}a.lanes|=r,f=a.alternate,f!==null&&(f.lanes|=r),Mh(a.return,r,t),g.lanes|=r;break}f=f.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(me(341));u.lanes|=r,g=u.alternate,g!==null&&(g.lanes|=r),Mh(u,r,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}kr(e,t,A.children,r),t=t.child}return t;case 9:return A=t.type,n=t.pendingProps.children,$i(t,r),A=In(A),n=n(A),t.flags|=1,kr(e,t,n,r),t.child;case 14:return n=t.type,A=On(n,t.pendingProps),A=On(n.type,A),mg(e,t,n,A,r);case 15:return z2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,A=t.pendingProps,A=t.elementType===n?A:On(n,A),vc(e,t),t.tag=1,en(n)?(e=!0,Hc(t)):e=!1,$i(t,r),K2(t,n,A),Ph(t,n,A,r),Gh(null,t,n,!0,e,r);case 19:return Y2(e,t,r);case 22:return W2(e,t,r)}throw Error(me(156,t.tag))};function hy(e,t){return Mw(e,t)}function v4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,r,n){return new v4(e,t,r,n)}function O1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function C4(e){if(typeof e=="function")return O1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===r1)return 11;if(e===n1)return 14}return 2}function hA(e,t){var r=e.alternate;return r===null?(r=bn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bc(e,t,r,n,A,a){var u=2;if(n=e,typeof e=="function")O1(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Ui:return zA(r.children,A,a,t);case t1:u=8,A|=8;break;case dh:return e=bn(12,r,t,A|2),e.elementType=dh,e.lanes=a,e;case hh:return e=bn(13,r,t,A),e.elementType=hh,e.lanes=a,e;case fh:return e=bn(19,r,t,A),e.elementType=fh,e.lanes=a,e;case Cw:return Du(r,A,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bw:u=10;break e;case vw:u=9;break e;case r1:u=11;break e;case n1:u=14;break e;case zs:u=16,n=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=bn(u,r,t,A),t.elementType=e,t.type=n,t.lanes=a,t}function zA(e,t,r,n){return e=bn(7,e,n,t),e.lanes=r,e}function Du(e,t,r,n){return e=bn(22,e,n,t),e.elementType=Cw,e.lanes=r,e.stateNode={isHidden:!1},e}function z0(e,t,r){return e=bn(6,e,null,t),e.lanes=r,e}function W0(e,t,r){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function E4(e,t,r,n,A){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N0(0),this.expirationTimes=N0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N0(0),this.identifierPrefix=n,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function k1(e,t,r,n,A,a,u,g,f){return e=new E4(e,t,r,g,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=bn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},B1(a),e}function b4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function fy(e){if(!e)return wA;e=e._reactInternals;e:{if(ri(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(en(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var r=e.type;if(en(r))return f2(e,r,t)}return t}function xy(e,t,r,n,A,a,u,g,f){return e=k1(r,n,!0,e,A,a,u,g,f),e.context=fy(null),r=e.current,n=Lr(),A=dA(r),a=Bs(n,A),a.callback=t??null,cA(r,a,A),e.current.lanes=A,el(e,A,n),tn(e,n),e}function Tu(e,t,r,n){var A=t.current,a=Lr(),u=dA(A);return r=fy(r),t.context===null?t.context=r:t.pendingContext=r,t=Bs(a,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=cA(A,t,u),e!==null&&(Pn(e,A,u,a),wc(e,A,u)),u}function eu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function L1(e,t){Sg(e,t),(e=e.alternate)&&Sg(e,t)}function _4(){return null}var gy=typeof reportError=="function"?reportError:function(e){console.error(e)};function M1(e){this._internalRoot=e}Ru.prototype.render=M1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Tu(e,t,null,null)};Ru.prototype.unmount=M1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;JA(function(){Tu(null,e,null,null)}),t[bs]=null}};function Ru(e){this._internalRoot=e}Ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ww();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$s.length&&t!==0&&t<$s[r].priority;r++);$s.splice(r,0,e),r===0&&qw(e)}};function H1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function N4(e,t,r,n,A){if(A){if(typeof n=="function"){var a=n;n=function(){var h=eu(u);a.call(h)}}var u=xy(t,n,e,0,null,!1,!1,"",Ug);return e._reactRootContainer=u,e[bs]=u.current,Ro(e.nodeType===8?e.parentNode:e),JA(),u}for(;A=e.lastChild;)e.removeChild(A);if(typeof n=="function"){var g=n;n=function(){var h=eu(f);g.call(h)}}var f=k1(e,0,!1,null,null,!1,!1,"",Ug);return e._reactRootContainer=f,e[bs]=f.current,Ro(e.nodeType===8?e.parentNode:e),JA(function(){Tu(t,f,r,n)}),f}function Ou(e,t,r,n,A){var a=r._reactRootContainer;if(a){var u=a;if(typeof A=="function"){var g=A;A=function(){var f=eu(u);g.call(f)}}Tu(t,u,e,A)}else u=N4(r,t,e,A,n);return eu(u)}Gw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=qa(t.pendingLanes);r!==0&&(i1(t,r|1),tn(t,Vt()),!(tt&6)&&(aa=Vt()+500,EA()))}break;case 13:JA(function(){var n=_s(e,1);if(n!==null){var A=Lr();Pn(n,e,1,A)}}),L1(e,1)}};a1=function(e){if(e.tag===13){var t=_s(e,134217728);if(t!==null){var r=Lr();Pn(t,e,134217728,r)}L1(e,134217728)}};zw=function(e){if(e.tag===13){var t=dA(e),r=_s(e,t);if(r!==null){var n=Lr();Pn(r,e,t,n)}L1(e,t)}};Ww=function(){return it};Xw=function(e,t){var r=it;try{return it=e,t()}finally{it=r}};Eh=function(e,t,r){switch(t){case"input":if(ph(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var A=Nu(n);if(!A)throw Error(me(90));bw(n),ph(n,A)}}}break;case"textarea":Nw(e,r);break;case"select":t=r.value,t!=null&&zi(e,!!r.multiple,t,!1)}};Tw=T1;Rw=JA;var F4={usingClientEntryPoint:!1,Events:[rl,Ri,Nu,Qw,Dw,T1]},Ma={findFiberByHostInstance:HA,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I4={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kw(e),e===null?null:e.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||_4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{Cu=Ll.inject(I4),is=Ll}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F4;dn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H1(t))throw Error(me(200));return b4(e,t,null,r)};dn.createRoot=function(e,t){if(!H1(e))throw Error(me(299));var r=!1,n="",A=gy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(A=t.onRecoverableError)),t=k1(e,1,!1,null,null,r,!1,n,A),e[bs]=t.current,Ro(e.nodeType===8?e.parentNode:e),new M1(t)};dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=kw(t),e=e===null?null:e.stateNode,e};dn.flushSync=function(e){return JA(e)};dn.hydrate=function(e,t,r){if(!ju(t))throw Error(me(200));return Ou(null,e,t,!0,r)};dn.hydrateRoot=function(e,t,r){if(!H1(e))throw Error(me(405));var n=r!=null&&r.hydratedSources||null,A=!1,a="",u=gy;if(r!=null&&(r.unstable_strictMode===!0&&(A=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=xy(t,null,e,1,r??null,A,!1,a,u),e[bs]=t.current,Ro(e),n)for(e=0;e<n.length;e++)r=n[e],A=r._getVersion,A=A(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,A]:t.mutableSourceEagerHydrationData.push(r,A);return new Ru(t)};dn.render=function(e,t,r){if(!ju(t))throw Error(me(200));return Ou(null,e,t,!1,r)};dn.unmountComponentAtNode=function(e){if(!ju(e))throw Error(me(40));return e._reactRootContainer?(JA(function(){Ou(null,null,e,!1,function(){e._reactRootContainer=null,e[bs]=null})}),!0):!1};dn.unstable_batchedUpdates=T1;dn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ju(r))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Ou(e,t,r,!1,n)};dn.version="18.3.1-next-f1338f8080-20240426";function py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(py)}catch(e){console.error(e)}}py(),pw.exports=dn;var S4=pw.exports,my,Qg=S4;my=Qg.createRoot,Qg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vo.apply(this,arguments)}var rA;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rA||(rA={}));const Dg="popstate";function U4(e){e===void 0&&(e={});function t(n,A){let{pathname:a,search:u,hash:g}=n.location;return nf("",{pathname:a,search:u,hash:g},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(n,A){return typeof A=="string"?A:tu(A)}return D4(t,r,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wy(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Q4(){return Math.random().toString(36).substr(2,8)}function Tg(e,t){return{usr:e.state,key:e.key,idx:t}}function nf(e,t,r,n){return r===void 0&&(r=null),Vo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xa(t):t,{state:r,key:t&&t.key||n||Q4()})}function tu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xa(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function D4(e,t,r,n){n===void 0&&(n={});let{window:A=document.defaultView,v5Compat:a=!1}=n,u=A.history,g=rA.Pop,f=null,h=p();h==null&&(h=0,u.replaceState(Vo({},u.state,{idx:h}),""));function p(){return(u.state||{idx:null}).idx}function w(){g=rA.Pop;let I=p(),N=I==null?null:I-h;h=I,f&&f({action:g,location:F.location,delta:N})}function y(I,N){g=rA.Push;let v=nf(F.location,I,N);h=p()+1;let _=Tg(v,h),S=F.createHref(v);try{u.pushState(_,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;A.location.assign(S)}a&&f&&f({action:g,location:F.location,delta:1})}function C(I,N){g=rA.Replace;let v=nf(F.location,I,N);h=p();let _=Tg(v,h),S=F.createHref(v);u.replaceState(_,"",S),a&&f&&f({action:g,location:F.location,delta:0})}function b(I){let N=A.location.origin!=="null"?A.location.origin:A.location.href,v=typeof I=="string"?I:tu(I);return v=v.replace(/ $/,"%20"),Gt(N,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,N)}let F={get action(){return g},get location(){return e(A,u)},listen(I){if(f)throw new Error("A history only accepts one active listener");return A.addEventListener(Dg,w),f=I,()=>{A.removeEventListener(Dg,w),f=null}},createHref(I){return t(A,I)},createURL:b,encodeLocation(I){let N=b(I);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:C,go(I){return u.go(I)}};return F}var Rg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rg||(Rg={}));function T4(e,t,r){return r===void 0&&(r="/"),R4(e,t,r,!1)}function R4(e,t,r,n){let A=typeof t=="string"?xa(t):t,a=P1(A.pathname||"/",r);if(a==null)return null;let u=yy(e);j4(u);let g=null;for(let f=0;g==null&&f<u.length;++f){let h=W4(a);g=G4(u[f],h,n)}return g}function yy(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let A=(a,u,g)=>{let f={relativePath:g===void 0?a.path||"":g,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Gt(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let h=fA([n,f.relativePath]),p=r.concat(f);a.children&&a.children.length>0&&(Gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),yy(a.children,t,p,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:K4(h,a.index),routesMeta:p})};return e.forEach((a,u)=>{var g;if(a.path===""||!((g=a.path)!=null&&g.includes("?")))A(a,u);else for(let f of By(a.path))A(a,u,f)}),t}function By(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,A=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return A?[a,""]:[a];let u=By(n.join("/")),g=[];return g.push(...u.map(f=>f===""?a:[a,f].join("/"))),A&&g.push(...u),g.map(f=>e.startsWith("/")&&f===""?"/":f)}function j4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:V4(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const O4=/^:[\w-]+$/,k4=3,L4=2,M4=1,H4=10,P4=-2,jg=e=>e==="*";function K4(e,t){let r=e.split("/"),n=r.length;return r.some(jg)&&(n+=P4),t&&(n+=L4),r.filter(A=>!jg(A)).reduce((A,a)=>A+(O4.test(a)?k4:a===""?M4:H4),n)}function V4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,A)=>n===t[A])?e[e.length-1]-t[t.length-1]:0}function G4(e,t,r){let{routesMeta:n}=e,A={},a="/",u=[];for(let g=0;g<n.length;++g){let f=n[g],h=g===n.length-1,p=a==="/"?t:t.slice(a.length)||"/",w=Og({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!w&&h&&r&&!n[n.length-1].route.index&&(w=Og({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!w)return null;Object.assign(A,w.params),u.push({params:A,pathname:fA([a,w.pathname]),pathnameBase:Y4(fA([a,w.pathnameBase])),route:y}),w.pathnameBase!=="/"&&(a=fA([a,w.pathnameBase]))}return u}function Og(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=z4(e.path,e.caseSensitive,e.end),A=t.match(r);if(!A)return null;let a=A[0],u=a.replace(/(.)\/+$/,"$1"),g=A.slice(1);return{params:n.reduce((h,p,w)=>{let{paramName:y,isOptional:C}=p;if(y==="*"){let F=g[w]||"";u=a.slice(0,a.length-F.length).replace(/(.)\/+$/,"$1")}const b=g[w];return C&&!b?h[y]=void 0:h[y]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:e}}function z4(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),wy(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],A="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,g,f)=>(n.push({paramName:g,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),A+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?A+="\\/*$":e!==""&&e!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,t?void 0:"i"),n]}function W4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wy(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function P1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function X4(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:A=""}=typeof e=="string"?xa(e):e;return{pathname:r?r.startsWith("/")?r:q4(r,t):t,search:Z4(n),hash:J4(A)}}function q4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(A=>{A===".."?r.length>1&&r.pop():A!=="."&&r.push(A)}),r.length>1?r.join("/"):"/"}function X0(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $4(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function K1(e,t){let r=$4(e);return t?r.map((n,A)=>A===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function V1(e,t,r,n){n===void 0&&(n=!1);let A;typeof e=="string"?A=xa(e):(A=Vo({},e),Gt(!A.pathname||!A.pathname.includes("?"),X0("?","pathname","search",A)),Gt(!A.pathname||!A.pathname.includes("#"),X0("#","pathname","hash",A)),Gt(!A.search||!A.search.includes("#"),X0("#","search","hash",A)));let a=e===""||A.pathname==="",u=a?"/":A.pathname,g;if(u==null)g=r;else{let w=t.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),w-=1;A.pathname=y.join("/")}g=w>=0?t[w]:"/"}let f=X4(A,g),h=u&&u!=="/"&&u.endsWith("/"),p=(a||u===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}const fA=e=>e.join("/").replace(/\/\/+/g,"/"),Y4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Z4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,J4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function e3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vy=["post","put","patch","delete"];new Set(vy);const t3=["get",...vy];new Set(t3);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Go.apply(this,arguments)}const G1=H.createContext(null),r3=H.createContext(null),bA=H.createContext(null),ku=H.createContext(null),Us=H.createContext({outlet:null,matches:[],isDataRoute:!1}),Cy=H.createContext(null);function n3(e,t){let{relative:r}=t===void 0?{}:t;ga()||Gt(!1);let{basename:n,navigator:A}=H.useContext(bA),{hash:a,pathname:u,search:g}=by(e,{relative:r}),f=u;return n!=="/"&&(f=u==="/"?n:fA([n,u])),A.createHref({pathname:f,search:g,hash:a})}function ga(){return H.useContext(ku)!=null}function sl(){return ga()||Gt(!1),H.useContext(ku).location}function Ey(e){H.useContext(bA).static||H.useLayoutEffect(e)}function kt(){let{isDataRoute:e}=H.useContext(Us);return e?g3():s3()}function s3(){ga()||Gt(!1);let e=H.useContext(G1),{basename:t,future:r,navigator:n}=H.useContext(bA),{matches:A}=H.useContext(Us),{pathname:a}=sl(),u=JSON.stringify(K1(A,r.v7_relativeSplatPath)),g=H.useRef(!1);return Ey(()=>{g.current=!0}),H.useCallback(function(h,p){if(p===void 0&&(p={}),!g.current)return;if(typeof h=="number"){n.go(h);return}let w=V1(h,JSON.parse(u),a,p.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:fA([t,w.pathname])),(p.replace?n.replace:n.push)(w,p.state,p)},[t,n,u,a,e])}function Al(){let{matches:e}=H.useContext(Us),t=e[e.length-1];return t?t.params:{}}function by(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=H.useContext(bA),{matches:A}=H.useContext(Us),{pathname:a}=sl(),u=JSON.stringify(K1(A,n.v7_relativeSplatPath));return H.useMemo(()=>V1(e,JSON.parse(u),a,r==="path"),[e,u,a,r])}function A3(e,t){return i3(e,t)}function i3(e,t,r,n){ga()||Gt(!1);let{navigator:A,static:a}=H.useContext(bA),{matches:u}=H.useContext(Us),g=u[u.length-1],f=g?g.params:{};g&&g.pathname;let h=g?g.pathnameBase:"/";g&&g.route;let p=sl(),w;if(t){var y;let N=typeof t=="string"?xa(t):t;h==="/"||(y=N.pathname)!=null&&y.startsWith(h)||Gt(!1),w=N}else w=p;let C=w.pathname||"/",b=C;if(h!=="/"){let N=h.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(N.length).join("/")}let F=!a&&r&&r.matches&&r.matches.length>0?r.matches:T4(e,{pathname:b}),I=u3(F&&F.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:fA([h,A.encodeLocation?A.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:fA([h,A.encodeLocation?A.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,r,n);return t&&I?H.createElement(ku.Provider,{value:{location:Go({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:rA.Pop}},I):I}function a3(){let e=x3(),t=e3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),r?H.createElement("pre",{style:A},r):null,null)}const o3=H.createElement(a3,null);class l3 extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?H.createElement(Us.Provider,{value:this.props.routeContext},H.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c3(e){let{routeContext:t,match:r,children:n}=e,A=H.useContext(G1);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(Us.Provider,{value:t},n)}function u3(e,t,r,n){var A;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let u=e,g=(A=r)==null?void 0:A.errors;if(g!=null){let p=u.findIndex(w=>w.route.id&&(g==null?void 0:g[w.route.id])!==void 0);p>=0||Gt(!1),u=u.slice(0,Math.min(u.length,p+1))}let f=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<u.length;p++){let w=u[p];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(h=p),w.route.id){let{loaderData:y,errors:C}=r,b=w.route.loader&&y[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||b){f=!0,h>=0?u=u.slice(0,h+1):u=[u[0]];break}}}return u.reduceRight((p,w,y)=>{let C,b=!1,F=null,I=null;r&&(C=g&&w.route.id?g[w.route.id]:void 0,F=w.route.errorElement||o3,f&&(h<0&&y===0?(b=!0,I=null):h===y&&(b=!0,I=w.route.hydrateFallbackElement||null)));let N=t.concat(u.slice(0,y+1)),v=()=>{let _;return C?_=F:b?_=I:w.route.Component?_=H.createElement(w.route.Component,null):w.route.element?_=w.route.element:_=p,H.createElement(c3,{match:w,routeContext:{outlet:p,matches:N,isDataRoute:r!=null},children:_})};return r&&(w.route.ErrorBoundary||w.route.errorElement||y===0)?H.createElement(l3,{location:r.location,revalidation:r.revalidation,component:F,error:C,children:v(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):v()},null)}var _y=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_y||{}),ru=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ru||{});function d3(e){let t=H.useContext(G1);return t||Gt(!1),t}function h3(e){let t=H.useContext(r3);return t||Gt(!1),t}function f3(e){let t=H.useContext(Us);return t||Gt(!1),t}function Ny(e){let t=f3(),r=t.matches[t.matches.length-1];return r.route.id||Gt(!1),r.route.id}function x3(){var e;let t=H.useContext(Cy),r=h3(ru.UseRouteError),n=Ny(ru.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function g3(){let{router:e}=d3(_y.UseNavigateStable),t=Ny(ru.UseNavigateStable),r=H.useRef(!1);return Ey(()=>{r.current=!0}),H.useCallback(function(A,a){a===void 0&&(a={}),r.current&&(typeof A=="number"?e.navigate(A):e.navigate(A,Go({fromRouteId:t},a)))},[e,t])}function p3(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fy(e){let{to:t,replace:r,state:n,relative:A}=e;ga()||Gt(!1);let{future:a,static:u}=H.useContext(bA),{matches:g}=H.useContext(Us),{pathname:f}=sl(),h=kt(),p=V1(t,K1(g,a.v7_relativeSplatPath),f,A==="path"),w=JSON.stringify(p);return H.useEffect(()=>h(JSON.parse(w),{replace:r,state:n,relative:A}),[h,w,A,r,n]),null}function wt(e){Gt(!1)}function m3(e){let{basename:t="/",children:r=null,location:n,navigationType:A=rA.Pop,navigator:a,static:u=!1,future:g}=e;ga()&&Gt(!1);let f=t.replace(/^\/*/,"/"),h=H.useMemo(()=>({basename:f,navigator:a,static:u,future:Go({v7_relativeSplatPath:!1},g)}),[f,g,a,u]);typeof n=="string"&&(n=xa(n));let{pathname:p="/",search:w="",hash:y="",state:C=null,key:b="default"}=n,F=H.useMemo(()=>{let I=P1(p,f);return I==null?null:{location:{pathname:I,search:w,hash:y,state:C,key:b},navigationType:A}},[f,p,w,y,C,b,A]);return F==null?null:H.createElement(bA.Provider,{value:h},H.createElement(ku.Provider,{children:r,value:F}))}function w3(e){let{children:t,location:r}=e;return A3(sf(t),r)}new Promise(()=>{});function sf(e,t){t===void 0&&(t=[]);let r=[];return H.Children.forEach(e,(n,A)=>{if(!H.isValidElement(n))return;let a=[...t,A];if(n.type===H.Fragment){r.push.apply(r,sf(n.props.children,a));return}n.type!==wt&&Gt(!1),!n.props.index||!n.props.children||Gt(!1);let u={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=sf(n.props.children,a)),r.push(u)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Af.apply(this,arguments)}function y3(e,t){if(e==null)return{};var r={},n=Object.keys(e),A,a;for(a=0;a<n.length;a++)A=n[a],!(t.indexOf(A)>=0)&&(r[A]=e[A]);return r}function B3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function v3(e,t){return e.button===0&&(!t||t==="_self")&&!B3(e)}const C3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E3="6";try{window.__reactRouterVersion=E3}catch{}const b3="startTransition",kg=wC[b3];function _3(e){let{basename:t,children:r,future:n,window:A}=e,a=H.useRef();a.current==null&&(a.current=U4({window:A,v5Compat:!0}));let u=a.current,[g,f]=H.useState({action:u.action,location:u.location}),{v7_startTransition:h}=n||{},p=H.useCallback(w=>{h&&kg?kg(()=>f(w)):f(w)},[f,h]);return H.useLayoutEffect(()=>u.listen(p),[u,p]),H.useEffect(()=>p3(n),[n]),H.createElement(m3,{basename:t,children:r,location:g.location,navigationType:g.action,navigator:u,future:n})}const N3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=H.forwardRef(function(t,r){let{onClick:n,relative:A,reloadDocument:a,replace:u,state:g,target:f,to:h,preventScrollReset:p,viewTransition:w}=t,y=y3(t,C3),{basename:C}=H.useContext(bA),b,F=!1;if(typeof h=="string"&&F3.test(h)&&(b=h,N3))try{let _=new URL(window.location.href),S=h.startsWith("//")?new URL(_.protocol+h):new URL(h),j=P1(S.pathname,C);S.origin===_.origin&&j!=null?h=j+S.search+S.hash:F=!0}catch{}let I=n3(h,{relative:A}),N=I3(h,{replace:u,state:g,target:f,preventScrollReset:p,relative:A,viewTransition:w});function v(_){n&&n(_),_.defaultPrevented||N(_)}return H.createElement("a",Af({},y,{href:b||I,onClick:F||a?n:v,ref:r,target:f}))});var Lg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lg||(Lg={}));var Mg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mg||(Mg={}));function I3(e,t){let{target:r,replace:n,state:A,preventScrollReset:a,relative:u,viewTransition:g}=t===void 0?{}:t,f=kt(),h=sl(),p=by(e,{relative:u});return H.useCallback(w=>{if(v3(w,r)){w.preventDefault();let y=n!==void 0?n:tu(h)===tu(p);f(e,{replace:y,state:A,preventScrollReset:a,relative:u,viewTransition:g})}},[h,f,p,n,A,r,e,a,u,g])}const S3="modulepreload",U3=function(e){return"/"+e},Hg={},oa=function(t,r,n){let A=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),g=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));A=Promise.allSettled(r.map(f=>{if(f=U3(f),f in Hg)return;Hg[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const w=document.createElement("link");if(w.rel=h?"stylesheet":S3,h||(w.as="script"),w.crossOrigin="",w.href=f,g&&w.setAttribute("nonce",g),document.head.appendChild(w),h)return new Promise((y,C)=>{w.addEventListener("load",y),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=u,window.dispatchEvent(g),!g.defaultPrevented)throw u}return A.then(u=>{for(const g of u||[])g.status==="rejected"&&a(g.reason);return t().catch(a)})},Q3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>oa(async()=>{const{default:n}=await Promise.resolve().then(()=>pa);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class z1 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class D3 extends z1{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class T3 extends z1{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class R3 extends z1{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var af;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(af||(af={}));var j3=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};class O3{constructor(t,{headers:r={},customFetch:n,region:A=af.Any}={}){this.url=t,this.headers=r,this.region=A,this.fetch=Q3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return j3(this,void 0,void 0,function*(){try{const{headers:A,method:a,body:u}=r;let g={},{region:f}=r;f||(f=this.region),f&&f!=="any"&&(g["x-region"]=f);let h;u&&(A&&!Object.prototype.hasOwnProperty.call(A,"Content-Type")||!A)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",h=u):typeof u=="string"?(g["Content-Type"]="text/plain",h=u):typeof FormData<"u"&&u instanceof FormData?h=u:(g["Content-Type"]="application/json",h=JSON.stringify(u)));const p=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),A),body:h}).catch(b=>{throw new D3(b)}),w=p.headers.get("x-relay-error");if(w&&w==="true")throw new T3(p);if(!p.ok)throw new R3(p);let y=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),C;return y==="application/json"?C=yield p.json():y==="application/octet-stream"?C=yield p.blob():y==="text/event-stream"?C=p:y==="multipart/form-data"?C=yield p.formData():C=yield p.text(),{data:C,error:null}}catch(A){return{data:null,error:A}}})}}var Yr={},W1={},Lu={},il={},Mu={},Hu={},k3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},la=k3();const L3=la.fetch,Iy=la.fetch.bind(la),Sy=la.Headers,M3=la.Request,H3=la.Response,pa=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sy,Request:M3,Response:H3,default:Iy,fetch:L3},Symbol.toStringTag,{value:"Module"})),P3=Aw(pa);var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});let K3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Pu.default=K3;var Uy=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hu,"__esModule",{value:!0});const V3=Uy(P3),G3=Uy(Pu);let z3=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=V3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let A=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var u,g,f;let h=null,p=null,w=null,y=a.status,C=a.statusText;if(a.ok){if(this.method!=="HEAD"){const N=await a.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=N:p=JSON.parse(N))}const F=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),I=(g=a.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");F&&I&&I.length>1&&(w=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,w=null,y=406,C="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const F=await a.text();try{h=JSON.parse(F),Array.isArray(h)&&a.status===404&&(p=[],h=null,y=200,C="OK")}catch{a.status===404&&F===""?(y=204,C="No Content"):h={message:F}}if(h&&this.isMaybeSingle&&(!((f=h==null?void 0:h.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,y=200,C="OK"),h&&this.shouldThrowOnError)throw new G3.default(h)}return{error:h,data:p,count:w,status:y,statusText:C}});return this.shouldThrowOnError||(A=A.catch(a=>{var u,g,f;return{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(g=a==null?void 0:a.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(f=a==null?void 0:a.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),A.then(t,r)}returns(){return this}overrideTypes(){return this}};Hu.default=z3;var W3=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mu,"__esModule",{value:!0});const X3=W3(Hu);let q3=class extends X3.default{select(t){let r=!1;const n=(t??"*").split("").map(A=>/\s/.test(A)&&!r?"":(A==='"'&&(r=!r),A)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:A,referencedTable:a=A}={}){const u=a?`${a}.order`:"order",g=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${g?`${g},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const A=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(A,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:A=n}={}){const a=typeof A>"u"?"offset":`${A}.offset`,u=typeof A>"u"?"limit":`${A}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(u,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:A=!1,wal:a=!1,format:u="text"}={}){var g;const f=[t?"analyze":null,r?"verbose":null,n?"settings":null,A?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`,u==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mu.default=q3;var $3=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(il,"__esModule",{value:!0});const Y3=$3(Mu);let Z3=class extends Y3.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(A=>typeof A=="string"&&new RegExp("[,()]").test(A)?`"${A}"`:`${A}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:A}={}){let a="";A==="plain"?a="pl":A==="phrase"?a="ph":A==="websearch"&&(a="w");const u=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${u}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const A=n?`${n}.or`:"or";return this.url.searchParams.append(A,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};il.default=Z3;var J3=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lu,"__esModule",{value:!0});const Ha=J3(il);let eb=class{constructor(t,{headers:r={},schema:n,fetch:A}){this.url=t,this.headers=r,this.schema=n,this.fetch=A}select(t,{head:r=!1,count:n}={}){const A=r?"HEAD":"GET";let a=!1;const u=(t??"*").split("").map(g=>/\s/.test(g)&&!a?"":(g==='"'&&(a=!a),g)).join("");return this.url.searchParams.set("select",u),n&&(this.headers.Prefer=`count=${n}`),new Ha.default({method:A,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const A="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const u=t.reduce((g,f)=>g.concat(Object.keys(f)),[]);if(u.length>0){const g=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",g.join(","))}}return new Ha.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:A,defaultToNull:a=!0}={}){const u="POST",g=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&g.push(this.headers.Prefer),A&&g.push(`count=${A}`),a||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(t)){const f=t.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ha.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",A=[];return this.headers.Prefer&&A.push(this.headers.Prefer),r&&A.push(`count=${r}`),this.headers.Prefer=A.join(","),new Ha.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ha.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Lu.default=eb;var Ku={},Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.version=void 0;Vu.version="0.0.0-automated";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.DEFAULT_HEADERS=void 0;const tb=Vu;Ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tb.version}`};var Qy=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W1,"__esModule",{value:!0});const rb=Qy(Lu),nb=Qy(il),sb=Ku;let Ab=class Dy{constructor(t,{headers:r={},schema:n,fetch:A}={}){this.url=t,this.headers=Object.assign(Object.assign({},sb.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=A}from(t){const r=new URL(`${this.url}/${t}`);return new rb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Dy(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:A=!1,count:a}={}){let u;const g=new URL(`${this.url}/rpc/${t}`);let f;n||A?(u=n?"HEAD":"GET",Object.entries(r).filter(([p,w])=>w!==void 0).map(([p,w])=>[p,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([p,w])=>{g.searchParams.append(p,w)})):(u="POST",f=r);const h=Object.assign({},this.headers);return a&&(h.Prefer=`count=${a}`),new nb.default({method:u,url:g,headers:h,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};W1.default=Ab;var ma=Te&&Te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.PostgrestError=Yr.PostgrestBuilder=Yr.PostgrestTransformBuilder=Yr.PostgrestFilterBuilder=Yr.PostgrestQueryBuilder=Yr.PostgrestClient=void 0;const Ty=ma(W1);Yr.PostgrestClient=Ty.default;const Ry=ma(Lu);Yr.PostgrestQueryBuilder=Ry.default;const jy=ma(il);Yr.PostgrestFilterBuilder=jy.default;const Oy=ma(Mu);Yr.PostgrestTransformBuilder=Oy.default;const ky=ma(Hu);Yr.PostgrestBuilder=ky.default;const Ly=ma(Pu);Yr.PostgrestError=Ly.default;var ib=Yr.default={PostgrestClient:Ty.default,PostgrestQueryBuilder:Ry.default,PostgrestFilterBuilder:jy.default,PostgrestTransformBuilder:Oy.default,PostgrestBuilder:ky.default,PostgrestError:Ly.default};const{PostgrestClient:ab,PostgrestQueryBuilder:iQ,PostgrestFilterBuilder:aQ,PostgrestTransformBuilder:oQ,PostgrestBuilder:lQ,PostgrestError:cQ}=ib,ob="2.11.2",lb={"X-Client-Info":`realtime-js/${ob}`},cb="1.0.0",My=1e4,ub=1e3;var Zi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zi||(Zi={}));var An;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(An||(An={}));var Ln;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ln||(Ln={}));var of;(function(e){e.websocket="websocket"})(of||(of={}));var kA;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(kA||(kA={}));class db{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const A=r.getUint8(1),a=r.getUint8(2);let u=this.HEADER_LENGTH+2;const g=n.decode(t.slice(u,u+A));u=u+A;const f=n.decode(t.slice(u,u+a));u=u+a;const h=JSON.parse(n.decode(t.slice(u,t.byteLength)));return{ref:null,topic:g,event:f,payload:h}}}class Hy{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ht;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ht||(ht={}));const Pg=(e,t,r={})=>{var n;const A=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,u)=>(a[u]=hb(u,e,t,A),a),{})},hb=(e,t,r,n)=>{const A=t.find(g=>g.name===e),a=A==null?void 0:A.type,u=r[e];return a&&!n.includes(a)?Py(a,u):lf(u)},Py=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return pb(t,r)}switch(e){case ht.bool:return fb(t);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return xb(t);case ht.json:case ht.jsonb:return gb(t);case ht.timestamp:return mb(t);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return lf(t);default:return lf(t)}},lf=e=>e,fb=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xb=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gb=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pb=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const u=e.slice(1,r);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(g=>Py(t,g))}return e},mb=e=>typeof e=="string"?e.replace(" ","T"):e,Ky=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class q0{constructor(t,r,n={},A=My){this.channel=t,this.event=r,this.payload=n,this.timeout=A,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Kg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Kg||(Kg={}));class go{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},A=>{const{onJoin:a,onLeave:u,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=go.syncState(this.state,A,a,u),this.pendingDiffs.forEach(f=>{this.state=go.syncDiff(this.state,f,a,u)}),this.pendingDiffs=[],g()}),this.channel._on(n.diff,{},A=>{const{onJoin:a,onLeave:u,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(A):(this.state=go.syncDiff(this.state,A,a,u),g())}),this.onJoin((A,a,u)=>{this.channel._trigger("presence",{event:"join",key:A,currentPresences:a,newPresences:u})}),this.onLeave((A,a,u)=>{this.channel._trigger("presence",{event:"leave",key:A,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,A){const a=this.cloneDeep(t),u=this.transformState(r),g={},f={};return this.map(a,(h,p)=>{u[h]||(f[h]=p)}),this.map(u,(h,p)=>{const w=a[h];if(w){const y=p.map(I=>I.presence_ref),C=w.map(I=>I.presence_ref),b=p.filter(I=>C.indexOf(I.presence_ref)<0),F=w.filter(I=>y.indexOf(I.presence_ref)<0);b.length>0&&(g[h]=b),F.length>0&&(f[h]=F)}else g[h]=p}),this.syncDiff(a,{joins:g,leaves:f},n,A)}static syncDiff(t,r,n,A){const{joins:a,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),A||(A=()=>{}),this.map(a,(g,f)=>{var h;const p=(h=t[g])!==null&&h!==void 0?h:[];if(t[g]=this.cloneDeep(f),p.length>0){const w=t[g].map(C=>C.presence_ref),y=p.filter(C=>w.indexOf(C.presence_ref)<0);t[g].unshift(...y)}n(g,p,f)}),this.map(u,(g,f)=>{let h=t[g];if(!h)return;const p=f.map(w=>w.presence_ref);h=h.filter(w=>p.indexOf(w.presence_ref)<0),t[g]=h,A(g,h,f),h.length===0&&delete t[g]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const A=t[n];return"metas"in A?r[n]=A.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=A,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Vg||(Vg={}));var Gg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gg||(Gg={}));var xs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xs||(xs={}));class X1{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=An.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new q0(this,Ln.join,this.params,this.timeout),this.rejoinTimer=new Hy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=An.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(A=>A.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=An.closed,this.socket._remove(this)}),this._onError(A=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,A),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ln.reply,{},(A,a)=>{this._trigger(this._replyEventName(a),A)}),this.presence=new go(this),this.broadcastEndpointURL=Ky(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,A;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:u,private:g}}=this.params;this._onError(p=>t==null?void 0:t(xs.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(xs.CLOSED));const f={},h={broadcast:a,presence:u,postgres_changes:(A=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&A!==void 0?A:[],private:g};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){t==null||t(xs.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,C=(w=y==null?void 0:y.length)!==null&&w!==void 0?w:0,b=[];for(let F=0;F<C;F++){const I=y[F],{filter:{event:N,schema:v,table:_,filter:S}}=I,j=p&&p[F];if(j&&j.event===N&&j.schema===v&&j.table===_&&j.filter===S)b.push(Object.assign(Object.assign({},I),{id:j.id}));else{this.unsubscribe(),t==null||t(xs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(xs.SUBSCRIBED);return}}).receive("error",p=>{t==null||t(xs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,A;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:u}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((A=h.body)===null||A===void 0?void 0:A.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,g,f;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(g=(u=this.params)===null||u===void 0?void 0:u.config)===null||g===void 0?void 0:g.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=An.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ln.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const A=new q0(this,Ln.leave,{},t);A.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),A.send(),this._canPush()||A.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const A=new AbortController,a=setTimeout(()=>A.abort(),n),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:A.signal}));return clearTimeout(a),u}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let A=new q0(this,t,r,n);return this._canPush()?A.send():(A.startTimeout(),this.pushBuffer.push(A)),A}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var A,a;const u=t.toLocaleLowerCase(),{close:g,error:f,leave:h,join:p}=Ln;if(n&&[g,f,h,p].indexOf(u)>=0&&n!==this._joinRef())return;let y=this._onMessage(u,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(A=this.bindings.postgres_changes)===null||A===void 0||A.filter(C=>{var b,F,I;return((b=C.filter)===null||b===void 0?void 0:b.event)==="*"||((I=(F=C.filter)===null||F===void 0?void 0:F.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===u}).map(C=>C.callback(y,n)):(a=this.bindings[u])===null||a===void 0||a.filter(C=>{var b,F,I,N,v,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in C){const S=C.id,j=(b=C.filter)===null||b===void 0?void 0:b.event;return S&&((F=r.ids)===null||F===void 0?void 0:F.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const S=(v=(N=C==null?void 0:C.filter)===null||N===void 0?void 0:N.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===u}).map(C=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:F,table:I,commit_timestamp:N,type:v,errors:_}=b;y=Object.assign(Object.assign({},{schema:F,table:I,commit_timestamp:N,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(b))}C.callback(y,n)})}_isClosed(){return this.state===An.closed}_isJoined(){return this.state===An.joined}_isJoining(){return this.state===An.joining}_isLeaving(){return this.state===An.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const A=t.toLocaleLowerCase(),a={type:A,filter:r,callback:n};return this.bindings[A]?this.bindings[A].push(a):this.bindings[A]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(A=>{var a;return!(((a=A.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&X1.isEqual(A.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ln.close,{},t)}_onError(t){this._on(Ln.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=An.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Pg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Pg(t.columns,t.old_record)),r}}const wb=()=>{},yb=typeof WebSocket<"u",Bb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vb{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=lb,this.params={},this.timeout=My,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=wb,this.conn=null,this.sendBuffer=[],this.serializer=new db,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let u;return a?u=a:typeof fetch>"u"?u=(...g)=>oa(async()=>{const{default:f}=await Promise.resolve().then(()=>pa);return{default:f}},void 0).then(({default:f})=>f(...g)):u=fetch,(...g)=>u(...g)},this.endPoint=`${t}/${of.websocket}`,this.httpEndpoint=Ky(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const A=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(A&&(this.accessTokenValue=A,this.apiKey=A),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,u)=>u(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(yb){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Cb(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),oa(async()=>{const{default:t}=await import("./browser-D-yK28wG.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cb}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zi.connecting:return kA.Connecting;case Zi.open:return kA.Open;case Zi.closing:return kA.Closing;default:return kA.Closed}}isConnected(){return this.connectionState()===kA.Open}channel(t,r={config:{}}){const n=new X1(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:A,ref:a}=t,u=()=>{this.encode(t,g=>{var f;(f=this.conn)===null||f===void 0||f.send(g)})};this.log("push",`${r} ${n} (${a})`,A),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(A=>{r&&A.updateJoinPayload({access_token:r}),A.joinedOnce&&A._isJoined()&&A._push(Ln.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(ub,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:A,payload:a,ref:u}=r;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${A} ${u&&"("+u+")"||""}`,a),this.channels.filter(g=>g._isMember(n)).forEach(g=>g._trigger(A,a,u)),this.stateChangeCallbacks.message.forEach(g=>g(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ln.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",A=new URLSearchParams(r);return`${t}${n}${A}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Bb],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Cb{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zi.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class q1 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function lr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Eb extends q1{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class cf extends q1{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var bb=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};const Vy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>oa(async()=>{const{default:n}=await Promise.resolve().then(()=>pa);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_b=()=>bb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield oa(()=>Promise.resolve().then(()=>pa),void 0)).Response:Response}),uf=e=>{if(Array.isArray(e))return e.map(r=>uf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const A=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[A]=uf(n)}),t};var ni=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};const $0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Nb=(e,t,r)=>ni(void 0,void 0,void 0,function*(){const n=yield _b();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(A=>{t(new Eb($0(A),e.status||500))}).catch(A=>{t(new cf($0(A),A))}):t(new cf($0(e),e))}),Fb=(e,t,r,n)=>{const A={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?A:(A.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(A.body=JSON.stringify(n)),Object.assign(Object.assign({},A),r))};function al(e,t,r,n,A,a){return ni(this,void 0,void 0,function*(){return new Promise((u,g)=>{e(r,Fb(t,n,A,a)).then(f=>{if(!f.ok)throw f;return n!=null&&n.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Nb(f,g,n))})})}function nu(e,t,r,n){return ni(this,void 0,void 0,function*(){return al(e,"GET",t,r,n)})}function Xs(e,t,r,n,A){return ni(this,void 0,void 0,function*(){return al(e,"POST",t,n,A,r)})}function Ib(e,t,r,n,A){return ni(this,void 0,void 0,function*(){return al(e,"PUT",t,n,A,r)})}function Sb(e,t,r,n){return ni(this,void 0,void 0,function*(){return al(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gy(e,t,r,n,A){return ni(this,void 0,void 0,function*(){return al(e,"DELETE",t,n,A,r)})}var Xr=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};const Ub={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qb{constructor(t,r={},n,A){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Vy(A)}uploadOrUpdate(t,r,n,A){return Xr(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},zg),A);let g=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",u.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=n,g["cache-control"]=`max-age=${u.cacheControl}`,g["content-type"]=u.contentType,f&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),A!=null&&A.headers&&(g=Object.assign(Object.assign({},g),A.headers));const h=this._removeEmptyFolders(r),p=this._getFinalPath(h),w=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:a,headers:g},u!=null&&u.duplex?{duplex:u.duplex}:{})),y=yield w.json();return w.ok?{data:{path:h,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(a){if(lr(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Xr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,A){return Xr(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),g=new URL(this.url+`/object/upload/sign/${u}`);g.searchParams.set("token",r);try{let f;const h=Object.assign({upsert:zg.upsert},A),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",h.cacheControl)):(f=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const w=yield this.fetch(g.toString(),{method:"PUT",body:f,headers:p}),y=yield w.json();return w.ok?{data:{path:a,fullPath:y.Key},error:null}:{data:null,error:y}}catch(f){if(lr(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return Xr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const A=Object.assign({},this.headers);r!=null&&r.upsert&&(A["x-upsert"]="true");const a=yield Xs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:A}),u=new URL(this.url+a.url),g=u.searchParams.get("token");if(!g)throw new q1("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:g},error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Xr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Xr(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(A){if(lr(A))return{data:null,error:A};throw A}})}copy(t,r,n){return Xr(this,void 0,void 0,function*(){try{return{data:{path:(yield Xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(A){if(lr(A))return{data:null,error:A};throw A}})}createSignedUrl(t,r,n){return Xr(this,void 0,void 0,function*(){try{let A=this._getFinalPath(t),a=yield Xs(this.fetch,`${this.url}/object/sign/${A}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(A){if(lr(A))return{data:null,error:A};throw A}})}createSignedUrls(t,r,n){return Xr(this,void 0,void 0,function*(){try{const A=yield Xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:A.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(A){if(lr(A))return{data:null,error:A};throw A}})}download(t,r){return Xr(this,void 0,void 0,function*(){const A=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=a?`?${a}`:"";try{const g=this._getFinalPath(t);return{data:yield(yield nu(this.fetch,`${this.url}/${A}/${g}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(lr(g))return{data:null,error:g};throw g}})}info(t){return Xr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield nu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:uf(n),error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}})}exists(t){return Xr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Sb(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(lr(n)&&n instanceof cf){const A=n.originalError;if([400,404].includes(A==null?void 0:A.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),A=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&A.push(a);const g=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&A.push(f);let h=A.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${n}${h}`)}}}remove(t){return Xr(this,void 0,void 0,function*(){try{return{data:yield Gy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Xr(this,void 0,void 0,function*(){try{const A=Object.assign(Object.assign(Object.assign({},Ub),r),{prefix:t||""});return{data:yield Xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,A,{headers:this.headers},n),error:null}}catch(A){if(lr(A))return{data:null,error:A};throw A}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Db="2.7.1",Tb={"X-Client-Info":`storage-js/${Db}`};var pi=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};class Rb{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Tb),r),this.fetch=Vy(n)}listBuckets(){return pi(this,void 0,void 0,function*(){try{return{data:yield nu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(lr(t))return{data:null,error:t};throw t}})}getBucket(t){return pi(this,void 0,void 0,function*(){try{return{data:yield nu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return pi(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return pi(this,void 0,void 0,function*(){try{return{data:yield Ib(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(lr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return pi(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pi(this,void 0,void 0,function*(){try{return{data:yield Gy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(lr(r))return{data:null,error:r};throw r}})}}class jb extends Rb{constructor(t,r={},n){super(t,r,n)}from(t){return new Qb(this.url,this.headers,t,this.fetch)}}const Ob="2.49.4";let Ya="";typeof Deno<"u"?Ya="deno":typeof document<"u"?Ya="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ya="react-native":Ya="node";const kb={"X-Client-Info":`supabase-js-${Ya}/${Ob}`},Lb={headers:kb},Mb={schema:"public"},Hb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pb={};var Kb=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};const Vb=e=>{let t;return e?t=e:typeof fetch>"u"?t=Iy:t=fetch,(...r)=>t(...r)},Gb=()=>typeof Headers>"u"?Sy:Headers,zb=(e,t,r)=>{const n=Vb(r),A=Gb();return(a,u)=>Kb(void 0,void 0,void 0,function*(){var g;const f=(g=yield t())!==null&&g!==void 0?g:e;let h=new A(u==null?void 0:u.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),n(a,Object.assign(Object.assign({},u),{headers:h}))})};var Wb=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};function Xb(e){return e.replace(/\/$/,"")}function qb(e,t){const{db:r,auth:n,realtime:A,global:a}=e,{db:u,auth:g,realtime:f,global:h}=t,p={db:Object.assign(Object.assign({},u),r),auth:Object.assign(Object.assign({},g),n),realtime:Object.assign(Object.assign({},f),A),global:Object.assign(Object.assign({},h),a),accessToken:()=>Wb(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const zy="2.69.1",Ni=30*1e3,df=3,Y0=df*Ni,$b="http://localhost:9999",Yb="supabase.auth.token",Zb={"X-Client-Info":`gotrue-js/${zy}`},hf="X-Supabase-Api-Version",Wy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,e8=6e5;class $1 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class t8 extends $1{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function r8(e){return Me(e)&&e.name==="AuthApiError"}class Xy extends $1{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _A extends $1{constructor(t,r,n,A){super(t,n,A),this.name=r,this.status=n}}class Ps extends _A{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n8(e){return Me(e)&&e.name==="AuthSessionMissingError"}class Z0 extends _A{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ml extends _A{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hl extends _A{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s8(e){return Me(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wg extends _A{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ff extends _A{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function J0(e){return Me(e)&&e.name==="AuthRetryableFetchError"}class Xg extends _A{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class po extends _A{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$g=` 	
\r=`.split(""),A8=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$g.length;t+=1)e[$g[t].charCodeAt(0)]=-2;for(let t=0;t<qg.length;t+=1)e[qg[t].charCodeAt(0)]=t;return e})();function qy(e,t,r){const n=A8[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yg(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},A={queue:0,queuedBits:0},a=u=>{o8(u,n,r)};for(let u=0;u<e.length;u+=1)qy(e.charCodeAt(u),A,a);return t.join("")}function i8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function a8(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const A=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|A)+65536,r+=1}i8(n,t)}}function o8(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function l8(e){const t=[],r={queue:0,queuedBits:0},n=A=>{t.push(A)};for(let A=0;A<e.length;A+=1)qy(e.charCodeAt(A),r,n);return new Uint8Array(t)}function c8(e){const t=[];return a8(e,r=>t.push(r)),new Uint8Array(t)}function u8(e){return Math.round(Date.now()/1e3)+e}function d8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ns=()=>typeof window<"u"&&typeof document<"u",DA={tested:!1,writable:!1},mo=()=>{if(!ns())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(DA.tested)return DA.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),DA.tested=!0,DA.writable=!0}catch{DA.tested=!0,DA.writable=!1}return DA.writable};function h8(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((A,a)=>{t[a]=A})}catch{}return r.searchParams.forEach((n,A)=>{t[A]=n}),t}const $y=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>oa(async()=>{const{default:n}=await Promise.resolve().then(()=>pa);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},f8=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Yy=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Kl=async(e,t)=>{await e.removeItem(t)};class Gu{constructor(){this.promise=new Gu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Gu.promiseConstructor=Promise;function ed(e){const t=e.split(".");if(t.length!==3)throw new po("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Jb.test(t[n]))throw new po("JWT not in base64url format");return{header:JSON.parse(Yg(t[0])),payload:JSON.parse(Yg(t[1])),signature:l8(t[2]),raw:{header:t[0],payload:t[1]}}}async function x8(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g8(e,t){return new Promise((n,A)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){n(u);return}}catch(u){if(!t(a,u)){A(u);return}}})()})}function p8(e){return("0"+e.toString(16)).substr(-2)}function m8(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let A="";for(let a=0;a<56;a++)A+=r.charAt(Math.floor(Math.random()*n));return A}return crypto.getRandomValues(t),Array.from(t,p8).join("")}async function w8(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),A=new Uint8Array(n);return Array.from(A).map(a=>String.fromCharCode(a)).join("")}async function y8(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await w8(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mi(e,t,r=!1){const n=m8();let A=n;r&&(A+="/PASSWORD_RECOVERY"),await Yy(e,`${t}-code-verifier`,A);const a=await y8(n);return[a,n===a?"plain":"s256"]}const B8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v8(e){const t=e.headers.get(hf);if(!t||!t.match(B8))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function C8(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function E8(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var b8=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,n=Object.getOwnPropertySymbols(e);A<n.length;A++)t.indexOf(n[A])<0&&Object.prototype.propertyIsEnumerable.call(e,n[A])&&(r[n[A]]=e[n[A]]);return r};const OA=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_8=[502,503,504];async function Zg(e){var t;if(!f8(e))throw new ff(OA(e),0);if(_8.includes(e.status))throw new ff(OA(e),e.status);let r;try{r=await e.json()}catch(a){throw new Xy(OA(a),a)}let n;const A=v8(e);if(A&&A.getTime()>=Wy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Xg(OA(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new Xg(OA(r),e.status,r.weak_password.reasons);throw new t8(OA(r),e.status||500,n)}const N8=(e,t,r,n)=>{const A={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?A:(A.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),A.body=JSON.stringify(n),Object.assign(Object.assign({},A),r))};async function Xe(e,t,r,n){var A;const a=Object.assign({},n==null?void 0:n.headers);a[hf]||(a[hf]=Wy["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const u=(A=n==null?void 0:n.query)!==null&&A!==void 0?A:{};n!=null&&n.redirectTo&&(u.redirect_to=n.redirectTo);const g=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await F8(e,t,r+g,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function F8(e,t,r,n,A,a){const u=N8(t,n,A,a);let g;try{g=await e(r,Object.assign({},u))}catch(f){throw console.error(f),new ff(OA(f),0)}if(g.ok||await Zg(g),n!=null&&n.noResolveJson)return g;try{return await g.json()}catch(f){await Zg(f)}}function Ks(e){var t;let r=null;Q8(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=u8(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Jg(e){const t=Ks(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function I8(e){return{data:e,error:null}}function S8(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:A,verification_type:a}=e,u=b8(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:r,hashed_token:n,redirect_to:A,verification_type:a},f=Object.assign({},u);return{data:{properties:g,user:f},error:null}}function U8(e){return e}function Q8(e){return e.access_token&&e.refresh_token&&e.expires_in}var D8=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,n=Object.getOwnPropertySymbols(e);A<n.length;A++)t.indexOf(n[A])<0&&Object.prototype.propertyIsEnumerable.call(e,n[A])&&(r[n[A]]=e[n[A]]);return r};class T8{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=$y(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zs})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=D8(t,["options"]),A=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(A.new_email=n==null?void 0:n.newEmail,delete A.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:A,headers:this.headers,xform:S8,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zs})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,A,a,u,g,f;try{const h={nextPage:null,lastPage:0,total:0},p=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(A=t==null?void 0:t.perPage)===null||A===void 0?void 0:A.toString())!==null&&a!==void 0?a:""},xform:U8});if(p.error)throw p.error;const w=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,C=(f=(g=p.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&f!==void 0?f:[];return C.length>0&&(C.forEach(b=>{const F=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(b.split(";")[1].split("=")[1]);h[`${I}Page`]=F}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},w),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zs})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Zs})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zs})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:A=>({data:{factors:A},error:null})});return{data:r,error:n}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}const R8={getItem:e=>mo()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{mo()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{mo()&&globalThis.localStorage.removeItem(e)}};function ep(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function j8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wi={debug:!!(globalThis&&mo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O8 extends Zy{}async function k8(e,t,r){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async A=>{if(A){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,A.name);try{return await r()}finally{wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,A.name)}}else{if(t===0)throw wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O8(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(wi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}j8();const L8={url:$b,storageKey:Yb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tp(e,t,r){return await r()}class zo{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zo.nextInstanceID,zo.nextInstanceID+=1,this.instanceID>0&&ns()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const A=Object.assign(Object.assign({},L8),t);if(this.logDebugMessages=!!A.debug,typeof A.debug=="function"&&(this.logger=A.debug),this.persistSession=A.persistSession,this.storageKey=A.storageKey,this.autoRefreshToken=A.autoRefreshToken,this.admin=new T8({url:A.url,headers:A.headers,fetch:A.fetch}),this.url=A.url,this.headers=A.headers,this.fetch=$y(A.fetch),this.lock=A.lock||tp,this.detectSessionInUrl=A.detectSessionInUrl,this.flowType=A.flowType,this.hasCustomAuthorizationHeader=A.hasCustomAuthorizationHeader,A.lock?this.lock=A.lock:ns()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=k8:this.lock=tp,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?A.storage?this.storage=A.storage:mo()?this.storage=R8:(this.memoryStorage={},this.storage=ep(this.memoryStorage)):(this.memoryStorage={},this.storage=ep(this.memoryStorage)),ns()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=h8(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ns()&&this.detectSessionInUrl&&n!=="none"){const{data:A,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),s8(a)){const f=(t=a.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:g}=A;return this._debug("#_initialize()","detected session in URL",u,"redirect type",g),await this._saveSession(u),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Me(r)?{error:r}:{error:new Xy("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,A;try{const a=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(A=t==null?void 0:t.options)===null||A===void 0?void 0:A.captchaToken}},xform:Ks}),{data:u,error:g}=a;if(g||!u)return{data:{user:null,session:null},error:g};const f=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,A;try{let a;if("email"in t){const{email:p,password:w,options:y}=t;let C=null,b=null;this.flowType==="pkce"&&([C,b]=await mi(this.storage,this.storageKey)),a=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:w,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:C,code_challenge_method:b},xform:Ks})}else if("phone"in t){const{phone:p,password:w,options:y}=t;a=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:w,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(A=y==null?void 0:y.channel)!==null&&A!==void 0?A:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ks})}else throw new Ml("You must provide either an email or phone number and a password");const{data:u,error:g}=a;if(g||!u)return{data:{user:null,session:null},error:g};const f=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:u,options:g}=t;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Jg})}else if("phone"in t){const{phone:a,password:u,options:g}=t;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Jg})}else throw new Ml("You must provide either an email or phone number and a password");const{data:n,error:A}=r;return A?{data:{user:null,session:null},error:A}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Z0}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:A})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,A,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(A=t.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`),[n,A]=(r??"").split("/");try{const{data:a,error:u}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ks});if(await Kl(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Z0}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:A??null}),error:u})}catch(a){if(Me(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:A,access_token:a,nonce:u}=t,g=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:A,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ks}),{data:f,error:h}=g;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Z0}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,A,a,u;try{if("email"in t){const{email:g,options:f}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await mi(this.storage,this.storageKey));const{error:w}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:g,options:f}=t,{data:h,error:p}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(A=f==null?void 0:f.data)!==null&&A!==void 0?A:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new Ml("You must provide either an email or phone number.")}catch(g){if(Me(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(t){var r,n;try{let A,a;"options"in t&&(A=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:g}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:A,xform:Ks});if(g)throw g;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,h=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(A){if(Me(A))return{data:{user:null,session:null},error:A};throw A}}async signInWithSSO(t){var r,n,A;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await mi(this.storage,this.storageKey)),await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((A=t==null?void 0:t.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:I8})}catch(a){if(Me(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ps;const{error:A}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:A}})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:A,options:a}=t,{error:u}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:A,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:n,type:A,options:a}=t,{data:u,error:g}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:A,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:g}}throw new Ml("You must provide either an email or phone number and a type")}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),A=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await A}catch{}})()),A}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const A=[...this.pendingInLock];await Promise.all(A),this.pendingInLock.splice(0,A.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Y0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,h,p)=>(!u&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,p))})}return{data:{session:t},error:null}}const{session:A,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:A},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zs}):await this._useSession(async r=>{var n,A,a;const{data:u,error:g}=r;if(g)throw g;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(A=u.session)===null||A===void 0?void 0:A.access_token)!==null&&a!==void 0?a:void 0,xform:Zs})})}catch(r){if(Me(r))return n8(r)&&(await this._removeSession(),await Kl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:A,error:a}=n;if(a)throw a;if(!A.session)throw new Ps;const u=A.session;let g=null,f=null;this.flowType==="pkce"&&t.email!=null&&([g,f]=await mi(this.storage,this.storageKey));const{data:h,error:p}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:g,code_challenge_method:f}),jwt:u.access_token,xform:Zs});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ps;const r=Date.now()/1e3;let n=r,A=!0,a=null;const{payload:u}=ed(t.access_token);if(u.exp&&(n=u.exp,A=n<=r),A){const{session:g,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!g)return{data:{user:null,session:null},error:null};a=g}else{const{data:g,error:f}=await this._getUser(t.access_token);if(f)throw f;a={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:u,error:g}=r;if(g)throw g;t=(n=u.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ps;const{session:A,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:A?{data:{user:A.user,session:A},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ns())throw new Hl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Wg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wg("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:A,access_token:a,refresh_token:u,expires_in:g,expires_at:f,token_type:h}=t;if(!a||!g||!u||!h)throw new Hl("No session defined in URL");const p=Math.round(Date.now()/1e3),w=parseInt(g);let y=p+w;f&&(y=parseInt(f));const C=y-p;C*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${w}s`);const b=y-w;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,p);const{data:F,error:I}=await this._getUser(a);if(I)throw I;const N={provider_token:n,provider_refresh_token:A,access_token:a,expires_in:w,expires_at:y,refresh_token:u,token_type:h,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(n){if(Me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:A,error:a}=r;if(a)return{error:a};const u=(n=A.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:g}=await this.admin.signOut(u,t);if(g&&!(r8(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return t!=="others"&&(await this._removeSession(),await Kl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=d8(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,A;try{const{data:{session:a},error:u}=r;if(u)throw u;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((A=this.stateChangeEmitters.get(t))===null||A===void 0?void 0:A.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,A=null;this.flowType==="pkce"&&([n,A]=await mi(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:A,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Me(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:A}=await this._useSession(async a=>{var u,g,f,h,p;const{data:w,error:y}=a;if(y)throw y;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",C,{headers:this.headers,jwt:(p=(h=w.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(A)throw A;return ns()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,A;const{data:a,error:u}=r;if(u)throw u;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(A=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&A!==void 0?A:void 0})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await g8(async A=>(A>0&&await x8(200*Math.pow(2,A-1)),this._debug(r,"refreshing attempt",A),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ks})),(A,a)=>{const u=200*Math.pow(2,A);return a&&J0(a)&&Date.now()+u-n<Ni})}catch(n){if(this._debug(r,"error",n),Me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ns()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Pl(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const A=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Y0;if(this._debug(r,`session has${A?"":" not"} expired with margin of ${Y0}s`),A){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),J0(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const A=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(A,"begin");try{this.refreshingDeferred=new Gu;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new Ps;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const g={session:a.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(a){if(this._debug(A,"error",a),Me(a)){const u={session:null,error:a};return J0(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(A,"end")}}async _notifyAllSubscribers(t,r,n=!0){const A=`#_notifyAllSubscribers(${t})`;this._debug(A,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(t,r)}catch(f){a.push(f)}});if(await Promise.all(u),a.length>0){for(let g=0;g<a.length;g+=1)console.error(a[g]);throw a[0]}}finally{this._debug(A,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Yy(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Kl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ns()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const A=Math.floor((n.expires_at*1e3-t)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${A} ticks, a tick lasts ${Ni}ms, refresh threshold is ${df} ticks`),A<=df&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ns()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const A=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&A.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&A.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,u]=await mi(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});A.push(g.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);A.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&A.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${A.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:A,error:a}=r;return a?{data:null,error:a}:await Xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=A==null?void 0:A.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,A;const{data:a,error:u}=r;if(u)return{data:null,error:u};const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:f,error:h}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((A=f==null?void 0:f.totp)===null||A===void 0)&&A.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:A,error:a}=r;if(a)return{data:null,error:a};const{data:u,error:g}=await Xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=A==null?void 0:A.session)===null||n===void 0?void 0:n.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:g})})}catch(r){if(Me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:A,error:a}=r;return a?{data:null,error:a}:await Xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=A==null?void 0:A.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],A=n.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=n.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:n,totp:A,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:A},error:a}=t;if(a)return{data:null,error:a};if(!A)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ed(A.access_token);let g=null;u.aal&&(g=u.aal);let f=g;((n=(r=A.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const p=u.amr||[];return{data:{currentLevel:g,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n||(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+e8>Date.now()))return n;const{data:A,error:a}=await Xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!A.keys||A.keys.length===0)throw new po("JWKS is empty");if(this.jwks=A,this.jwks_cached_at=Date.now(),n=A.keys.find(u=>u.kid===t),!n)throw new po("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:C,error:b}=await this.getSession();if(b||!C.session)return{data:null,error:b};n=C.session.access_token}const{header:A,payload:a,signature:u,raw:{header:g,payload:f}}=ed(n);if(C8(a.exp),!A.kid||A.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:C}=await this.getUser(n);if(C)throw C;return{data:{claims:a,header:A,signature:u},error:null}}const h=E8(A.alg),p=await this.fetchJwk(A.kid,r),w=await crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!await crypto.subtle.verify(h,w,u,c8(`${g}.${f}`)))throw new po("Invalid JWT signature");return{data:{claims:a,header:A,signature:u},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}zo.nextInstanceID=0;const M8=zo;class H8 extends M8{constructor(t){super(t)}}var P8=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})};class K8{constructor(t,r,n){var A,a,u;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const g=Xb(t);this.realtimeUrl=`${g}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${g}/auth/v1`,this.storageUrl=`${g}/storage/v1`,this.functionsUrl=`${g}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:Mb,realtime:Pb,auth:Object.assign(Object.assign({},Hb),{storageKey:f}),global:Lb},p=qb(n??{},h);this.storageKey=(A=p.auth.storageKey)!==null&&A!==void 0?A:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=p.auth)!==null&&u!==void 0?u:{},this.headers,p.global.fetch),this.fetch=zb(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new ab(`${g}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new O3(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jb(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return P8(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:A,storageKey:a,flowType:u,lock:g,debug:f},h,p){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H8({url:this.authUrl,headers:Object.assign(Object.assign({},w),h),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:A,flowType:u,lock:g,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new vb(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const V8=(e,t,r)=>new K8(e,t,r),G8="https://bijodgezlhkpdaimijpe.supabase.co",z8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpam9kZ2V6bGhrcGRhaW1panBlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MDE3NjUsImV4cCI6MjA2MDk3Nzc2NX0.gnZqsq_AePCmVoDmNVyQzRv7n8jhmzdAQ7ZdFhyyfoE",Z=V8(G8,z8),Jy=H.createContext({}),lt=()=>H.useContext(Jy),td=async e=>{console.log("mapSupabaseUser appelé avec:",e==null?void 0:e.id);try{const{data:r,error:n}=await Z.from("profiles").select("*").eq("id",e.id).single();if(n)throw console.error("Erreur lors de la récupération du profil:",n.message),n;if(r)return console.log("Profil récupéré avec succès:",r),{id:r.id,email:r.email||e.email||"",phoneNumber:r.phone_number||"",firstName:r.first_name||"",lastName:r.last_name||"",role:r.role,createdAt:r.created_at}}catch(r){console.error("Erreur lors de la récupération du profil, utilisation du profil par défaut:",r)}const t={id:e.id,email:e.email||"",phoneNumber:"",firstName:"",lastName:"",role:"client",createdAt:new Date().toISOString()};return console.log("Utilisation d'un utilisateur créé localement (fallback):",t),t},W8=({children:e})=>{const[t,r]=H.useState(null),[n,A]=H.useState(!0),[,a]=H.useState(null);H.useEffect(()=>{console.log("Initialisation de l'authentification"),A(!0),Z.auth.getSession().then(async({data:{session:p}})=>{if(console.log("Session récupérée:",p),a(p),p!=null&&p.user)try{const w=await td(p.user);console.log("Utilisateur mappé lors de l'initialisation:",w),r(w)}catch(w){console.error("Erreur lors du mappage initial de l'utilisateur:",w);const y={id:p.user.id,email:p.user.email||"",phoneNumber:"",firstName:"",lastName:"",role:"client",createdAt:new Date().toISOString()};r(y),console.log("Utilisateur par défaut utilisé lors de l'initialisation:",y)}A(!1)}).catch(p=>{console.error("Erreur lors de la récupération de la session:",p),A(!1)});const{data:{subscription:h}}=Z.auth.onAuthStateChange(async(p,w)=>{if(console.log("Changement d'authentification détecté:",p,w),a(w),p!=="SIGNED_IN"){if(w!=null&&w.user)try{const y=await td(w.user);r(y)}catch(y){console.error("Erreur lors du mappage de l'utilisateur après changement d'authentification:",y)}else r(null);A(!1)}});return()=>{h.unsubscribe()}},[]);const u=async(h,p)=>{A(!0),console.log("Tentative de connexion avec:",{email:h});try{console.log("Appel à supabase.auth.signInWithPassword");const{data:w,error:y}=await Z.auth.signInWithPassword({email:h,password:p});if(console.log("Réponse de signInWithPassword:",{data:w,error:y}),y)throw console.error("Erreur d'authentification:",y),A(!1),y;console.log("Authentification réussie, utilisateur:",w.user);try{const C=await td(w.user);r(C),console.log("Utilisateur mis à jour manuellement:",C)}catch(C){console.error("Erreur lors de la récupération du profil:",C);const b={id:w.user.id,email:w.user.email||"",phoneNumber:"",firstName:"",lastName:"",role:"client",createdAt:new Date().toISOString()};r(b),console.log("Utilisateur par défaut utilisé:",b)}finally{A(!1)}}catch(w){throw console.error("Exception lors de la connexion:",w),A(!1),w}},g=async(h,p)=>{A(!0);try{const{data:w,error:y}=await Z.auth.signUp({email:h.email||"",password:p});if(y||!w.user)throw y||new Error("Échec de la création du compte");const{error:C}=await Z.from("profiles").insert({id:w.user.id,email:h.email||"",phone:h.phoneNumber||null,first_name:h.firstName||"",last_name:h.lastName||"",role:h.role||"client",created_at:new Date().toISOString()});if(C)throw console.error("Erreur lors de la création du profil:",C),C}catch(w){throw A(!1),w}},f=async()=>{try{await Z.auth.signOut()}catch(h){throw console.error("Erreur lors de la déconnexion:",h),h}};return o.jsx(Jy.Provider,{value:{user:t,loading:n,login:u,register:g,logout:f,isAuthenticated:!!t},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ee=(e,t)=>{const r=H.forwardRef(({color:n="currentColor",size:A=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:g="",children:f,...h},p)=>H.createElement("svg",{ref:p,...X8,width:A,height:A,stroke:n,strokeWidth:u?Number(a)*24/Number(A):a,className:["lucide",`lucide-${q8(e)}`,g].join(" "),...h},[...t.map(([w,y])=>H.createElement(w,y)),...Array.isArray(f)?f:[f]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Ee("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Ee("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Ee("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=Ee("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=Ee("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Ee("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Ee("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Ee("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Ee("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Ee("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Ee("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Ee("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=Ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Ee("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Ee("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Ee("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Ee("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=Ee("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Ee("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=Ee("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Ee("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Ee("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=Ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=Ee("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Ee("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Ee("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=Ee("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Ee("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Ee("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Ee("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=Ee("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=Ee("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),he=({children:e,variant:t="primary",size:r="md",loading:n=!1,icon:A,iconPosition:a="left",fullWidth:u=!1,className:g="",disabled:f,...h})=>{const p="inline-flex items-center justify-center font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed",w={primary:"bg-primary text-white hover:bg-primary-dark focus:ring-primary",secondary:"bg-secondary text-white hover:bg-secondary-dark focus:ring-secondary",success:"bg-success text-white hover:bg-success/90 focus:ring-success",warning:"bg-warning text-white hover:bg-warning/90 focus:ring-warning",error:"bg-error text-white hover:bg-error/90 focus:ring-error",outline:"bg-transparent border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},y={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-4 py-2 text-sm rounded-md",lg:"px-6 py-2.5 text-base rounded-lg"},C=u?"w-full":"";return o.jsx("button",{className:`${p} ${w[t]} ${y[r]} ${C} ${g}`,disabled:f||n,...h,children:n?o.jsxs(o.Fragment,{children:[o.jsx(qo,{className:"w-4 h-4 mr-2 animate-spin"}),e]}):o.jsxs(o.Fragment,{children:[A&&a==="left"&&o.jsx("span",{className:"mr-2",children:A}),e,A&&a==="right"&&o.jsx("span",{className:"ml-2",children:A})]})})},En={async getUnreadCount(e){try{const{count:t,error:r}=await Z.from("notifications").select("id",{count:"exact"}).eq("user_id",e).eq("is_read",!1);return r?(console.error("Erreur lors du comptage des notifications non lues:",r),0):t||0}catch(t){return console.error("Erreur lors du comptage des notifications non lues:",t),0}},subscribeToNotifications(e,t){const r=Z.channel(`user-notifications:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e}`},async n=>{var A,a;try{const{data:u,error:g}=await Z.from("notifications").select(`
              *,
              repair:repair_requests(id, brand, model, status_id, status:repair_statuses(name, label))
            `).eq("id",n.new.id).single();if(g)throw g;const f={id:u.id,userId:u.user_id,title:u.title,message:u.message,type:u.type,relatedId:u.related_id,isRead:u.is_read,timestamp:u.created_at,repairInfo:u.repair?{id:u.repair.id,brand:u.repair.brand,model:u.repair.model,statusId:u.repair.status_id,statusName:(A=u.repair.status)==null?void 0:A.name,statusLabel:(a=u.repair.status)==null?void 0:a.label}:void 0};t(f),this.playNotificationSound(),document.visibilityState!=="visible"&&this.showDesktopNotification(f)}catch(u){console.error("Erreur lors du traitement de la notification:",u)}}).subscribe();return()=>{Z.removeChannel(r)}},async markAsRead(e){try{const{error:t}=await Z.from("notifications").update({is_read:!0}).eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Erreur lors du marquage de la notification comme lue:",t),!1}},async markAllAsRead(e){try{const{error:t}=await Z.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1);if(t)throw t;return!0}catch(t){return console.error("Erreur lors du marquage de toutes les notifications comme lues:",t),!1}},async deleteNotification(e){try{const{error:t}=await Z.from("notifications").delete().eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Erreur lors de la suppression de la notification:",t),!1}},async getUnreadNotifications(e){try{const{data:t,error:r}=await Z.from("notifications").select("*").eq("user_id",e).eq("is_read",!1).order("created_at",{ascending:!1});return r?(console.error("Erreur lors de la récupération des notifications non lues:",r),[]):(t||[]).map(n=>({id:n.id,userId:n.user_id,title:n.title,message:n.message,type:n.type,relatedId:n.related_id,isRead:n.is_read,timestamp:n.created_at}))}catch(t){return console.error("Erreur lors de la récupération des notifications non lues:",t),[]}},async getAllNotifications(e,t=50){try{const{data:r,error:n}=await Z.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Erreur lors de la récupération des notifications:",n),[]):(r||[]).map(A=>({id:A.id,userId:A.user_id,title:A.title,message:A.message,type:A.type,relatedId:A.related_id,isRead:A.is_read,timestamp:A.created_at}))}catch(r){return console.error("Erreur lors de la récupération des notifications:",r),[]}},async createNotification(e){try{const{data:t,error:r}=await Z.from("notifications").insert({user_id:e.userId,title:e.title,message:e.message,type:e.type,related_id:e.relatedId,is_read:e.isRead,created_at:new Date().toISOString()}).select().single();if(r)throw r;return{id:t.id,userId:t.user_id,title:t.title,message:t.message,type:t.type,relatedId:t.related_id,isRead:t.is_read,timestamp:t.created_at,repairInfo:e.repairInfo}}catch(t){return console.error("Erreur lors de la création de la notification:",t),null}},playNotificationSound(){try{const e=new Audio("/sounds/notification.mp3");e.volume=.5,e.play().catch(t=>{console.log("Impossible de jouer le son de notification:",t)})}catch(e){console.error("Erreur lors de la lecture du son de notification:",e)}},showDesktopNotification(e){if("Notification"in window&&Notification.permission==="granted"){const t=e.title||"PC Relais",r={body:e.message,icon:"/logo192.png",tag:`notification-${e.id}`,data:{url:e.repairInfo?`/repair/${e.repairInfo.id}`:"/",notificationId:e.id}},n=new Notification(t,r);n.onclick=function(){window.focus(),this.data&&this.data.url&&(window.location.href=this.data.url),this.close()}}}},Jt=({children:e,variant:t="default",size:r="md",className:n=""})=>{const A={default:"bg-gray-100 text-gray-800",primary:"bg-primary/10 text-primary",secondary:"bg-secondary/10 text-secondary",success:"bg-success/10 text-success",warning:"bg-warning/10 text-warning",error:"bg-error/10 text-error"},a={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"};return o.jsx("span",{className:`inline-flex items-center rounded-full font-medium ${A[t]} ${a[r]} ${n}`,children:e})},N_=({onNotificationRead:e,className:t})=>{const{user:r}=lt(),[n,A]=H.useState([]),[a,u]=H.useState(!1),[g,f]=H.useState(!0),h=H.useRef(null);H.useEffect(()=>{(async()=>{if(r)try{f(!0);const _=await En.getUnreadNotifications(r.id);A(_)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{f(!1)}})();const v=En.subscribeToNotifications((r==null?void 0:r.id)||"",_=>{A(S=>[_,...S])});return()=>{v()}},[r]),H.useEffect(()=>{const N=v=>{h.current&&!h.current.contains(v.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const p=async(N,v)=>{v.stopPropagation();try{await En.markAsRead(N)&&(A(S=>S.map(j=>j.id===N?{...j,isRead:!0}:j)),e&&e())}catch(_){console.error("Erreur lors du marquage de la notification comme lue:",_)}},w=async(N,v)=>{v.stopPropagation();try{await En.deleteNotification(N)&&A(S=>S.filter(j=>j.id!==N))}catch(_){console.error("Erreur lors de la suppression de la notification:",_)}},y=async()=>{if(r)try{if(await En.markAllAsRead(r.id)){const v=n.filter(_=>!_.isRead).length;if(A(_=>_.map(S=>({...S,isRead:!0}))),e&&v>0)for(let _=0;_<v;_++)e()}}catch(N){console.error("Erreur lors du marquage de toutes les notifications comme lues:",N)}},C=N=>{switch(N){case"info":return o.jsx(Fs,{className:"h-5 w-5 text-blue-500"});case"warning":return o.jsx(wo,{className:"h-5 w-5 text-amber-500"});case"success":return o.jsx(Tr,{className:"h-5 w-5 text-green-500"});case"error":return o.jsx(wo,{className:"h-5 w-5 text-red-500"});case"repair":return o.jsx(Gn,{className:"h-5 w-5 text-purple-500"});case"message":return o.jsx(wa,{className:"h-5 w-5 text-primary"});default:return o.jsx(Fs,{className:"h-5 w-5 text-gray-500"})}},b=N=>{if(!N.relatedId)return"/";const v=N.type;return v==="message"||v==="chat"?`/chat/${N.relatedId}`:v==="repair"||N.repairInfo?`/repair/${N.relatedId}`:["info","success","warning","error"].includes(v)?"/notifications":"/"},F=N=>{const v=new Date(N),S=new Date().getTime()-v.getTime(),j=Math.floor(S/6e4),Q=Math.floor(j/60),D=Math.floor(Q/24);return j<1?"À l'instant":j<60?`Il y a ${j} minute${j>1?"s":""}`:Q<24?`Il y a ${Q} heure${Q>1?"s":""}`:D<7?`Il y a ${D} jour${D>1?"s":""}`:v.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},I=n.filter(N=>!N.isRead).length;return o.jsxs("div",{className:`relative ${t}`,ref:h,children:[o.jsxs("button",{className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",onClick:()=>u(!a),"aria-label":"Notifications",children:[o.jsx(Wo,{className:"h-6 w-6 text-gray-600"}),I>0&&o.jsx("span",{className:"absolute top-0 right-0 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-xs text-white",children:I>9?"9+":I})]}),a&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 md:w-96 bg-white rounded-lg shadow-lg overflow-hidden z-50",children:[o.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium",children:"Notifications"}),I>0&&o.jsx(he,{variant:"ghost",size:"sm",onClick:y,children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Au,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"text-xs",children:"Tout marquer comme lu"})]})})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:g?o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Chargement des notifications..."})]}):n.length===0?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(Wo,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Aucune notification"})]}):o.jsx("div",{children:n.map(N=>o.jsxs("div",{className:`p-3 border-b hover:bg-gray-50 transition-colors flex ${N.isRead?"":"bg-blue-50"}`,children:[o.jsx("div",{className:"flex-shrink-0 mr-3",children:C(N.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:N.title}),o.jsx("span",{className:"text-xs text-gray-500 ml-2 whitespace-nowrap",children:F(N.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.message}),N.repairInfo&&o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(Jt,{variant:N.repairInfo.statusName==="completed"?"success":N.repairInfo.statusName==="inRepair"?"primary":N.repairInfo.statusName==="cancelled"?"error":"warning",className:"mr-2",children:N.repairInfo.statusLabel}),o.jsxs("span",{className:"text-xs text-gray-500 truncate",children:[N.repairInfo.brand," ",N.repairInfo.model]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[N.relatedId&&o.jsx(Se,{to:b(N),className:"text-xs text-primary hover:underline",onClick:()=>u(!1),children:"Voir les détails"}),o.jsxs("div",{className:"flex space-x-2",children:[!N.isRead&&o.jsx("button",{className:"text-xs text-gray-500 hover:text-primary",onClick:v=>p(N.id,v),title:"Marquer comme lu",children:o.jsx(Au,{className:"h-4 w-4"})}),o.jsx("button",{className:"text-xs text-gray-500 hover:text-red-500",onClick:v=>w(N.id,v),title:"Supprimer",children:o.jsx(xA,{className:"h-4 w-4"})})]})]})]})]},N.id))})}),o.jsx("div",{className:"p-2 border-t bg-gray-50",children:o.jsx(Se,{to:"/notifications",className:"block text-center text-sm text-primary hover:underline p-1",onClick:()=>u(!1),children:"Voir toutes les notifications"})})]})]})},F_=()=>{const{user:e,logout:t,isAuthenticated:r}=lt(),n=kt(),[A,a]=H.useState(!1),[u,g]=H.useState(!1),[f,h]=H.useState(0),p=()=>{a(!A)},w=()=>{g(!u)},y=async()=>{await t(),n("/login"),g(!1)};return H.useEffect(()=>{if(!e)return;const C=async()=>{try{const F=await En.getUnreadCount(e.id);h(F)}catch(F){console.error("Erreur lors du chargement des notifications non lues:",F)}};C();const b=En.subscribeToNotifications(e.id,()=>{C()});return()=>{b()}},[e]),o.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:[o.jsx("div",{className:"container-app",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(Se,{to:"/",className:"flex items-center gap-2",children:[o.jsx(yo,{className:"h-6 w-6 text-primary"}),o.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"PC Relais"})]})}),o.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-8",children:[o.jsx(Se,{to:"/",className:"text-gray-700 hover:text-primary px-2 py-1 text-sm font-medium transition-colors",children:"Accueil"}),o.jsx(Se,{to:"/services",className:"text-gray-700 hover:text-primary px-2 py-1 text-sm font-medium transition-colors",children:"Services"}),o.jsx(Se,{to:"/about",className:"text-gray-700 hover:text-primary px-2 py-1 text-sm font-medium transition-colors",children:"À propos"}),o.jsx(Se,{to:"/contact",className:"text-gray-700 hover:text-primary px-2 py-1 text-sm font-medium transition-colors",children:"Contact"})]}),o.jsx("div",{className:"hidden md:flex md:items-center md:space-x-4",children:r?o.jsxs("div",{className:"relative flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(N_,{onNotificationRead:()=>h(C=>Math.max(0,C-1)),className:"text-gray-600 hover:text-primary p-1 rounded-full transition-colors"}),f>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:f>9?"9+":f})]}),o.jsxs("button",{className:"flex items-center text-gray-700 hover:text-primary transition-colors",onClick:w,children:[o.jsx("span",{className:"mr-2 text-sm font-medium",children:e==null?void 0:e.firstName}),o.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center",children:o.jsx(ca,{className:"h-4 w-4"})})]}),u&&o.jsx("div",{className:"absolute right-0 top-10 w-48 bg-white rounded-md shadow-lg border border-gray-100 animate-fade-in",children:o.jsxs("div",{className:"py-1",children:[o.jsx(Se,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>g(!1),children:"Mon profil"}),o.jsx(Se,{to:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>g(!1),children:"Tableau de bord"}),((e==null?void 0:e.role)==="relayPoint"||(e==null?void 0:e.role)==="admin")&&o.jsx(Se,{to:"/admin/relay-points",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>g(!1),children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Gestion des points relais"]})}),o.jsxs("button",{onClick:y,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[o.jsx(sp,{className:"h-4 w-4 mr-2"})," Se déconnecter"]})]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Se,{to:"/login",children:o.jsx(he,{variant:"outline",size:"sm",children:"Se connecter"})}),o.jsx(Se,{to:"/register",children:o.jsx(he,{variant:"primary",size:"sm",children:"S'inscrire"})})]})}),o.jsxs("div",{className:"md:hidden flex items-center space-x-3",children:[r&&o.jsx("div",{className:"relative",children:o.jsxs(Se,{to:"/notifications",className:"text-gray-600 hover:text-primary p-1 rounded-full transition-colors",children:[o.jsx(Wo,{className:"h-5 w-5"}),f>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:f>9?"9+":f})]})}),o.jsx("button",{onClick:p,className:"text-gray-700 p-1 rounded-md focus:outline-none",children:A?o.jsx(xA,{className:"h-6 w-6"}):o.jsx(d_,{className:"h-6 w-6"})})]})]})}),A&&o.jsx("div",{className:"md:hidden bg-white border-t border-gray-100 animate-fade-in",children:o.jsxs("div",{className:"pt-2 pb-4 space-y-1 px-4",children:[o.jsx(Se,{to:"/",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"Accueil"}),o.jsx(Se,{to:"/services",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"Services"}),o.jsx(Se,{to:"/about",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"À propos"}),o.jsx(Se,{to:"/contact",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"Contact"}),r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-gray-200 my-2"}),o.jsx(Se,{to:"/profile",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"Mon profil"}),o.jsx(Se,{to:"/dashboard",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:"Tableau de bord"}),((e==null?void 0:e.role)==="relayPoint"||(e==null?void 0:e.role)==="admin")&&o.jsx(Se,{to:"/admin/relay-points",className:"block py-2 text-base text-gray-700",onClick:()=>a(!1),children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Gestion des points relais"]})}),o.jsxs("button",{onClick:y,className:"flex items-center w-full py-2 text-base text-gray-700",children:[o.jsx(sp,{className:"h-4 w-4 mr-2"})," Se déconnecter"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-gray-200 my-2"}),o.jsxs("div",{className:"pt-2 flex flex-col space-y-2",children:[o.jsx(Se,{to:"/login",className:"w-full",onClick:()=>a(!1),children:o.jsx(he,{variant:"outline",fullWidth:!0,children:"Se connecter"})}),o.jsx(Se,{to:"/register",className:"w-full",onClick:()=>a(!1),children:o.jsx(he,{variant:"primary",fullWidth:!0,children:"S'inscrire"})})]})]})]})})]})},I_=()=>o.jsx("footer",{className:"bg-gray-900 text-white pt-12 pb-8",children:o.jsxs("div",{className:"container-app",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"À propos de PC Relais"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"PC Relais révolutionne la réparation informatique en connectant les particuliers avec des points relais partenaires pour simplifier le dépôt et la récupération de matériel informatique."}),o.jsxs("div",{className:"flex space-x-4 mt-6",children:[o.jsx("a",{href:"https://facebook.com",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(a_,{className:"h-5 w-5"})}),o.jsx("a",{href:"https://twitter.com",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(b_,{className:"h-5 w-5"})}),o.jsx("a",{href:"https://instagram.com",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(l_,{className:"h-5 w-5"})}),o.jsx("a",{href:"https://linkedin.com",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(u_,{className:"h-5 w-5"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens utiles"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Se,{to:"/services",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Nos services"})}),o.jsx("li",{children:o.jsx(Se,{to:"/find-relays",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Trouver un point relais"})}),o.jsx("li",{children:o.jsx(Se,{to:"/pricing",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Tarifs"})}),o.jsx("li",{children:o.jsx(Se,{to:"/faq",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"FAQ"})}),o.jsx("li",{children:o.jsx(Se,{to:"/blog",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Blog"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations légales"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Se,{to:"/terms",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Conditions d'utilisation"})}),o.jsx("li",{children:o.jsx(Se,{to:"/privacy",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Politique de confidentialité"})}),o.jsx("li",{children:o.jsx(Se,{to:"/cookies",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Gestion des cookies"})}),o.jsx("li",{children:o.jsx(Se,{to:"/legal",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Mentions légales"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),o.jsxs("ul",{className:"space-y-4",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx(ol,{className:"h-5 w-5 text-primary mr-3 mt-0.5"}),o.jsx("span",{className:"text-gray-400 text-sm",children:"contact@pcrelais.fr"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Wu,{className:"h-5 w-5 text-primary mr-3 mt-0.5"}),o.jsx("span",{className:"text-gray-400 text-sm",children:"01 23 45 67 89"})]})]})]})]}),o.jsx("div",{className:"border-t border-gray-800 mt-10 pt-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-gray-500 text-sm",children:["© ",new Date().getFullYear()," PC Relais. Tous droits réservés."]}),o.jsx("div",{className:"mt-4 md:mt-0",children:o.jsx("div",{className:"bg-gray-700 h-6 w-32 rounded flex items-center justify-center text-xs text-gray-400",children:"Moyens de paiement"})})]})})]})}),Nr=({children:e})=>o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx(F_,{}),o.jsx("main",{className:"flex-grow",children:e}),o.jsx(I_,{})]}),J=({children:e,className:t="",onClick:r,hoverable:n=!1})=>{const A=n?"cursor-pointer transition-all duration-200 hover:shadow-md hover:translate-y-[-2px]":"";return o.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden ${A} ${t}`,onClick:r,children:e})},S_=({children:e,className:t=""})=>o.jsx("div",{className:`px-6 py-4 border-b border-gray-100 ${t}`,children:e}),U_=({children:e,className:t=""})=>o.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${t}`,children:e}),Q_=({children:e,className:t=""})=>o.jsx("div",{className:`px-6 py-4 ${t}`,children:e}),D_=({children:e,className:t=""})=>o.jsx("div",{className:`px-6 py-4 bg-gray-50 border-t border-gray-100 ${t}`,children:e});J.Header=S_;J.Title=U_;J.Content=Q_;J.Footer=D_;const T_=()=>{const e=[{icon:o.jsx(c_,{className:"h-10 w-10 text-primary"}),title:"Ordinateurs portables",description:"Réparation d'ordinateurs portables toutes marques, problèmes logiciels ou matériels."},{icon:o.jsx(h_,{className:"h-10 w-10 text-primary"}),title:"Ordinateurs de bureau",description:"Dépannage, mise à niveau et réparation pour tous les PC fixes."},{icon:o.jsx(B_,{className:"h-10 w-10 text-primary"}),title:"Smartphones et tablettes",description:"Réparation d'écrans, batteries et autres problèmes sur vos appareils mobiles."},{icon:o.jsx(n_,{className:"h-10 w-10 text-primary"}),title:"Pièces et composants",description:"Remplacement de pièces défectueuses et mise à niveau de composants."}],t=[{icon:o.jsx(Mr,{className:"h-8 w-8 text-primary"}),title:"Proximité",description:"Un réseau de points relais proches de chez vous pour déposer et récupérer vos appareils."},{icon:o.jsx(Gn,{className:"h-8 w-8 text-primary"}),title:"Rapidité",description:"Réparations effectuées dans les meilleurs délais par nos techniciens experts."},{icon:o.jsx(y_,{className:"h-8 w-8 text-primary"}),title:"Fiabilité",description:"Garantie sur toutes nos réparations et utilisation de pièces de qualité."},{icon:o.jsx(_c,{className:"h-8 w-8 text-primary"}),title:"Support",description:"Assistance et suivi en ligne à chaque étape de la réparation."}];return o.jsxs(Nr,{children:[o.jsx("section",{className:"bg-gradient-to-br from-primary-dark via-primary to-primary-light text-white py-16 lg:py-24",children:o.jsx("div",{className:"container-app",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-4",children:["Réparez votre ordinateur ",o.jsx("span",{className:"text-secondary-light",children:"simplement et rapidement"})]}),o.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8",children:"Déposez votre appareil dans un point relais près de chez vous. Nos experts s'occupent du reste !"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Se,{to:"/request-repair",children:o.jsx(he,{variant:"secondary",size:"lg",children:"Démarrer une réparation"})}),o.jsx(Se,{to:"/find-relays",children:o.jsx(he,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white/10",children:"Trouver un point relais"})})]})]}),o.jsx("div",{className:"flex justify-center lg:justify-end",children:o.jsx("img",{src:"https://images.pexels.com/photos/5452255/pexels-photo-5452255.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Réparation d'ordinateur",className:"rounded-lg shadow-xl max-w-full h-auto animate-slide-in-up"})})]})})}),o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container-app",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Comment ça marche ?"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"PC Relais simplifie vos réparations informatiques en 3 étapes simples"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center px-6 relative",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-primary text-white text-xl font-bold mb-4",children:"1"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Décrivez votre problème"}),o.jsx("p",{className:"text-gray-600",children:"Expliquez-nous ce qui ne va pas avec votre appareil. Notre IA vous proposera un pré-diagnostic."})]}),o.jsxs("div",{className:"text-center px-6 relative",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-primary text-white text-xl font-bold mb-4",children:"2"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Déposez votre appareil"}),o.jsx("p",{className:"text-gray-600",children:"Choisissez un point relais près de chez vous et déposez-y votre appareil quand cela vous convient."})]}),o.jsxs("div",{className:"text-center px-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-primary text-white text-xl font-bold mb-4",children:"3"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Récupérez-le réparé"}),o.jsx("p",{className:"text-gray-600",children:"Suivez la réparation en temps réel. Une fois terminé, récupérez votre appareil au même point relais."})]})]}),o.jsx("div",{className:"text-center mt-12",children:o.jsx(Se,{to:"/request-repair",children:o.jsx(he,{variant:"primary",size:"lg",children:"Faire réparer mon appareil"})})})]})}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container-app",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Nos services de réparation"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Des solutions pour tous vos appareils électroniques"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((r,n)=>o.jsx(J,{hoverable:!0,className:"h-full",children:o.jsxs(J.Content,{className:"text-center p-6",children:[o.jsx("div",{className:"flex justify-center mb-4",children:r.icon}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),o.jsx("p",{className:"text-gray-600",children:r.description})]})},n))})]})}),o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container-app",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ce que disent nos clients"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Des milliers d'utilisateurs satisfaits"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsx(J,{className:"h-full",children:o.jsxs(J.Content,{className:"p-6",children:[o.jsx("div",{className:"flex items-center space-x-1 mb-4",children:[...Array(5)].map((r,n)=>o.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),o.jsx("p",{className:"text-gray-600 mb-4",children:`"Service exceptionnel ! J'ai déposé mon ordinateur portable qui ne démarrait plus, et trois jours plus tard, il fonctionnait parfaitement. La communication était excellente tout au long du processus."`}),o.jsxs("div",{className:"flex items-center mt-6",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-semibold",children:"SD"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h4",{className:"font-semibold",children:"Sophie Dupont"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Lyon"})]})]})]})}),o.jsx(J,{className:"h-full",children:o.jsxs(J.Content,{className:"p-6",children:[o.jsx("div",{className:"flex items-center space-x-1 mb-4",children:[...Array(5)].map((r,n)=>o.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),o.jsx("p",{className:"text-gray-600 mb-4",children:'"Très pratique de pouvoir déposer mon smartphone dans un point relais près de chez moi ! La réparation a été faite rapidement et le prix était raisonnable. Je recommande vivement."'}),o.jsxs("div",{className:"flex items-center mt-6",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-semibold",children:"TM"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h4",{className:"font-semibold",children:"Thomas Martin"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Paris"})]})]})]})}),o.jsx(J,{className:"h-full",children:o.jsxs(J.Content,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-1 mb-4",children:[[...Array(4)].map((r,n)=>o.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n)),o.jsx("svg",{className:"w-5 h-5 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:`"J'apprécie beaucoup le système de suivi en ligne qui permet de connaître l'état de la réparation en temps réel. Le service client a été très réactif quand j'avais des questions."`}),o.jsxs("div",{className:"flex items-center mt-6",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-semibold",children:"LC"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h4",{className:"font-semibold",children:"Laura Clement"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Nantes"})]})]})]})})]})]})}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container-app",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Pourquoi choisir PC Relais ?"}),o.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Des avantages uniques pour une expérience client optimale"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((r,n)=>o.jsxs("div",{className:"flex flex-col items-center text-center px-4",children:[o.jsx("div",{className:"bg-primary/10 p-4 rounded-full mb-4",children:r.icon}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),o.jsx("p",{className:"text-gray-600",children:r.description})]},n))})]})}),o.jsx("section",{className:"py-16 bg-primary",children:o.jsx("div",{className:"container-app",children:o.jsxs("div",{className:"text-center text-white max-w-3xl mx-auto",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Prêt à réparer votre appareil ?"}),o.jsx("p",{className:"text-xl opacity-90 mb-8",children:"Commencez dès maintenant et bénéficiez d'un service rapide, professionnel et à proximité de chez vous."}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[o.jsx(Se,{to:"/request-repair",children:o.jsx(he,{variant:"secondary",size:"lg",children:"Démarrer une réparation"})}),o.jsx(Se,{to:"/contact",children:o.jsx(he,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white/10",children:"Nous contacter"})})]})]})})})]})},ur=H.forwardRef(({label:e,error:t,helperText:r,fullWidth:n=!1,leftIcon:A,rightIcon:a,className:u="",id:g,...f},h)=>{const p=g||`input-${(e==null?void 0:e.toLowerCase().replace(/\s+/g,"-"))||Math.random().toString(36).substr(2,9)}`,w="block w-full rounded-md border bg-white px-3 py-2 text-sm shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary/20",y=t?"border-error focus:border-error":"border-gray-300 focus:border-primary",C=A?"pl-10":"",b=a?"pr-10":"",F=n?"w-full":"";return o.jsxs("div",{className:`${F} ${u}`,children:[e&&o.jsx("label",{htmlFor:p,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),o.jsxs("div",{className:"relative",children:[A&&o.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500",children:A}),o.jsx("input",{ref:h,id:p,className:`${w} ${y} ${C} ${b}`,"aria-invalid":!!t,"aria-describedby":t?`${p}-error`:r?`${p}-helper`:void 0,...f}),a&&o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500",children:a})]}),t&&o.jsx("p",{id:`${p}-error`,className:"mt-1 text-xs text-error",children:t}),r&&!t&&o.jsx("p",{id:`${p}-helper`,className:"mt-1 text-xs text-gray-500",children:r})]})});ur.displayName="Input";const R_=()=>{const e=kt(),{login:t}=lt(),[r,n]=H.useState(""),[A,a]=H.useState(""),[u,g]=H.useState(!1),[f,h]=H.useState(""),p=async w=>{var y,C;w.preventDefault(),h(""),g(!0);try{await t(r,A);const F=new URLSearchParams(window.location.search).get("redirect");e(F?`/${F}`:"/dashboard")}catch(b){(y=b==null?void 0:b.message)!=null&&y.includes("Invalid login credentials")?h("Email ou mot de passe incorrect"):(C=b==null?void 0:b.message)!=null&&C.includes("Email not confirmed")?h("Veuillez confirmer votre email avant de vous connecter"):h(b instanceof Error?b.message:"Une erreur est survenue"),console.error("Erreur de connexion:",b)}finally{g(!1)}};return o.jsx(Nr,{children:o.jsxs("div",{className:"py-12 px-4 sm:px-6 lg:px-8 max-w-md mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Connexion"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Accédez à votre compte PC Relais"})]}),o.jsx(J,{children:o.jsxs(J.Content,{className:"p-6",children:[f&&o.jsx("div",{className:"bg-error/10 text-error p-3 rounded-md mb-4 text-sm",children:f}),o.jsxs("form",{onSubmit:p,className:"space-y-6",children:[o.jsx(ur,{label:"Adresse email",type:"email",id:"email",value:r,onChange:w=>n(w.target.value),required:!0,autoComplete:"email",leftIcon:o.jsx(ol,{className:"h-5 w-5"}),placeholder:"nom@exemple.fr",fullWidth:!0}),o.jsx(ur,{label:"Mot de passe",type:"password",id:"password",value:A,onChange:w=>a(w.target.value),required:!0,autoComplete:"current-password",leftIcon:o.jsx(xf,{className:"h-5 w-5"}),fullWidth:!0}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary border-gray-300 rounded"}),o.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Se souvenir de moi"})]}),o.jsx(Se,{to:"/forgot-password",className:"text-sm text-primary hover:text-primary-dark",children:"Mot de passe oublié ?"})]}),o.jsx(he,{type:"submit",variant:"primary",size:"lg",loading:u,fullWidth:!0,icon:o.jsx(eB,{className:"h-5 w-5"}),iconPosition:"right",children:"Se connecter"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("span",{className:"text-sm text-gray-600",children:["Vous n'avez pas de compte ?"," ",o.jsx(Se,{to:"/register",className:"text-primary hover:text-primary-dark font-medium",children:"S'inscrire"})]})}),o.jsxs("div",{className:"relative mt-8",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-200"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Ou connectez-vous en tant que"})})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[o.jsx("div",{children:o.jsx(he,{type:"button",variant:"outline",onClick:()=>{n("client@pcrelais.fr"),a("password123")},fullWidth:!0,children:"Démo Client"})}),o.jsx("div",{children:o.jsx(he,{type:"button",variant:"outline",onClick:()=>{n("relais@pcrelais.fr"),a("password123")},fullWidth:!0,children:"Démo Point Relais"})}),o.jsx("div",{children:o.jsx(he,{type:"button",variant:"outline",onClick:()=>{n("tech@pcrelais.fr"),a("password123")},fullWidth:!0,children:"Démo Technicien"})}),o.jsx("div",{children:o.jsx(he,{type:"button",variant:"outline",onClick:()=>{n("admin@pcrelais.fr"),a("password123")},fullWidth:!0,children:"Démo Admin"})})]})]})})]})})},j_=()=>{const e=kt(),{register:t}=lt(),[r,n]=H.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",role:"client"}),[A,a]=H.useState(!1),[u,g]=H.useState(""),f=p=>{const{name:w,value:y}=p.target;n(C=>({...C,[w]:y}))},h=async p=>{var w,y;if(p.preventDefault(),g(""),r.password!==r.confirmPassword){g("Les mots de passe ne correspondent pas");return}if(r.password.length<6){g("Le mot de passe doit contenir au moins 6 caractères");return}if(!r.email||!r.firstName||!r.lastName){g("Veuillez remplir tous les champs obligatoires");return}a(!0);try{const{confirmPassword:C,...b}=r;await t(b,r.password);const I=new URLSearchParams(window.location.search).get("redirect");e(I?`/${I}`:"/dashboard")}catch(C){(w=C==null?void 0:C.message)!=null&&w.includes("already registered")?g("Cette adresse email est déjà utilisée"):(y=C==null?void 0:C.message)!=null&&y.includes("weak password")?g("Le mot de passe est trop faible. Utilisez une combinaison de lettres, chiffres et caractères spéciaux."):g(C instanceof Error?C.message:"Une erreur est survenue lors de l'inscription"),console.error("Erreur d'inscription:",C)}finally{a(!1)}};return o.jsx(Nr,{children:o.jsxs("div",{className:"py-12 px-4 sm:px-6 lg:px-8 max-w-md mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Créer un compte"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Rejoignez PC Relais pour bénéficier de nos services"})]}),o.jsx(J,{children:o.jsxs(J.Content,{className:"p-6",children:[u&&o.jsx("div",{className:"bg-error/10 text-error p-3 rounded-md mb-4 text-sm",children:u}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ur,{label:"Prénom",type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:f,required:!0,autoComplete:"given-name",leftIcon:o.jsx(ca,{className:"h-5 w-5"}),fullWidth:!0}),o.jsx(ur,{label:"Nom",type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:f,required:!0,autoComplete:"family-name",leftIcon:o.jsx(ca,{className:"h-5 w-5"}),fullWidth:!0})]}),o.jsx(ur,{label:"Adresse email",type:"email",id:"email",name:"email",value:r.email,onChange:f,required:!0,autoComplete:"email",leftIcon:o.jsx(ol,{className:"h-5 w-5"}),placeholder:"nom@exemple.fr",fullWidth:!0}),o.jsx(ur,{label:"Numéro de téléphone",type:"tel",id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:f,autoComplete:"tel",leftIcon:o.jsx(Wu,{className:"h-5 w-5"}),placeholder:"06 12 34 56 78",fullWidth:!0}),o.jsx(ur,{label:"Mot de passe",type:"password",id:"password",name:"password",value:r.password,onChange:f,required:!0,autoComplete:"new-password",leftIcon:o.jsx(xf,{className:"h-5 w-5"}),helperText:"8 caractères minimum, avec majuscules, chiffres et caractères spéciaux",fullWidth:!0}),o.jsx(ur,{label:"Confirmer le mot de passe",type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:f,required:!0,autoComplete:"new-password",leftIcon:o.jsx(xf,{className:"h-5 w-5"}),fullWidth:!0}),o.jsx("div",{className:"mt-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["J'accepte les"," ",o.jsx(Se,{to:"/terms",className:"text-primary hover:text-primary-dark",children:"conditions d'utilisation"})," ","et la"," ",o.jsx(Se,{to:"/privacy",className:"text-primary hover:text-primary-dark",children:"politique de confidentialité"}),o.jsx("span",{className:"block mt-1 text-xs text-gray-500",children:"Note: Avec Supabase, vous recevrez un email de confirmation pour activer votre compte."})]})]})}),o.jsx(he,{type:"submit",variant:"primary",size:"lg",loading:A,fullWidth:!0,icon:o.jsx(eB,{className:"h-5 w-5"}),iconPosition:"right",children:"Créer mon compte"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("span",{className:"text-sm text-gray-600",children:["Vous avez déjà un compte ?"," ",o.jsx(Se,{to:"/login",className:"text-primary hover:text-primary-dark font-medium",children:"Se connecter"})]})})]})})]})})},yi=e=>({id:e.id,clientId:e.client_id,deviceType:e.device_type,brand:e.brand,model:e.model,problemDescription:e.problem_description,statusId:e.status_id,preDiagnosis:e.pre_diagnosis,estimatedCost:e.estimated_cost,createdAt:e.created_at,updatedAt:e.updated_at,dropOffRelayId:e.drop_off_relay_id,pickupRelayId:e.pickup_relay_id,appointmentDate:e.appointment_date,technicianId:e.technician_id,notes:e.notes}),nd=e=>{const t={};return e.id!==void 0&&(t.id=e.id),e.clientId!==void 0&&(t.client_id=e.clientId),e.deviceType!==void 0&&(t.device_type=e.deviceType),e.brand!==void 0&&(t.brand=e.brand),e.model!==void 0&&(t.model=e.model),e.problemDescription!==void 0&&(t.problem_description=e.problemDescription),e.statusId!==void 0&&(t.status_id=e.statusId),e.preDiagnosis!==void 0&&(t.pre_diagnosis=e.preDiagnosis),e.estimatedCost!==void 0&&(t.estimated_cost=e.estimatedCost),e.createdAt!==void 0&&(t.created_at=e.createdAt),e.updatedAt!==void 0&&(t.updated_at=e.updatedAt),e.dropOffRelayId!==void 0&&(t.drop_off_relay_id=e.dropOffRelayId),e.pickupRelayId!==void 0&&(t.pickup_relay_id=e.pickupRelayId),e.appointmentDate!==void 0&&(t.appointment_date=e.appointmentDate),e.technicianId!==void 0&&(t.technician_id=e.technicianId),e.notes!==void 0&&(t.notes=e.notes),t},O_=e=>({id:e.id,name:e.name,label:e.label,description:e.description,color:e.color}),mf={async getClientRepairs(e){const{data:t,error:r}=await Z.from("repair_requests").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Erreur lors de la récupération des réparations:",r),r;return(t||[]).map(yi)},async getRepairById(e){try{console.log(`Tentative de récupération de la réparation ${e}`);const{data:t,error:r}=await Z.from("repair_requests").select("*").eq("id",e).maybeSingle();return r?(console.error(`Erreur lors de la récupération de la réparation ${e}:`,r),null):t?(console.log(`Réparation ${e} récupérée avec succès`),yi(t)):(console.log(`Aucune réparation trouvée avec l'ID ${e}`),null)}catch(t){return console.error(`Erreur inattendue lors de la récupération de la réparation ${e}:`,t),null}},async createRepair(e){const t=new Date().toISOString(),r="58644658-16d8-41f8-8aab-23b396987c21";console.log("Attribution automatique de la réparation au technicien:",r);let n;try{const{data:g,error:f}=await Z.from("repair_statuses").select("id").eq("code","WAITING_DIAGNOSTIC").single();f||!g?(console.error("Erreur lors de la récupération du statut WAITING_DIAGNOSTIC:",f),n=e.statusId):n=g.id}catch(g){console.error("Exception lors de la récupération du statut:",g),n=e.statusId}const A={...e,technicianId:r,statusId:n,created_at:t,updated_at:t};console.log("Création d'une nouvelle réparation avec les données:",nd(A));const{data:a,error:u}=await Z.from("repair_requests").insert(nd(A)).select().single();if(u)throw console.error("Erreur lors de la création de la réparation:",u),u;return console.log("Réparation créée avec succès:",a),yi(a)},async updateRepair(e,t){try{const{data:r,error:n}=await Z.from("repair_requests").select("id").eq("id",e).maybeSingle();if(n)throw console.error(`Erreur lors de la vérification de la réparation ${e}:`,n),n;if(!r)throw console.error(`La réparation avec l'ID ${e} n'existe pas`),new Error(`La réparation avec l'ID ${e} n'existe pas`);const A={...t,updated_at:new Date().toISOString()},{data:a,error:u}=await Z.from("repair_requests").update(nd(A)).eq("id",e).select().maybeSingle();if(u)throw console.error(`Erreur lors de la mise à jour de la réparation ${e}:`,u),u;if(!a)throw console.error(`Aucune donnée retournée après la mise à jour de la réparation ${e}`),new Error(`Aucune donnée retournée après la mise à jour de la réparation ${e}`);return yi(a)}catch(r){throw console.error(`Erreur lors de la mise à jour de la réparation ${e}:`,r),r}},async getRepairStatuses(){const{data:e,error:t}=await Z.from("repair_statuses").select("*").order("id");if(t)throw console.error("Erreur lors de la récupération des statuts de réparation:",t),t;return(e||[]).map(O_)},async updateRepairStatus(e,t){try{console.log(`Tentative de mise à jour du statut de la réparation ${e} vers ${t}`);let r=null;const{data:n,error:A}=await Z.from("repair_statuses").select("id").eq("code",t).maybeSingle();if(!A&&n)r=n.id,console.log(`Statut trouvé par code: ${r}`);else{console.log(`Recherche du statut par label: ${t}`);const{data:g,error:f}=await Z.from("repair_statuses").select("id").eq("label",t).maybeSingle();!f&&g&&(r=g.id,console.log(`Statut trouvé par label: ${r}`))}if(!r){const{data:g,error:f}=await Z.from("repair_statuses").select("id").or(`code.ilike.%${t}%,label.ilike.%${t}%`).maybeSingle();if(!f&&g)r=g.id,console.log(`Statut trouvé par recherche approximative: ${r}`);else throw console.error(`Statut de réparation '${t}' introuvable après plusieurs tentatives`),new Error(`Statut de réparation '${t}' introuvable`)}console.log(`Mise à jour de la réparation ${e} avec le statut ${r}`);const{error:a}=await Z.from("repair_requests").update({status_id:r,updated_at:new Date().toISOString()}).eq("id",e);if(a){console.error("Erreur lors de la mise à jour du statut:",a);const{data:g}=await Z.from("repair_requests").select("id").eq("id",e).maybeSingle();throw g?new Error(`Erreur lors de la mise à jour: ${a.message}`):new Error(`La réparation avec l'ID ${e} n'existe pas dans la base de données`)}const u=await this.getRepairById(e);if(!u){console.log(`La réparation ${e} a été mise à jour mais ne peut pas être récupérée`);const g={id:e,statusId:r,updatedAt:new Date().toISOString()};return console.log(`Statut de la réparation ${e} mis à jour avec succès vers ${t}`),g}return console.log(`Statut de la réparation ${e} mis à jour avec succès vers ${t}`),u}catch(r){throw console.error(`Erreur lors de la mise à jour du statut de la réparation ${e}:`,r),r}},async getRelayRepairs(e){const{data:t,error:r}=await Z.from("repair_requests").select("*").or(`drop_off_relay_id.eq.${e},pickup_relay_id.eq.${e},relay_point_id.eq.${e}`).order("updated_at",{ascending:!1});if(r)throw console.error(`Erreur lors de la récupération des réparations pour le point relais ${e}:`,r),r;return(t||[]).map(yi)},async getTechnicianRepairs(e){const{data:t,error:r}=await Z.from("repair_requests").select("*").eq("technician_id",e).order("updated_at",{ascending:!1});if(r)throw console.error(`Erreur lors de la récupération des réparations pour le technicien ${e}:`,r),r;return(t||[]).map(yi)}},sd=e=>({id:e.id,userId:e.user_id,title:e.title,message:e.message,type:e.type,isRead:e.is_read,timestamp:e.timestamp,relatedToRequestId:e.related_id,link:e.link}),k_=e=>({user_id:e.userId,title:e.title,message:e.message,type:e.type,is_read:e.isRead===void 0?!1:e.isRead,timestamp:e.timestamp||new Date().toISOString(),related_id:e.relatedToRequestId,link:e.link}),ms={async getUserNotifications(e){const{data:t,error:r}=await Z.from("notifications").select("*").eq("user_id",e).order("timestamp",{ascending:!1});if(r)throw console.error("Erreur lors de la récupération des notifications:",r),r;return(t||[]).map(sd)},async getUnreadNotifications(e){try{const{data:t,error:r}=await Z.from("notifications").select("*").eq("user_id",e).eq("is_read",!1).order("timestamp",{ascending:!1});return r?(console.error("Erreur lors de la récupération des notifications non lues:",r),[]):(t||[]).map(sd)}catch(t){return console.error("Erreur inattendue lors de la récupération des notifications non lues:",t),[]}},async createNotification(e){try{const{data:{session:t}}=await Z.auth.getSession();if(!t)throw new Error("Utilisateur non authentifié");const r=k_({...e,userId:t.user.id}),{data:n,error:A}=await Z.from("notifications").insert(r).select().single();if(A)throw console.error("Erreur lors de la création de la notification:",A),A;return sd(n)}catch(t){throw console.error("Erreur lors de la création de la notification:",t),t}},async markAsRead(e){const{error:t}=await Z.from("notifications").update({is_read:!0}).eq("id",e);if(t)throw console.error(`Erreur lors du marquage de la notification ${e} comme lue:`,t),t},async markAllAsRead(e){const{error:t}=await Z.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1);if(t)throw console.error(`Erreur lors du marquage de toutes les notifications de l'utilisateur ${e} comme lues:`,t),t},async deleteNotification(e){const{error:t}=await Z.from("notifications").delete().eq("id",e);if(t)throw console.error(`Erreur lors de la suppression de la notification ${e}:`,t),t}},Rn={async updateTypingStatus(e,t,r){try{const n=new Date().toISOString(),{error:A}=await Z.from("chat_typing_status").upsert({request_id:e,user_id:t,is_typing:r,timestamp:n});if(A)throw A;await Z.channel(`chat:${e}`).send({type:"broadcast",event:"typing",payload:{userId:t,isTyping:r,timestamp:n}})}catch(n){console.error("Erreur lors de la mise à jour du statut de frappe:",n)}},subscribeToTypingEvents(e,t){const r=Z.channel(`chat:${e}`);return r.on("broadcast",{event:"typing"},n=>{t({requestId:e,userId:n.payload.userId,isTyping:n.payload.isTyping,timestamp:n.payload.timestamp})}).subscribe(),()=>{Z.removeChannel(r)}},async getChatMessages(e){try{const{data:t,error:r}=await Z.from("chat_messages").select(`
          *,
          sender:profiles!sender_id(id, first_name, last_name)
        `).eq("request_id",e).order("timestamp",{ascending:!0});if(r)throw r;return(t||[]).map(n=>({id:n.id,requestId:n.request_id,senderId:n.sender_id,senderRole:n.sender_role,message:n.message,isAi:n.is_ai,timestamp:n.timestamp,senderName:n.sender?`${n.sender.first_name} ${n.sender.last_name}`:void 0}))}catch(t){throw console.error("Erreur lors de la récupération des messages de chat:",t),t}},async sendMessage(e,t){try{let r,n;if(t){const u=t.name.split(".").pop(),f=`chat-attachments/${`${e.requestId}/${e.senderId}_${Date.now()}.${u}`}`;t.type.startsWith("image/")?n="image":t.type==="application/pdf"||t.type.includes("document")||t.type.includes("sheet")?n="document":n="other";const{data:h,error:p}=await Z.storage.from("attachments").upload(f,t,{cacheControl:"3600",upsert:!1});if(p)throw p;const{data:w}=Z.storage.from("attachments").getPublicUrl(f);r=w.publicUrl}const{data:A,error:a}=await Z.from("chat_messages").insert({request_id:e.requestId,sender_id:e.senderId,sender_role:e.senderRole,message:e.message,is_ai:e.isAi,attachment_url:r,attachment_type:n,timestamp:new Date().toISOString()}).select().single();if(a)throw a;return{id:A.id,requestId:A.request_id,senderId:A.sender_id,senderRole:A.sender_role,message:A.message,isAi:A.is_ai,timestamp:A.timestamp,attachmentUrl:A.attachment_url,attachmentType:A.attachment_type}}catch(r){throw console.error("Erreur lors de l'envoi du message:",r),r}},subscribeToMessages(e,t){const r=Z.channel(`chat:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`request_id=eq.${e}`},async n=>{const{data:A}=await Z.from("profiles").select("first_name, last_name").eq("id",n.new.sender_id).single(),a={id:n.new.id,requestId:n.new.request_id,senderId:n.new.sender_id,senderRole:n.new.sender_role,message:n.new.message,isAi:n.new.is_ai,timestamp:n.new.timestamp,senderName:A?`${A.first_name} ${A.last_name}`:void 0,attachmentUrl:n.new.attachment_url,attachmentType:n.new.attachment_type};t(a)}).subscribe();return()=>{Z.removeChannel(r)}},async markMessagesAsRead(e,t){try{const{error:r}=await Z.from("chat_messages_read_status").upsert([{request_id:e,user_id:t,last_read:new Date().toISOString()}]);if(r)throw r}catch(r){throw console.error("Erreur lors du marquage des messages comme lus:",r),r}},async getUnreadMessagesCount(e){try{if(!e)return console.warn("getUnreadMessagesCount appelé sans userId valide"),0;const{data:t,error:r}=await Z.rpc("get_unread_messages_count",{user_id:e});if(r)throw console.error("Erreur RPC get_unread_messages_count:",r.message,r.details,r.hint),r;return t||0}catch(t){return console.error("Erreur lors de la vérification des messages non lus:",t),0}},async exportChatHistory(e){try{const{data:t,error:r}=await Z.rpc("export_chat_history_pdf",{request_id:e});if(r)throw r;return t}catch(t){throw console.error("Erreur lors de l'exportation de l'historique de chat:",t),t}}},L_=()=>{const{user:e}=lt(),[t,r]=H.useState(""),[n,A]=H.useState([]),[a,u]=H.useState([]),[g,f]=H.useState({}),[h,p]=H.useState(0),[w,y]=H.useState(!0),[C,b]=H.useState(null);H.useEffect(()=>{(async()=>{if(e)try{y(!0);try{const _=await mf.getRepairStatuses(),S={};_.forEach(j=>{S[j.id]=j}),f(S)}catch(_){console.error("Erreur lors du chargement des statuts:",_)}try{const{data:_,error:S}=await Z.from("repair_requests").select("id, client_id, device_type_id, brand, model, problem_description, status_id, created_at, updated_at").eq("client_id",e.id).order("created_at",{ascending:!1});if(S)console.error("Erreur lors de la récupération des réparations:",S);else{const j=(_||[]).map(Q=>({id:Q.id,clientId:Q.client_id,deviceType:Q.device_type_id,brand:Q.brand,model:Q.model,problemDescription:Q.problem_description,statusId:Q.status_id,createdAt:Q.created_at,updatedAt:Q.updated_at}));A(j)}}catch(_){console.error("Exception lors du chargement des réparations:",_)}try{const _=await ms.getUnreadNotifications(e.id);u(_)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}try{const _=await Rn.getUnreadMessagesCount(e.id);p(_)}catch(_){console.error("Erreur lors du chargement des messages non lus:",_)}b(null)}catch(_){console.error("Erreur lors du chargement des données:",_),b("Impossible de charger les données. Veuillez réessayer plus tard.")}finally{y(!1)}})()},[e]);const F=n.filter(v=>{var S,j,Q,D;const _=t.toLowerCase();return(((S=v.deviceType)==null?void 0:S.toLowerCase())||"").includes(_)||(((j=v.brand)==null?void 0:j.toLowerCase())||"").includes(_)||(((Q=v.model)==null?void 0:Q.toLowerCase())||"").includes(_)||(((D=v.id)==null?void 0:D.toLowerCase())||"").includes(_)}),I=v=>new Date(v).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),N=v=>{const _=g[v];if(!_)return o.jsx(Jt,{variant:"default",children:"Inconnu"});const S={pending:"warning",received:"warning",diagnosed:"warning",inRepair:"primary",repaired:"success",readyForPickup:"success",completed:"success",cancelled:"error"};return o.jsx(Jt,{variant:S[_.name]||"default",children:_.label})};return o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Consultez et gérez vos demandes de réparation"})]}),o.jsx("div",{className:"mt-4 md:mt-0",children:o.jsx(Se,{to:"/request-repair",children:o.jsx(he,{variant:"primary",icon:o.jsx(x_,{className:"h-5 w-5"}),children:"Nouvelle réparation"})})})]}),C&&o.jsx("div",{className:"w-full p-4 mb-6 bg-error/10 border border-error/20 rounded-lg text-error",children:o.jsx("p",{children:C})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs(J,{className:"lg:col-span-2",children:[o.jsxs(J.Header,{className:"flex justify-between items-center",children:[o.jsx(J.Title,{children:"Réparations récentes"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{className:"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:o.jsx(Xo,{className:"h-4 w-4"})}),o.jsx("button",{className:"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:o.jsx(tB,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"px-6 py-4",children:o.jsx(ur,{placeholder:"Rechercher...",value:t,onChange:v=>r(v.target.value),leftIcon:o.jsx(ya,{className:"h-5 w-5"}),fullWidth:!0})}),o.jsx("div",{className:"overflow-x-auto",children:w?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("table",{className:"w-full min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Référence"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appareil"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Aucune réparation trouvée."})}):F.map(v=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:v.id}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[o.jsxs("div",{children:[v.brand," ",v.model]}),o.jsx("div",{className:"text-xs text-gray-500",children:v.deviceType})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:I(v.createdAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(v.statusId)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx(Se,{to:`/repair/${v.id}`,className:"text-primary hover:text-primary-dark",children:"Détails"})})]},v.id))})]})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Statistiques"})}),o.jsx(J.Content,{children:w?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[o.jsx(Gn,{className:"h-6 w-6 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-semibold",children:n.filter(v=>{const _=g[v.statusId];return _&&_.name!=="completed"&&_.name!=="cancelled"}).length}),o.jsx("div",{className:"text-gray-500 text-sm",children:"En cours"})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[o.jsx(Tr,{className:"h-6 w-6 text-success mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-semibold",children:n.filter(v=>{const _=g[v.statusId];return _&&_.name==="completed"}).length}),o.jsx("div",{className:"text-gray-500 text-sm",children:"Terminées"})]})]})})]}),o.jsxs(J,{children:[o.jsxs(J.Header,{className:"flex justify-between items-center",children:[o.jsx(J.Title,{children:"Notifications"}),o.jsx(Se,{to:"/notifications",className:"text-sm text-primary",children:"Voir tout"})]}),o.jsx(J.Content,{className:"p-0",children:w?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):a.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucune notification non lue"}):o.jsx("div",{className:"divide-y divide-gray-100",children:a.map(v=>o.jsx("div",{className:`p-4 ${v.isRead?"":"bg-primary/5"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsxs("div",{className:"flex-shrink-0 pt-0.5",children:[v.type==="info"&&o.jsx(Fs,{className:"h-5 w-5 text-primary"}),v.type==="success"&&o.jsx(Tr,{className:"h-5 w-5 text-success"}),v.type==="warning"&&o.jsx(Cr,{className:"h-5 w-5 text-warning"}),v.type==="error"&&o.jsx(Cr,{className:"h-5 w-5 text-error"})]}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.title}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:v.message}),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(v.timestamp).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]})},v.id))})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Actions rapides"})}),o.jsxs(J.Content,{className:"space-y-4",children:[o.jsxs(Se,{to:"/request-repair",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(yo,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Demander une réparation"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Faire réparer un nouvel appareil"})]})]}),o.jsxs(Se,{to:"/find-relays",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(Mr,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Trouver un point relais"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Localiser le point relais le plus proche"})]})]}),o.jsxs(Se,{to:"/appointments",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(su,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Rendez-vous"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Gérer vos rendez-vous"})]})]}),h>0&&o.jsxs("div",{className:"flex items-center p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors border border-primary/20",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(gf,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsxs("div",{className:"font-medium flex items-center justify-between",children:[o.jsx("span",{children:"Messages non lus"}),o.jsx(Jt,{variant:"primary",className:"ml-2",children:h})]}),o.jsx("div",{className:"text-sm text-gray-500",children:"Vous avez des messages non lus"})]})]})]})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Prochains rendez-vous"})}),o.jsx(J.Content,{children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx(su,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Aucun rendez-vous à venir"}),o.jsx(Se,{to:"/appointments",className:"mt-4 inline-block text-primary text-sm",children:"Planifier un rendez-vous"})]})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Besoin d'aide ?"})}),o.jsxs(J.Content,{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600 text-sm",children:"Notre équipe et notre assistant IA sont là pour vous aider avec toutes vos questions."}),o.jsxs("div",{className:"space-y-2",children:[n.length>0&&o.jsx(Se,{to:`/chat/${n[0].id}`,children:o.jsxs(he,{variant:"primary",fullWidth:!0,children:[o.jsx(gf,{className:"h-4 w-4 mr-2"}),"Discuter avec le technicien",h>0&&o.jsx(Jt,{variant:"primary",className:"ml-2 bg-white text-primary",children:h})]})}),o.jsx(Se,{to:"/support",children:o.jsx(he,{variant:"outline",fullWidth:!0,children:"Contacter le support"})}),o.jsx(Se,{to:"/faq",children:o.jsx(he,{variant:"ghost",fullWidth:!0,children:"Consulter la FAQ"})})]})]})]})]})]})},gs={async getRelayRepairs(e){try{const{data:t,error:r}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, code, label),
          client:profiles!client_id(id, first_name, last_name, email, phone)
        `).eq("relay_point_id",e).order("updated_at",{ascending:!1});if(r)throw r;return t.map(n=>{let A="Client inconnu";n.client_first_name&&n.client_last_name?A=`${n.client_first_name} ${n.client_last_name}`:n.client&&n.client.first_name&&n.client.last_name&&(A=`${n.client.first_name} ${n.client.last_name}`);const a=n.status&&n.status.code,u=a?n.status.code:"",g=a?n.status.label:"";let f="transit";return u==="SUBMITTED"?f="dropOff":["READY_FOR_PICKUP","DELIVERED"].includes(u)?f="pickup":u==="RECEIVED"&&(f="transit"),console.log(`Réparation ${n.id} - Client: ${A} - Status: ${u}`),{id:n.id,clientId:n.client_id,clientName:A,deviceType:n.device_type||"Non spécifié",brand:n.brand||"Non spécifiée",model:n.model||"Non spécifié",problemDescription:n.problem_description||"Aucune description",statusId:n.status_id,statusName:u,statusLabel:g,createdAt:n.created_at,updatedAt:n.updated_at,relayPointId:n.relay_point_id,appointmentDate:n.drop_off_date||n.created_at,operation:f}})}catch(t){throw console.error("Erreur lors de la récupération des réparations du point relais:",t),t}},async getPendingDropOffs(e){try{const{data:t,error:r}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, code, label),
          client:profiles!client_id(id, first_name, last_name, email, phone)
        `).eq("relay_point_id",e).eq("status.code","SUBMITTED").order("created_at",{ascending:!0});if(r)throw r;return t.map(n=>{let A="Client inconnu";n.client_first_name&&n.client_last_name?A=`${n.client_first_name} ${n.client_last_name}`:n.client&&n.client.first_name&&n.client.last_name&&(A=`${n.client.first_name} ${n.client.last_name}`);const a=n.status&&n.status.code,u=a?n.status.code:"",g=a?n.status.label:"";return{id:n.id,clientId:n.client_id,clientName:A,deviceType:n.device_type||"Non spécifié",brand:n.brand||"Non spécifiée",model:n.model||"Non spécifié",problemDescription:n.problem_description||"Aucune description",statusId:n.status_id,statusName:u,statusLabel:g,createdAt:n.created_at,updatedAt:n.updated_at,relayPointId:n.relay_point_id,appointmentDate:n.drop_off_date||n.created_at,operation:"dropOff",expectedArrival:n.drop_off_date||n.created_at}})}catch(t){throw console.error("Erreur lors de la récupération des dépôts à venir:",t),t}},async getReadyForPickup(e){try{const{data:t,error:r}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, code, label),
          client:profiles!client_id(id, first_name, last_name, email, phone)
        `).eq("relay_point_id",e).eq("status.code","READY_FOR_PICKUP").order("updated_at",{ascending:!1});if(r)throw r;return t.map(n=>{let A="Client inconnu";n.client_first_name&&n.client_last_name?A=`${n.client_first_name} ${n.client_last_name}`:n.client&&n.client.first_name&&n.client.last_name&&(A=`${n.client.first_name} ${n.client.last_name}`);const a=n.status&&n.status.code,u=a?n.status.code:"",g=a?n.status.label:"";return{id:n.id,clientId:n.client_id,clientName:A,deviceType:n.device_type||"Non spécifié",brand:n.brand||"Non spécifiée",model:n.model||"Non spécifié",problemDescription:n.problem_description||"Aucune description",statusId:n.status_id,statusName:u,statusLabel:g,createdAt:n.created_at,updatedAt:n.updated_at,relayPointId:n.relay_point_id,appointmentDate:n.drop_off_date||n.created_at,operation:"pickup"}})}catch(t){throw console.error("Erreur lors de la récupération des appareils prêts pour récupération:",t),t}},async getInTransit(e){try{const{data:t,error:r}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, code, label),
          client:profiles!client_id(id, first_name, last_name, email, phone)
        `).eq("relay_point_id",e).eq("status.code","RECEIVED").order("updated_at",{ascending:!1});if(r)throw r;return t.map(n=>{let A="Client inconnu";n.client_first_name&&n.client_last_name?A=`${n.client_first_name} ${n.client_last_name}`:n.client&&n.client.first_name&&n.client.last_name&&(A=`${n.client.first_name} ${n.client.last_name}`);const a=n.status&&n.status.code,u=a?n.status.code:"",g=a?n.status.label:"";return{id:n.id,clientId:n.client_id,clientName:A,deviceType:n.device_type||"Non spécifié",brand:n.brand||"Non spécifiée",model:n.model||"Non spécifié",problemDescription:n.problem_description||"Aucune description",statusId:n.status_id,statusName:u,statusLabel:g,createdAt:n.created_at,updatedAt:n.updated_at,relayPointId:n.relay_point_id,appointmentDate:n.drop_off_date||n.created_at,operation:"transit"}})}catch(t){throw console.error("Erreur lors de la récupération des appareils en transit:",t),t}},async getCompletedThisMonth(e){try{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),{data:n,error:A}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, code, label),
          client:profiles!client_id(id, first_name, last_name, email, phone)
        `).eq("relay_point_id",e).eq("status.code","DELIVERED").gte("updated_at",r.toISOString()).order("updated_at",{ascending:!1});if(A)throw A;return n.map(a=>{let u="Client inconnu";a.client_first_name&&a.client_last_name?u=`${a.client_first_name} ${a.client_last_name}`:a.client&&a.client.first_name&&a.client.last_name&&(u=`${a.client.first_name} ${a.client.last_name}`);const g=a.status&&a.status.code,f=g?a.status.code:"",h=g?a.status.label:"";return{id:a.id,clientId:a.client_id,clientName:u,deviceType:a.device_type||"Non spécifié",brand:a.brand||"Non spécifiée",model:a.model||"Non spécifié",problemDescription:a.problem_description||"Aucune description",statusId:a.status_id,statusName:f,statusLabel:h,createdAt:a.created_at,updatedAt:a.updated_at,relayPointId:a.relay_point_id,operation:"completed"}})}catch(t){throw console.error("Erreur lors de la récupération des appareils traités ce mois:",t),t}},async processDropOff(e,t){var r;try{const{data:n,error:A}=await Z.from("repair_statuses").select("id").eq("code","RECEIVED").single();if(A)throw A;const a=t||((r=(await Z.auth.getUser()).data.user)==null?void 0:r.id);if(!a)throw new Error("ID du point relais non disponible");console.log(`Traitement du dépôt pour la réparation ${e} par le point relais ${a}`);const{data:u,error:g}=await Z.from("repair_requests").select("*").eq("id",e).maybeSingle();if(g)throw g;if(!u){console.log(`Réparation ${e} non trouvée dans repair_requests, vérification dans repair_codes...`);const{data:p,error:w}=await Z.from("repair_codes").select("*").eq("id",e).maybeSingle();if(w)throw w;if(!p)throw new Error(`Aucune réparation trouvée avec l'ID ${e}`);console.log("Code de réparation trouvé dans repair_codes:",p);let y=null,C=null;if(p.client_id)try{const{data:I,error:N}=await Z.from("profiles").select("first_name, last_name").eq("id",p.client_id).maybeSingle();!N&&I&&(y=I.first_name,C=I.last_name)}catch(I){console.error("Erreur lors de la récupération des données client:",I)}const b={id:e,client_id:p.client_id||null,client_first_name:y,client_last_name:C,status_id:n.id,relay_point_id:a,drop_off_relay_id:a,drop_off_date:new Date().toISOString(),device_type:p.device_type||"Inconnu",brand:p.brand||"Inconnue",model:p.model||"Inconnu",problem_description:p.problem_description||"Aucune description",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:F}=await Z.from("repair_requests").insert(b);if(F)throw console.error("Erreur lors de la création de la réparation:",F),F;console.log(`Réparation ${e} créée avec succès`);return}const f={status_id:n.id,drop_off_date:new Date().toISOString(),updated_at:new Date().toISOString()};a&&(!u.drop_off_relay_id||u.drop_off_relay_id==="")&&(f.drop_off_relay_id=a);const{error:h}=await Z.from("repair_requests").update(f).eq("id",e);if(h)throw h}catch(n){throw console.error("Erreur lors du traitement du dépôt:",n),n}},async processPickup(e){try{const{data:t,error:r}=await Z.from("repair_statuses").select("id").eq("code","DELIVERED").single();if(r)throw r;const{error:n}=await Z.from("repair_requests").update({status_id:t.id,pickup_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n}catch(t){throw console.error("Erreur lors du traitement de la récupération:",t),t}},async getRelayStats(e){try{console.log(`Récupération des statistiques pour le point relais ${e}`);const{data:t,error:r}=await Z.from("repair_statuses").select("id, code").in("code",["SUBMITTED","READY_FOR_PICKUP","RECEIVED","DELIVERED"]);if(r)throw r;if(!t||t.length===0)return console.error("Aucun statut trouvé dans la base de données"),{pendingDropOffs:0,readyForPickup:0,inTransit:0,completedThisMonth:0};const n=t.reduce((F,I)=>(F[I.code]=I.id,F),{});console.log("Mapping des statuts:",n);const A=new Date,a=new Date(A.getFullYear(),A.getMonth(),1),u=Z.from("repair_requests").select("id",{count:"exact"}).eq("relay_point_id",e).eq("status_id",n.SUBMITTED),g=Z.from("repair_requests").select("id",{count:"exact"}).eq("relay_point_id",e).eq("status_id",n.READY_FOR_PICKUP),f=Z.from("repair_requests").select("id",{count:"exact"}).eq("relay_point_id",e).eq("status_id",n.RECEIVED),h=Z.from("repair_requests").select("id",{count:"exact"}).eq("relay_point_id",e).eq("status_id",n.DELIVERED).gte("updated_at",a.toISOString()),[p,w,y,C]=await Promise.all([u,g,f,h]);if(p.error)throw p.error;if(w.error)throw w.error;if(y.error)throw y.error;if(C.error)throw C.error;const b={pendingDropOffs:p.count||0,readyForPickup:w.count||0,inTransit:y.count||0,completedThisMonth:C.count||0};return console.log("Statistiques récupérées:",b),b}catch(t){throw console.error("Erreur lors de la récupération des statistiques du point relais:",t),t}}},M_=({searchTerm:e,activeTab:t,stats:r,onSearchChange:n,onTabChange:A})=>o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"relative flex-grow max-w-md",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ya,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Rechercher par nom, appareil, marque...",value:e,onChange:n,className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(he,{variant:t==="all"?"primary":"outline",size:"sm",onClick:()=>A("all"),className:"rounded-full",children:"Tous"}),o.jsxs(he,{variant:t==="dropOffs"?"primary":"outline",size:"sm",onClick:()=>A("dropOffs"),className:"rounded-full flex items-center gap-1",children:[o.jsx(yA,{className:"h-4 w-4"})," Dépôts (",r.pendingDropOffs,")"]}),o.jsxs(he,{variant:t==="pickups"?"primary":"outline",size:"sm",onClick:()=>A("pickups"),className:"rounded-full flex items-center gap-1",children:[o.jsx(Tr,{className:"h-4 w-4"})," Récupérations (",r.readyForPickup,")"]}),o.jsxs(he,{variant:t==="transit"?"primary":"outline",size:"sm",onClick:()=>A("transit"),className:"rounded-full flex items-center gap-1",children:[o.jsx(AB,{className:"h-4 w-4"})," En transit (",r.inTransit,")"]})]})]}),Pa=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),H_=()=>{const{user:e}=lt(),t=kt(),[r,n]=H.useState(""),[A,a]=H.useState([]),[,u]=H.useState([]),[g,f]=H.useState(!0),[,h]=H.useState(null),[p,w]=H.useState(null),[,y]=H.useState(null),[C,b]=H.useState("all"),[F,I]=H.useState({pendingDropOffs:0,readyForPickup:0,inTransit:0,completedThisMonth:0}),N=async()=>{if(e)try{f(!0);let k=[];C==="all"?k=await gs.getRelayRepairs(e.id):C==="dropOffs"?k=await gs.getPendingDropOffs(e.id):C==="pickups"?k=await gs.getReadyForPickup(e.id):C==="transit"&&(k=await gs.getInTransit(e.id)),console.log(`Chargé ${(k==null?void 0:k.length)||0} réparations pour l'onglet ${C}`),a(k||[]);const P=await gs.getRelayStats(e.id);I(P);const z=await ms.getUnreadNotifications(e.id);u(z),h(null)}catch(k){console.error("Erreur lors du chargement des données:",k),h("Impossible de charger les données. Veuillez réessayer plus tard.")}finally{f(!1)}};H.useEffect(()=>{N()},[e,C]);const v=A.filter(k=>{var P,z,X,ce,G;return((P=k.clientName)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))||((z=k.deviceType)==null?void 0:z.toLowerCase().includes(r.toLowerCase()))||((X=k.brand)==null?void 0:X.toLowerCase().includes(r.toLowerCase()))||((ce=k.model)==null?void 0:ce.toLowerCase().includes(r.toLowerCase()))||((G=k.id)==null?void 0:G.toLowerCase().includes(r.toLowerCase()))}),_=(k,P)=>{const z={pending:"warning",received:"primary",diagnosed:"warning",inRepair:"primary",repaired:"success",readyForPickup:"success",completed:"success",cancelled:"error"};return o.jsx(Jt,{variant:z[k]||"default",className:"whitespace-nowrap",children:P})},S=async k=>{if(e){w(k),h(null),y(null);try{await gs.processDropOff(k);const P=A.map(z=>z.id===k?{...z,statusName:"received",statusLabel:"Reçu",operation:"transit"}:z);a(P),y("Dépôt traité avec succès. L'appareil a été marqué comme reçu."),I(z=>({...z,pendingDropOffs:z.pendingDropOffs-1,inTransit:z.inTransit+1}))}catch(P){console.error("Erreur lors du traitement du dépôt:",P),h(P.message||"Erreur lors du traitement du dépôt. Veuillez réessayer.")}finally{w(null)}}},j=async k=>{if(e){w(k),h(null),y(null);try{await gs.processPickup(k);const P=A.map(z=>z.id===k?{...z,statusName:"completed",statusLabel:"Terminé",operation:void 0}:z);a(P),y("Récupération traitée avec succès. La réparation a été marquée comme terminée."),I(z=>({...z,readyForPickup:z.readyForPickup-1,completedThisMonth:z.completedThisMonth+1}))}catch(P){console.error("Erreur lors du traitement de la récupération:",P),h(P.message||"Erreur lors du traitement de la récupération. Veuillez réessayer.")}finally{w(null)}}},Q=()=>{if(A.length===0)return o.jsxs("div",{className:"p-6 text-center text-gray-500",children:["Aucune réparation trouvée pour cet onglet.",C==="pickups"&&o.jsx("p",{className:"mt-2",children:"Aucun ordinateur prêt à être récupéré pour le moment."})]});switch(C){case"dropOffs":return D();case"pickups":return L();case"transit":return M();case"all":default:return o.jsxs(o.Fragment,{children:[D(),L(),M()]})}},D=()=>{const k=v.filter(P=>P.operation==="dropOff");return k.length===0&&C==="dropOffs"?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun dépôt en attente pour le moment."}):k.length===0?null:o.jsxs("div",{className:"overflow-hidden",children:[C==="all"&&o.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:o.jsxs("h3",{className:"text-md font-medium text-gray-700",children:["Dépôts en attente (",k.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client / Appareil"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date prévue"}),o.jsx("th",{scope:"col",className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(P=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.clientName}),o.jsxs("div",{className:"text-sm text-gray-500",children:[P.brand," ",P.model]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[_(P.statusName||"",P.statusLabel||""),o.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Dépôt prévu"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:P.expectedArrival?Pa(P.expectedArrival):Pa(P.updatedAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end space-x-2",children:[P.statusName==="SUBMITTED"&&o.jsx(he,{variant:"primary",size:"sm",onClick:()=>S(P.id),disabled:p===P.id,className:"whitespace-nowrap",children:p===P.id?"Traitement...":"Traiter le dépôt"}),o.jsx(Se,{to:`/relay/repair/${P.id}`,className:"text-primary hover:text-primary-dark inline-flex items-center",children:"Détails"})]})})]},P.id))})]})})]})},L=()=>{const k=v.filter(P=>P.operation==="pickup");return k.length===0&&C==="pickups"?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun appareil prêt pour récupération pour le moment."}):k.length===0?null:o.jsxs("div",{className:"overflow-hidden",children:[C==="all"&&o.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:o.jsxs("h3",{className:"text-md font-medium text-gray-700",children:["Prêts pour récupération (",k.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client / Appareil"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prêt depuis"}),o.jsx("th",{scope:"col",className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(P=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.clientName}),o.jsxs("div",{className:"text-sm text-gray-500",children:[P.brand," ",P.model]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[_(P.statusName||"",P.statusLabel||""),o.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"En attente de récupération"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Pa(P.updatedAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(he,{variant:"success",size:"sm",onClick:()=>j(P.id),disabled:p===P.id,className:"whitespace-nowrap",children:p===P.id?"Traitement...":"Confirmer la récupération"}),o.jsx(Se,{to:`/relay/repair/${P.id}`,className:"text-primary hover:text-primary-dark inline-flex items-center",children:"Détails"})]})})]},P.id))})]})})]})},M=()=>{const k=v.filter(P=>P.operation==="transit");return k.length===0&&C==="transit"?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun appareil en transit pour le moment."}):k.length===0?null:o.jsxs("div",{className:"overflow-hidden",children:[C==="all"&&o.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:o.jsxs("h3",{className:"text-md font-medium text-gray-700",children:["En transit (",k.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client / Appareil"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reçu le"}),o.jsx("th",{scope:"col",className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(P=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.clientName}),o.jsxs("div",{className:"text-sm text-gray-500",children:[P.brand," ",P.model]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[_(P.statusName||"",P.statusLabel||""),o.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"En cours de traitement"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:P.drop_off_date?Pa(P.drop_off_date):Pa(P.updatedAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx(Se,{to:`/repair/${P.id}`,className:"text-primary hover:text-primary-dark",children:"Détails"})})]},P.id))})]})})]})};return o.jsxs("div",{className:"container-app py-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tableau de bord du point relais"}),o.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",e==null?void 0:e.firstName,". Gérez vos opérations et suivez vos statistiques."]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs(J,{className:"p-4 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Dépôts en attente"}),o.jsx("p",{className:"text-3xl font-bold text-blue-600",children:F.pendingDropOffs})]}),o.jsxs(J,{className:"p-4 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Prêts à récupérer"}),o.jsx("p",{className:"text-3xl font-bold text-green-600",children:F.readyForPickup})]}),o.jsxs(J,{className:"p-4 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-1",children:"En transit"}),o.jsx("p",{className:"text-3xl font-bold text-orange-600",children:F.inTransit})]}),o.jsxs(J,{className:"p-4 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Terminés ce mois"}),o.jsx("p",{className:"text-3xl font-bold text-purple-600",children:F.completedThisMonth})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx(J,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t("/relay/profile"),children:o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx(e_,{className:"h-8 w-8 text-primary mb-2"}),o.jsx("h3",{className:"text-sm font-medium",children:"Mon profil"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gérer mes informations"})]})}),o.jsx(J,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t("/relay/scan"),children:o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx(iu,{className:"h-8 w-8 text-primary mb-2"}),o.jsx("h3",{className:"text-sm font-medium",children:"Scanner un QR code"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Traiter une réparation"})]})}),o.jsx(J,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t("/notifications"),children:o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx(yA,{className:"h-8 w-8 text-primary mb-2"}),o.jsx("h3",{className:"text-sm font-medium",children:"Mes réparations"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Voir toutes les réparations"})]})}),o.jsx(J,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t("/relay/profile"),children:o.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[o.jsx(Xu,{className:"h-8 w-8 text-primary mb-2"}),o.jsx("h3",{className:"text-sm font-medium",children:"Paramètres"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gérer mon compte"})]})})]}),o.jsx(M_,{searchTerm:r,activeTab:C,stats:F,onSearchChange:k=>n(k.target.value),onTabChange:k=>{console.log(`Changement d'onglet vers: ${k}`),b(k)}}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Opérations du point relais"})}),g?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"}),o.jsx("p",{className:"mt-4 text-gray-500",children:"Chargement des données..."})]}):Q()]})]})},Ji={async getTechnicianRepairs(e){try{console.log("Recherche des réparations pour le technicien ID:",e);const{data:t,error:r}=await Z.from("repair_requests").select("*");console.log("Toutes les réparations dans la base (sans filtre):",t),r&&console.error("Erreur lors de la récupération de toutes les réparations:",r);const{data:n,error:A}=await Z.from("repair_requests").select("*").eq("technician_id",e);console.log("Réparations pour ce technicien:",n);const a=(n==null?void 0:n.filter(y=>y.technician_id===e))||[];if(console.log("Réparations filtrées pour ce technicien:",a),A)throw A;if(!a.length)return console.log("Aucune réparation trouvée pour ce technicien"),[];const u=a.map(y=>y.status_id);console.log("Status IDs à récupérer:",u);const{data:g,error:f}=await Z.from("repair_statuses").select("id, code, label").in("id",u);if(console.log("Statuts récupérés:",g),f)throw f;const h=a.map(y=>y.client_id);console.log("Client IDs à récupérer:",h);const{data:p,error:w}=await Z.from("profiles").select("id, first_name, last_name, email, phone").in("id",h);if(console.log("Clients récupérés:",p),w)throw w;return a.map(y=>{const C=g.find(F=>F.id===y.status_id)||{code:"UNKNOWN",label:"Inconnu"},b=p.find(F=>F.id===y.client_id)||{first_name:"",last_name:""};return{id:y.id,clientId:y.client_id,clientName:`${b.first_name} ${b.last_name}`,deviceType:y.device_type||"",brand:y.brand,model:y.model,problemDescription:y.problem_description,statusId:y.status_id,statusName:C.code,statusLabel:C.label,statusCode:C.code,createdAt:y.created_at,updatedAt:y.updated_at,estimatedCost:y.estimated_cost,priority:y.priority||"medium",relayName:"",relayAddress:"",technicianId:y.technician_id,technicianAssigned:!!y.technician_id,dropOffRelayId:y.drop_off_relay_id,pickupRelayId:y.pickup_relay_id,preDiagnosis:y.diagnostic||"",technicianNotes:y.notes||"",appointmentDate:y.estimated_completion_date}})}catch(t){throw console.error("Erreur lors de la récupération des réparations du technicien:",t),t}},async getTodaysRepairs(e){try{const t=new Date;t.setHours(0,0,0,0);const{data:r,error:n}=await Z.from("repair_requests").select("*").eq("technician_id",e).gte("updated_at",t.toISOString()).order("priority",{ascending:!1});if(n)throw n;const A=r.map(C=>C.status_id),{data:a,error:u}=await Z.from("repair_statuses").select("id, code, label").in("id",A);if(u)throw u;const g=r.map(C=>C.client_id),{data:f,error:h}=await Z.from("profiles").select("id, first_name, last_name, email, phone").in("id",g);if(h)throw h;const p=r.map(C=>C.drop_off_relay_id).filter(Boolean),{data:w,error:y}=await Z.from("relay_points").select("id, name, address").in("id",p.length>0?p:["no-id"]);if(y)throw y;return r.map(C=>{const b=a.find(N=>N.id===C.status_id)||{code:"UNKNOWN",label:"Inconnu"},F=f.find(N=>N.id===C.client_id)||{first_name:"",last_name:""},I=(w==null?void 0:w.find(N=>N.id===C.drop_off_relay_id))||null;return{id:C.id,clientId:C.client_id,clientName:`${F.first_name} ${F.last_name}`,deviceType:C.device_type||"",brand:C.brand,model:C.model,problemDescription:C.problem_description,statusId:C.status_id,statusName:b.code,statusLabel:b.label,statusCode:b.code,createdAt:C.created_at,updatedAt:C.updated_at,estimatedCost:C.estimated_cost,priority:C.priority||"medium",relayName:(I==null?void 0:I.name)||"",relayAddress:(I==null?void 0:I.address)||"",technicianId:C.technician_id,technicianAssigned:!!C.technician_id,dropOffRelayId:C.drop_off_relay_id,pickupRelayId:C.pickup_relay_id,preDiagnosis:C.diagnostic||"",technicianNotes:C.notes||"",appointmentDate:C.estimated_completion_date}})}catch(t){throw console.error("Erreur lors de la récupération des réparations du jour:",t),t}},async getCompletedRepairs(e){try{const{data:t,error:r}=await Z.from("repair_statuses").select("id").eq("code","RETURNED_TO_RELAY").single();if(r)throw r;const{data:n,error:A}=await Z.from("repair_requests").select("*").eq("technician_id",e).eq("status_id",t.id).order("updated_at",{ascending:!1}).limit(10);if(A)throw A;const a=n.map(b=>b.status_id),{data:u,error:g}=await Z.from("repair_statuses").select("id, code, label").in("id",a);if(g)throw g;const f=n.map(b=>b.client_id),{data:h,error:p}=await Z.from("profiles").select("id, first_name, last_name, email, phone").in("id",f);if(p)throw p;const w=n.map(b=>b.drop_off_relay_id).filter(Boolean),{data:y,error:C}=await Z.from("relay_points").select("id, name, address").in("id",w.length>0?w:["no-id"]);if(C)throw C;return n.map(b=>{const F=u.find(v=>v.id===b.status_id)||{code:"UNKNOWN",label:"Inconnu"},I=h.find(v=>v.id===b.client_id)||{first_name:"",last_name:""},N=(y==null?void 0:y.find(v=>v.id===b.drop_off_relay_id))||null;return{id:b.id,clientId:b.client_id,clientName:`${I.first_name} ${I.last_name}`,deviceType:b.device_type||"",brand:b.brand,model:b.model,problemDescription:b.problem_description,statusId:b.status_id,statusName:F.code,statusLabel:F.label,statusCode:F.code,createdAt:b.created_at,updatedAt:b.updated_at,estimatedCost:b.estimated_cost,priority:b.priority||"medium",relayName:(N==null?void 0:N.name)||"",relayAddress:(N==null?void 0:N.address)||"",technicianId:b.technician_id,technicianAssigned:!!b.technician_id,dropOffRelayId:b.drop_off_relay_id,pickupRelayId:b.pickup_relay_id,preDiagnosis:b.diagnostic||"",technicianNotes:b.notes||"",appointmentDate:b.estimated_completion_date}})}catch(t){throw console.error("Erreur lors de la récupération des réparations terminées:",t),t}},async updateRepairStatus(e,t){try{const{data:r,error:n}=await Z.from("repair_statuses").select("id").eq("code",t).single();if(n||!r)return console.error("Erreur lors de la récupération du statut:",n),!1;const{error:A}=await Z.from("repair_requests").update({status_id:r.id,updated_at:new Date().toISOString()}).eq("id",e);return A?(console.error("Erreur lors de la mise à jour du statut de la réparation:",A),!1):!0}catch(r){return console.error("Erreur lors de la mise à jour du statut:",r),!1}},async updateRepairDiagnostic(e,t){try{const{error:r}=await Z.from("repair_requests").update({...t,updated_at:new Date().toISOString()}).eq("id",e);return r?(console.error("Erreur lors de la mise à jour du diagnostic:",r),!1):!0}catch(r){return console.error("Erreur lors de la mise à jour du diagnostic:",r),!1}},async getTechnicianStats(e){try{const{data:t,error:r}=await Z.from("repair_statuses").select("id, code");if(r)throw r;const n=new Map;t.forEach(y=>{n.set(y.code,y.id)});const{count:A,error:a}=await Z.from("repair_requests").select("id",{count:"exact"}).eq("technician_id",e).eq("status_id",n.get("PICKED_UP_BY_TECHNICIAN")),{count:u,error:g}=await Z.from("repair_requests").select("id",{count:"exact"}).eq("technician_id",e).eq("status_id",n.get("IN_REPAIR")),{count:f,error:h}=await Z.from("repair_requests").select("id",{count:"exact"}).eq("technician_id",e).in("status_id",[n.get("RETURNED_TO_RELAY"),n.get("COMPLETED")]),p=(A||0)+(u||0)+(f||0),w=p>0?(f||0)/p*100:0;return{todiagnose:A||0,inrepair:u||0,repaired:f||0,successRate:w}}catch(t){throw console.error("Erreur lors de la récupération des statistiques du technicien:",t),t}},async getDevicesReadyForPickup(e){try{const{data:t,error:r}=await Z.from("repair_statuses").select("id").eq("code","WAITING_FOR_TECHNICIAN").single();if(r||!t)return console.error("Erreur lors de la récupération du statut:",r),[];const{data:n,error:A}=await Z.from("repair_requests").select(`
          *,
          status:repair_statuses(id, name, label, code),
          client:profiles!client_id(id, first_name, last_name, email, phone_number),
          relay_point:relay_points!drop_off_relay_id(id, name, address)
        `).eq("status_id",t.id).order("created_at",{ascending:!0});return A?(console.error("Erreur lors de la récupération des appareils:",A),[]):n.map(a=>{var u,g;return{id:a.id,clientId:a.client_id,clientName:`${a.client.first_name} ${a.client.last_name}`,deviceType:a.device_type,brand:a.brand,model:a.model,problemDescription:a.problem_description,statusId:a.status_id,statusName:a.status.name,statusLabel:a.status.label,statusCode:a.status.code,createdAt:a.created_at,updatedAt:a.updated_at,dropOffRelayId:a.drop_off_relay_id,pickupRelayId:a.pickup_relay_id,relayName:((u=a.relay_point)==null?void 0:u.name)||"",relayAddress:((g=a.relay_point)==null?void 0:g.address)||"",technicianId:a.technician_id,technicianAssigned:!!a.technician_id}})}catch(t){return console.error("Erreur lors de la récupération des appareils prêts pour la récupération:",t),[]}},async pickupDevicesFromRelay(e,t){try{const{data:r,error:n}=await Z.from("repair_statuses").select("id").eq("code","PICKED_UP_BY_TECHNICIAN").single();if(n||!r)return console.error("Erreur lors de la récupération du statut:",n),!1;const{error:A}=await Z.from("repair_requests").update({status_id:r.id,technician_id:t,updated_at:new Date().toISOString(),pickup_date:new Date().toISOString()}).in("id",e);if(A)return console.error("Erreur lors de la mise à jour des réparations:",A),!1;const{data:a,error:u}=await Z.from("repair_requests").select("id, client_id, device_type, brand, model").in("id",e);if(u)return console.error("Erreur lors de la récupération des informations des appareils:",u),!1;for(const g of a)await ms.createNotification({userId:g.client_id,title:"Appareil récupéré par le technicien",message:`Votre ${g.device_type} ${g.brand} ${g.model} a été récupéré par le technicien et est en cours de diagnostic.`,type:"info",relatedToRequestId:g.id,link:`/repair/${g.id}`});return!0}catch(r){return console.error("Erreur lors de la récupération des appareils:",r),!1}},async sendTechnicianRouteNotifications(){try{const t=new Date().getDay();if(t!==2&&t!==5)return console.log("Pas de tournée aujourd'hui. Les tournées sont le mardi et le vendredi."),!1;const{data:r,error:n}=await Z.from("profiles").select("id, first_name, last_name").eq("role","technician");if(n)return console.error("Erreur lors de la récupération des techniciens:",n),!1;if(!r||r.length===0)return console.warn("Aucun technicien disponible pour les tournées"),!1;for(const A of r){const a=await this.getDevicesReadyForPickup(A.id);if(a.length>0){const u=new Map;a.forEach(f=>{var p;const h=f.dropOffRelayId||"";u.has(h)||u.set(h,{name:f.relayName||"Point relais inconnu",address:f.relayAddress||"Adresse inconnue",devices:[]}),(p=u.get(h))==null||p.devices.push(f)});let g=`Appareils à récupérer:
`;for(const[f,h]of u.entries())g+=`
📍 ${h.name} (${h.address}):
`,h.devices.forEach(p=>{g+=`- ${p.deviceType} ${p.brand} ${p.model}
`});await ms.createNotification({userId:A.id,title:"Tournée de récupération d'appareils",message:g,type:"info",link:"/technician/pickup"})}}return!0}catch(e){return console.error("Erreur lors de l'envoi des notifications de tournée:",e),!1}},async updateDiagnosticAndSendQuote(e,t){try{const{data:r,error:n}=await Z.from("repair_statuses").select("id").eq("code","QUOTE_PROVIDED").single();if(n||!r)return console.error("Erreur lors de la récupération du statut:",n),!1;const{error:A}=await Z.from("repair_requests").update({pre_diagnosis:t.preDiagnosis,estimated_cost:t.estimatedCost,estimated_time:t.estimatedTime,technician_notes:t.notes,status_id:r.id,updated_at:new Date().toISOString(),quote_provided_at:new Date().toISOString()}).eq("id",e);if(A)return console.error("Erreur lors de la mise à jour du diagnostic:",A),!1;const{data:a,error:u}=await Z.from("repair_requests").select(`
          client_id,
          technician_id,
          device_type,
          brand,
          model,
          estimated_cost
        `).eq("id",e).single();return u||!a?(console.error("Erreur lors de la récupération des informations de la réparation:",u),!1):(await ms.createNotification({userId:a.client_id,title:"Devis de réparation disponible",message:`Un devis de ${a.estimated_cost}€ est disponible pour la réparation de votre ${a.device_type} ${a.brand} ${a.model}. Délai estimé: ${t.estimatedTime}.`,type:"info",relatedToRequestId:e,link:`/repair/${e}/quote`}),!0)}catch(r){return console.error("Erreur lors de l'envoi du devis:",r),!1}},async processQuoteResponse(e,t){try{const r=t?"QUOTE_ACCEPTED":"QUOTE_REJECTED",{data:n,error:A}=await Z.from("repair_statuses").select("id").eq("code",r).single();if(A||!n)return console.error("Erreur lors de la récupération du statut:",A),!1;const{error:a}=await Z.from("repair_requests").update({status_id:n.id,updated_at:new Date().toISOString(),quote_response_at:new Date().toISOString()}).eq("id",e);if(a)return console.error("Erreur lors de la mise à jour du statut de la réparation:",a),!1;t&&setTimeout(async()=>{await this.updateRepairStatus(e,"IN_REPAIR")},5e3);const{data:u,error:g}=await Z.from("repair_requests").select(`
          client_id,
          technician_id,
          device_type,
          brand,
          model,
          estimated_cost
        `).eq("id",e).single();return g||!u?(console.error("Erreur lors de la récupération des informations de la réparation:",g),!1):(u.technician_id&&await ms.createNotification({userId:u.technician_id,title:t?"Devis accepté":"Devis refusé",message:t?`Le devis de ${u.estimated_cost}€ pour la réparation du ${u.device_type} ${u.brand} ${u.model} a été accepté par le client.`:`Le devis de ${u.estimated_cost}€ pour la réparation du ${u.device_type} ${u.brand} ${u.model} a été refusé par le client.`,type:t?"success":"warning",relatedToRequestId:e,link:`/technician/repair/${e}`}),!0)}catch(r){return console.error("Erreur lors du traitement de la réponse au devis:",r),!1}},async markRepairAsCompleted(e){try{const{data:t,error:r}=await Z.from("repair_statuses").select("id").eq("code","RETURNED_TO_RELAY").single();if(r||!t)return console.error("Erreur lors de la récupération du statut:",r),!1;const{error:n}=await Z.from("repair_requests").update({status_id:t.id,updated_at:new Date().toISOString(),repair_completed_at:new Date().toISOString()}).eq("id",e);if(n)return console.error("Erreur lors de la mise à jour du statut de la réparation:",n),!1;const{data:A,error:a}=await Z.from("repair_requests").select(`
          client_id,
          drop_off_relay_id,
          device_type,
          brand,
          model,
          relay_point:relay_points(id, name, business_name)
        `).eq("id",e).single();return a||!A?(console.error("Erreur lors de la récupération des informations de la réparation:",a),!1):(await ms.createNotification({userId:A.client_id,title:"Appareil réparé",message:`Votre ${A.device_type} ${A.brand} ${A.model} a été réparé et sera bientôt disponible au point relais ${A.relay_point&&A.relay_point[0]?A.relay_point[0].business_name||A.relay_point[0].name:"inconnu"}.`,type:"success",relatedToRequestId:e,link:`/repair/${e}`}),A.drop_off_relay_id&&await ms.createNotification({userId:A.drop_off_relay_id,title:"Appareil réparé à réceptionner",message:`Un ${A.device_type} ${A.brand} ${A.model} réparé sera bientôt livré à votre point relais.`,type:"info",relatedToRequestId:e,link:`/relay/repair/${e}`}),!0)}catch(t){return console.error("Erreur lors du marquage de la réparation comme terminée:",t),!1}}},P_=()=>{const{user:e}=lt(),[t,r]=H.useState(""),[n,A]=H.useState([]),[a,u]=H.useState([]),[g,f]=H.useState(!0),[h,p]=H.useState(null),[w,y]=H.useState({totalRepairs:0,inProgressRepairs:0,completedRepairs:0,averageCompletionTime:0}),[C,b]=H.useState([]),[F,I]=H.useState([]);H.useEffect(()=>{(async()=>{f(!0),p(null);try{if(!(e!=null&&e.id))throw new Error("Utilisateur non authentifié");const D=await Ji.getTechnicianRepairs(e.id);console.log("Toutes les réparations:",D),console.log("Codes de statut disponibles:",[...new Set(D.map(X=>X.statusCode))]),console.log("Réparations à diagnostiquer:",D.filter(X=>X.statusCode==="WAITING_DIAGNOSTIC"));const L=new Date().toISOString().split("T")[0],M=D.filter(X=>{const ce=X.createdAt.split("T")[0]===L,G=X.statusCode==="IN_PROGRESS"||X.statusCode==="PICKED_UP_BY_TECHNICIAN",re=X.statusCode==="WAITING_DIAGNOSTIC";return ce||G||re}),k=D.filter(X=>X.statusCode==="COMPLETED"||X.statusCode==="RETURNED_TO_RELAY").slice(0,5),P={totalRepairs:D.length,inProgressRepairs:D.filter(X=>X.statusCode==="IN_PROGRESS"||X.statusCode==="PICKED_UP_BY_TECHNICIAN"||X.statusCode==="WAITING_DIAGNOSTIC").length,completedRepairs:D.filter(X=>X.statusCode==="COMPLETED"||X.statusCode==="RETURNED_TO_RELAY").length,averageCompletionTime:_(D)},z=[{id:"1",title:"Nouvelle réparation assignée",message:"Une nouvelle réparation de MacBook Pro a été assignée à vous.",timestamp:new Date().toISOString(),isRead:!1,type:"info"},{id:"2",title:"Réparation terminée",message:"La réparation #1234 a été marquée comme terminée.",timestamp:new Date(Date.now()-24*60*60*1e3).toISOString(),isRead:!0,type:"success"}];A(D),b(M),I(k),y(P),u(z)}catch(D){console.error("Error fetching technician data:",D),p("Erreur lors du chargement des données. Veuillez réessayer.")}finally{f(!1)}})()},[e]);const N=n.filter(Q=>{var D;return t===""||((D=Q.clientName)==null?void 0:D.toLowerCase().includes(t.toLowerCase()))||Q.brand.toLowerCase().includes(t.toLowerCase())||Q.model.toLowerCase().includes(t.toLowerCase())||Q.id.toLowerCase().includes(t.toLowerCase())}),v=Q=>new Date(Q).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),_=Q=>{const D=Q.filter(M=>M.statusId===3);if(D.length===0)return 0;const L=D.reduce((M,k)=>{const P=new Date(k.createdAt),z=new Date(k.updatedAt),X=Math.ceil((z.getTime()-P.getTime())/(1e3*60*60*24));return M+X},0);return Math.round(L/D.length)},S=(Q,D)=>{switch(Q){case"waiting_for_parts":return o.jsx(Jt,{variant:"warning",children:D||"En attente de pièces"});case"in_progress":return o.jsx(Jt,{variant:"primary",children:D||"En cours"});case"completed":return o.jsx(Jt,{variant:"success",children:D||"Terminée"});case"cancelled":return o.jsx(Jt,{variant:"error",children:D||"Annulée"});default:return o.jsx(Jt,{variant:"default",children:D||Q})}},j=(Q="medium")=>{const D={low:"default",medium:"warning",high:"error"},L={low:"Basse",medium:"Moyenne",high:"Haute"};return o.jsx(Jt,{variant:D[Q],size:"sm",children:L[Q]})};return o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Technicien"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Gérez vos réparations en cours et consultez les diagnostics"})]}),o.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-3",children:[o.jsx(Se,{to:"/tech/work-orders",children:o.jsx(he,{variant:"outline",icon:o.jsx(t_,{className:"h-5 w-5"}),children:"Ordres de travail"})}),o.jsx(Se,{to:"/tech/repair-new",children:o.jsx(he,{variant:"primary",icon:o.jsx(yo,{className:"h-5 w-5"}),children:"Nouvelle réparation"})})]})]}),h&&o.jsx("div",{className:"w-full p-4 mb-6 bg-error/10 border border-error/20 rounded-lg text-error",children:o.jsx("p",{children:h})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx(J,{children:o.jsx(J.Content,{className:"p-6 text-center",children:g?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-warning/10 text-warning mb-4",children:o.jsx(Gn,{className:"h-6 w-6"})}),o.jsx("div",{className:"text-2xl font-bold",children:w.totalRepairs-w.inProgressRepairs-w.completedRepairs}),o.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"À diagnostiquer"})]})})}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-6 text-center",children:g?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 text-primary mb-4",children:o.jsx(yo,{className:"h-6 w-6"})}),o.jsx("div",{className:"text-2xl font-bold",children:w.inProgressRepairs}),o.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"En réparation"})]})})}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-6 text-center",children:g?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-success/10 text-success mb-4",children:o.jsx(Tr,{className:"h-6 w-6"})}),o.jsx("div",{className:"text-2xl font-bold",children:w.completedRepairs}),o.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Réparés"})]})})}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-6 text-center",children:g?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-secondary/10 text-secondary mb-4",children:o.jsx($8,{className:"h-6 w-6"})}),o.jsxs("div",{className:"text-2xl font-bold",children:[w.averageCompletionTime," jours"]}),o.jsx("div",{className:"text-gray-600 text-sm mt-1",children:"Temps moyen"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs(J,{className:"lg:col-span-2",children:[o.jsxs(J.Header,{className:"flex justify-between items-center",children:[o.jsx(J.Title,{children:"Réparations en cours"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{className:"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:o.jsx(Xo,{className:"h-4 w-4"})}),o.jsx("button",{className:"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:o.jsx(tB,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"px-6 py-4",children:o.jsx(ur,{placeholder:"Rechercher un client ou un appareil...",value:t,onChange:Q=>r(Q.target.value),leftIcon:o.jsx(ya,{className:"h-5 w-5"}),fullWidth:!0})}),o.jsx("div",{className:"overflow-x-auto",children:g?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("table",{className:"w-full min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Réf."}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appareil"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priorité"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.filter(Q=>Q.technicianAssigned&&Q.statusName!=="completed").length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Aucune réparation trouvée."})}):N.filter(Q=>Q.technicianAssigned&&Q.statusName!=="completed").map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:o.jsx(yA,{className:"h-5 w-5 text-gray-500"})}),o.jsxs("div",{className:"ml-4",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Q.brand," ",Q.model]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Appareil électronique"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Q.clientName||"Client inconnu"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[o.jsxs("div",{children:[Q.brand," ",Q.model]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Appareil électronique"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(Q.statusName||"",Q.statusLabel||"")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j("medium")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:v(Q.updatedAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx(Se,{to:`/tech/repair/${Q.id}`,className:"text-primary hover:text-primary-dark",children:"Traiter"})})]},Q.id))})]})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(J,{children:[o.jsxs(J.Header,{className:"flex justify-between items-center",children:[o.jsx(J.Title,{children:"Notifications"}),o.jsx(Se,{to:"/notifications",className:"text-sm text-primary",children:"Voir tout"})]}),o.jsx(J.Content,{className:"p-0",children:g?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):a.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucune notification non lue"}):o.jsx("div",{className:"divide-y divide-gray-100",children:a.map(Q=>o.jsx("div",{className:`p-4 ${Q.isRead?"":"bg-primary/5"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsxs("div",{className:"flex-shrink-0 pt-0.5",children:[Q.type==="info"&&o.jsx(Fs,{className:"h-5 w-5 text-primary"}),Q.type==="success"&&o.jsx(Tr,{className:"h-5 w-5 text-success"}),Q.type==="warning"&&o.jsx(Cr,{className:"h-5 w-5 text-warning"}),Q.type==="error"&&o.jsx(Cr,{className:"h-5 w-5 text-error"})]}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.title}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:Q.message}),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(Q.timestamp).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]})},Q.id))})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Actions rapides"})}),o.jsxs(J.Content,{className:"space-y-4",children:[o.jsxs(Se,{to:"/tech/repair-new",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(yo,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Nouvelle réparation"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Créer un dossier de réparation"})]})]}),o.jsxs(Se,{to:"/tech/inventory",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(yA,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Inventaire"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Gérer les pièces et composants"})]})]}),o.jsxs(Se,{to:"/tech/chats",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(wa,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Conversations clients"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Répondre aux messages"})]})]}),o.jsxs(Se,{to:"/tech/settings",className:"flex items-center p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:o.jsx(Xu,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium",children:"Paramètres"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Configurer votre espace"})]})]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations pour aujourd'hui"})}),g?o.jsx(J.Content,{className:"text-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):C.length===0?o.jsxs(J.Content,{className:"text-center py-8",children:[o.jsx(su,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Aucune réparation prévue pour aujourd'hui"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appareil"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Problème"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[Q.brand," ",Q.model]}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:o.jsx("div",{className:"truncate max-w-[200px]",children:Q.problemDescription})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(Q.statusName||"",Q.statusLabel||"")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx(Se,{to:`/tech/repair/${Q.id}`,className:"text-primary hover:text-primary-dark",children:"Traiter"})})]},Q.id))})]})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations récemment terminées"})}),g?o.jsx(J.Content,{className:"text-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):F.length===0?o.jsxs(J.Content,{className:"text-center py-8",children:[o.jsx(Tr,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Aucune réparation terminée récemment"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appareil"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coût"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[Q.brand," ",Q.model]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Q.clientName||"Client inconnu"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-right",children:Q.estimatedCost?`${Q.estimatedCost} €`:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-right",children:v(Q.updatedAt)})]},Q.id))})]})})]})]})]})},K_=()=>{const{user:e}=lt(),t=kt(),[r,n]=H.useState({totalUsers:0,totalRepairs:0,totalRelayPoints:0,totalTechnicians:0,pendingRepairs:0}),[A,a]=H.useState(!0);H.useEffect(()=>{(async()=>{a(!0);try{const{count:f}=await Z.from("profiles").select("*",{count:"exact",head:!0}),{count:h}=await Z.from("repair_requests").select("*",{count:"exact",head:!0}),{data:p,error:w}=await Z.from("profiles").select("id").or("role.eq.relay,role.eq.relayPoint"),y=p?p.length:0;w&&console.error("Erreur lors de la récupération des points relais:",w);const{count:C}=await Z.from("profiles").select("*",{count:"exact",head:!0}).eq("role","technician"),{data:b}=await Z.from("repair_statuses").select("id").in("code",["SUBMITTED","RECEIVED","TO_DIAGNOSE"]);let F=0;if(b&&b.length>0){const I=b.map(v=>v.id),{count:N}=await Z.from("repair_requests").select("*",{count:"exact",head:!0}).in("status_id",I);F=N||0}n({totalUsers:f||0,totalRepairs:h||0,totalRelayPoints:y||0,totalTechnicians:C||0,pendingRepairs:F||0})}catch(f){console.error("Erreur lors de la récupération des statistiques:",f)}finally{a(!1)}})()},[]);const u=[{title:"Gestion des utilisateurs",description:"Gérer les comptes utilisateurs, les rôles et les permissions",icon:o.jsx(_c,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/users")},{title:"Gestion des réparations",description:"Suivre et gérer toutes les demandes de réparation",icon:o.jsx(ll,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/repairs")},{title:"Gestion des points relais",description:"Ajouter, modifier ou supprimer des points relais",icon:o.jsx(Mr,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/relay-points")},{title:"Gestion des techniciens",description:"Gérer les techniciens et leurs spécialisations",icon:o.jsx(_c,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/technicians")},{title:"Paramètres du système",description:"Configurer les paramètres globaux de l'application",icon:o.jsx(Xu,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/settings")},{title:"Rapports et statistiques",description:"Visualiser les statistiques et générer des rapports",icon:o.jsx(nB,{className:"h-8 w-8 text-primary"}),action:()=>t("/admin/reports")}];return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tableau de bord administrateur"}),o.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",e==null?void 0:e.firstName," ",e==null?void 0:e.lastName,". Gérez votre plateforme PC Relais."]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(J,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total utilisateurs"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:A?"...":r.totalUsers})]}),o.jsx(_c,{className:"h-10 w-10 text-blue-500 opacity-80"})]})})}),o.jsx(J,{className:"bg-gradient-to-br from-green-50 to-green-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total réparations"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:A?"...":r.totalRepairs})]}),o.jsx(yA,{className:"h-10 w-10 text-green-500 opacity-80"})]})})}),o.jsx(J,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Points relais"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:A?"...":r.totalRelayPoints})]}),o.jsx(Mr,{className:"h-10 w-10 text-purple-500 opacity-80"})]})})})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Modules d'administration"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map((g,f)=>o.jsx(J,{className:"hover:shadow-md transition-shadow",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:g.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:g.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:g.description}),o.jsx(he,{variant:"outline",onClick:g.action,className:"w-full",children:"Accéder"})]})]})})},f))})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Réparations en attente"}),o.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[A?"...":r.pendingRepairs," en attente"]})]}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[o.jsx(yA,{className:"h-12 w-12 text-gray-400 mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Gérer les réparations"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 text-center",children:"Consultez et gérez toutes les demandes de réparation en cours."}),o.jsx(he,{variant:"primary",onClick:()=>t("/admin/repairs"),children:"Voir toutes les réparations"})]})})})]})]})},V_=()=>{const{user:e}=lt(),t=()=>{if(!e)return o.jsx("div",{children:"Chargement..."});switch(e.role){case"client":return o.jsx(L_,{});case"relayPoint":return o.jsx(H_,{});case"technician":return o.jsx(P_,{});case"admin":return o.jsx(K_,{});default:return o.jsx("div",{children:"Type d'utilisateur non reconnu"})}};return o.jsx(Nr,{children:t()})},wf=H.forwardRef(({label:e,options:t,error:r,helperText:n,fullWidth:A=!1,className:a="",id:u,onChange:g,...f},h)=>{const p=u||`select-${(e==null?void 0:e.toLowerCase().replace(/\s+/g,"-"))||Math.random().toString(36).substr(2,9)}`,w="block w-full rounded-md border bg-white px-3 py-2 text-sm shadow-sm transition-colors appearance-none pr-10 focus:outline-none focus:ring-2 focus:ring-primary/20",y=r?"border-error focus:border-error":"border-gray-300 focus:border-primary",C=A?"w-full":"",b=F=>{g&&g(F.target.value)};return o.jsxs("div",{className:`${C} ${a}`,children:[e&&o.jsx("label",{htmlFor:p,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{ref:h,id:p,className:`${w} ${y}`,"aria-invalid":!!r,"aria-describedby":r?`${p}-error`:n?`${p}-helper`:void 0,onChange:b,...f,children:t.map(F=>o.jsx("option",{value:F.value,children:F.label},F.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none text-gray-500",children:o.jsx(J8,{className:"w-4 h-4"})})]}),r&&o.jsx("p",{id:`${p}-error`,className:"mt-1 text-xs text-error",children:r}),n&&!r&&o.jsx("p",{id:`${p}-helper`,className:"mt-1 text-xs text-gray-500",children:n})]})});wf.displayName="Select";function G_(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,[])).next())})}function z_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W_=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,A,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(A=n;A--!==0;)if(!e(t[A],r[A]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(A=n;A--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[A]))return!1;for(A=n;A--!==0;){var u=a[A];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r},X_=z_(W_);const Ap="__googleMapsScriptId";var Pi;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Pi||(Pi={}));class LA{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:A,id:a=Ap,language:u,libraries:g=[],mapIds:f,nonce:h,region:p,retries:w=3,url:y="https://maps.googleapis.com/maps/api/js",version:C}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=A,this.id=a||Ap,this.language=u,this.libraries=g,this.mapIds=f,this.nonce=h,this.region=p,this.retries=w,this.url=y,this.version=C,LA.instance){if(!X_(this.options,LA.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(LA.instance.options)}`);return LA.instance}LA.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Pi.FAILURE:this.done?Pi.SUCCESS:this.loading?Pi.LOADING:Pi.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,r;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(a=>!n[a]&&delete n[a]),!((r=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||r===void 0)&&r.importLibrary||(a=>{let u,g,f,h="The Google Maps JavaScript API",p="google",w="importLibrary",y="__ib__",C=document,b=window;b=b[p]||(b[p]={});const F=b.maps||(b.maps={}),I=new Set,N=new URLSearchParams,v=()=>u||(u=new Promise((_,S)=>G_(this,void 0,void 0,function*(){var j;yield g=C.createElement("script"),g.id=this.id,N.set("libraries",[...I]+"");for(f in a)N.set(f.replace(/[A-Z]/g,Q=>"_"+Q[0].toLowerCase()),a[f]);N.set("callback",p+".maps."+y),g.src=this.url+"?"+N,F[y]=_,g.onerror=()=>u=S(Error(h+" could not load.")),g.nonce=this.nonce||((j=C.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",C.head.append(g)})));F[w]?console.warn(h+" only loads once. Ignoring:",a):F[w]=(_,...S)=>I.add(_)&&v().then(()=>F[w](_,...S))})(n);const A=this.libraries.map(a=>this.importLibrary(a));A.length||A.push(this.importLibrary("core")),Promise.all(A).then(()=>this.callback(),a=>{const u=new ErrorEvent("error",{error:a});this.loadErrorCallback(u)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const q_="AIzaSyAtcOpoqowe0yDQ_IxEGGldltimO09dwBY",$_=({onPlaceSelect:e,onCoordinatesSelect:t,inputValue:r,onInputChange:n,placeholder:A,disabled:a})=>{const u=H.useRef(null),g=H.useRef(null);return H.useEffect(()=>{if(!(!u.current||!window.google||!window.google.maps||!window.google.maps.places)){try{g.current=new window.google.maps.places.Autocomplete(u.current,{componentRestrictions:{country:"fr"},types:["address"],fields:["address_components","formatted_address","geometry","name","place_id"]}),g.current.addListener("place_changed",()=>{try{const f=g.current.getPlace();if(f&&f.formatted_address){const h=f.formatted_address;console.log("Adresse complète récupérée depuis Google Places:",h),n(h);let p,w="",y="",C="";if(f.address_components)for(const F of f.address_components){const I=F.types;I.includes("street_number")&&(w=F.long_name+" "+w),I.includes("route")&&(w=w+F.long_name),I.includes("locality")&&(y=F.long_name),I.includes("postal_code")&&(C=F.long_name)}if(console.log("Adresse décomposée:",{streetAddress:w,city:y,postalCode:C}),f.geometry&&f.geometry.location){const F=f.geometry.location.lat(),I=f.geometry.location.lng();p={lat:F,lng:I,address:h,streetAddress:w,city:y,postalCode:C},console.log("Coordonnées EXACTES récupérées depuis Google Places:",p)}else y&&C?(console.warn("Coordonnées non disponibles, mais ville et code postal présents. Utilisation de coordonnées approximatives."),p={lat:45.4,lng:5.4,address:h,streetAddress:w,city:y,postalCode:C},console.log("Utilisation de coordonnées approximatives basées sur la ville et le code postal:",p)):(console.warn("Aucune coordonnée disponible pour cette adresse. Utilisation des coordonnées par défaut."),p={lat:46.603354,lng:1.888334,address:h,streetAddress:w,city:y,postalCode:C},console.log("Utilisation de coordonnées par défaut pour la France:",p));t&&t(p);const b={formatted_address:h,geometry:f.geometry,name:f.name,place_id:f.place_id,address_components:f.address_components};e(b)}}catch(f){console.error("Erreur lors de la récupération du lieu:",f)}})}catch(f){console.error("Erreur lors de l'initialisation de l'autocomplétion:",f)}return()=>{g.current&&window.google&&window.google.maps&&window.google.maps.event.clearInstanceListeners(g.current)}}},[n,e,t]),o.jsx("input",{ref:u,type:"text",value:r,onChange:f=>n(f.target.value),placeholder:A||"Entrez une adresse",disabled:a,className:"block w-full px-4 py-2 text-sm border border-gray-300 rounded-md shadow-sm focus:border-primary focus:ring-primary"})},iB=({label:e,placeholder:t,value:r,onChange:n,disabled:A,onPlaceSelect:a=()=>{},onCoordinatesSelect:u})=>{const[g,f]=H.useState(!1),[h,p]=H.useState(null);H.useEffect(()=>{(async()=>{try{await new LA({apiKey:q_,version:"weekly",libraries:["places"]}).load(),f(!0)}catch(C){console.error("Erreur lors du chargement de l'API Google Maps:",C),p("Impossible de charger l'API Google Maps. Vérifiez votre connexion internet et réessayez.")}})()},[]);const w=H.useCallback(y=>{n(y)},[n]);return o.jsxs("div",{className:"relative",children:[e&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Mr,{className:"h-5 w-5 text-gray-400"})}),g?o.jsx($_,{inputValue:r,onInputChange:w,onPlaceSelect:a,onCoordinatesSelect:u,placeholder:t,disabled:A}):o.jsx("input",{type:"text",value:r,onChange:y=>n(y.target.value),placeholder:t||"Chargement de l'API Google Maps...",disabled:!0,className:"block w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md shadow-sm focus:border-primary focus:ring-primary"})]}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]})},Ad=e=>{let t={latitude:0,longitude:0};if(e.metadata&&e.metadata.coordinates)t=e.metadata.coordinates,console.log("Coordonnées trouvées dans metadata:",t);else if(e.coordinates)if(typeof e.coordinates=="string"){const[r,n]=e.coordinates.split(",").map(parseFloat);t={latitude:r||0,longitude:n||0}}else typeof e.coordinates=="object"&&(t=e.coordinates);return{id:e.id,email:e.email,phoneNumber:e.phone||"",firstName:"",lastName:"",role:"relayPoint",createdAt:new Date().toISOString(),businessName:e.name,address:e.address,openingHours:e.opening_hours,coordinates:t,commission:e.commission||0}},vs={async getAllRelayPoints(){try{console.log("Récupération des points relais depuis la base de données...");const{data:e,error:t}=await Z.from("relay_points").select("*").order("name");if(t)throw console.error("Erreur lors de la récupération des points relais:",t),t;return console.log("Points relais récupérés:",(e==null?void 0:e.length)||0),(e||[]).map(Ad)}catch(e){throw console.error("Erreur lors de la récupération des points relais:",e),e}},async getNearbyRelayPoints(e,t=25){try{console.log("Recherche de points relais pour l'adresse:",e,"avec un rayon de",t,"km"),console.log(`Utilisation des coordonnées du centre de la France: 
{lat: 46.603354, lng: 1.888334}`);const r=46.603354,n=1.888334,A=await this.getAllRelayPoints();console.log("Nombre total de points relais récupérés:",A.length);const a={Paris:{lat:48.8566,lng:2.3522},Lyon:{lat:45.764,lng:4.8357},Marseille:{lat:43.2965,lng:5.3698},Bordeaux:{lat:44.8378,lng:-.5792},Lille:{lat:50.6292,lng:3.0573},Toulouse:{lat:43.6047,lng:1.4442},Nice:{lat:43.7102,lng:7.262},Nantes:{lat:47.2184,lng:-1.5536},Strasbourg:{lat:48.5734,lng:7.7521},Montpellier:{lat:43.6108,lng:3.8767}},g=A.map(f=>{if(!f.coordinates||f.coordinates.latitude===0&&f.coordinates.longitude===0){const h=f.businessName||"",p=f.address||"";let w="";for(const v of Object.keys(a))if(h.includes(v)||p.includes(v)){w=v;break}if(w&&a[w]){const v=a[w];return console.log(`Utilisation des coordonnées réelles de ${w} pour ${f.businessName}:`,v),{...f,coordinates:{latitude:v.lat,longitude:v.lng}}}const y=5+Math.random()*15,C=Math.random()*2*Math.PI,b=y/111*Math.cos(C),F=y/(111*Math.cos(this.deg2rad(r)))*Math.sin(C),I=r+b,N=n+F;return console.log(`Ajout de coordonnées proches pour ${f.businessName}:`,{lat:I,lng:N,distance:`~${Math.round(y)} km`}),{...f,coordinates:{latitude:I,longitude:N}}}return f}).map(f=>{const h=f.coordinates.latitude,p=f.coordinates.longitude,w=this.calculateDistance(r,n,h,p);return console.log(`Distance entre l'utilisateur et ${f.businessName}: ${w.toFixed(2)} km`),{...f,distance:w}}).filter(f=>Math.abs(r-46.603354)<.001&&Math.abs(n-1.888334)<.001?!0:f.distance<=t).sort((f,h)=>f.distance-h.distance);return console.log("Nombre de points relais dans le rayon de recherche:",g.length),g}catch(r){throw console.error("Erreur lors de la recherche de points relais à proximité:",r),r}},async getNearbyRelayPointsByCoordinates(e,t,r=25){try{console.log(`Recherche de points relais autour des coordonnées: lat=${e}, lng=${t}, rayon=${r} km`);const n=await this.getAllRelayPoints();console.log("Nombre total de points relais récupérés:",n.length);const A=n.filter(u=>u.coordinates&&u.coordinates.latitude&&u.coordinates.longitude&&u.coordinates.latitude!==0&&u.coordinates.longitude!==0);if(console.log("Nombre de points relais avec coordonnées valides:",A.length),A.length===0)return console.log("Aucun point relais avec coordonnées valides. Attribution de coordonnées fictives."),n.map((u,g)=>{const f=1+g%20;return{...u,distance:f}}).sort((u,g)=>u.distance-g.distance);const a=n.map(u=>{if(!u.coordinates||!u.coordinates.latitude||!u.coordinates.longitude||u.coordinates.latitude===0||u.coordinates.longitude===0){const p=5+Math.random()*15;return console.log(`Coordonnées invalides pour ${u.businessName}. Attribution d'une distance fictive: ${p.toFixed(2)} km`),{...u,distance:p}}const g=u.coordinates.latitude,f=u.coordinates.longitude,h=this.calculateDistance(e,t,g,f);return console.log(`Distance entre l'utilisateur et ${u.businessName}: ${h.toFixed(2)} km`),{...u,distance:h}}).filter(u=>u.distance<=r).sort((u,g)=>u.distance-g.distance);return console.log("Nombre de points relais dans le rayon de recherche:",a.length),a.length===0&&r<100?(console.log(`Aucun point relais trouvé dans un rayon de ${r} km. Étendre le rayon à 500 km.`),this.getNearbyRelayPointsByCoordinates(e,t,500)):a.length===0?(console.log(`Aucun point relais trouvé dans un rayon de ${r} km. Retourner tous les points relais triés par distance.`),n.map(u=>{var p,w;const g=((p=u.coordinates)==null?void 0:p.latitude)||0,f=((w=u.coordinates)==null?void 0:w.longitude)||0,h=this.calculateDistance(e,t,g,f);return{...u,distance:h}}).sort((u,g)=>u.distance-g.distance)):a}catch(n){return console.error("Erreur lors de la recherche des points relais par coordonnées:",n),console.log("Retour de tous les points relais disponibles en raison d'une erreur"),(await this.getAllRelayPoints()).map((a,u)=>({...a,distance:1+u%20})).sort((a,u)=>a.distance-u.distance)}},async getRelayPointById(e){try{const{data:t,error:r}=await Z.from("relay_points").select("*").eq("id",e).single();return r?(console.error(`Erreur lors de la récupération du point relais ${e}:`,r),null):t?Ad(t):null}catch(t){return console.error(`Erreur lors de la récupération du point relais ${e}:`,t),null}},calculateDistance(e,t,r,n){const a=this.deg2rad(r-e),u=this.deg2rad(n-t),g=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(u/2)*Math.sin(u/2),h=6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)));return Math.round(h*10)/10},deg2rad(e){return e*(Math.PI/180)},async geocodeAddress(e){try{const t="AIzaSyAtcOpoqowe0yDQ_IxEGGldltimO09dwBY";if(!e||e.trim()==="")return console.warn("Adresse vide fournie pour le géocodage"),null;const r=e.replace(/Cr /g,"Cours ");console.log("Géocodage de l'adresse:",r);const n=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(r)}&region=fr&key=${t}`,A=await fetch(n);if(!A.ok)return console.error("Erreur lors du géocodage:",A.status,A.statusText),null;const a=await A.json();if(console.log("Réponse de l'API de géocodage:",a.status),a.status!=="OK"){if(console.error(`Erreur de géocodage: ${a.status} - ${a.error_message||"Pas de message d'erreur"}`),a.status==="ZERO_RESULTS"){const u=e.match(/(\d{5})\s+([^,]+)/);if(u){const[,g,f]=u,h=`${g} ${f}, France`;console.log("Tentative avec adresse simplifiée:",h);const p=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(h)}&region=fr&key=${t}`,y=await(await fetch(p)).json();if(y.status==="OK"&&y.results&&y.results.length>0){const C=y.results[0].geometry.location;return console.log("Coordonnées obtenues via adresse simplifiée:",C),{latitude:C.lat,longitude:C.lng}}}}return null}if(a.results&&a.results.length>0){const u=a.results[0].geometry.location;return console.log("Coordonnées obtenues:",u),{latitude:u.lat,longitude:u.lng}}return console.error("Aucun résultat trouvé pour l'adresse:",e),null}catch(t){return console.error("Erreur lors du géocodage:",t),null}},async createOrUpdateRelayPoint(e){var t,r;try{let n=e.coordinates;if(n)console.log("Utilisation des coordonnées fournies:",n);else{console.log("Coordonnées non fournies, tentative de géocodage...");const u=await this.geocodeAddress(e.address);u&&(n=u)}const A={name:e.businessName,email:e.email,phone:e.phoneNumber,address:e.address,city:((t=e.address.split(",").slice(-2,-1)[0])==null?void 0:t.trim())||"",postal_code:((r=e.address.match(/\d{5}/))==null?void 0:r.toString())||"",opening_hours:e.openingHours,coordinates:n};let a;if(e.id){if(e.currentUserId){const{data:f,error:h}=await Z.from("profiles").select("role").eq("id",e.currentUserId).single();if(h)throw console.error("Erreur lors de la vérification des droits:",h),new Error("Vous n'avez pas les droits pour effectuer cette action.");if(f.role!=="admin"&&e.id!==e.currentUserId)throw console.error("Tentative de modification non autorisée d'un point relais"),new Error("Vous ne pouvez modifier que votre propre point relais.")}const{data:u,error:g}=await Z.from("relay_points").update(A).eq("id",e.id).select("*").single();if(g)throw console.error("Erreur lors de la mise à jour du point relais:",g),g;a=u}else{const{data:u,error:g}=await Z.from("relay_points").insert(A).select("*").single();if(g)throw console.error("Erreur lors de la création du point relais:",g),g;a=u}return a?Ad(a):null}catch(n){return console.error("Erreur lors de la création/mise à jour du point relais:",n),null}},async getAddressSuggestions(e){if(!e||e.length<3)return[];try{const t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=5`,r=await fetch(t,{headers:{"User-Agent":"PC-Relais-App/1.0"}});if(!r.ok)throw new Error("Erreur lors de la récupération des suggestions d'adresses");return(await r.json()).map(A=>({display_name:A.display_name,place_id:A.place_id,original_name:A.display_name}))}catch(t){return console.error("Erreur lors de la récupération des suggestions d'adresses:",t),[]}}};var aB={exports:{}};function Y_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var id={exports:{}};const Z_={},J_=Object.freeze(Object.defineProperty({__proto__:null,default:Z_},Symbol.toStringTag,{value:"Module"})),eN=Aw(J_);var ip;function Ze(){return ip||(ip=1,function(e,t){(function(r,n){e.exports=n()})(Te,function(){var r=r||function(n,A){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Te<"u"&&Te.crypto&&(a=Te.crypto),!a&&typeof Y_=="function")try{a=eN}catch{}var u=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},g=Object.create||function(){function v(){}return function(_){var S;return v.prototype=_,S=new v,v.prototype=null,S}}(),f={},h=f.lib={},p=h.Base=function(){return{extend:function(v){var _=g(this);return v&&_.mixIn(v),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var _ in v)v.hasOwnProperty(_)&&(this[_]=v[_]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),w=h.WordArray=p.extend({init:function(v,_){v=this.words=v||[],_!=A?this.sigBytes=_:this.sigBytes=v.length*4},toString:function(v){return(v||C).stringify(this)},concat:function(v){var _=this.words,S=v.words,j=this.sigBytes,Q=v.sigBytes;if(this.clamp(),j%4)for(var D=0;D<Q;D++){var L=S[D>>>2]>>>24-D%4*8&255;_[j+D>>>2]|=L<<24-(j+D)%4*8}else for(var M=0;M<Q;M+=4)_[j+M>>>2]=S[M>>>2];return this.sigBytes+=Q,this},clamp:function(){var v=this.words,_=this.sigBytes;v[_>>>2]&=4294967295<<32-_%4*8,v.length=n.ceil(_/4)},clone:function(){var v=p.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var _=[],S=0;S<v;S+=4)_.push(u());return new w.init(_,v)}}),y=f.enc={},C=y.Hex={stringify:function(v){for(var _=v.words,S=v.sigBytes,j=[],Q=0;Q<S;Q++){var D=_[Q>>>2]>>>24-Q%4*8&255;j.push((D>>>4).toString(16)),j.push((D&15).toString(16))}return j.join("")},parse:function(v){for(var _=v.length,S=[],j=0;j<_;j+=2)S[j>>>3]|=parseInt(v.substr(j,2),16)<<24-j%8*4;return new w.init(S,_/2)}},b=y.Latin1={stringify:function(v){for(var _=v.words,S=v.sigBytes,j=[],Q=0;Q<S;Q++){var D=_[Q>>>2]>>>24-Q%4*8&255;j.push(String.fromCharCode(D))}return j.join("")},parse:function(v){for(var _=v.length,S=[],j=0;j<_;j++)S[j>>>2]|=(v.charCodeAt(j)&255)<<24-j%4*8;return new w.init(S,_)}},F=y.Utf8={stringify:function(v){try{return decodeURIComponent(escape(b.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return b.parse(unescape(encodeURIComponent(v)))}},I=h.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=F.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var _,S=this._data,j=S.words,Q=S.sigBytes,D=this.blockSize,L=D*4,M=Q/L;v?M=n.ceil(M):M=n.max((M|0)-this._minBufferSize,0);var k=M*D,P=n.min(k*4,Q);if(k){for(var z=0;z<k;z+=D)this._doProcessBlock(j,z);_=j.splice(0,k),S.sigBytes-=P}return new w.init(_,P)},clone:function(){var v=p.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});h.Hasher=I.extend({cfg:p.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){I.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(v){return function(_,S){return new v.init(S).finalize(_)}},_createHmacHelper:function(v){return function(_,S){return new N.HMAC.init(v,S).finalize(_)}}});var N=f.algo={};return f}(Math);return r})}(id)),id.exports}var ad={exports:{}},ap;function qu(){return ap||(ap=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(n){var A=r,a=A.lib,u=a.Base,g=a.WordArray,f=A.x64={};f.Word=u.extend({init:function(h,p){this.high=h,this.low=p}}),f.WordArray=u.extend({init:function(h,p){h=this.words=h||[],p!=n?this.sigBytes=p:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,p=h.length,w=[],y=0;y<p;y++){var C=h[y];w.push(C.high),w.push(C.low)}return g.create(w,this.sigBytes)},clone:function(){for(var h=u.clone.call(this),p=h.words=this.words.slice(0),w=p.length,y=0;y<w;y++)p[y]=p[y].clone();return h}})}(),r})}(ad)),ad.exports}var od={exports:{}},op;function tN(){return op||(op=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,A=n.lib,a=A.WordArray,u=a.init,g=a.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||typeof Uint8ClampedArray<"u"&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var h=f.byteLength,p=[],w=0;w<h;w++)p[w>>>2]|=f[w]<<24-w%4*8;u.call(this,p,h)}else u.apply(this,arguments)};g.prototype=a}}(),r.lib.WordArray})}(od)),od.exports}var ld={exports:{}},lp;function rN(){return lp||(lp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=n.enc;u.Utf16=u.Utf16BE={stringify:function(f){for(var h=f.words,p=f.sigBytes,w=[],y=0;y<p;y+=2){var C=h[y>>>2]>>>16-y%4*8&65535;w.push(String.fromCharCode(C))}return w.join("")},parse:function(f){for(var h=f.length,p=[],w=0;w<h;w++)p[w>>>1]|=f.charCodeAt(w)<<16-w%2*16;return a.create(p,h*2)}},u.Utf16LE={stringify:function(f){for(var h=f.words,p=f.sigBytes,w=[],y=0;y<p;y+=2){var C=g(h[y>>>2]>>>16-y%4*8&65535);w.push(String.fromCharCode(C))}return w.join("")},parse:function(f){for(var h=f.length,p=[],w=0;w<h;w++)p[w>>>1]|=g(f.charCodeAt(w)<<16-w%2*16);return a.create(p,h*2)}};function g(f){return f<<8&4278255360|f>>>8&16711935}}(),r.enc.Utf16})}(ld)),ld.exports}var cd={exports:{}},cp;function si(){return cp||(cp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=n.enc;u.Base64={stringify:function(f){var h=f.words,p=f.sigBytes,w=this._map;f.clamp();for(var y=[],C=0;C<p;C+=3)for(var b=h[C>>>2]>>>24-C%4*8&255,F=h[C+1>>>2]>>>24-(C+1)%4*8&255,I=h[C+2>>>2]>>>24-(C+2)%4*8&255,N=b<<16|F<<8|I,v=0;v<4&&C+v*.75<p;v++)y.push(w.charAt(N>>>6*(3-v)&63));var _=w.charAt(64);if(_)for(;y.length%4;)y.push(_);return y.join("")},parse:function(f){var h=f.length,p=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var y=0;y<p.length;y++)w[p.charCodeAt(y)]=y}var C=p.charAt(64);if(C){var b=f.indexOf(C);b!==-1&&(h=b)}return g(f,h,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function g(f,h,p){for(var w=[],y=0,C=0;C<h;C++)if(C%4){var b=p[f.charCodeAt(C-1)]<<C%4*2,F=p[f.charCodeAt(C)]>>>6-C%4*2,I=b|F;w[y>>>2]|=I<<24-y%4*8,y++}return a.create(w,y)}}(),r.enc.Base64})}(cd)),cd.exports}var ud={exports:{}},up;function nN(){return up||(up=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=n.enc;u.Base64url={stringify:function(f,h){h===void 0&&(h=!0);var p=f.words,w=f.sigBytes,y=h?this._safe_map:this._map;f.clamp();for(var C=[],b=0;b<w;b+=3)for(var F=p[b>>>2]>>>24-b%4*8&255,I=p[b+1>>>2]>>>24-(b+1)%4*8&255,N=p[b+2>>>2]>>>24-(b+2)%4*8&255,v=F<<16|I<<8|N,_=0;_<4&&b+_*.75<w;_++)C.push(y.charAt(v>>>6*(3-_)&63));var S=y.charAt(64);if(S)for(;C.length%4;)C.push(S);return C.join("")},parse:function(f,h){h===void 0&&(h=!0);var p=f.length,w=h?this._safe_map:this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var C=0;C<w.length;C++)y[w.charCodeAt(C)]=C}var b=w.charAt(64);if(b){var F=f.indexOf(b);F!==-1&&(p=F)}return g(f,p,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function g(f,h,p){for(var w=[],y=0,C=0;C<h;C++)if(C%4){var b=p[f.charCodeAt(C-1)]<<C%4*2,F=p[f.charCodeAt(C)]>>>6-C%4*2,I=b|F;w[y>>>2]|=I<<24-y%4*8,y++}return a.create(w,y)}}(),r.enc.Base64url})}(ud)),ud.exports}var dd={exports:{}},dp;function Ai(){return dp||(dp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(n){var A=r,a=A.lib,u=a.WordArray,g=a.Hasher,f=A.algo,h=[];(function(){for(var F=0;F<64;F++)h[F]=n.abs(n.sin(F+1))*4294967296|0})();var p=f.MD5=g.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,I){for(var N=0;N<16;N++){var v=I+N,_=F[v];F[v]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var S=this._hash.words,j=F[I+0],Q=F[I+1],D=F[I+2],L=F[I+3],M=F[I+4],k=F[I+5],P=F[I+6],z=F[I+7],X=F[I+8],ce=F[I+9],G=F[I+10],re=F[I+11],oe=F[I+12],le=F[I+13],Y=F[I+14],ue=F[I+15],ee=S[0],$=S[1],Ae=S[2],se=S[3];ee=w(ee,$,Ae,se,j,7,h[0]),se=w(se,ee,$,Ae,Q,12,h[1]),Ae=w(Ae,se,ee,$,D,17,h[2]),$=w($,Ae,se,ee,L,22,h[3]),ee=w(ee,$,Ae,se,M,7,h[4]),se=w(se,ee,$,Ae,k,12,h[5]),Ae=w(Ae,se,ee,$,P,17,h[6]),$=w($,Ae,se,ee,z,22,h[7]),ee=w(ee,$,Ae,se,X,7,h[8]),se=w(se,ee,$,Ae,ce,12,h[9]),Ae=w(Ae,se,ee,$,G,17,h[10]),$=w($,Ae,se,ee,re,22,h[11]),ee=w(ee,$,Ae,se,oe,7,h[12]),se=w(se,ee,$,Ae,le,12,h[13]),Ae=w(Ae,se,ee,$,Y,17,h[14]),$=w($,Ae,se,ee,ue,22,h[15]),ee=y(ee,$,Ae,se,Q,5,h[16]),se=y(se,ee,$,Ae,P,9,h[17]),Ae=y(Ae,se,ee,$,re,14,h[18]),$=y($,Ae,se,ee,j,20,h[19]),ee=y(ee,$,Ae,se,k,5,h[20]),se=y(se,ee,$,Ae,G,9,h[21]),Ae=y(Ae,se,ee,$,ue,14,h[22]),$=y($,Ae,se,ee,M,20,h[23]),ee=y(ee,$,Ae,se,ce,5,h[24]),se=y(se,ee,$,Ae,Y,9,h[25]),Ae=y(Ae,se,ee,$,L,14,h[26]),$=y($,Ae,se,ee,X,20,h[27]),ee=y(ee,$,Ae,se,le,5,h[28]),se=y(se,ee,$,Ae,D,9,h[29]),Ae=y(Ae,se,ee,$,z,14,h[30]),$=y($,Ae,se,ee,oe,20,h[31]),ee=C(ee,$,Ae,se,k,4,h[32]),se=C(se,ee,$,Ae,X,11,h[33]),Ae=C(Ae,se,ee,$,re,16,h[34]),$=C($,Ae,se,ee,Y,23,h[35]),ee=C(ee,$,Ae,se,Q,4,h[36]),se=C(se,ee,$,Ae,M,11,h[37]),Ae=C(Ae,se,ee,$,z,16,h[38]),$=C($,Ae,se,ee,G,23,h[39]),ee=C(ee,$,Ae,se,le,4,h[40]),se=C(se,ee,$,Ae,j,11,h[41]),Ae=C(Ae,se,ee,$,L,16,h[42]),$=C($,Ae,se,ee,P,23,h[43]),ee=C(ee,$,Ae,se,ce,4,h[44]),se=C(se,ee,$,Ae,oe,11,h[45]),Ae=C(Ae,se,ee,$,ue,16,h[46]),$=C($,Ae,se,ee,D,23,h[47]),ee=b(ee,$,Ae,se,j,6,h[48]),se=b(se,ee,$,Ae,z,10,h[49]),Ae=b(Ae,se,ee,$,Y,15,h[50]),$=b($,Ae,se,ee,k,21,h[51]),ee=b(ee,$,Ae,se,oe,6,h[52]),se=b(se,ee,$,Ae,L,10,h[53]),Ae=b(Ae,se,ee,$,G,15,h[54]),$=b($,Ae,se,ee,Q,21,h[55]),ee=b(ee,$,Ae,se,X,6,h[56]),se=b(se,ee,$,Ae,ue,10,h[57]),Ae=b(Ae,se,ee,$,P,15,h[58]),$=b($,Ae,se,ee,le,21,h[59]),ee=b(ee,$,Ae,se,M,6,h[60]),se=b(se,ee,$,Ae,re,10,h[61]),Ae=b(Ae,se,ee,$,D,15,h[62]),$=b($,Ae,se,ee,ce,21,h[63]),S[0]=S[0]+ee|0,S[1]=S[1]+$|0,S[2]=S[2]+Ae|0,S[3]=S[3]+se|0},_doFinalize:function(){var F=this._data,I=F.words,N=this._nDataBytes*8,v=F.sigBytes*8;I[v>>>5]|=128<<24-v%32;var _=n.floor(N/4294967296),S=N;I[(v+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,I[(v+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,F.sigBytes=(I.length+1)*4,this._process();for(var j=this._hash,Q=j.words,D=0;D<4;D++){var L=Q[D];Q[D]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return j},clone:function(){var F=g.clone.call(this);return F._hash=this._hash.clone(),F}});function w(F,I,N,v,_,S,j){var Q=F+(I&N|~I&v)+_+j;return(Q<<S|Q>>>32-S)+I}function y(F,I,N,v,_,S,j){var Q=F+(I&v|N&~v)+_+j;return(Q<<S|Q>>>32-S)+I}function C(F,I,N,v,_,S,j){var Q=F+(I^N^v)+_+j;return(Q<<S|Q>>>32-S)+I}function b(F,I,N,v,_,S,j){var Q=F+(N^(I|~v))+_+j;return(Q<<S|Q>>>32-S)+I}A.MD5=g._createHelper(p),A.HmacMD5=g._createHmacHelper(p)}(Math),r.MD5})}(dd)),dd.exports}var hd={exports:{}},hp;function oB(){return hp||(hp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=A.Hasher,g=n.algo,f=[],h=g.SHA1=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,w){for(var y=this._hash.words,C=y[0],b=y[1],F=y[2],I=y[3],N=y[4],v=0;v<80;v++){if(v<16)f[v]=p[w+v]|0;else{var _=f[v-3]^f[v-8]^f[v-14]^f[v-16];f[v]=_<<1|_>>>31}var S=(C<<5|C>>>27)+N+f[v];v<20?S+=(b&F|~b&I)+1518500249:v<40?S+=(b^F^I)+1859775393:v<60?S+=(b&F|b&I|F&I)-1894007588:S+=(b^F^I)-899497514,N=I,I=F,F=b<<30|b>>>2,b=C,C=S}y[0]=y[0]+C|0,y[1]=y[1]+b|0,y[2]=y[2]+F|0,y[3]=y[3]+I|0,y[4]=y[4]+N|0},_doFinalize:function(){var p=this._data,w=p.words,y=this._nDataBytes*8,C=p.sigBytes*8;return w[C>>>5]|=128<<24-C%32,w[(C+64>>>9<<4)+14]=Math.floor(y/4294967296),w[(C+64>>>9<<4)+15]=y,p.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var p=u.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=u._createHelper(h),n.HmacSHA1=u._createHmacHelper(h)}(),r.SHA1})}(hd)),hd.exports}var fd={exports:{}},fp;function ex(){return fp||(fp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){return function(n){var A=r,a=A.lib,u=a.WordArray,g=a.Hasher,f=A.algo,h=[],p=[];(function(){function C(N){for(var v=n.sqrt(N),_=2;_<=v;_++)if(!(N%_))return!1;return!0}function b(N){return(N-(N|0))*4294967296|0}for(var F=2,I=0;I<64;)C(F)&&(I<8&&(h[I]=b(n.pow(F,1/2))),p[I]=b(n.pow(F,1/3)),I++),F++})();var w=[],y=f.SHA256=g.extend({_doReset:function(){this._hash=new u.init(h.slice(0))},_doProcessBlock:function(C,b){for(var F=this._hash.words,I=F[0],N=F[1],v=F[2],_=F[3],S=F[4],j=F[5],Q=F[6],D=F[7],L=0;L<64;L++){if(L<16)w[L]=C[b+L]|0;else{var M=w[L-15],k=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,P=w[L-2],z=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;w[L]=k+w[L-7]+z+w[L-16]}var X=S&j^~S&Q,ce=I&N^I&v^N&v,G=(I<<30|I>>>2)^(I<<19|I>>>13)^(I<<10|I>>>22),re=(S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25),oe=D+re+X+p[L]+w[L],le=G+ce;D=Q,Q=j,j=S,S=_+oe|0,_=v,v=N,N=I,I=oe+le|0}F[0]=F[0]+I|0,F[1]=F[1]+N|0,F[2]=F[2]+v|0,F[3]=F[3]+_|0,F[4]=F[4]+S|0,F[5]=F[5]+j|0,F[6]=F[6]+Q|0,F[7]=F[7]+D|0},_doFinalize:function(){var C=this._data,b=C.words,F=this._nDataBytes*8,I=C.sigBytes*8;return b[I>>>5]|=128<<24-I%32,b[(I+64>>>9<<4)+14]=n.floor(F/4294967296),b[(I+64>>>9<<4)+15]=F,C.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var C=g.clone.call(this);return C._hash=this._hash.clone(),C}});A.SHA256=g._createHelper(y),A.HmacSHA256=g._createHmacHelper(y)}(Math),r.SHA256})}(fd)),fd.exports}var xd={exports:{}},xp;function sN(){return xp||(xp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),ex())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=n.algo,g=u.SHA256,f=u.SHA224=g.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=g._doFinalize.call(this);return h.sigBytes-=4,h}});n.SHA224=g._createHelper(f),n.HmacSHA224=g._createHmacHelper(f)}(),r.SHA224})}(xd)),xd.exports}var gd={exports:{}},gp;function lB(){return gp||(gp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),qu())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.Hasher,u=n.x64,g=u.Word,f=u.WordArray,h=n.algo;function p(){return g.create.apply(g,arguments)}var w=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],y=[];(function(){for(var b=0;b<80;b++)y[b]=p()})();var C=h.SHA512=a.extend({_doReset:function(){this._hash=new f.init([new g.init(1779033703,4089235720),new g.init(3144134277,2227873595),new g.init(1013904242,4271175723),new g.init(2773480762,1595750129),new g.init(1359893119,2917565137),new g.init(2600822924,725511199),new g.init(528734635,4215389547),new g.init(1541459225,327033209)])},_doProcessBlock:function(b,F){for(var I=this._hash.words,N=I[0],v=I[1],_=I[2],S=I[3],j=I[4],Q=I[5],D=I[6],L=I[7],M=N.high,k=N.low,P=v.high,z=v.low,X=_.high,ce=_.low,G=S.high,re=S.low,oe=j.high,le=j.low,Y=Q.high,ue=Q.low,ee=D.high,$=D.low,Ae=L.high,se=L.low,Qe=M,fe=k,qe=P,pe=z,Xt=X,fr=ce,vt=G,we=re,de=oe,Ue=le,ke=Y,rr=ue,gt=ee,$e=$,Ke=Ae,Wn=se,Ce=0;Ce<80;Ce++){var xr,Un,Kr=y[Ce];if(Ce<16)Un=Kr.high=b[F+Ce*2]|0,xr=Kr.low=b[F+Ce*2+1]|0;else{var ii=y[Ce-15],nr=ii.high,Qs=ii.low,Xn=(nr>>>1|Qs<<31)^(nr>>>8|Qs<<24)^nr>>>7,sr=(Qs>>>1|nr<<31)^(Qs>>>8|nr<<24)^(Qs>>>7|nr<<25),va=y[Ce-2],Qn=va.high,FA=va.low,Ut=(Qn>>>19|FA<<13)^(Qn<<3|FA>>>29)^Qn>>>6,ve=(FA>>>19|Qn<<13)^(FA<<3|Qn>>>29)^(FA>>>6|Qn<<26),Qt=y[Ce-7],At=Qt.high,Ct=Qt.low,Ds=y[Ce-16],Ca=Ds.high,Ea=Ds.low;xr=sr+Ct,Un=Xn+At+(xr>>>0<sr>>>0?1:0),xr=xr+ve,Un=Un+Ut+(xr>>>0<ve>>>0?1:0),xr=xr+Ea,Un=Un+Ca+(xr>>>0<Ea>>>0?1:0),Kr.high=Un,Kr.low=xr}var Je=de&ke^~de&gt,qn=Ue&rr^~Ue&$e,dl=Qe&qe^Qe&Xt^qe&Xt,hl=fe&pe^fe&fr^pe&fr,rn=(Qe>>>28|fe<<4)^(Qe<<30|fe>>>2)^(Qe<<25|fe>>>7),ai=(fe>>>28|Qe<<4)^(fe<<30|Qe>>>2)^(fe<<25|Qe>>>7),Ar=(de>>>14|Ue<<18)^(de>>>18|Ue<<14)^(de<<23|Ue>>>9),Ts=(Ue>>>14|de<<18)^(Ue>>>18|de<<14)^(Ue<<23|de>>>9),IA=w[Ce],fn=IA.high,fl=IA.low,Lt=Wn+Ts,xn=Ke+Ar+(Lt>>>0<Wn>>>0?1:0),Lt=Lt+qn,xn=xn+Je+(Lt>>>0<qn>>>0?1:0),Lt=Lt+fl,xn=xn+fn+(Lt>>>0<fl>>>0?1:0),Lt=Lt+xr,xn=xn+Un+(Lt>>>0<xr>>>0?1:0),gr=ai+hl,cs=rn+dl+(gr>>>0<ai>>>0?1:0);Ke=gt,Wn=$e,gt=ke,$e=rr,ke=de,rr=Ue,Ue=we+Lt|0,de=vt+xn+(Ue>>>0<we>>>0?1:0)|0,vt=Xt,we=fr,Xt=qe,fr=pe,qe=Qe,pe=fe,fe=Lt+gr|0,Qe=xn+cs+(fe>>>0<Lt>>>0?1:0)|0}k=N.low=k+fe,N.high=M+Qe+(k>>>0<fe>>>0?1:0),z=v.low=z+pe,v.high=P+qe+(z>>>0<pe>>>0?1:0),ce=_.low=ce+fr,_.high=X+Xt+(ce>>>0<fr>>>0?1:0),re=S.low=re+we,S.high=G+vt+(re>>>0<we>>>0?1:0),le=j.low=le+Ue,j.high=oe+de+(le>>>0<Ue>>>0?1:0),ue=Q.low=ue+rr,Q.high=Y+ke+(ue>>>0<rr>>>0?1:0),$=D.low=$+$e,D.high=ee+gt+($>>>0<$e>>>0?1:0),se=L.low=se+Wn,L.high=Ae+Ke+(se>>>0<Wn>>>0?1:0)},_doFinalize:function(){var b=this._data,F=b.words,I=this._nDataBytes*8,N=b.sigBytes*8;F[N>>>5]|=128<<24-N%32,F[(N+128>>>10<<5)+30]=Math.floor(I/4294967296),F[(N+128>>>10<<5)+31]=I,b.sigBytes=F.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var b=a.clone.call(this);return b._hash=this._hash.clone(),b},blockSize:1024/32});n.SHA512=a._createHelper(C),n.HmacSHA512=a._createHmacHelper(C)}(),r.SHA512})}(gd)),gd.exports}var pd={exports:{}},pp;function AN(){return pp||(pp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),qu(),lB())})(Te,function(r){return function(){var n=r,A=n.x64,a=A.Word,u=A.WordArray,g=n.algo,f=g.SHA512,h=g.SHA384=f.extend({_doReset:function(){this._hash=new u.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var p=f._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=f._createHelper(h),n.HmacSHA384=f._createHmacHelper(h)}(),r.SHA384})}(pd)),pd.exports}var md={exports:{}},mp;function iN(){return mp||(mp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),qu())})(Te,function(r){return function(n){var A=r,a=A.lib,u=a.WordArray,g=a.Hasher,f=A.x64,h=f.Word,p=A.algo,w=[],y=[],C=[];(function(){for(var I=1,N=0,v=0;v<24;v++){w[I+5*N]=(v+1)*(v+2)/2%64;var _=N%5,S=(2*I+3*N)%5;I=_,N=S}for(var I=0;I<5;I++)for(var N=0;N<5;N++)y[I+5*N]=N+(2*I+3*N)%5*5;for(var j=1,Q=0;Q<24;Q++){for(var D=0,L=0,M=0;M<7;M++){if(j&1){var k=(1<<M)-1;k<32?L^=1<<k:D^=1<<k-32}j&128?j=j<<1^113:j<<=1}C[Q]=h.create(D,L)}})();var b=[];(function(){for(var I=0;I<25;I++)b[I]=h.create()})();var F=p.SHA3=g.extend({cfg:g.cfg.extend({outputLength:512}),_doReset:function(){for(var I=this._state=[],N=0;N<25;N++)I[N]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(I,N){for(var v=this._state,_=this.blockSize/2,S=0;S<_;S++){var j=I[N+2*S],Q=I[N+2*S+1];j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,Q=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360;var D=v[S];D.high^=Q,D.low^=j}for(var L=0;L<24;L++){for(var M=0;M<5;M++){for(var k=0,P=0,z=0;z<5;z++){var D=v[M+5*z];k^=D.high,P^=D.low}var X=b[M];X.high=k,X.low=P}for(var M=0;M<5;M++)for(var ce=b[(M+4)%5],G=b[(M+1)%5],re=G.high,oe=G.low,k=ce.high^(re<<1|oe>>>31),P=ce.low^(oe<<1|re>>>31),z=0;z<5;z++){var D=v[M+5*z];D.high^=k,D.low^=P}for(var le=1;le<25;le++){var k,P,D=v[le],Y=D.high,ue=D.low,ee=w[le];ee<32?(k=Y<<ee|ue>>>32-ee,P=ue<<ee|Y>>>32-ee):(k=ue<<ee-32|Y>>>64-ee,P=Y<<ee-32|ue>>>64-ee);var $=b[y[le]];$.high=k,$.low=P}var Ae=b[0],se=v[0];Ae.high=se.high,Ae.low=se.low;for(var M=0;M<5;M++)for(var z=0;z<5;z++){var le=M+5*z,D=v[le],Qe=b[le],fe=b[(M+1)%5+5*z],qe=b[(M+2)%5+5*z];D.high=Qe.high^~fe.high&qe.high,D.low=Qe.low^~fe.low&qe.low}var D=v[0],pe=C[L];D.high^=pe.high,D.low^=pe.low}},_doFinalize:function(){var I=this._data,N=I.words;this._nDataBytes*8;var v=I.sigBytes*8,_=this.blockSize*32;N[v>>>5]|=1<<24-v%32,N[(n.ceil((v+1)/_)*_>>>5)-1]|=128,I.sigBytes=N.length*4,this._process();for(var S=this._state,j=this.cfg.outputLength/8,Q=j/8,D=[],L=0;L<Q;L++){var M=S[L],k=M.high,P=M.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D.push(P),D.push(k)}return new u.init(D,j)},clone:function(){for(var I=g.clone.call(this),N=I._state=this._state.slice(0),v=0;v<25;v++)N[v]=N[v].clone();return I}});A.SHA3=g._createHelper(F),A.HmacSHA3=g._createHmacHelper(F)}(Math),r.SHA3})}(md)),md.exports}var wd={exports:{}},wp;function aN(){return wp||(wp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var A=r,a=A.lib,u=a.WordArray,g=a.Hasher,f=A.algo,h=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),w=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),y=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),C=u.create([0,1518500249,1859775393,2400959708,2840853838]),b=u.create([1352829926,1548603684,1836072691,2053994217,0]),F=f.RIPEMD160=g.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Q,D){for(var L=0;L<16;L++){var M=D+L,k=Q[M];Q[M]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var P=this._hash.words,z=C.words,X=b.words,ce=h.words,G=p.words,re=w.words,oe=y.words,le,Y,ue,ee,$,Ae,se,Qe,fe,qe;Ae=le=P[0],se=Y=P[1],Qe=ue=P[2],fe=ee=P[3],qe=$=P[4];for(var pe,L=0;L<80;L+=1)pe=le+Q[D+ce[L]]|0,L<16?pe+=I(Y,ue,ee)+z[0]:L<32?pe+=N(Y,ue,ee)+z[1]:L<48?pe+=v(Y,ue,ee)+z[2]:L<64?pe+=_(Y,ue,ee)+z[3]:pe+=S(Y,ue,ee)+z[4],pe=pe|0,pe=j(pe,re[L]),pe=pe+$|0,le=$,$=ee,ee=j(ue,10),ue=Y,Y=pe,pe=Ae+Q[D+G[L]]|0,L<16?pe+=S(se,Qe,fe)+X[0]:L<32?pe+=_(se,Qe,fe)+X[1]:L<48?pe+=v(se,Qe,fe)+X[2]:L<64?pe+=N(se,Qe,fe)+X[3]:pe+=I(se,Qe,fe)+X[4],pe=pe|0,pe=j(pe,oe[L]),pe=pe+qe|0,Ae=qe,qe=fe,fe=j(Qe,10),Qe=se,se=pe;pe=P[1]+ue+fe|0,P[1]=P[2]+ee+qe|0,P[2]=P[3]+$+Ae|0,P[3]=P[4]+le+se|0,P[4]=P[0]+Y+Qe|0,P[0]=pe},_doFinalize:function(){var Q=this._data,D=Q.words,L=this._nDataBytes*8,M=Q.sigBytes*8;D[M>>>5]|=128<<24-M%32,D[(M+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,Q.sigBytes=(D.length+1)*4,this._process();for(var k=this._hash,P=k.words,z=0;z<5;z++){var X=P[z];P[z]=(X<<8|X>>>24)&16711935|(X<<24|X>>>8)&4278255360}return k},clone:function(){var Q=g.clone.call(this);return Q._hash=this._hash.clone(),Q}});function I(Q,D,L){return Q^D^L}function N(Q,D,L){return Q&D|~Q&L}function v(Q,D,L){return(Q|~D)^L}function _(Q,D,L){return Q&L|D&~L}function S(Q,D,L){return Q^(D|~L)}function j(Q,D){return Q<<D|Q>>>32-D}A.RIPEMD160=g._createHelper(F),A.HmacRIPEMD160=g._createHmacHelper(F)}(),r.RIPEMD160})}(wd)),wd.exports}var yd={exports:{}},yp;function tx(){return yp||(yp=1,function(e,t){(function(r,n){e.exports=n(Ze())})(Te,function(r){(function(){var n=r,A=n.lib,a=A.Base,u=n.enc,g=u.Utf8,f=n.algo;f.HMAC=a.extend({init:function(h,p){h=this._hasher=new h.init,typeof p=="string"&&(p=g.parse(p));var w=h.blockSize,y=w*4;p.sigBytes>y&&(p=h.finalize(p)),p.clamp();for(var C=this._oKey=p.clone(),b=this._iKey=p.clone(),F=C.words,I=b.words,N=0;N<w;N++)F[N]^=1549556828,I[N]^=909522486;C.sigBytes=b.sigBytes=y,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var p=this._hasher,w=p.finalize(h);p.reset();var y=p.finalize(this._oKey.clone().concat(w));return y}})})()})}(yd)),yd.exports}var Bd={exports:{}},Bp;function oN(){return Bp||(Bp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),ex(),tx())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.Base,u=A.WordArray,g=n.algo,f=g.SHA256,h=g.HMAC,p=g.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:25e4}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,y){for(var C=this.cfg,b=h.create(C.hasher,w),F=u.create(),I=u.create([1]),N=F.words,v=I.words,_=C.keySize,S=C.iterations;N.length<_;){var j=b.update(y).finalize(I);b.reset();for(var Q=j.words,D=Q.length,L=j,M=1;M<S;M++){L=b.finalize(L),b.reset();for(var k=L.words,P=0;P<D;P++)Q[P]^=k[P]}F.concat(j),v[0]++}return F.sigBytes=_*4,F}});n.PBKDF2=function(w,y,C){return p.create(C).compute(w,y)}}(),r.PBKDF2})}(Bd)),Bd.exports}var vd={exports:{}},vp;function NA(){return vp||(vp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),oB(),tx())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.Base,u=A.WordArray,g=n.algo,f=g.MD5,h=g.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:f,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,w){for(var y,C=this.cfg,b=C.hasher.create(),F=u.create(),I=F.words,N=C.keySize,v=C.iterations;I.length<N;){y&&b.update(y),y=b.update(p).finalize(w),b.reset();for(var _=1;_<v;_++)y=b.finalize(y),b.reset();F.concat(y)}return F.sigBytes=N*4,F}});n.EvpKDF=function(p,w,y){return h.create(y).compute(p,w)}}(),r.EvpKDF})}(vd)),vd.exports}var Cd={exports:{}},Cp;function hr(){return Cp||(Cp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),NA())})(Te,function(r){r.lib.Cipher||function(n){var A=r,a=A.lib,u=a.Base,g=a.WordArray,f=a.BufferedBlockAlgorithm,h=A.enc;h.Utf8;var p=h.Base64,w=A.algo,y=w.EvpKDF,C=a.Cipher=f.extend({cfg:u.extend(),createEncryptor:function(k,P){return this.create(this._ENC_XFORM_MODE,k,P)},createDecryptor:function(k,P){return this.create(this._DEC_XFORM_MODE,k,P)},init:function(k,P,z){this.cfg=this.cfg.extend(z),this._xformMode=k,this._key=P,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(P){return typeof P=="string"?M:Q}return function(P){return{encrypt:function(z,X,ce){return k(X).encrypt(P,z,X,ce)},decrypt:function(z,X,ce){return k(X).decrypt(P,z,X,ce)}}}}()});a.StreamCipher=C.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var b=A.mode={},F=a.BlockCipherMode=u.extend({createEncryptor:function(k,P){return this.Encryptor.create(k,P)},createDecryptor:function(k,P){return this.Decryptor.create(k,P)},init:function(k,P){this._cipher=k,this._iv=P}}),I=b.CBC=function(){var k=F.extend();k.Encryptor=k.extend({processBlock:function(z,X){var ce=this._cipher,G=ce.blockSize;P.call(this,z,X,G),ce.encryptBlock(z,X),this._prevBlock=z.slice(X,X+G)}}),k.Decryptor=k.extend({processBlock:function(z,X){var ce=this._cipher,G=ce.blockSize,re=z.slice(X,X+G);ce.decryptBlock(z,X),P.call(this,z,X,G),this._prevBlock=re}});function P(z,X,ce){var G,re=this._iv;re?(G=re,this._iv=n):G=this._prevBlock;for(var oe=0;oe<ce;oe++)z[X+oe]^=G[oe]}return k}(),N=A.pad={},v=N.Pkcs7={pad:function(k,P){for(var z=P*4,X=z-k.sigBytes%z,ce=X<<24|X<<16|X<<8|X,G=[],re=0;re<X;re+=4)G.push(ce);var oe=g.create(G,X);k.concat(oe)},unpad:function(k){var P=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=P}};a.BlockCipher=C.extend({cfg:C.cfg.extend({mode:I,padding:v}),reset:function(){var k;C.reset.call(this);var P=this.cfg,z=P.iv,X=P.mode;this._xformMode==this._ENC_XFORM_MODE?k=X.createEncryptor:(k=X.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,z&&z.words):(this._mode=k.call(X,this,z&&z.words),this._mode.__creator=k)},_doProcessBlock:function(k,P){this._mode.processBlock(k,P)},_doFinalize:function(){var k,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),P.unpad(k)),k},blockSize:128/32});var _=a.CipherParams=u.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),S=A.format={},j=S.OpenSSL={stringify:function(k){var P,z=k.ciphertext,X=k.salt;return X?P=g.create([1398893684,1701076831]).concat(X).concat(z):P=z,P.toString(p)},parse:function(k){var P,z=p.parse(k),X=z.words;return X[0]==1398893684&&X[1]==1701076831&&(P=g.create(X.slice(2,4)),X.splice(0,4),z.sigBytes-=16),_.create({ciphertext:z,salt:P})}},Q=a.SerializableCipher=u.extend({cfg:u.extend({format:j}),encrypt:function(k,P,z,X){X=this.cfg.extend(X);var ce=k.createEncryptor(z,X),G=ce.finalize(P),re=ce.cfg;return _.create({ciphertext:G,key:z,iv:re.iv,algorithm:k,mode:re.mode,padding:re.padding,blockSize:k.blockSize,formatter:X.format})},decrypt:function(k,P,z,X){X=this.cfg.extend(X),P=this._parse(P,X.format);var ce=k.createDecryptor(z,X).finalize(P.ciphertext);return ce},_parse:function(k,P){return typeof k=="string"?P.parse(k,this):k}}),D=A.kdf={},L=D.OpenSSL={execute:function(k,P,z,X,ce){if(X||(X=g.random(64/8)),ce)var G=y.create({keySize:P+z,hasher:ce}).compute(k,X);else var G=y.create({keySize:P+z}).compute(k,X);var re=g.create(G.words.slice(P),z*4);return G.sigBytes=P*4,_.create({key:G,iv:re,salt:X})}},M=a.PasswordBasedCipher=Q.extend({cfg:Q.cfg.extend({kdf:L}),encrypt:function(k,P,z,X){X=this.cfg.extend(X);var ce=X.kdf.execute(z,k.keySize,k.ivSize,X.salt,X.hasher);X.iv=ce.iv;var G=Q.encrypt.call(this,k,P,ce.key,X);return G.mixIn(ce),G},decrypt:function(k,P,z,X){X=this.cfg.extend(X),P=this._parse(P,X.format);var ce=X.kdf.execute(z,k.keySize,k.ivSize,P.salt,X.hasher);X.iv=ce.iv;var G=Q.decrypt.call(this,k,P,ce.key,X);return G}})}()})}(Cd)),Cd.exports}var Ed={exports:{}},Ep;function lN(){return Ep||(Ep=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,u){var g=this._cipher,f=g.blockSize;A.call(this,a,u,f,g),this._prevBlock=a.slice(u,u+f)}}),n.Decryptor=n.extend({processBlock:function(a,u){var g=this._cipher,f=g.blockSize,h=a.slice(u,u+f);A.call(this,a,u,f,g),this._prevBlock=h}});function A(a,u,g,f){var h,p=this._iv;p?(h=p.slice(0),this._iv=void 0):h=this._prevBlock,f.encryptBlock(h,0);for(var w=0;w<g;w++)a[u+w]^=h[w]}return n}(),r.mode.CFB})}(Ed)),Ed.exports}var bd={exports:{}},bp;function cN(){return bp||(bp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),A=n.Encryptor=n.extend({processBlock:function(a,u){var g=this._cipher,f=g.blockSize,h=this._iv,p=this._counter;h&&(p=this._counter=h.slice(0),this._iv=void 0);var w=p.slice(0);g.encryptBlock(w,0),p[f-1]=p[f-1]+1|0;for(var y=0;y<f;y++)a[u+y]^=w[y]}});return n.Decryptor=A,n}(),r.mode.CTR})}(bd)),bd.exports}var _d={exports:{}},_p;function uN(){return _p||(_p=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function A(g){if((g>>24&255)===255){var f=g>>16&255,h=g>>8&255,p=g&255;f===255?(f=0,h===255?(h=0,p===255?p=0:++p):++h):++f,g=0,g+=f<<16,g+=h<<8,g+=p}else g+=1<<24;return g}function a(g){return(g[0]=A(g[0]))===0&&(g[1]=A(g[1])),g}var u=n.Encryptor=n.extend({processBlock:function(g,f){var h=this._cipher,p=h.blockSize,w=this._iv,y=this._counter;w&&(y=this._counter=w.slice(0),this._iv=void 0),a(y);var C=y.slice(0);h.encryptBlock(C,0);for(var b=0;b<p;b++)g[f+b]^=C[b]}});return n.Decryptor=u,n}(),r.mode.CTRGladman})}(_d)),_d.exports}var Nd={exports:{}},Np;function dN(){return Np||(Np=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),A=n.Encryptor=n.extend({processBlock:function(a,u){var g=this._cipher,f=g.blockSize,h=this._iv,p=this._keystream;h&&(p=this._keystream=h.slice(0),this._iv=void 0),g.encryptBlock(p,0);for(var w=0;w<f;w++)a[u+w]^=p[w]}});return n.Decryptor=A,n}(),r.mode.OFB})}(Nd)),Nd.exports}var Fd={exports:{}},Fp;function hN(){return Fp||(Fp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(A,a){this._cipher.encryptBlock(A,a)}}),n.Decryptor=n.extend({processBlock:function(A,a){this._cipher.decryptBlock(A,a)}}),n}(),r.mode.ECB})}(Fd)),Fd.exports}var Id={exports:{}},Ip;function fN(){return Ip||(Ip=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.pad.AnsiX923={pad:function(n,A){var a=n.sigBytes,u=A*4,g=u-a%u,f=a+g-1;n.clamp(),n.words[f>>>2]|=g<<24-f%4*8,n.sigBytes+=g},unpad:function(n){var A=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=A}},r.pad.Ansix923})}(Id)),Id.exports}var Sd={exports:{}},Sp;function xN(){return Sp||(Sp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.pad.Iso10126={pad:function(n,A){var a=A*4,u=a-n.sigBytes%a;n.concat(r.lib.WordArray.random(u-1)).concat(r.lib.WordArray.create([u<<24],1))},unpad:function(n){var A=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=A}},r.pad.Iso10126})}(Sd)),Sd.exports}var Ud={exports:{}},Up;function gN(){return Up||(Up=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.pad.Iso97971={pad:function(n,A){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,A)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Ud)),Ud.exports}var Qd={exports:{}},Qp;function pN(){return Qp||(Qp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.pad.ZeroPadding={pad:function(n,A){var a=A*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var A=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(A[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},r.pad.ZeroPadding})}(Qd)),Qd.exports}var Dd={exports:{}},Dp;function mN(){return Dp||(Dp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Dd)),Dd.exports}var Td={exports:{}},Tp;function wN(){return Tp||(Tp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),hr())})(Te,function(r){return function(n){var A=r,a=A.lib,u=a.CipherParams,g=A.enc,f=g.Hex,h=A.format;h.Hex={stringify:function(p){return p.ciphertext.toString(f)},parse:function(p){var w=f.parse(p);return u.create({ciphertext:w})}}}(),r.format.Hex})}(Td)),Td.exports}var Rd={exports:{}},Rp;function yN(){return Rp||(Rp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.BlockCipher,u=n.algo,g=[],f=[],h=[],p=[],w=[],y=[],C=[],b=[],F=[],I=[];(function(){for(var _=[],S=0;S<256;S++)S<128?_[S]=S<<1:_[S]=S<<1^283;for(var j=0,Q=0,S=0;S<256;S++){var D=Q^Q<<1^Q<<2^Q<<3^Q<<4;D=D>>>8^D&255^99,g[j]=D,f[D]=j;var L=_[j],M=_[L],k=_[M],P=_[D]*257^D*16843008;h[j]=P<<24|P>>>8,p[j]=P<<16|P>>>16,w[j]=P<<8|P>>>24,y[j]=P;var P=k*16843009^M*65537^L*257^j*16843008;C[D]=P<<24|P>>>8,b[D]=P<<16|P>>>16,F[D]=P<<8|P>>>24,I[D]=P,j?(j=L^_[_[_[k^L]]],Q^=_[_[Q]]):j=Q=1}})();var N=[0,1,2,4,8,16,32,64,128,27,54],v=u.AES=a.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var S=this._keyPriorReset=this._key,j=S.words,Q=S.sigBytes/4,D=this._nRounds=Q+6,L=(D+1)*4,M=this._keySchedule=[],k=0;k<L;k++)k<Q?M[k]=j[k]:(_=M[k-1],k%Q?Q>6&&k%Q==4&&(_=g[_>>>24]<<24|g[_>>>16&255]<<16|g[_>>>8&255]<<8|g[_&255]):(_=_<<8|_>>>24,_=g[_>>>24]<<24|g[_>>>16&255]<<16|g[_>>>8&255]<<8|g[_&255],_^=N[k/Q|0]<<24),M[k]=M[k-Q]^_);for(var P=this._invKeySchedule=[],z=0;z<L;z++){var k=L-z;if(z%4)var _=M[k];else var _=M[k-4];z<4||k<=4?P[z]=_:P[z]=C[g[_>>>24]]^b[g[_>>>16&255]]^F[g[_>>>8&255]]^I[g[_&255]]}}},encryptBlock:function(_,S){this._doCryptBlock(_,S,this._keySchedule,h,p,w,y,g)},decryptBlock:function(_,S){var j=_[S+1];_[S+1]=_[S+3],_[S+3]=j,this._doCryptBlock(_,S,this._invKeySchedule,C,b,F,I,f);var j=_[S+1];_[S+1]=_[S+3],_[S+3]=j},_doCryptBlock:function(_,S,j,Q,D,L,M,k){for(var P=this._nRounds,z=_[S]^j[0],X=_[S+1]^j[1],ce=_[S+2]^j[2],G=_[S+3]^j[3],re=4,oe=1;oe<P;oe++){var le=Q[z>>>24]^D[X>>>16&255]^L[ce>>>8&255]^M[G&255]^j[re++],Y=Q[X>>>24]^D[ce>>>16&255]^L[G>>>8&255]^M[z&255]^j[re++],ue=Q[ce>>>24]^D[G>>>16&255]^L[z>>>8&255]^M[X&255]^j[re++],ee=Q[G>>>24]^D[z>>>16&255]^L[X>>>8&255]^M[ce&255]^j[re++];z=le,X=Y,ce=ue,G=ee}var le=(k[z>>>24]<<24|k[X>>>16&255]<<16|k[ce>>>8&255]<<8|k[G&255])^j[re++],Y=(k[X>>>24]<<24|k[ce>>>16&255]<<16|k[G>>>8&255]<<8|k[z&255])^j[re++],ue=(k[ce>>>24]<<24|k[G>>>16&255]<<16|k[z>>>8&255]<<8|k[X&255])^j[re++],ee=(k[G>>>24]<<24|k[z>>>16&255]<<16|k[X>>>8&255]<<8|k[ce&255])^j[re++];_[S]=le,_[S+1]=Y,_[S+2]=ue,_[S+3]=ee},keySize:256/32});n.AES=a._createHelper(v)}(),r.AES})}(Rd)),Rd.exports}var jd={exports:{}},jp;function BN(){return jp||(jp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.WordArray,u=A.BlockCipher,g=n.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],w=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],y=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],C=g.DES=u.extend({_doReset:function(){for(var N=this._key,v=N.words,_=[],S=0;S<56;S++){var j=f[S]-1;_[S]=v[j>>>5]>>>31-j%32&1}for(var Q=this._subKeys=[],D=0;D<16;D++){for(var L=Q[D]=[],M=p[D],S=0;S<24;S++)L[S/6|0]|=_[(h[S]-1+M)%28]<<31-S%6,L[4+(S/6|0)]|=_[28+(h[S+24]-1+M)%28]<<31-S%6;L[0]=L[0]<<1|L[0]>>>31;for(var S=1;S<7;S++)L[S]=L[S]>>>(S-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var k=this._invSubKeys=[],S=0;S<16;S++)k[S]=Q[15-S]},encryptBlock:function(N,v){this._doCryptBlock(N,v,this._subKeys)},decryptBlock:function(N,v){this._doCryptBlock(N,v,this._invSubKeys)},_doCryptBlock:function(N,v,_){this._lBlock=N[v],this._rBlock=N[v+1],b.call(this,4,252645135),b.call(this,16,65535),F.call(this,2,858993459),F.call(this,8,16711935),b.call(this,1,1431655765);for(var S=0;S<16;S++){for(var j=_[S],Q=this._lBlock,D=this._rBlock,L=0,M=0;M<8;M++)L|=w[M][((D^j[M])&y[M])>>>0];this._lBlock=D,this._rBlock=Q^L}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,b.call(this,1,1431655765),F.call(this,8,16711935),F.call(this,2,858993459),b.call(this,16,65535),b.call(this,4,252645135),N[v]=this._lBlock,N[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function b(N,v){var _=(this._lBlock>>>N^this._rBlock)&v;this._rBlock^=_,this._lBlock^=_<<N}function F(N,v){var _=(this._rBlock>>>N^this._lBlock)&v;this._lBlock^=_,this._rBlock^=_<<N}n.DES=u._createHelper(C);var I=g.TripleDES=u.extend({_doReset:function(){var N=this._key,v=N.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=v.slice(0,2),S=v.length<4?v.slice(0,2):v.slice(2,4),j=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=C.createEncryptor(a.create(_)),this._des2=C.createEncryptor(a.create(S)),this._des3=C.createEncryptor(a.create(j))},encryptBlock:function(N,v){this._des1.encryptBlock(N,v),this._des2.decryptBlock(N,v),this._des3.encryptBlock(N,v)},decryptBlock:function(N,v){this._des3.decryptBlock(N,v),this._des2.encryptBlock(N,v),this._des1.decryptBlock(N,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=u._createHelper(I)}(),r.TripleDES})}(jd)),jd.exports}var Od={exports:{}},Op;function vN(){return Op||(Op=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.StreamCipher,u=n.algo,g=u.RC4=a.extend({_doReset:function(){for(var p=this._key,w=p.words,y=p.sigBytes,C=this._S=[],b=0;b<256;b++)C[b]=b;for(var b=0,F=0;b<256;b++){var I=b%y,N=w[I>>>2]>>>24-I%4*8&255;F=(F+C[b]+N)%256;var v=C[b];C[b]=C[F],C[F]=v}this._i=this._j=0},_doProcessBlock:function(p,w){p[w]^=f.call(this)},keySize:256/32,ivSize:0});function f(){for(var p=this._S,w=this._i,y=this._j,C=0,b=0;b<4;b++){w=(w+1)%256,y=(y+p[w])%256;var F=p[w];p[w]=p[y],p[y]=F,C|=p[(p[w]+p[y])%256]<<24-b*8}return this._i=w,this._j=y,C}n.RC4=a._createHelper(g);var h=u.RC4Drop=g.extend({cfg:g.cfg.extend({drop:192}),_doReset:function(){g._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)f.call(this)}});n.RC4Drop=a._createHelper(h)}(),r.RC4})}(Od)),Od.exports}var kd={exports:{}},kp;function CN(){return kp||(kp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.StreamCipher,u=n.algo,g=[],f=[],h=[],p=u.Rabbit=a.extend({_doReset:function(){for(var y=this._key.words,C=this.cfg.iv,b=0;b<4;b++)y[b]=(y[b]<<8|y[b]>>>24)&16711935|(y[b]<<24|y[b]>>>8)&4278255360;var F=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],I=this._C=[y[2]<<16|y[2]>>>16,y[0]&4294901760|y[1]&65535,y[3]<<16|y[3]>>>16,y[1]&4294901760|y[2]&65535,y[0]<<16|y[0]>>>16,y[2]&4294901760|y[3]&65535,y[1]<<16|y[1]>>>16,y[3]&4294901760|y[0]&65535];this._b=0;for(var b=0;b<4;b++)w.call(this);for(var b=0;b<8;b++)I[b]^=F[b+4&7];if(C){var N=C.words,v=N[0],_=N[1],S=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,j=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,Q=S>>>16|j&4294901760,D=j<<16|S&65535;I[0]^=S,I[1]^=Q,I[2]^=j,I[3]^=D,I[4]^=S,I[5]^=Q,I[6]^=j,I[7]^=D;for(var b=0;b<4;b++)w.call(this)}},_doProcessBlock:function(y,C){var b=this._X;w.call(this),g[0]=b[0]^b[5]>>>16^b[3]<<16,g[1]=b[2]^b[7]>>>16^b[5]<<16,g[2]=b[4]^b[1]>>>16^b[7]<<16,g[3]=b[6]^b[3]>>>16^b[1]<<16;for(var F=0;F<4;F++)g[F]=(g[F]<<8|g[F]>>>24)&16711935|(g[F]<<24|g[F]>>>8)&4278255360,y[C+F]^=g[F]},blockSize:128/32,ivSize:64/32});function w(){for(var y=this._X,C=this._C,b=0;b<8;b++)f[b]=C[b];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<f[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<f[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<f[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<f[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<f[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<f[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<f[6]>>>0?1:0)|0,this._b=C[7]>>>0<f[7]>>>0?1:0;for(var b=0;b<8;b++){var F=y[b]+C[b],I=F&65535,N=F>>>16,v=((I*I>>>17)+I*N>>>15)+N*N,_=((F&4294901760)*F|0)+((F&65535)*F|0);h[b]=v^_}y[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,y[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,y[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,y[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,y[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,y[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,y[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,y[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.Rabbit=a._createHelper(p)}(),r.Rabbit})}(kd)),kd.exports}var Ld={exports:{}},Lp;function EN(){return Lp||(Lp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.StreamCipher,u=n.algo,g=[],f=[],h=[],p=u.RabbitLegacy=a.extend({_doReset:function(){var y=this._key.words,C=this.cfg.iv,b=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],F=this._C=[y[2]<<16|y[2]>>>16,y[0]&4294901760|y[1]&65535,y[3]<<16|y[3]>>>16,y[1]&4294901760|y[2]&65535,y[0]<<16|y[0]>>>16,y[2]&4294901760|y[3]&65535,y[1]<<16|y[1]>>>16,y[3]&4294901760|y[0]&65535];this._b=0;for(var I=0;I<4;I++)w.call(this);for(var I=0;I<8;I++)F[I]^=b[I+4&7];if(C){var N=C.words,v=N[0],_=N[1],S=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,j=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,Q=S>>>16|j&4294901760,D=j<<16|S&65535;F[0]^=S,F[1]^=Q,F[2]^=j,F[3]^=D,F[4]^=S,F[5]^=Q,F[6]^=j,F[7]^=D;for(var I=0;I<4;I++)w.call(this)}},_doProcessBlock:function(y,C){var b=this._X;w.call(this),g[0]=b[0]^b[5]>>>16^b[3]<<16,g[1]=b[2]^b[7]>>>16^b[5]<<16,g[2]=b[4]^b[1]>>>16^b[7]<<16,g[3]=b[6]^b[3]>>>16^b[1]<<16;for(var F=0;F<4;F++)g[F]=(g[F]<<8|g[F]>>>24)&16711935|(g[F]<<24|g[F]>>>8)&4278255360,y[C+F]^=g[F]},blockSize:128/32,ivSize:64/32});function w(){for(var y=this._X,C=this._C,b=0;b<8;b++)f[b]=C[b];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<f[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<f[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<f[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<f[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<f[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<f[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<f[6]>>>0?1:0)|0,this._b=C[7]>>>0<f[7]>>>0?1:0;for(var b=0;b<8;b++){var F=y[b]+C[b],I=F&65535,N=F>>>16,v=((I*I>>>17)+I*N>>>15)+N*N,_=((F&4294901760)*F|0)+((F&65535)*F|0);h[b]=v^_}y[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,y[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,y[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,y[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,y[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,y[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,y[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,y[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.RabbitLegacy=a._createHelper(p)}(),r.RabbitLegacy})}(Ld)),Ld.exports}var Md={exports:{}},Mp;function bN(){return Mp||(Mp=1,function(e,t){(function(r,n,A){e.exports=n(Ze(),si(),Ai(),NA(),hr())})(Te,function(r){return function(){var n=r,A=n.lib,a=A.BlockCipher,u=n.algo;const g=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],h=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var p={pbox:[],sbox:[]};function w(I,N){let v=N>>24&255,_=N>>16&255,S=N>>8&255,j=N&255,Q=I.sbox[0][v]+I.sbox[1][_];return Q=Q^I.sbox[2][S],Q=Q+I.sbox[3][j],Q}function y(I,N,v){let _=N,S=v,j;for(let Q=0;Q<g;++Q)_=_^I.pbox[Q],S=w(I,_)^S,j=_,_=S,S=j;return j=_,_=S,S=j,S=S^I.pbox[g],_=_^I.pbox[g+1],{left:_,right:S}}function C(I,N,v){let _=N,S=v,j;for(let Q=g+1;Q>1;--Q)_=_^I.pbox[Q],S=w(I,_)^S,j=_,_=S,S=j;return j=_,_=S,S=j,S=S^I.pbox[1],_=_^I.pbox[0],{left:_,right:S}}function b(I,N,v){for(let D=0;D<4;D++){I.sbox[D]=[];for(let L=0;L<256;L++)I.sbox[D][L]=h[D][L]}let _=0;for(let D=0;D<g+2;D++)I.pbox[D]=f[D]^N[_],_++,_>=v&&(_=0);let S=0,j=0,Q=0;for(let D=0;D<g+2;D+=2)Q=y(I,S,j),S=Q.left,j=Q.right,I.pbox[D]=S,I.pbox[D+1]=j;for(let D=0;D<4;D++)for(let L=0;L<256;L+=2)Q=y(I,S,j),S=Q.left,j=Q.right,I.sbox[D][L]=S,I.sbox[D][L+1]=j;return!0}var F=u.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var I=this._keyPriorReset=this._key,N=I.words,v=I.sigBytes/4;b(p,N,v)}},encryptBlock:function(I,N){var v=y(p,I[N],I[N+1]);I[N]=v.left,I[N+1]=v.right},decryptBlock:function(I,N){var v=C(p,I[N],I[N+1]);I[N]=v.left,I[N+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(F)}(),r.Blowfish})}(Md)),Md.exports}(function(e,t){(function(r,n,A){e.exports=n(Ze(),qu(),tN(),rN(),si(),nN(),Ai(),oB(),ex(),sN(),lB(),AN(),iN(),aN(),tx(),oN(),NA(),hr(),lN(),cN(),uN(),dN(),hN(),fN(),xN(),gN(),pN(),mN(),wN(),yN(),BN(),vN(),CN(),EN(),bN())})(Te,function(r){return r})})(aB);var Hd=aB.exports;const Za={generateRepairCode(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},generateQRCodeData(e,t,r){const n=this.generateRepairCode(),A={repairId:e,relayPointId:t,clientId:r,timestamp:Date.now(),code:n},u=Hd.AES.encrypt(JSON.stringify(A),"PCRelais-SecretKey-2025").toString();return this.saveRepairCode(e,n,t),{qrData:u,repairCode:n}},async saveRepairCode(e,t,r){const{error:n}=await Z.from("repair_codes").insert({repair_id:e,code:t,relay_point_id:r,created_at:new Date().toISOString(),is_used:!1});if(n)throw console.error("Erreur lors de la sauvegarde du code de réparation:",n),n},async validateQRCode(e,t){try{const n=Hd.AES.decrypt(e,"PCRelais-SecretKey-2025"),A=JSON.parse(n.toString(Hd.enc.Utf8));if(A.relayPointId!==t)return{valid:!1,message:"Ce QR code n'est pas destiné à ce point relais."};const a=24*60*60*1e3;if(Date.now()-A.timestamp>a)return{valid:!1,message:"Ce QR code a expiré."};const{data:u,error:g}=await Z.from("repair_codes").select("is_used").eq("repair_id",A.repairId).eq("code",A.code).single();return g||!u?{valid:!1,message:"Code de réparation invalide ou inexistant."}:u.is_used?{valid:!1,message:"Ce code a déjà été utilisé."}:{valid:!0,repairId:A.repairId}}catch(r){return console.error("Erreur lors de la validation du QR code:",r),{valid:!1,message:"QR code invalide ou corrompu."}}},async validateRepairCode(e,t){try{const{data:r,error:n}=await Z.from("repair_codes").select("repair_id, is_used, created_at").eq("code",e).eq("relay_point_id",t).single();if(n||!r)return{valid:!1,message:"Code de réparation invalide ou inexistant pour ce point relais."};if(r.is_used)return{valid:!1,message:"Ce code a déjà été utilisé."};const A=new Date(r.created_at).getTime(),a=24*60*60*1e3;return Date.now()-A>a?{valid:!1,message:"Ce code a expiré."}:{valid:!0,repairId:r.repair_id}}catch(r){return console.error("Erreur lors de la validation du code de réparation:",r),{valid:!1,message:"Une erreur est survenue lors de la validation du code."}}},async markCodeAsUsed(e,t){try{const{error:r}=await Z.from("repair_codes").update({is_used:!0}).eq("repair_id",e).eq("code",t);if(r)throw console.error("Erreur lors du marquage du code comme utilisé:",r),r;console.log("Code de réparation marqué comme utilisé avec succès")}catch(r){throw console.error("Erreur lors du marquage du code comme utilisé:",r),r}}};var _N=Object.defineProperty,au=Object.getOwnPropertySymbols,cB=Object.prototype.hasOwnProperty,uB=Object.prototype.propertyIsEnumerable,Hp=(e,t,r)=>t in e?_N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yf=(e,t)=>{for(var r in t||(t={}))cB.call(t,r)&&Hp(e,r,t[r]);if(au)for(var r of au(t))uB.call(t,r)&&Hp(e,r,t[r]);return e},Bf=(e,t)=>{var r={};for(var n in e)cB.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&au)for(var n of au(e))t.indexOf(n)<0&&uB.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ei;(e=>{const t=class Ve{constructor(f,h,p,w){if(this.version=f,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],f<Ve.MIN_VERSION||f>Ve.MAX_VERSION)throw new RangeError("Version value out of range");if(w<-1||w>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let y=[];for(let b=0;b<this.size;b++)y.push(!1);for(let b=0;b<this.size;b++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(p);if(this.drawCodewords(C),w==-1){let b=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const I=this.getPenaltyScore();I<b&&(w=F,b=I),this.applyMask(F)}}A(0<=w&&w<=7),this.mask=w,this.applyMask(w),this.drawFormatBits(w),this.isFunction=[]}static encodeText(f,h){const p=e.QrSegment.makeSegments(f);return Ve.encodeSegments(p,h)}static encodeBinary(f,h){const p=e.QrSegment.makeBytes(f);return Ve.encodeSegments([p],h)}static encodeSegments(f,h,p=1,w=40,y=-1,C=!0){if(!(Ve.MIN_VERSION<=p&&p<=w&&w<=Ve.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let b,F;for(b=p;;b++){const _=Ve.getNumDataCodewords(b,h)*8,S=u.getTotalBits(f,b);if(S<=_){F=S;break}if(b>=w)throw new RangeError("Data too long")}for(const _ of[Ve.Ecc.MEDIUM,Ve.Ecc.QUARTILE,Ve.Ecc.HIGH])C&&F<=Ve.getNumDataCodewords(b,_)*8&&(h=_);let I=[];for(const _ of f){r(_.mode.modeBits,4,I),r(_.numChars,_.mode.numCharCountBits(b),I);for(const S of _.getData())I.push(S)}A(I.length==F);const N=Ve.getNumDataCodewords(b,h)*8;A(I.length<=N),r(0,Math.min(4,N-I.length),I),r(0,(8-I.length%8)%8,I),A(I.length%8==0);for(let _=236;I.length<N;_^=253)r(_,8,I);let v=[];for(;v.length*8<I.length;)v.push(0);return I.forEach((_,S)=>v[S>>>3]|=_<<7-(S&7)),new Ve(b,h,v,y)}getModule(f,h){return 0<=f&&f<this.size&&0<=h&&h<this.size&&this.modules[h][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),h=f.length;for(let p=0;p<h;p++)for(let w=0;w<h;w++)p==0&&w==0||p==0&&w==h-1||p==h-1&&w==0||this.drawAlignmentPattern(f[p],f[w]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const h=this.errorCorrectionLevel.formatBits<<3|f;let p=h;for(let y=0;y<10;y++)p=p<<1^(p>>>9)*1335;const w=(h<<10|p)^21522;A(w>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,n(w,y));this.setFunctionModule(8,7,n(w,6)),this.setFunctionModule(8,8,n(w,7)),this.setFunctionModule(7,8,n(w,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,n(w,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,n(w,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,n(w,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let p=0;p<12;p++)f=f<<1^(f>>>11)*7973;const h=this.version<<12|f;A(h>>>18==0);for(let p=0;p<18;p++){const w=n(h,p),y=this.size-11+p%3,C=Math.floor(p/3);this.setFunctionModule(y,C,w),this.setFunctionModule(C,y,w)}}drawFinderPattern(f,h){for(let p=-4;p<=4;p++)for(let w=-4;w<=4;w++){const y=Math.max(Math.abs(w),Math.abs(p)),C=f+w,b=h+p;0<=C&&C<this.size&&0<=b&&b<this.size&&this.setFunctionModule(C,b,y!=2&&y!=4)}}drawAlignmentPattern(f,h){for(let p=-2;p<=2;p++)for(let w=-2;w<=2;w++)this.setFunctionModule(f+w,h+p,Math.max(Math.abs(w),Math.abs(p))!=1)}setFunctionModule(f,h,p){this.modules[h][f]=p,this.isFunction[h][f]=!0}addEccAndInterleave(f){const h=this.version,p=this.errorCorrectionLevel;if(f.length!=Ve.getNumDataCodewords(h,p))throw new RangeError("Invalid argument");const w=Ve.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][h],y=Ve.ECC_CODEWORDS_PER_BLOCK[p.ordinal][h],C=Math.floor(Ve.getNumRawDataModules(h)/8),b=w-C%w,F=Math.floor(C/w);let I=[];const N=Ve.reedSolomonComputeDivisor(y);for(let _=0,S=0;_<w;_++){let j=f.slice(S,S+F-y+(_<b?0:1));S+=j.length;const Q=Ve.reedSolomonComputeRemainder(j,N);_<b&&j.push(0),I.push(j.concat(Q))}let v=[];for(let _=0;_<I[0].length;_++)I.forEach((S,j)=>{(_!=F-y||j>=b)&&v.push(S[_])});return A(v.length==C),v}drawCodewords(f){if(f.length!=Math.floor(Ve.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let w=0;w<this.size;w++)for(let y=0;y<2;y++){const C=p-y,F=(p+1&2)==0?this.size-1-w:w;!this.isFunction[F][C]&&h<f.length*8&&(this.modules[F][C]=n(f[h>>>3],7-(h&7)),h++)}}A(h==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let p=0;p<this.size;p++){let w;switch(f){case 0:w=(p+h)%2==0;break;case 1:w=h%2==0;break;case 2:w=p%3==0;break;case 3:w=(p+h)%3==0;break;case 4:w=(Math.floor(p/3)+Math.floor(h/2))%2==0;break;case 5:w=p*h%2+p*h%3==0;break;case 6:w=(p*h%2+p*h%3)%2==0;break;case 7:w=((p+h)%2+p*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][p]&&w&&(this.modules[h][p]=!this.modules[h][p])}}getPenaltyScore(){let f=0;for(let y=0;y<this.size;y++){let C=!1,b=0,F=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[y][I]==C?(b++,b==5?f+=Ve.PENALTY_N1:b>5&&f++):(this.finderPenaltyAddHistory(b,F),C||(f+=this.finderPenaltyCountPatterns(F)*Ve.PENALTY_N3),C=this.modules[y][I],b=1);f+=this.finderPenaltyTerminateAndCount(C,b,F)*Ve.PENALTY_N3}for(let y=0;y<this.size;y++){let C=!1,b=0,F=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][y]==C?(b++,b==5?f+=Ve.PENALTY_N1:b>5&&f++):(this.finderPenaltyAddHistory(b,F),C||(f+=this.finderPenaltyCountPatterns(F)*Ve.PENALTY_N3),C=this.modules[I][y],b=1);f+=this.finderPenaltyTerminateAndCount(C,b,F)*Ve.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let C=0;C<this.size-1;C++){const b=this.modules[y][C];b==this.modules[y][C+1]&&b==this.modules[y+1][C]&&b==this.modules[y+1][C+1]&&(f+=Ve.PENALTY_N2)}let h=0;for(const y of this.modules)h=y.reduce((C,b)=>C+(b?1:0),h);const p=this.size*this.size,w=Math.ceil(Math.abs(h*20-p*10)/p)-1;return A(0<=w&&w<=9),f+=w*Ve.PENALTY_N4,A(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let p=[6];for(let w=this.size-7;p.length<f;w-=h)p.splice(1,0,w);return p}}static getNumRawDataModules(f){if(f<Ve.MIN_VERSION||f>Ve.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*f+128)*f+64;if(f>=2){const p=Math.floor(f/7)+2;h-=(25*p-10)*p-55,f>=7&&(h-=36)}return A(208<=h&&h<=29648),h}static getNumDataCodewords(f,h){return Math.floor(Ve.getNumRawDataModules(f)/8)-Ve.ECC_CODEWORDS_PER_BLOCK[h.ordinal][f]*Ve.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let h=[];for(let w=0;w<f-1;w++)h.push(0);h.push(1);let p=1;for(let w=0;w<f;w++){for(let y=0;y<h.length;y++)h[y]=Ve.reedSolomonMultiply(h[y],p),y+1<h.length&&(h[y]^=h[y+1]);p=Ve.reedSolomonMultiply(p,2)}return h}static reedSolomonComputeRemainder(f,h){let p=h.map(w=>0);for(const w of f){const y=w^p.shift();p.push(0),h.forEach((C,b)=>p[b]^=Ve.reedSolomonMultiply(C,y))}return p}static reedSolomonMultiply(f,h){if(f>>>8||h>>>8)throw new RangeError("Byte out of range");let p=0;for(let w=7;w>=0;w--)p=p<<1^(p>>>7)*285,p^=(h>>>w&1)*f;return A(p>>>8==0),p}finderPenaltyCountPatterns(f){const h=f[1];A(h<=this.size*3);const p=h>0&&f[2]==h&&f[3]==h*3&&f[4]==h&&f[5]==h;return(p&&f[0]>=h*4&&f[6]>=h?1:0)+(p&&f[6]>=h*4&&f[0]>=h?1:0)}finderPenaltyTerminateAndCount(f,h,p){return f&&(this.finderPenaltyAddHistory(h,p),h=0),h+=this.size,this.finderPenaltyAddHistory(h,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(f,h){h[0]==0&&(f+=this.size),h.pop(),h.unshift(f)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(g,f,h){if(f<0||f>31||g>>>f)throw new RangeError("Value out of range");for(let p=f-1;p>=0;p--)h.push(g>>>p&1)}function n(g,f){return(g>>>f&1)!=0}function A(g){if(!g)throw new Error("Assertion error")}const a=class Rt{constructor(f,h,p){if(this.mode=f,this.numChars=h,this.bitData=p,h<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(f){let h=[];for(const p of f)r(p,8,h);return new Rt(Rt.Mode.BYTE,f.length,h)}static makeNumeric(f){if(!Rt.isNumeric(f))throw new RangeError("String contains non-numeric characters");let h=[];for(let p=0;p<f.length;){const w=Math.min(f.length-p,3);r(parseInt(f.substring(p,p+w),10),w*3+1,h),p+=w}return new Rt(Rt.Mode.NUMERIC,f.length,h)}static makeAlphanumeric(f){if(!Rt.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],p;for(p=0;p+2<=f.length;p+=2){let w=Rt.ALPHANUMERIC_CHARSET.indexOf(f.charAt(p))*45;w+=Rt.ALPHANUMERIC_CHARSET.indexOf(f.charAt(p+1)),r(w,11,h)}return p<f.length&&r(Rt.ALPHANUMERIC_CHARSET.indexOf(f.charAt(p)),6,h),new Rt(Rt.Mode.ALPHANUMERIC,f.length,h)}static makeSegments(f){return f==""?[]:Rt.isNumeric(f)?[Rt.makeNumeric(f)]:Rt.isAlphanumeric(f)?[Rt.makeAlphanumeric(f)]:[Rt.makeBytes(Rt.toUtf8ByteArray(f))]}static makeEci(f){let h=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)r(f,8,h);else if(f<16384)r(2,2,h),r(f,14,h);else if(f<1e6)r(6,3,h),r(f,21,h);else throw new RangeError("ECI assignment value out of range");return new Rt(Rt.Mode.ECI,0,h)}static isNumeric(f){return Rt.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return Rt.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,h){let p=0;for(const w of f){const y=w.mode.numCharCountBits(h);if(w.numChars>=1<<y)return 1/0;p+=4+y+w.bitData.length}return p}static toUtf8ByteArray(f){f=encodeURI(f);let h=[];for(let p=0;p<f.length;p++)f.charAt(p)!="%"?h.push(f.charCodeAt(p)):(h.push(parseInt(f.substring(p+1,p+3),16)),p+=2);return h}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let u=a;e.QrSegment=a})(ei||(ei={}));(e=>{(t=>{const r=class{constructor(A,a){this.ordinal=A,this.formatBits=a}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(ei||(ei={}));(e=>{(t=>{const r=class{constructor(A,a){this.modeBits=A,this.numBitsCharCount=a}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(ei||(ei={}));var Ki=ei;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var NN={L:Ki.QrCode.Ecc.LOW,M:Ki.QrCode.Ecc.MEDIUM,Q:Ki.QrCode.Ecc.QUARTILE,H:Ki.QrCode.Ecc.HIGH},dB=128,hB="L",fB="#FFFFFF",xB="#000000",gB=!1,pB=1,FN=4,IN=0,SN=.1;function mB(e,t=0){const r=[];return e.forEach(function(n,A){let a=null;n.forEach(function(u,g){if(!u&&a!==null){r.push(`M${a+t} ${A+t}h${g-a}v1H${a+t}z`),a=null;return}if(g===n.length-1){if(!u)return;a===null?r.push(`M${g+t},${A+t} h1v1H${g+t}z`):r.push(`M${a+t},${A+t} h${g+1-a}v1H${a+t}z`);return}u&&a===null&&(a=g)})}),r.join("")}function wB(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((A,a)=>a<t.x||a>=t.x+t.w?A:!1))}function UN(e,t,r,n){if(n==null)return null;const A=e.length+r*2,a=Math.floor(t*SN),u=A/t,g=(n.width||a)*u,f=(n.height||a)*u,h=n.x==null?e.length/2-g/2:n.x*u,p=n.y==null?e.length/2-f/2:n.y*u,w=n.opacity==null?1:n.opacity;let y=null;if(n.excavate){let b=Math.floor(h),F=Math.floor(p),I=Math.ceil(g+h-b),N=Math.ceil(f+p-F);y={x:b,y:F,w:I,h:N}}const C=n.crossOrigin;return{x:h,y:p,h:f,w:g,excavation:y,opacity:w,crossOrigin:C}}function QN(e,t){return t!=null?Math.max(Math.floor(t),0):e?FN:IN}function yB({value:e,level:t,minVersion:r,includeMargin:n,marginSize:A,imageSettings:a,size:u,boostLevel:g}){let f=Kt.useMemo(()=>{const b=(Array.isArray(e)?e:[e]).reduce((F,I)=>(F.push(...Ki.QrSegment.makeSegments(I)),F),[]);return Ki.QrCode.encodeSegments(b,NN[t],r,void 0,void 0,g)},[e,t,r,g]);const{cells:h,margin:p,numCells:w,calculatedImageSettings:y}=Kt.useMemo(()=>{let C=f.getModules();const b=QN(n,A),F=C.length+b*2,I=UN(C,u,b,a);return{cells:C,margin:b,numCells:F,calculatedImageSettings:I}},[f,u,a,n,A]);return{qrcode:f,margin:p,cells:h,numCells:w,calculatedImageSettings:y}}var DN=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),TN=Kt.forwardRef(function(t,r){const n=t,{value:A,size:a=dB,level:u=hB,bgColor:g=fB,fgColor:f=xB,includeMargin:h=gB,minVersion:p=pB,boostLevel:w,marginSize:y,imageSettings:C}=n,F=Bf(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=F,N=Bf(F,["style"]),v=C==null?void 0:C.src,_=Kt.useRef(null),S=Kt.useRef(null),j=Kt.useCallback(ce=>{_.current=ce,typeof r=="function"?r(ce):r&&(r.current=ce)},[r]),[Q,D]=Kt.useState(!1),{margin:L,cells:M,numCells:k,calculatedImageSettings:P}=yB({value:A,level:u,minVersion:p,boostLevel:w,includeMargin:h,marginSize:y,imageSettings:C,size:a});Kt.useEffect(()=>{if(_.current!=null){const ce=_.current,G=ce.getContext("2d");if(!G)return;let re=M;const oe=S.current,le=P!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;le&&P.excavation!=null&&(re=wB(M,P.excavation));const Y=window.devicePixelRatio||1;ce.height=ce.width=a*Y;const ue=a/k*Y;G.scale(ue,ue),G.fillStyle=g,G.fillRect(0,0,k,k),G.fillStyle=f,DN?G.fill(new Path2D(mB(re,L))):M.forEach(function(ee,$){ee.forEach(function(Ae,se){Ae&&G.fillRect(se+L,$+L,1,1)})}),P&&(G.globalAlpha=P.opacity),le&&G.drawImage(oe,P.x+L,P.y+L,P.w,P.h)}}),Kt.useEffect(()=>{D(!1)},[v]);const z=yf({height:a,width:a},I);let X=null;return v!=null&&(X=Kt.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{D(!0)},ref:S,crossOrigin:P==null?void 0:P.crossOrigin})),Kt.createElement(Kt.Fragment,null,Kt.createElement("canvas",yf({style:z,height:a,width:a,ref:j,role:"img"},N)),X)});TN.displayName="QRCodeCanvas";var BB=Kt.forwardRef(function(t,r){const n=t,{value:A,size:a=dB,level:u=hB,bgColor:g=fB,fgColor:f=xB,includeMargin:h=gB,minVersion:p=pB,boostLevel:w,title:y,marginSize:C,imageSettings:b}=n,F=Bf(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:N,numCells:v,calculatedImageSettings:_}=yB({value:A,level:u,minVersion:p,boostLevel:w,includeMargin:h,marginSize:C,imageSettings:b,size:a});let S=N,j=null;b!=null&&_!=null&&(_.excavation!=null&&(S=wB(N,_.excavation)),j=Kt.createElement("image",{href:b.src,height:_.h,width:_.w,x:_.x+I,y:_.y+I,preserveAspectRatio:"none",opacity:_.opacity,crossOrigin:_.crossOrigin}));const Q=mB(S,I);return Kt.createElement("svg",yf({height:a,width:a,viewBox:`0 0 ${v} ${v}`,ref:r,role:"img"},F),!!y&&Kt.createElement("title",null,y),Kt.createElement("path",{fill:g,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),Kt.createElement("path",{fill:f,d:Q,shapeRendering:"crispEdges"}),j)});BB.displayName="QRCodeSVG";/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vf=function(e,t){return vf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(r[A]=n[A])},vf(e,t)};function zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cf=function(){return Cf=Object.assign||function(t){for(var r,n=1,A=arguments.length;n<A;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Cf.apply(this,arguments)};function Or(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,[])).next())})}function Ur(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Vl(e,t,r){if(arguments.length===2)for(var n=0,A=t.length,a;n<A;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||t)}var Is=function(){function e(t,r,n,A){this.left=t,this.top=r,this.width=n,this.height=A}return e.prototype.add=function(t,r,n,A){return new e(this.left+t,this.top+r,this.width+n,this.height+A)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(A){return A.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),$u=function(e,t){return Is.fromClientRect(e,t.getBoundingClientRect())},RN=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),A=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Is(0,0,n,A)},Yu=function(e){for(var t=[],r=0,n=e.length;r<n;){var A=e.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((A&1023)<<10)+(a&1023)+65536):(t.push(A),r--)}else t.push(A)}return t},Pt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],A=-1,a="";++A<r;){var u=e[A];u<=65535?n.push(u):(u-=65536,n.push((u>>10)+55296,u%1024+56320)),(A+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},Pp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gl=0;Gl<Pp.length;Gl++)jN[Pp.charCodeAt(Gl)]=Gl;var Kp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ja=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zl=0;zl<Kp.length;zl++)Ja[Kp.charCodeAt(zl)]=zl;var ON=function(e){var t=e.length*.75,r=e.length,n,A=0,a,u,g,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),p=Array.isArray(h)?h:new Uint8Array(h);for(n=0;n<r;n+=4)a=Ja[e.charCodeAt(n)],u=Ja[e.charCodeAt(n+1)],g=Ja[e.charCodeAt(n+2)],f=Ja[e.charCodeAt(n+3)],p[A++]=a<<2|u>>4,p[A++]=(u&15)<<4|g>>2,p[A++]=(g&3)<<6|f&63;return h},kN=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},LN=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},WA=5,rx=11,Pd=2,MN=rx-WA,vB=65536>>WA,HN=1<<WA,Kd=HN-1,PN=1024>>WA,KN=vB+PN,VN=KN,GN=32,zN=VN+GN,WN=65536>>rx,XN=1<<MN,qN=XN-1,Vp=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},$N=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},YN=function(e,t){var r=ON(e),n=Array.isArray(r)?LN(r):new Uint32Array(r),A=Array.isArray(r)?kN(r):new Uint16Array(r),a=24,u=Vp(A,a/2,n[4]/2),g=n[5]===2?Vp(A,(a+n[4])/2):$N(n,Math.ceil((a+n[4])/4));return new ZN(n[0],n[1],n[2],n[3],u,g)},ZN=function(){function e(t,r,n,A,a,u){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=a,this.data=u}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>WA],r=(r<<Pd)+(t&Kd),this.data[r];if(t<=65535)return r=this.index[vB+(t-55296>>WA)],r=(r<<Pd)+(t&Kd),this.data[r];if(t<this.highStart)return r=zN-WN+(t>>rx),r=this.index[r],r+=t>>WA&qN,r=this.index[r],r=(r<<Pd)+(t&Kd),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Gp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wl=0;Wl<Gp.length;Wl++)JN[Gp.charCodeAt(Wl)]=Wl;var eF="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",zp=50,tF=1,CB=2,EB=3,rF=4,nF=5,Wp=7,bB=8,Xp=9,nA=10,Ef=11,qp=12,bf=13,sF=14,eo=15,_f=16,Xl=17,Ka=18,AF=19,$p=20,Nf=21,Va=22,Vd=23,Bi=24,sn=25,to=26,ro=27,vi=28,iF=29,MA=30,aF=31,ql=32,$l=33,Ff=34,If=35,Sf=36,$o=37,Uf=38,Nc=39,Fc=40,Gd=41,_B=42,oF=43,lF=[9001,65288],NB="!",We="×",Yl="÷",Qf=YN(eF),us=[MA,Sf],Df=[tF,CB,EB,nF],FB=[nA,bB],Yp=[ro,to],cF=Df.concat(FB),Zp=[Uf,Nc,Fc,Ff,If],uF=[eo,bf],dF=function(e,t){t===void 0&&(t="strict");var r=[],n=[],A=[];return e.forEach(function(a,u){var g=Qf.get(a);if(g>zp?(A.push(!0),g-=zp):A.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(u),r.push(_f);if(g===rF||g===Ef){if(u===0)return n.push(u),r.push(MA);var f=r[u-1];return cF.indexOf(f)===-1?(n.push(n[u-1]),r.push(f)):(n.push(u),r.push(MA))}if(n.push(u),g===aF)return r.push(t==="strict"?Nf:$o);if(g===_B||g===iF)return r.push(MA);if(g===oF)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push($o):r.push(MA);r.push(g)}),[n,r,A]},zd=function(e,t,r,n){var A=n[r];if(Array.isArray(e)?e.indexOf(A)!==-1:e===A)for(var a=r;a<=n.length;){a++;var u=n[a];if(u===t)return!0;if(u!==nA)break}if(A===nA)for(var a=r;a>0;){a--;var g=n[a];if(Array.isArray(e)?e.indexOf(g)!==-1:e===g)for(var f=r;f<=n.length;){f++;var u=n[f];if(u===t)return!0;if(u!==nA)break}if(g!==nA)break}return!1},Jp=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===nA)r--;else return n}return 0},hF=function(e,t,r,n,A){if(r[n]===0)return We;var a=n-1;if(Array.isArray(A)&&A[a]===!0)return We;var u=a-1,g=a+1,f=t[a],h=u>=0?t[u]:0,p=t[g];if(f===CB&&p===EB)return We;if(Df.indexOf(f)!==-1)return NB;if(Df.indexOf(p)!==-1||FB.indexOf(p)!==-1)return We;if(Jp(a,t)===bB)return Yl;if(Qf.get(e[a])===Ef||(f===ql||f===$l)&&Qf.get(e[g])===Ef||f===Wp||p===Wp||f===Xp||[nA,bf,eo].indexOf(f)===-1&&p===Xp||[Xl,Ka,AF,Bi,vi].indexOf(p)!==-1||Jp(a,t)===Va||zd(Vd,Va,a,t)||zd([Xl,Ka],Nf,a,t)||zd(qp,qp,a,t))return We;if(f===nA)return Yl;if(f===Vd||p===Vd)return We;if(p===_f||f===_f)return Yl;if([bf,eo,Nf].indexOf(p)!==-1||f===sF||h===Sf&&uF.indexOf(f)!==-1||f===vi&&p===Sf||p===$p||us.indexOf(p)!==-1&&f===sn||us.indexOf(f)!==-1&&p===sn||f===ro&&[$o,ql,$l].indexOf(p)!==-1||[$o,ql,$l].indexOf(f)!==-1&&p===to||us.indexOf(f)!==-1&&Yp.indexOf(p)!==-1||Yp.indexOf(f)!==-1&&us.indexOf(p)!==-1||[ro,to].indexOf(f)!==-1&&(p===sn||[Va,eo].indexOf(p)!==-1&&t[g+1]===sn)||[Va,eo].indexOf(f)!==-1&&p===sn||f===sn&&[sn,vi,Bi].indexOf(p)!==-1)return We;if([sn,vi,Bi,Xl,Ka].indexOf(p)!==-1)for(var w=a;w>=0;){var y=t[w];if(y===sn)return We;if([vi,Bi].indexOf(y)!==-1)w--;else break}if([ro,to].indexOf(p)!==-1)for(var w=[Xl,Ka].indexOf(f)!==-1?u:a;w>=0;){var y=t[w];if(y===sn)return We;if([vi,Bi].indexOf(y)!==-1)w--;else break}if(Uf===f&&[Uf,Nc,Ff,If].indexOf(p)!==-1||[Nc,Ff].indexOf(f)!==-1&&[Nc,Fc].indexOf(p)!==-1||[Fc,If].indexOf(f)!==-1&&p===Fc||Zp.indexOf(f)!==-1&&[$p,to].indexOf(p)!==-1||Zp.indexOf(p)!==-1&&f===ro||us.indexOf(f)!==-1&&us.indexOf(p)!==-1||f===Bi&&us.indexOf(p)!==-1||us.concat(sn).indexOf(f)!==-1&&p===Va&&lF.indexOf(e[g])===-1||us.concat(sn).indexOf(p)!==-1&&f===Ka)return We;if(f===Gd&&p===Gd){for(var C=r[a],b=1;C>0&&(C--,t[C]===Gd);)b++;if(b%2!==0)return We}return f===ql&&p===$l?We:Yl},fF=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=dF(e,t.lineBreak),n=r[0],A=r[1],a=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(A=A.map(function(g){return[sn,MA,_B].indexOf(g)!==-1?$o:g}));var u=t.wordBreak==="keep-all"?a.map(function(g,f){return g&&e[f]>=19968&&e[f]<=40959}):void 0;return[n,A,u]},xF=function(){function e(t,r,n,A){this.codePoints=t,this.required=r===NB,this.start=n,this.end=A}return e.prototype.slice=function(){return Pt.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),gF=function(e,t){var r=Yu(e),n=fF(r,t),A=n[0],a=n[1],u=n[2],g=r.length,f=0,h=0;return{next:function(){if(h>=g)return{done:!0,value:null};for(var p=We;h<g&&(p=hF(r,a,A,++h,u))===We;);if(p!==We||h===g){var w=new xF(r,p,f,h);return f=h,{value:w,done:!1}}return{done:!0,value:null}}}},pF=1,mF=2,cl=4,em=8,ou=10,tm=47,Bo=92,wF=9,yF=32,Zl=34,Ga=61,BF=35,vF=36,CF=37,Jl=39,ec=40,za=41,EF=95,qr=45,bF=33,_F=60,NF=62,FF=64,IF=91,SF=93,UF=61,QF=123,tc=63,DF=125,rm=124,TF=126,RF=128,nm=65533,Wd=42,VA=43,jF=44,OF=58,kF=59,Yo=46,LF=0,MF=8,HF=11,PF=14,KF=31,VF=127,rs=-1,IB=48,SB=97,UB=101,GF=102,zF=117,WF=122,QB=65,DB=69,TB=70,XF=85,qF=90,Qr=function(e){return e>=IB&&e<=57},$F=function(e){return e>=55296&&e<=57343},Ci=function(e){return Qr(e)||e>=QB&&e<=TB||e>=SB&&e<=GF},YF=function(e){return e>=SB&&e<=WF},ZF=function(e){return e>=QB&&e<=qF},JF=function(e){return YF(e)||ZF(e)},e6=function(e){return e>=RF},rc=function(e){return e===ou||e===wF||e===yF},lu=function(e){return JF(e)||e6(e)||e===EF},sm=function(e){return lu(e)||Qr(e)||e===qr},t6=function(e){return e>=LF&&e<=MF||e===HF||e>=PF&&e<=KF||e===VF},qs=function(e,t){return e!==Bo?!1:t!==ou},nc=function(e,t,r){return e===qr?lu(t)||qs(t,r):lu(e)?!0:!!(e===Bo&&qs(e,t))},Xd=function(e,t,r){return e===VA||e===qr?Qr(t)?!0:t===Yo&&Qr(r):Qr(e===Yo?t:e)},r6=function(e){var t=0,r=1;(e[t]===VA||e[t]===qr)&&(e[t]===qr&&(r=-1),t++);for(var n=[];Qr(e[t]);)n.push(e[t++]);var A=n.length?parseInt(Pt.apply(void 0,n),10):0;e[t]===Yo&&t++;for(var a=[];Qr(e[t]);)a.push(e[t++]);var u=a.length,g=u?parseInt(Pt.apply(void 0,a),10):0;(e[t]===DB||e[t]===UB)&&t++;var f=1;(e[t]===VA||e[t]===qr)&&(e[t]===qr&&(f=-1),t++);for(var h=[];Qr(e[t]);)h.push(e[t++]);var p=h.length?parseInt(Pt.apply(void 0,h),10):0;return r*(A+g*Math.pow(10,-u))*Math.pow(10,f*p)},n6={type:2},s6={type:3},A6={type:4},i6={type:13},a6={type:8},o6={type:21},l6={type:9},c6={type:10},u6={type:11},d6={type:12},h6={type:14},sc={type:23},f6={type:1},x6={type:25},g6={type:24},p6={type:26},m6={type:27},w6={type:28},y6={type:29},B6={type:31},Tf={type:32},RB=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Yu(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==Tf;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Zl:return this.consumeStringToken(Zl);case BF:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),A=this.peekCodePoint(2);if(sm(r)||qs(n,A)){var a=nc(r,n,A)?mF:pF,u=this.consumeName();return{type:5,value:u,flags:a}}break;case vF:if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),i6;break;case Jl:return this.consumeStringToken(Jl);case ec:return n6;case za:return s6;case Wd:if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),h6;break;case VA:if(Xd(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case jF:return A6;case qr:var g=t,f=this.peekCodePoint(0),h=this.peekCodePoint(1);if(Xd(g,f,h))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(nc(g,f,h))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(f===qr&&h===NF)return this.consumeCodePoint(),this.consumeCodePoint(),g6;break;case Yo:if(Xd(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case tm:if(this.peekCodePoint(0)===Wd)for(this.consumeCodePoint();;){var p=this.consumeCodePoint();if(p===Wd&&(p=this.consumeCodePoint(),p===tm))return this.consumeToken();if(p===rs)return this.consumeToken()}break;case OF:return p6;case kF:return m6;case _F:if(this.peekCodePoint(0)===bF&&this.peekCodePoint(1)===qr&&this.peekCodePoint(2)===qr)return this.consumeCodePoint(),this.consumeCodePoint(),x6;break;case FF:var w=this.peekCodePoint(0),y=this.peekCodePoint(1),C=this.peekCodePoint(2);if(nc(w,y,C)){var u=this.consumeName();return{type:7,value:u}}break;case IF:return w6;case Bo:if(qs(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case SF:return y6;case UF:if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),a6;break;case QF:return u6;case DF:return d6;case zF:case XF:var b=this.peekCodePoint(0),F=this.peekCodePoint(1);return b===VA&&(Ci(F)||F===tc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case rm:if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),l6;if(this.peekCodePoint(0)===rm)return this.consumeCodePoint(),o6;break;case TF:if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),c6;break;case rs:return Tf}return rc(t)?(this.consumeWhiteSpace(),B6):Qr(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):lu(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Pt(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Ci(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===tc&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var A=parseInt(Pt.apply(void 0,t.map(function(f){return f===tc?IB:f})),16),a=parseInt(Pt.apply(void 0,t.map(function(f){return f===tc?TB:f})),16);return{type:30,start:A,end:a}}var u=parseInt(Pt.apply(void 0,t),16);if(this.peekCodePoint(0)===qr&&Ci(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var g=[];Ci(r)&&g.length<6;)g.push(r),r=this.consumeCodePoint();var a=parseInt(Pt.apply(void 0,g),16);return{type:30,start:u,end:a}}else return{type:30,start:u,end:u}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===ec?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ec?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===rs)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Jl||r===Zl){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===rs||this.peekCodePoint(0)===za)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),sc)}for(;;){var A=this.consumeCodePoint();if(A===rs||A===za)return{type:22,value:Pt.apply(void 0,t)};if(rc(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===rs||this.peekCodePoint(0)===za?(this.consumeCodePoint(),{type:22,value:Pt.apply(void 0,t)}):(this.consumeBadUrlRemnants(),sc);if(A===Zl||A===Jl||A===ec||t6(A))return this.consumeBadUrlRemnants(),sc;if(A===Bo)if(qs(A,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),sc;else t.push(A)}},e.prototype.consumeWhiteSpace=function(){for(;rc(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===za||t===rs)return;qs(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var A=Math.min(r,t);n+=Pt.apply(void 0,this._value.splice(0,A)),t-=A}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var A=this._value[n];if(A===rs||A===void 0||A===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(A===ou)return this._value.splice(0,n),f6;if(A===Bo){var a=this._value[n+1];a!==rs&&a!==void 0&&(a===ou?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):qs(A,a)&&(r+=this.consumeStringSlice(n),r+=Pt(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=cl,n=this.peekCodePoint(0);for((n===VA||n===qr)&&t.push(this.consumeCodePoint());Qr(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(n===Yo&&Qr(A))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=em;Qr(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),A=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===DB||n===UB)&&((A===VA||A===qr)&&Qr(a)||Qr(A)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=em;Qr(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[r6(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],A=this.peekCodePoint(0),a=this.peekCodePoint(1),u=this.peekCodePoint(2);if(nc(A,a,u)){var g=this.consumeName();return{type:15,number:r,flags:n,unit:g}}return A===CF?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ci(t)){for(var r=Pt(t);Ci(this.peekCodePoint(0))&&r.length<6;)r+=Pt(this.consumeCodePoint());rc(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||$F(n)||n>1114111?nm:n}return t===rs?nm:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(sm(r))t+=Pt(r);else if(qs(r,this.peekCodePoint(0)))t+=Pt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),jB=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new RB;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||C6(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Tf:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),ul=function(e){return e.type===15},Ba=function(e){return e.type===17},ot=function(e){return e.type===20},v6=function(e){return e.type===0},Rf=function(e,t){return ot(e)&&e.value===t},OB=function(e){return e.type!==31},ua=function(e){return e.type!==31&&e.type!==4},os=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},C6=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},BA=function(e){return e.type===17||e.type===15},zt=function(e){return e.type===16||BA(e)},kB=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Er={type:17,number:0,flags:cl},nx={type:16,number:50,flags:cl},sA={type:16,number:100,flags:cl},no=function(e,t,r){var n=e[0],A=e[1];return[ft(n,t),ft(typeof A<"u"?A:n,r)]},ft=function(e,t){if(e.type===16)return e.number/100*t;if(ul(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},LB="deg",MB="grad",HB="rad",PB="turn",Zu={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case LB:return Math.PI*t.number/180;case MB:return Math.PI/200*t.number;case HB:return t.number;case PB:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},KB=function(e){return e.type===15&&(e.unit===LB||e.unit===MB||e.unit===HB||e.unit===PB)},VB=function(e){var t=e.filter(ot).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Er,Er];case"to top":case"bottom":return _n(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Er,sA];case"to right":case"left":return _n(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[sA,sA];case"to bottom":case"top":return _n(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[sA,Er];case"to left":case"right":return _n(270)}return 0},_n=function(e){return Math.PI*e/180},gA={name:"color",parse:function(e,t){if(t.type===18){var r=E6[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),A=t.value.substring(1,2),a=t.value.substring(2,3);return AA(parseInt(n+n,16),parseInt(A+A,16),parseInt(a+a,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),A=t.value.substring(1,2),a=t.value.substring(2,3),u=t.value.substring(3,4);return AA(parseInt(n+n,16),parseInt(A+A,16),parseInt(a+a,16),parseInt(u+u,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),A=t.value.substring(2,4),a=t.value.substring(4,6);return AA(parseInt(n,16),parseInt(A,16),parseInt(a,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),A=t.value.substring(2,4),a=t.value.substring(4,6),u=t.value.substring(6,8);return AA(parseInt(n,16),parseInt(A,16),parseInt(a,16),parseInt(u,16)/255)}}if(t.type===20){var g=Cs[t.value.toUpperCase()];if(typeof g<"u")return g}return Cs.TRANSPARENT}},pA=function(e){return(255&e)===0},or=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,A=255&e>>24;return t<255?"rgba("+A+","+n+","+r+","+t/255+")":"rgb("+A+","+n+","+r+")"},AA=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},Am=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},im=function(e,t){var r=t.filter(ua);if(r.length===3){var n=r.map(Am),A=n[0],a=n[1],u=n[2];return AA(A,a,u,1)}if(r.length===4){var g=r.map(Am),A=g[0],a=g[1],u=g[2],f=g[3];return AA(A,a,u,f)}return 0};function qd(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var am=function(e,t){var r=t.filter(ua),n=r[0],A=r[1],a=r[2],u=r[3],g=(n.type===17?_n(n.number):Zu.parse(e,n))/(Math.PI*2),f=zt(A)?A.number/100:0,h=zt(a)?a.number/100:0,p=typeof u<"u"&&zt(u)?ft(u,1):1;if(f===0)return AA(h*255,h*255,h*255,1);var w=h<=.5?h*(f+1):h+f-h*f,y=h*2-w,C=qd(y,w,g+1/3),b=qd(y,w,g),F=qd(y,w,g-1/3);return AA(C*255,b*255,F*255,p)},E6={hsl:am,hsla:am,rgb:im,rgba:im},vo=function(e,t){return gA.parse(e,jB.create(t).parseComponentValue())},Cs={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},b6={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ot(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_6={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ju=function(e,t){var r=gA.parse(e,t[0]),n=t[1];return n&&zt(n)?{color:r,stop:n}:{color:r,stop:null}},om=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Er),n.stop===null&&(n.stop=sA);for(var A=[],a=0,u=0;u<e.length;u++){var g=e[u].stop;if(g!==null){var f=ft(g,t);f>a?A.push(f):A.push(a),a=f}else A.push(null)}for(var h=null,u=0;u<A.length;u++){var p=A[u];if(p===null)h===null&&(h=u);else if(h!==null){for(var w=u-h,y=A[h-1],C=(p-y)/(w+1),b=1;b<=w;b++)A[h+b-1]=C*b;h=null}}return e.map(function(F,I){var N=F.color;return{color:N,stop:Math.max(Math.min(1,A[I]/t),0)}})},N6=function(e,t,r){var n=t/2,A=r/2,a=ft(e[0],t)-n,u=A-ft(e[1],r);return(Math.atan2(u,a)+Math.PI*2)%(Math.PI*2)},F6=function(e,t,r){var n=typeof e=="number"?e:N6(e,t,r),A=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),a=t/2,u=r/2,g=A/2,f=Math.sin(n-Math.PI/2)*g,h=Math.cos(n-Math.PI/2)*g;return[A,a-h,a+h,u-f,u+f]},jn=function(e,t){return Math.sqrt(e*e+t*t)},lm=function(e,t,r,n,A){var a=[[0,0],[0,t],[e,0],[e,t]];return a.reduce(function(u,g){var f=g[0],h=g[1],p=jn(r-f,n-h);return(A?p<u.optimumDistance:p>u.optimumDistance)?{optimumCorner:g,optimumDistance:p}:u},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},I6=function(e,t,r,n,A){var a=0,u=0;switch(e.size){case 0:e.shape===0?a=u=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-A)):e.shape===1&&(a=Math.min(Math.abs(t),Math.abs(t-n)),u=Math.min(Math.abs(r),Math.abs(r-A)));break;case 2:if(e.shape===0)a=u=Math.min(jn(t,r),jn(t,r-A),jn(t-n,r),jn(t-n,r-A));else if(e.shape===1){var g=Math.min(Math.abs(r),Math.abs(r-A))/Math.min(Math.abs(t),Math.abs(t-n)),f=lm(n,A,t,r,!0),h=f[0],p=f[1];a=jn(h-t,(p-r)/g),u=g*a}break;case 1:e.shape===0?a=u=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-A)):e.shape===1&&(a=Math.max(Math.abs(t),Math.abs(t-n)),u=Math.max(Math.abs(r),Math.abs(r-A)));break;case 3:if(e.shape===0)a=u=Math.max(jn(t,r),jn(t,r-A),jn(t-n,r),jn(t-n,r-A));else if(e.shape===1){var g=Math.max(Math.abs(r),Math.abs(r-A))/Math.max(Math.abs(t),Math.abs(t-n)),w=lm(n,A,t,r,!1),h=w[0],p=w[1];a=jn(h-t,(p-r)/g),u=g*a}break}return Array.isArray(e.size)&&(a=ft(e.size[0],n),u=e.size.length===2?ft(e.size[1],A):a),[a,u]},S6=function(e,t){var r=_n(180),n=[];return os(t).forEach(function(A,a){if(a===0){var u=A[0];if(u.type===20&&u.value==="to"){r=VB(A);return}else if(KB(u)){r=Zu.parse(e,u);return}}var g=Ju(e,A);n.push(g)}),{angle:r,stops:n,type:1}},Ac=function(e,t){var r=_n(180),n=[];return os(t).forEach(function(A,a){if(a===0){var u=A[0];if(u.type===20&&["top","left","right","bottom"].indexOf(u.value)!==-1){r=VB(A);return}else if(KB(u)){r=(Zu.parse(e,u)+_n(270))%_n(360);return}}var g=Ju(e,A);n.push(g)}),{angle:r,stops:n,type:1}},U6=function(e,t){var r=_n(180),n=[],A=1,a=0,u=3,g=[];return os(t).forEach(function(f,h){var p=f[0];if(h===0){if(ot(p)&&p.value==="linear"){A=1;return}else if(ot(p)&&p.value==="radial"){A=2;return}}if(p.type===18){if(p.name==="from"){var w=gA.parse(e,p.values[0]);n.push({stop:Er,color:w})}else if(p.name==="to"){var w=gA.parse(e,p.values[0]);n.push({stop:sA,color:w})}else if(p.name==="color-stop"){var y=p.values.filter(ua);if(y.length===2){var w=gA.parse(e,y[1]),C=y[0];Ba(C)&&n.push({stop:{type:16,number:C.number*100,flags:C.flags},color:w})}}}}),A===1?{angle:(r+_n(180))%_n(360),stops:n,type:A}:{size:u,shape:a,stops:n,position:g,type:A}},GB="closest-side",zB="farthest-side",WB="closest-corner",XB="farthest-corner",qB="circle",$B="ellipse",YB="cover",ZB="contain",Q6=function(e,t){var r=0,n=3,A=[],a=[];return os(t).forEach(function(u,g){var f=!0;if(g===0){var h=!1;f=u.reduce(function(w,y){if(h)if(ot(y))switch(y.value){case"center":return a.push(nx),w;case"top":case"left":return a.push(Er),w;case"right":case"bottom":return a.push(sA),w}else(zt(y)||BA(y))&&a.push(y);else if(ot(y))switch(y.value){case qB:return r=0,!1;case $B:return r=1,!1;case"at":return h=!0,!1;case GB:return n=0,!1;case YB:case zB:return n=1,!1;case ZB:case WB:return n=2,!1;case XB:return n=3,!1}else if(BA(y)||zt(y))return Array.isArray(n)||(n=[]),n.push(y),!1;return w},f)}if(f){var p=Ju(e,u);A.push(p)}}),{size:n,shape:r,stops:A,position:a,type:2}},ic=function(e,t){var r=0,n=3,A=[],a=[];return os(t).forEach(function(u,g){var f=!0;if(g===0?f=u.reduce(function(p,w){if(ot(w))switch(w.value){case"center":return a.push(nx),!1;case"top":case"left":return a.push(Er),!1;case"right":case"bottom":return a.push(sA),!1}else if(zt(w)||BA(w))return a.push(w),!1;return p},f):g===1&&(f=u.reduce(function(p,w){if(ot(w))switch(w.value){case qB:return r=0,!1;case $B:return r=1,!1;case ZB:case GB:return n=0,!1;case zB:return n=1,!1;case WB:return n=2,!1;case YB:case XB:return n=3,!1}else if(BA(w)||zt(w))return Array.isArray(n)||(n=[]),n.push(w),!1;return p},f)),f){var h=Ju(e,u);A.push(h)}}),{size:n,shape:r,stops:A,position:a,type:2}},D6=function(e){return e.type===1},T6=function(e){return e.type===2},sx={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=JB[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function R6(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!JB[e.name])}var JB={"linear-gradient":S6,"-moz-linear-gradient":Ac,"-ms-linear-gradient":Ac,"-o-linear-gradient":Ac,"-webkit-linear-gradient":Ac,"radial-gradient":Q6,"-moz-radial-gradient":ic,"-ms-radial-gradient":ic,"-o-radial-gradient":ic,"-webkit-radial-gradient":ic,"-webkit-gradient":U6},j6={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return ua(n)&&R6(n)}).map(function(n){return sx.parse(e,n)})}},O6={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(ot(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},k6={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return os(t).map(function(r){return r.filter(zt)}).map(kB)}},L6={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return os(t).map(function(r){return r.filter(ot).map(function(n){return n.value}).join(" ")}).map(M6)}},M6=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ea;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(ea||(ea={}));var H6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return os(t).map(function(r){return r.filter(P6)})}},P6=function(e){return ot(e)||zt(e)},e0=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},K6=e0("top"),V6=e0("right"),G6=e0("bottom"),z6=e0("left"),t0=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return kB(r.filter(zt))}}},W6=t0("top-left"),X6=t0("top-right"),q6=t0("bottom-right"),$6=t0("bottom-left"),r0=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Y6=r0("top"),Z6=r0("right"),J6=r0("bottom"),eI=r0("left"),n0=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return ul(r)?r.number:0}}},tI=n0("top"),rI=n0("right"),nI=n0("bottom"),sI=n0("left"),AI={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},iI={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},aI={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).reduce(function(r,n){return r|oI(n.value)},0)}},oI=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},lI={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},cI={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},cu;(function(e){e.NORMAL="normal",e.STRICT="strict"})(cu||(cu={}));var uI={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return cu.STRICT;case"normal":default:return cu.NORMAL}}},dI={name:"line-height",initialValue:"normal",prefix:!1,type:4},cm=function(e,t){return ot(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:zt(e)?ft(e,t):t},hI={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:sx.parse(e,t)}},fI={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},jf={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},s0=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},xI=s0("top"),gI=s0("right"),pI=s0("bottom"),mI=s0("left"),wI={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},yI={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},A0=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},BI=A0("top"),vI=A0("right"),CI=A0("bottom"),EI=A0("left"),bI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},_I={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},NI={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Rf(t[0],"none")?[]:os(t).map(function(r){for(var n={color:Cs.TRANSPARENT,offsetX:Er,offsetY:Er,blur:Er},A=0,a=0;a<r.length;a++){var u=r[a];BA(u)?(A===0?n.offsetX=u:A===1?n.offsetY=u:n.blur=u,A++):n.color=gA.parse(e,u)}return n})}},FI={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},II={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=QI[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},SI=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},UI=function(e){var t=e.filter(function(f){return f.type===17}).map(function(f){return f.number}),r=t[0],n=t[1];t[2],t[3];var A=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var u=t[12],g=t[13];return t[14],t[15],t.length===16?[r,n,A,a,u,g]:null},QI={matrix:SI,matrix3d:UI},um={type:16,number:50,flags:cl},DI=[um,um],TI={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(zt);return r.length!==2?DI:[r[0],r[1]]}},RI={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Co;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Co||(Co={}));var jI={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Co.BREAK_ALL;case"keep-all":return Co.KEEP_ALL;case"normal":default:return Co.NORMAL}}},OI={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Ba(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},ev={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},kI={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Ba(t)?t.number:1}},LI={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},MI={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},HI={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(A){switch(A.type){case 20:case 0:r.push(A.value);break;case 17:r.push(A.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},PI={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},KI={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Ba(t))return t.number;if(ot(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},VI={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ot).map(function(r){return r.value})}},GI={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},er=function(e,t){return(e&t)!==0},zI={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},WI={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],A=t.filter(OB),a=0;a<A.length;a++){var u=A[a],g=A[a+1];if(u.type===20){var f=g&&Ba(g)?g.number:1;n.push({counter:u.value,increment:f})}}return n}},XI={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(OB),A=0;A<n.length;A++){var a=n[A],u=n[A+1];if(ot(a)&&a.value!=="none"){var g=u&&Ba(u)?u.number:0;r.push({counter:a.value,reset:g})}}return r}},qI={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(ul).map(function(r){return ev.parse(e,r)})}},$I={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],A=t.filter(v6);if(A.length%2!==0)return null;for(var a=0;a<A.length;a+=2){var u=A[a].value,g=A[a+1].value;n.push({open:u,close:g})}return n}},dm=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},YI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Rf(t[0],"none")?[]:os(t).map(function(r){for(var n={color:255,offsetX:Er,offsetY:Er,blur:Er,spread:Er,inset:!1},A=0,a=0;a<r.length;a++){var u=r[a];Rf(u,"inset")?n.inset=!0:BA(u)?(A===0?n.offsetX=u:A===1?n.offsetY=u:A===2?n.blur=u:n.spread=u,A++):n.color=gA.parse(e,u)}return n})}},ZI={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(ot).forEach(function(A){switch(A.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(A){n.indexOf(A)===-1&&n.push(A)}),n}},JI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},eS={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ul(t)?t.number:0}},tS=function(){function e(t,r){var n,A;this.animationDuration=_e(t,qI,r.animationDuration),this.backgroundClip=_e(t,b6,r.backgroundClip),this.backgroundColor=_e(t,_6,r.backgroundColor),this.backgroundImage=_e(t,j6,r.backgroundImage),this.backgroundOrigin=_e(t,O6,r.backgroundOrigin),this.backgroundPosition=_e(t,k6,r.backgroundPosition),this.backgroundRepeat=_e(t,L6,r.backgroundRepeat),this.backgroundSize=_e(t,H6,r.backgroundSize),this.borderTopColor=_e(t,K6,r.borderTopColor),this.borderRightColor=_e(t,V6,r.borderRightColor),this.borderBottomColor=_e(t,G6,r.borderBottomColor),this.borderLeftColor=_e(t,z6,r.borderLeftColor),this.borderTopLeftRadius=_e(t,W6,r.borderTopLeftRadius),this.borderTopRightRadius=_e(t,X6,r.borderTopRightRadius),this.borderBottomRightRadius=_e(t,q6,r.borderBottomRightRadius),this.borderBottomLeftRadius=_e(t,$6,r.borderBottomLeftRadius),this.borderTopStyle=_e(t,Y6,r.borderTopStyle),this.borderRightStyle=_e(t,Z6,r.borderRightStyle),this.borderBottomStyle=_e(t,J6,r.borderBottomStyle),this.borderLeftStyle=_e(t,eI,r.borderLeftStyle),this.borderTopWidth=_e(t,tI,r.borderTopWidth),this.borderRightWidth=_e(t,rI,r.borderRightWidth),this.borderBottomWidth=_e(t,nI,r.borderBottomWidth),this.borderLeftWidth=_e(t,sI,r.borderLeftWidth),this.boxShadow=_e(t,YI,r.boxShadow),this.color=_e(t,AI,r.color),this.direction=_e(t,iI,r.direction),this.display=_e(t,aI,r.display),this.float=_e(t,lI,r.cssFloat),this.fontFamily=_e(t,HI,r.fontFamily),this.fontSize=_e(t,PI,r.fontSize),this.fontStyle=_e(t,GI,r.fontStyle),this.fontVariant=_e(t,VI,r.fontVariant),this.fontWeight=_e(t,KI,r.fontWeight),this.letterSpacing=_e(t,cI,r.letterSpacing),this.lineBreak=_e(t,uI,r.lineBreak),this.lineHeight=_e(t,dI,r.lineHeight),this.listStyleImage=_e(t,hI,r.listStyleImage),this.listStylePosition=_e(t,fI,r.listStylePosition),this.listStyleType=_e(t,jf,r.listStyleType),this.marginTop=_e(t,xI,r.marginTop),this.marginRight=_e(t,gI,r.marginRight),this.marginBottom=_e(t,pI,r.marginBottom),this.marginLeft=_e(t,mI,r.marginLeft),this.opacity=_e(t,kI,r.opacity);var a=_e(t,wI,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=_e(t,yI,r.overflowWrap),this.paddingTop=_e(t,BI,r.paddingTop),this.paddingRight=_e(t,vI,r.paddingRight),this.paddingBottom=_e(t,CI,r.paddingBottom),this.paddingLeft=_e(t,EI,r.paddingLeft),this.paintOrder=_e(t,ZI,r.paintOrder),this.position=_e(t,_I,r.position),this.textAlign=_e(t,bI,r.textAlign),this.textDecorationColor=_e(t,LI,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=_e(t,MI,(A=r.textDecorationLine)!==null&&A!==void 0?A:r.textDecoration),this.textShadow=_e(t,NI,r.textShadow),this.textTransform=_e(t,FI,r.textTransform),this.transform=_e(t,II,r.transform),this.transformOrigin=_e(t,TI,r.transformOrigin),this.visibility=_e(t,RI,r.visibility),this.webkitTextStrokeColor=_e(t,JI,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=_e(t,eS,r.webkitTextStrokeWidth),this.wordBreak=_e(t,jI,r.wordBreak),this.zIndex=_e(t,OI,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return pA(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return er(this.display,4)||er(this.display,33554432)||er(this.display,268435456)||er(this.display,536870912)||er(this.display,67108864)||er(this.display,134217728)},e}(),rS=function(){function e(t,r){this.content=_e(t,zI,r.content),this.quotes=_e(t,$I,r.quotes)}return e}(),hm=function(){function e(t,r){this.counterIncrement=_e(t,WI,r.counterIncrement),this.counterReset=_e(t,XI,r.counterReset)}return e}(),_e=function(e,t,r){var n=new RB,A=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(A);var a=new jB(n.read());switch(t.type){case 2:var u=a.parseComponentValue();return t.parse(e,ot(u)?u.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return Zu.parse(e,a.parseComponentValue());case"color":return gA.parse(e,a.parseComponentValue());case"image":return sx.parse(e,a.parseComponentValue());case"length":var g=a.parseComponentValue();return BA(g)?g:Er;case"length-percentage":var f=a.parseComponentValue();return zt(f)?f:Er;case"time":return ev.parse(e,a.parseComponentValue())}break}},nS="data-html2canvas-debug",sS=function(e){var t=e.getAttribute(nS);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Of=function(e,t){var r=sS(e);return r===1||t===r},ls=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Of(r,3))debugger;this.styles=new tS(t,window.getComputedStyle(r,null)),Mf(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=$u(this.context,r),Of(r,4)&&(this.flags|=16)}return e}(),AS="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",so=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ac=0;ac<fm.length;ac++)so[fm.charCodeAt(ac)]=ac;var iS=function(e){var t=e.length*.75,r=e.length,n,A=0,a,u,g,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),p=Array.isArray(h)?h:new Uint8Array(h);for(n=0;n<r;n+=4)a=so[e.charCodeAt(n)],u=so[e.charCodeAt(n+1)],g=so[e.charCodeAt(n+2)],f=so[e.charCodeAt(n+3)],p[A++]=a<<2|u>>4,p[A++]=(u&15)<<4|g>>2,p[A++]=(g&3)<<6|f&63;return h},aS=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},oS=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},XA=5,Ax=11,$d=2,lS=Ax-XA,tv=65536>>XA,cS=1<<XA,Yd=cS-1,uS=1024>>XA,dS=tv+uS,hS=dS,fS=32,xS=hS+fS,gS=65536>>Ax,pS=1<<lS,mS=pS-1,xm=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},wS=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},yS=function(e,t){var r=iS(e),n=Array.isArray(r)?oS(r):new Uint32Array(r),A=Array.isArray(r)?aS(r):new Uint16Array(r),a=24,u=xm(A,a/2,n[4]/2),g=n[5]===2?xm(A,(a+n[4])/2):wS(n,Math.ceil((a+n[4])/4));return new BS(n[0],n[1],n[2],n[3],u,g)},BS=function(){function e(t,r,n,A,a,u){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=a,this.data=u}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>XA],r=(r<<$d)+(t&Yd),this.data[r];if(t<=65535)return r=this.index[tv+(t-55296>>XA)],r=(r<<$d)+(t&Yd),this.data[r];if(t<this.highStart)return r=xS-gS+(t>>Ax),r=this.index[r],r+=t>>XA&mS,r=this.index[r],r=(r<<$d)+(t&Yd),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),gm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vS=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var oc=0;oc<gm.length;oc++)vS[gm.charCodeAt(oc)]=oc;var CS=1,Zd=2,Jd=3,pm=4,mm=5,ES=7,wm=8,eh=9,th=10,ym=11,Bm=12,vm=13,Cm=14,rh=15,bS=function(e){for(var t=[],r=0,n=e.length;r<n;){var A=e.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((A&1023)<<10)+(a&1023)+65536):(t.push(A),r--)}else t.push(A)}return t},_S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],A=-1,a="";++A<r;){var u=e[A];u<=65535?n.push(u):(u-=65536,n.push((u>>10)+55296,u%1024+56320)),(A+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},NS=yS(AS),yn="×",nh="÷",FS=function(e){return NS.get(e)},IS=function(e,t,r){var n=r-2,A=t[n],a=t[r-1],u=t[r];if(a===Zd&&u===Jd)return yn;if(a===Zd||a===Jd||a===pm||u===Zd||u===Jd||u===pm)return nh;if(a===wm&&[wm,eh,ym,Bm].indexOf(u)!==-1||(a===ym||a===eh)&&(u===eh||u===th)||(a===Bm||a===th)&&u===th||u===vm||u===mm||u===ES||a===CS)return yn;if(a===vm&&u===Cm){for(;A===mm;)A=t[--n];if(A===Cm)return yn}if(a===rh&&u===rh){for(var g=0;A===rh;)g++,A=t[--n];if(g%2===0)return yn}return nh},SS=function(e){var t=bS(e),r=t.length,n=0,A=0,a=t.map(FS);return{next:function(){if(n>=r)return{done:!0,value:null};for(var u=yn;n<r&&(u=IS(t,a,++n))===yn;);if(u!==yn||n===r){var g=_S.apply(null,t.slice(A,n));return A=n,{value:g,done:!1}}return{done:!0,value:null}}}},US=function(e){for(var t=SS(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},QS=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var A=r.getBoundingClientRect(),a=Math.round(A.height);if(e.body.removeChild(n),a===t)return!0}}return!1},DS=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,A=Yu(n.data).map(function(f){return Pt(f)}),a=0,u={},g=A.every(function(f,h){r.setStart(n,a),r.setEnd(n,a+f.length);var p=r.getBoundingClientRect();a+=f.length;var w=p.x>u.x||p.y>u.y;return u=p,h===0?!0:w});return e.body.removeChild(t),g},TS=function(){return typeof new Image().crossOrigin<"u"},RS=function(){return typeof new XMLHttpRequest().responseType=="string"},jS=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},Em=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},OS=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var A=new Image,a=t.toDataURL();A.src=a;var u=kf(r,r,0,0,A);return n.fillStyle="red",n.fillRect(0,0,r,r),bm(u).then(function(g){n.drawImage(g,0,0);var f=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var h=e.createElement("div");return h.style.backgroundImage="url("+a+")",h.style.height=r+"px",Em(f)?bm(kf(r,r,0,0,h)):Promise.reject(!1)}).then(function(g){return n.drawImage(g,0,0),Em(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},kf=function(e,t,r,n,A){var a="http://www.w3.org/2000/svg",u=document.createElementNS(a,"svg"),g=document.createElementNS(a,"foreignObject");return u.setAttributeNS(null,"width",e.toString()),u.setAttributeNS(null,"height",t.toString()),g.setAttributeNS(null,"width","100%"),g.setAttributeNS(null,"height","100%"),g.setAttributeNS(null,"x",r.toString()),g.setAttributeNS(null,"y",n.toString()),g.setAttributeNS(null,"externalResourcesRequired","true"),u.appendChild(g),g.appendChild(A),u},bm=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},vr={get SUPPORT_RANGE_BOUNDS(){var e=QS(document);return Object.defineProperty(vr,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=vr.SUPPORT_RANGE_BOUNDS&&DS(document);return Object.defineProperty(vr,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=jS(document);return Object.defineProperty(vr,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?OS(document):Promise.resolve(!1);return Object.defineProperty(vr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=TS();return Object.defineProperty(vr,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=RS();return Object.defineProperty(vr,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vr,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Eo=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),kS=function(e,t,r,n){var A=HS(t,r),a=[],u=0;return A.forEach(function(g){if(r.textDecorationLine.length||g.trim().length>0)if(vr.SUPPORT_RANGE_BOUNDS){var f=_m(n,u,g.length).getClientRects();if(f.length>1){var h=ix(g),p=0;h.forEach(function(y){a.push(new Eo(y,Is.fromDOMRectList(e,_m(n,p+u,y.length).getClientRects()))),p+=y.length})}else a.push(new Eo(g,Is.fromDOMRectList(e,f)))}else{var w=n.splitText(g.length);a.push(new Eo(g,LS(e,n))),n=w}else vr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(g.length));u+=g.length}),a},LS=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var A=t.parentNode;if(A){A.replaceChild(n,t);var a=$u(e,n);return n.firstChild&&A.replaceChild(n.firstChild,n),a}}return Is.EMPTY},_m=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var A=n.createRange();return A.setStart(e,t),A.setEnd(e,t+r),A},ix=function(e){if(vr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return US(e)},MS=function(e,t){if(vr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return KS(e,t)},HS=function(e,t){return t.letterSpacing!==0?ix(e):MS(e,t)},PS=[32,160,4961,65792,65793,4153,4241],KS=function(e,t){for(var r=gF(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],A,a=function(){if(A.value){var u=A.value.slice(),g=Yu(u),f="";g.forEach(function(h){PS.indexOf(h)===-1?f+=Pt(h):(f.length&&n.push(f),n.push(Pt(h)),f="")}),f.length&&n.push(f)}};!(A=r.next()).done;)a();return n},VS=function(){function e(t,r,n){this.text=GS(r.data,n.textTransform),this.textBounds=kS(t,this.text,n,r)}return e}(),GS=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(zS,WS);case 2:return e.toUpperCase();default:return e}},zS=/(^|\s|:|-|\(|\))([a-z])/g,WS=function(e,t,r){return e.length>0?t+r.toUpperCase():e},rv=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.src=n.currentSrc||n.src,A.intrinsicWidth=n.naturalWidth,A.intrinsicHeight=n.naturalHeight,A.context.cache.addImage(A.src),A}return t}(ls),nv=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.canvas=n,A.intrinsicWidth=n.width,A.intrinsicHeight=n.height,A}return t}(ls),sv=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this,a=new XMLSerializer,u=$u(r,n);return n.setAttribute("width",u.width+"px"),n.setAttribute("height",u.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),A.intrinsicWidth=n.width.baseVal.value,A.intrinsicHeight=n.height.baseVal.value,A.context.cache.addImage(A.svg),A}return t}(ls),Av=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.value=n.value,A}return t}(ls),Lf=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.start=n.start,A.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,A}return t}(ls),XS=[{type:15,flags:0,unit:"px",number:3}],qS=[{type:16,flags:0,number:50}],$S=function(e){return e.width>e.height?new Is(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Is(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},YS=function(e){var t=e.type===ZS?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},uu="checkbox",du="radio",ZS="password",Nm=707406591,ax=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;switch(A.type=n.type.toLowerCase(),A.checked=n.checked,A.value=YS(n),(A.type===uu||A.type===du)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=$S(A.bounds)),A.type){case uu:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=XS;break;case du:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=qS;break}return A}return t}(ls),iv=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return A.value=a&&a.text||"",A}return t}(ls),av=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.value=n.value,A}return t}(ls),ov=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;A.src=n.src,A.width=parseInt(n.width,10)||0,A.height=parseInt(n.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){A.tree=cv(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?vo(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Cs.TRANSPARENT,u=n.contentWindow.document.body?vo(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Cs.TRANSPARENT;A.backgroundColor=pA(a)?pA(u)?A.styles.backgroundColor:u:a}}catch{}return A}return t}(ls),JS=["OL","UL","MENU"],Ic=function(e,t,r,n){for(var A=t.firstChild,a=void 0;A;A=a)if(a=A.nextSibling,uv(A)&&A.data.trim().length>0)r.textNodes.push(new VS(e,A,r.styles));else if(Vi(A))if(xv(A)&&A.assignedNodes)A.assignedNodes().forEach(function(g){return Ic(e,g,r,n)});else{var u=lv(e,A);u.styles.isVisible()&&(e5(A,u,n)?u.flags|=4:t5(u.styles)&&(u.flags|=2),JS.indexOf(A.tagName)!==-1&&(u.flags|=8),r.elements.push(u),A.slot,A.shadowRoot?Ic(e,A.shadowRoot,u,n):!hu(A)&&!dv(A)&&!fu(A)&&Ic(e,A,u,n))}},lv=function(e,t){return Hf(t)?new rv(e,t):hv(t)?new nv(e,t):dv(t)?new sv(e,t):r5(t)?new Av(e,t):n5(t)?new Lf(e,t):s5(t)?new ax(e,t):fu(t)?new iv(e,t):hu(t)?new av(e,t):fv(t)?new ov(e,t):new ls(e,t)},cv=function(e,t){var r=lv(e,t);return r.flags|=4,Ic(e,t,r,r),r},e5=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ox(e)&&r.styles.isTransparent()},t5=function(e){return e.isPositioned()||e.isFloating()},uv=function(e){return e.nodeType===Node.TEXT_NODE},Vi=function(e){return e.nodeType===Node.ELEMENT_NODE},Mf=function(e){return Vi(e)&&typeof e.style<"u"&&!Sc(e)},Sc=function(e){return typeof e.className=="object"},r5=function(e){return e.tagName==="LI"},n5=function(e){return e.tagName==="OL"},s5=function(e){return e.tagName==="INPUT"},A5=function(e){return e.tagName==="HTML"},dv=function(e){return e.tagName==="svg"},ox=function(e){return e.tagName==="BODY"},hv=function(e){return e.tagName==="CANVAS"},Fm=function(e){return e.tagName==="VIDEO"},Hf=function(e){return e.tagName==="IMG"},fv=function(e){return e.tagName==="IFRAME"},Im=function(e){return e.tagName==="STYLE"},i5=function(e){return e.tagName==="SCRIPT"},hu=function(e){return e.tagName==="TEXTAREA"},fu=function(e){return e.tagName==="SELECT"},xv=function(e){return e.tagName==="SLOT"},Sm=function(e){return e.tagName.indexOf("-")>0},a5=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,A=t.counterReset,a=!0;n!==null&&n.forEach(function(g){var f=r.counters[g.counter];f&&g.increment!==0&&(a=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=g.increment)});var u=[];return a&&A.forEach(function(g){var f=r.counters[g.counter];u.push(g.counter),f||(f=r.counters[g.counter]=[]),f.push(g.reset)}),u},e}(),Um={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Qm={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},o5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},l5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Ei=function(e,t,r,n,A,a){return e<t||e>r?Zo(e,A,a.length>0):n.integers.reduce(function(u,g,f){for(;e>=g;)e-=g,u+=n.values[f];return u},"")+a},gv=function(e,t,r,n){var A="";do r||e--,A=n(e)+A,e/=t;while(e*t>=t);return A},Ht=function(e,t,r,n,A){var a=r-t+1;return(e<0?"-":"")+(gv(Math.abs(e),a,n,function(u){return Pt(Math.floor(u%a)+t)})+A)},TA=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return gv(Math.abs(e),n,!1,function(A){return t[Math.floor(A%n)]})+r},Fi=1,Vs=2,Gs=4,Ao=8,ds=function(e,t,r,n,A,a){if(e<-9999||e>9999)return Zo(e,4,A.length>0);var u=Math.abs(e),g=A;if(u===0)return t[0]+g;for(var f=0;u>0&&f<=4;f++){var h=u%10;h===0&&er(a,Fi)&&g!==""?g=t[h]+g:h>1||h===1&&f===0||h===1&&f===1&&er(a,Vs)||h===1&&f===1&&er(a,Gs)&&e>100||h===1&&f>1&&er(a,Ao)?g=t[h]+(f>0?r[f-1]:"")+g:h===1&&f>0&&(g=r[f-1]+g),u=Math.floor(u/10)}return(e<0?n:"")+g},Dm="十百千萬",Tm="拾佰仟萬",Rm="マイナス",sh="마이너스",Zo=function(e,t,r){var n=r?". ":"",A=r?"、":"",a=r?", ":"",u=r?" ":"";switch(t){case 0:return"•"+u;case 1:return"◦"+u;case 2:return"◾"+u;case 5:var g=Ht(e,48,57,!0,n);return g.length<4?"0"+g:g;case 4:return TA(e,"〇一二三四五六七八九",A);case 6:return Ei(e,1,3999,Um,3,n).toLowerCase();case 7:return Ei(e,1,3999,Um,3,n);case 8:return Ht(e,945,969,!1,n);case 9:return Ht(e,97,122,!1,n);case 10:return Ht(e,65,90,!1,n);case 11:return Ht(e,1632,1641,!0,n);case 12:case 49:return Ei(e,1,9999,Qm,3,n);case 35:return Ei(e,1,9999,Qm,3,n).toLowerCase();case 13:return Ht(e,2534,2543,!0,n);case 14:case 30:return Ht(e,6112,6121,!0,n);case 15:return TA(e,"子丑寅卯辰巳午未申酉戌亥",A);case 16:return TA(e,"甲乙丙丁戊己庚辛壬癸",A);case 17:case 48:return ds(e,"零一二三四五六七八九",Dm,"負",A,Vs|Gs|Ao);case 47:return ds(e,"零壹貳參肆伍陸柒捌玖",Tm,"負",A,Fi|Vs|Gs|Ao);case 42:return ds(e,"零一二三四五六七八九",Dm,"负",A,Vs|Gs|Ao);case 41:return ds(e,"零壹贰叁肆伍陆柒捌玖",Tm,"负",A,Fi|Vs|Gs|Ao);case 26:return ds(e,"〇一二三四五六七八九","十百千万",Rm,A,0);case 25:return ds(e,"零壱弐参四伍六七八九","拾百千万",Rm,A,Fi|Vs|Gs);case 31:return ds(e,"영일이삼사오육칠팔구","십백천만",sh,a,Fi|Vs|Gs);case 33:return ds(e,"零一二三四五六七八九","十百千萬",sh,a,0);case 32:return ds(e,"零壹貳參四五六七八九","拾百千",sh,a,Fi|Vs|Gs);case 18:return Ht(e,2406,2415,!0,n);case 20:return Ei(e,1,19999,l5,3,n);case 21:return Ht(e,2790,2799,!0,n);case 22:return Ht(e,2662,2671,!0,n);case 22:return Ei(e,1,10999,o5,3,n);case 23:return TA(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return TA(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ht(e,3302,3311,!0,n);case 28:return TA(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",A);case 29:return TA(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",A);case 34:return Ht(e,3792,3801,!0,n);case 37:return Ht(e,6160,6169,!0,n);case 38:return Ht(e,4160,4169,!0,n);case 39:return Ht(e,2918,2927,!0,n);case 40:return Ht(e,1776,1785,!0,n);case 43:return Ht(e,3046,3055,!0,n);case 44:return Ht(e,3174,3183,!0,n);case 45:return Ht(e,3664,3673,!0,n);case 46:return Ht(e,3872,3881,!0,n);case 3:default:return Ht(e,48,57,!0,n)}},pv="data-html2canvas-ignore",jm=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new a5,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,A=c5(t,r);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var a=t.defaultView.pageXOffset,u=t.defaultView.pageYOffset,g=A.contentWindow,f=g.document,h=h5(A).then(function(){return Or(n,void 0,void 0,function(){var p,w;return Ur(this,function(y){switch(y.label){case 0:return this.scrolledElements.forEach(p5),g&&(g.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(g.scrollY!==r.top||g.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(g.scrollX-r.left,g.scrollY-r.top,0,0))),p=this.options.onclone,w=this.clonedReferenceElement,typeof w>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:y.sent(),y.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,d5(f)]:[3,4];case 3:y.sent(),y.label=4;case 4:return typeof p=="function"?[2,Promise.resolve().then(function(){return p(f,w)}).then(function(){return A})]:[2,A]}})})});return f.open(),f.write(x5(document.doctype)+"<html></html>"),g5(this.referenceElement.ownerDocument,a,u),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),h},e.prototype.createElementClone=function(t){if(Of(t,2))debugger;if(hv(t))return this.createCanvasClone(t);if(Fm(t))return this.createVideoClone(t);if(Im(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return Hf(r)&&(Hf(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Sm(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Ah(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,u){return u&&typeof u.cssText=="string"?a+u.cssText:a},""),A=t.cloneNode(!1);return A.textContent=n,A}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var A=t.cloneNode(!1);try{A.width=t.width,A.height=t.height;var a=t.getContext("2d"),u=A.getContext("2d");if(u)if(!this.options.allowTaint&&a)u.putImageData(a.getImageData(0,0,t.width,t.height),0,0);else{var g=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(g){var f=g.getContextAttributes();(f==null?void 0:f.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}u.drawImage(t,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return A},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var A=t.ownerDocument.createElement("canvas");return A.width=t.offsetWidth,A.height=t.offsetHeight,A},e.prototype.appendChildNode=function(t,r,n){(!Vi(r)||!i5(r)&&!r.hasAttribute(pv)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Vi(r)||!Im(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var A=this,a=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;a;a=a.nextSibling)if(Vi(a)&&xv(a)&&typeof a.assignedNodes=="function"){var u=a.assignedNodes();u.length&&u.forEach(function(g){return A.appendChildNode(r,g,n)})}else this.appendChildNode(r,a,n)},e.prototype.cloneNode=function(t,r){if(uv(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Vi(t)&&(Mf(t)||Sc(t))){var A=this.createElementClone(t);A.style.transitionProperty="none";var a=n.getComputedStyle(t),u=n.getComputedStyle(t,":before"),g=n.getComputedStyle(t,":after");this.referenceElement===t&&Mf(A)&&(this.clonedReferenceElement=A),ox(A)&&y5(A);var f=this.counters.parse(new hm(this.context,a)),h=this.resolvePseudoContent(t,A,u,bo.BEFORE);Sm(t)&&(r=!0),Fm(t)||this.cloneChildNodes(t,A,r),h&&A.insertBefore(h,A.firstChild);var p=this.resolvePseudoContent(t,A,g,bo.AFTER);return p&&A.appendChild(p),this.counters.pop(f),(a&&(this.options.copyStyles||Sc(t))&&!fv(t)||r)&&Ah(a,A),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([A,t.scrollLeft,t.scrollTop]),(hu(t)||fu(t))&&(hu(A)||fu(A))&&(A.value=t.value),A}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,A){var a=this;if(n){var u=n.content,g=r.ownerDocument;if(!(!g||!u||u==="none"||u==="-moz-alt-content"||n.display==="none")){this.counters.parse(new hm(this.context,n));var f=new rS(this.context,n),h=g.createElement("html2canvaspseudoelement");Ah(n,h),f.content.forEach(function(w){if(w.type===0)h.appendChild(g.createTextNode(w.value));else if(w.type===22){var y=g.createElement("img");y.src=w.value,y.style.opacity="1",h.appendChild(y)}else if(w.type===18){if(w.name==="attr"){var C=w.values.filter(ot);C.length&&h.appendChild(g.createTextNode(t.getAttribute(C[0].value)||""))}else if(w.name==="counter"){var b=w.values.filter(ua),F=b[0],I=b[1];if(F&&ot(F)){var N=a.counters.getCounterValue(F.value),v=I&&ot(I)?jf.parse(a.context,I.value):3;h.appendChild(g.createTextNode(Zo(N,v,!1)))}}else if(w.name==="counters"){var _=w.values.filter(ua),F=_[0],S=_[1],I=_[2];if(F&&ot(F)){var j=a.counters.getCounterValues(F.value),Q=I&&ot(I)?jf.parse(a.context,I.value):3,D=S&&S.type===0?S.value:"",L=j.map(function(P){return Zo(P,Q,!1)}).join(D);h.appendChild(g.createTextNode(L))}}}else if(w.type===20)switch(w.value){case"open-quote":h.appendChild(g.createTextNode(dm(f.quotes,a.quoteDepth++,!0)));break;case"close-quote":h.appendChild(g.createTextNode(dm(f.quotes,--a.quoteDepth,!1)));break;default:h.appendChild(g.createTextNode(w.value))}}),h.className=Pf+" "+Kf;var p=A===bo.BEFORE?" "+Pf:" "+Kf;return Sc(r)?r.className.baseValue+=p:r.className+=p,h}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),bo;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(bo||(bo={}));var c5=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(pv,"true"),e.body.appendChild(r),r},u5=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},d5=function(e){return Promise.all([].slice.call(e.images,0).map(u5))},h5=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var A=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var a=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(a),t(e))},50)}})},f5=["all","d","content"],Ah=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);f5.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},x5=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},g5=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},p5=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},m5=":before",w5=":after",Pf="___html2canvas___pseudoelement_before",Kf="___html2canvas___pseudoelement_after",Om=`{
    content: "" !important;
    display: none !important;
}`,y5=function(e){B5(e,"."+Pf+m5+Om+`
         .`+Kf+w5+Om)},B5=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},mv=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),v5=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(ah(t)||_5(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Or(this,void 0,void 0,function(){var r,n,A,a,u=this;return Ur(this,function(g){switch(g.label){case 0:return r=mv.isSameOrigin(t),n=!ih(t)&&this._options.useCORS===!0&&vr.SUPPORT_CORS_IMAGES&&!r,A=!ih(t)&&!r&&!ah(t)&&typeof this._options.proxy=="string"&&vr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!ih(t)&&!ah(t)&&!A&&!n?[2]:(a=t,A?[4,this.proxy(a)]:[3,2]);case 1:a=g.sent(),g.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(f,h){var p=new Image;p.onload=function(){return f(p)},p.onerror=h,(N5(a)||n)&&(p.crossOrigin="anonymous"),p.src=a,p.complete===!0&&setTimeout(function(){return f(p)},500),u._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+u._options.imageTimeout+"ms) loading image")},u._options.imageTimeout)})];case 3:return[2,g.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var A=t.substring(0,256);return new Promise(function(a,u){var g=vr.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(g==="text")a(f.response);else{var w=new FileReader;w.addEventListener("load",function(){return a(w.result)},!1),w.addEventListener("error",function(y){return u(y)},!1),w.readAsDataURL(f.response)}else u("Failed to proxy resource "+A+" with status code "+f.status)},f.onerror=u;var h=n.indexOf("?")>-1?"&":"?";if(f.open("GET",""+n+h+"url="+encodeURIComponent(t)+"&responseType="+g),g!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=g),r._options.imageTimeout){var p=r._options.imageTimeout;f.timeout=p,f.ontimeout=function(){return u("Timed out ("+p+"ms) proxying "+A)}}f.send()})},e}(),C5=/^data:image\/svg\+xml/i,E5=/^data:image\/.*;base64,/i,b5=/^data:image\/.*/i,_5=function(e){return vr.SUPPORT_SVG_DRAWING||!F5(e)},ih=function(e){return b5.test(e)},N5=function(e){return E5.test(e)},ah=function(e){return e.substr(0,4)==="blob"},F5=function(e){return e.substr(-3).toLowerCase()==="svg"||C5.test(e)},be=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),bi=function(e,t,r){return new be(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},lc=function(){function e(t,r,n,A){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=A}return e.prototype.subdivide=function(t,r){var n=bi(this.start,this.startControl,t),A=bi(this.startControl,this.endControl,t),a=bi(this.endControl,this.end,t),u=bi(n,A,t),g=bi(A,a,t),f=bi(u,g,t);return r?new e(this.start,n,u,f):new e(f,g,a,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cn=function(e){return e.type===1},I5=function(){function e(t){var r=t.styles,n=t.bounds,A=no(r.borderTopLeftRadius,n.width,n.height),a=A[0],u=A[1],g=no(r.borderTopRightRadius,n.width,n.height),f=g[0],h=g[1],p=no(r.borderBottomRightRadius,n.width,n.height),w=p[0],y=p[1],C=no(r.borderBottomLeftRadius,n.width,n.height),b=C[0],F=C[1],I=[];I.push((a+f)/n.width),I.push((b+w)/n.width),I.push((u+F)/n.height),I.push((h+y)/n.height);var N=Math.max.apply(Math,I);N>1&&(a/=N,u/=N,f/=N,h/=N,w/=N,y/=N,b/=N,F/=N);var v=n.width-f,_=n.height-y,S=n.width-w,j=n.height-F,Q=r.borderTopWidth,D=r.borderRightWidth,L=r.borderBottomWidth,M=r.borderLeftWidth,k=ft(r.paddingTop,t.bounds.width),P=ft(r.paddingRight,t.bounds.width),z=ft(r.paddingBottom,t.bounds.width),X=ft(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||u>0?bt(n.left+M/3,n.top+Q/3,a-M/3,u-Q/3,st.TOP_LEFT):new be(n.left+M/3,n.top+Q/3),this.topRightBorderDoubleOuterBox=a>0||u>0?bt(n.left+v,n.top+Q/3,f-D/3,h-Q/3,st.TOP_RIGHT):new be(n.left+n.width-D/3,n.top+Q/3),this.bottomRightBorderDoubleOuterBox=w>0||y>0?bt(n.left+S,n.top+_,w-D/3,y-L/3,st.BOTTOM_RIGHT):new be(n.left+n.width-D/3,n.top+n.height-L/3),this.bottomLeftBorderDoubleOuterBox=b>0||F>0?bt(n.left+M/3,n.top+j,b-M/3,F-L/3,st.BOTTOM_LEFT):new be(n.left+M/3,n.top+n.height-L/3),this.topLeftBorderDoubleInnerBox=a>0||u>0?bt(n.left+M*2/3,n.top+Q*2/3,a-M*2/3,u-Q*2/3,st.TOP_LEFT):new be(n.left+M*2/3,n.top+Q*2/3),this.topRightBorderDoubleInnerBox=a>0||u>0?bt(n.left+v,n.top+Q*2/3,f-D*2/3,h-Q*2/3,st.TOP_RIGHT):new be(n.left+n.width-D*2/3,n.top+Q*2/3),this.bottomRightBorderDoubleInnerBox=w>0||y>0?bt(n.left+S,n.top+_,w-D*2/3,y-L*2/3,st.BOTTOM_RIGHT):new be(n.left+n.width-D*2/3,n.top+n.height-L*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||F>0?bt(n.left+M*2/3,n.top+j,b-M*2/3,F-L*2/3,st.BOTTOM_LEFT):new be(n.left+M*2/3,n.top+n.height-L*2/3),this.topLeftBorderStroke=a>0||u>0?bt(n.left+M/2,n.top+Q/2,a-M/2,u-Q/2,st.TOP_LEFT):new be(n.left+M/2,n.top+Q/2),this.topRightBorderStroke=a>0||u>0?bt(n.left+v,n.top+Q/2,f-D/2,h-Q/2,st.TOP_RIGHT):new be(n.left+n.width-D/2,n.top+Q/2),this.bottomRightBorderStroke=w>0||y>0?bt(n.left+S,n.top+_,w-D/2,y-L/2,st.BOTTOM_RIGHT):new be(n.left+n.width-D/2,n.top+n.height-L/2),this.bottomLeftBorderStroke=b>0||F>0?bt(n.left+M/2,n.top+j,b-M/2,F-L/2,st.BOTTOM_LEFT):new be(n.left+M/2,n.top+n.height-L/2),this.topLeftBorderBox=a>0||u>0?bt(n.left,n.top,a,u,st.TOP_LEFT):new be(n.left,n.top),this.topRightBorderBox=f>0||h>0?bt(n.left+v,n.top,f,h,st.TOP_RIGHT):new be(n.left+n.width,n.top),this.bottomRightBorderBox=w>0||y>0?bt(n.left+S,n.top+_,w,y,st.BOTTOM_RIGHT):new be(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||F>0?bt(n.left,n.top+j,b,F,st.BOTTOM_LEFT):new be(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||u>0?bt(n.left+M,n.top+Q,Math.max(0,a-M),Math.max(0,u-Q),st.TOP_LEFT):new be(n.left+M,n.top+Q),this.topRightPaddingBox=f>0||h>0?bt(n.left+Math.min(v,n.width-D),n.top+Q,v>n.width+D?0:Math.max(0,f-D),Math.max(0,h-Q),st.TOP_RIGHT):new be(n.left+n.width-D,n.top+Q),this.bottomRightPaddingBox=w>0||y>0?bt(n.left+Math.min(S,n.width-M),n.top+Math.min(_,n.height-L),Math.max(0,w-D),Math.max(0,y-L),st.BOTTOM_RIGHT):new be(n.left+n.width-D,n.top+n.height-L),this.bottomLeftPaddingBox=b>0||F>0?bt(n.left+M,n.top+Math.min(j,n.height-L),Math.max(0,b-M),Math.max(0,F-L),st.BOTTOM_LEFT):new be(n.left+M,n.top+n.height-L),this.topLeftContentBox=a>0||u>0?bt(n.left+M+X,n.top+Q+k,Math.max(0,a-(M+X)),Math.max(0,u-(Q+k)),st.TOP_LEFT):new be(n.left+M+X,n.top+Q+k),this.topRightContentBox=f>0||h>0?bt(n.left+Math.min(v,n.width+M+X),n.top+Q+k,v>n.width+M+X?0:f-M+X,h-(Q+k),st.TOP_RIGHT):new be(n.left+n.width-(D+P),n.top+Q+k),this.bottomRightContentBox=w>0||y>0?bt(n.left+Math.min(S,n.width-(M+X)),n.top+Math.min(_,n.height+Q+k),Math.max(0,w-(D+P)),y-(L+z),st.BOTTOM_RIGHT):new be(n.left+n.width-(D+P),n.top+n.height-(L+z)),this.bottomLeftContentBox=b>0||F>0?bt(n.left+M+X,n.top+j,Math.max(0,b-(M+X)),F-(L+z),st.BOTTOM_LEFT):new be(n.left+M+X,n.top+n.height-(L+z))}return e}(),st;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(st||(st={}));var bt=function(e,t,r,n,A){var a=4*((Math.sqrt(2)-1)/3),u=r*a,g=n*a,f=e+r,h=t+n;switch(A){case st.TOP_LEFT:return new lc(new be(e,h),new be(e,h-g),new be(f-u,t),new be(f,t));case st.TOP_RIGHT:return new lc(new be(e,t),new be(e+u,t),new be(f,h-g),new be(f,h));case st.BOTTOM_RIGHT:return new lc(new be(f,t),new be(f,t+g),new be(e+u,h),new be(e,h));case st.BOTTOM_LEFT:default:return new lc(new be(f,h),new be(f-u,h),new be(e,t+g),new be(e,t))}},xu=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},S5=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},gu=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},U5=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),cc=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),Q5=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),D5=function(e){return e.type===0},wv=function(e){return e.type===1},T5=function(e){return e.type===2},km=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},R5=function(e,t,r,n,A){return e.map(function(a,u){switch(u){case 0:return a.add(t,r);case 1:return a.add(t+n,r);case 2:return a.add(t+n,r+A);case 3:return a.add(t,r+A)}return a})},yv=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Bv=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new I5(this.container),this.container.styles.opacity<1&&this.effects.push(new Q5(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new U5(n,A,a))}if(this.container.styles.overflowX!==0){var u=xu(this.curves),g=gu(this.curves);km(u,g)?this.effects.push(new cc(u,6)):(this.effects.push(new cc(u,2)),this.effects.push(new cc(g,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,A=this.effects.slice(0);n;){var a=n.effects.filter(function(f){return!wv(f)});if(r||n.container.styles.position!==0||!n.parent){if(A.unshift.apply(A,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var u=xu(n.curves),g=gu(n.curves);km(u,g)||A.unshift(new cc(g,6))}}else A.unshift.apply(A,a);n=n.parent}return A.filter(function(f){return er(f.target,t)})},e}(),Vf=function(e,t,r,n){e.container.elements.forEach(function(A){var a=er(A.flags,4),u=er(A.flags,2),g=new Bv(A,e);er(A.styles.display,2048)&&n.push(g);var f=er(A.flags,8)?[]:n;if(a||u){var h=a||A.styles.isPositioned()?r:t,p=new yv(g);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var w=A.styles.zIndex.order;if(w<0){var y=0;h.negativeZIndex.some(function(b,F){return w>b.element.container.styles.zIndex.order?(y=F,!1):y>0}),h.negativeZIndex.splice(y,0,p)}else if(w>0){var C=0;h.positiveZIndex.some(function(b,F){return w>=b.element.container.styles.zIndex.order?(C=F+1,!1):C>0}),h.positiveZIndex.splice(C,0,p)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(p)}else A.styles.isFloating()?h.nonPositionedFloats.push(p):h.nonPositionedInlineLevel.push(p);Vf(g,p,a?p:r,f)}else A.styles.isInlineLevel()?t.inlineLevel.push(g):t.nonInlineLevel.push(g),Vf(g,t,r,f);er(A.flags,8)&&vv(A,f)})},vv=function(e,t){for(var r=e instanceof Lf?e.start:1,n=e instanceof Lf?e.reversed:!1,A=0;A<t.length;A++){var a=t[A];a.container instanceof Av&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Zo(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},j5=function(e){var t=new Bv(e,null),r=new yv(t),n=[];return Vf(t,r,r,n),vv(t.container,n),r},Lm=function(e,t){switch(t){case 0:return Nn(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Nn(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Nn(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Nn(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},O5=function(e,t){switch(t){case 0:return Nn(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Nn(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Nn(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Nn(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},k5=function(e,t){switch(t){case 0:return Nn(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Nn(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Nn(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Nn(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},L5=function(e,t){switch(t){case 0:return uc(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return uc(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return uc(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return uc(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},uc=function(e,t){var r=[];return Cn(e)?r.push(e.subdivide(.5,!1)):r.push(e),Cn(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Nn=function(e,t,r,n){var A=[];return Cn(e)?A.push(e.subdivide(.5,!1)):A.push(e),Cn(r)?A.push(r.subdivide(.5,!0)):A.push(r),Cn(n)?A.push(n.subdivide(.5,!0).reverse()):A.push(n),Cn(t)?A.push(t.subdivide(.5,!1).reverse()):A.push(t),A},Cv=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},pu=function(e){var t=e.styles,r=e.bounds,n=ft(t.paddingLeft,r.width),A=ft(t.paddingRight,r.width),a=ft(t.paddingTop,r.width),u=ft(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+A),-(t.borderTopWidth+t.borderBottomWidth+a+u))},M5=function(e,t){return e===0?t.bounds:e===2?pu(t):Cv(t)},H5=function(e,t){return e===0?t.bounds:e===2?pu(t):Cv(t)},oh=function(e,t,r){var n=M5(Ii(e.styles.backgroundOrigin,t),e),A=H5(Ii(e.styles.backgroundClip,t),e),a=P5(Ii(e.styles.backgroundSize,t),r,n),u=a[0],g=a[1],f=no(Ii(e.styles.backgroundPosition,t),n.width-u,n.height-g),h=K5(Ii(e.styles.backgroundRepeat,t),f,a,n,A),p=Math.round(n.left+f[0]),w=Math.round(n.top+f[1]);return[h,p,w,u,g]},_i=function(e){return ot(e)&&e.value===ea.AUTO},dc=function(e){return typeof e=="number"},P5=function(e,t,r){var n=t[0],A=t[1],a=t[2],u=e[0],g=e[1];if(!u)return[0,0];if(zt(u)&&g&&zt(g))return[ft(u,r.width),ft(g,r.height)];var f=dc(a);if(ot(u)&&(u.value===ea.CONTAIN||u.value===ea.COVER)){if(dc(a)){var h=r.width/r.height;return h<a!=(u.value===ea.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var p=dc(n),w=dc(A),y=p||w;if(_i(u)&&(!g||_i(g))){if(p&&w)return[n,A];if(!f&&!y)return[r.width,r.height];if(y&&f){var C=p?n:A*a,b=w?A:n/a;return[C,b]}var F=p?n:r.width,I=w?A:r.height;return[F,I]}if(f){var N=0,v=0;return zt(u)?N=ft(u,r.width):zt(g)&&(v=ft(g,r.height)),_i(u)?N=v*a:(!g||_i(g))&&(v=N/a),[N,v]}var _=null,S=null;if(zt(u)?_=ft(u,r.width):g&&zt(g)&&(S=ft(g,r.height)),_!==null&&(!g||_i(g))&&(S=p&&w?_/n*A:r.height),S!==null&&_i(u)&&(_=p&&w?S/A*n:r.width),_!==null&&S!==null)return[_,S];throw new Error("Unable to calculate background-size for element")},Ii=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},K5=function(e,t,r,n,A){var a=t[0],u=t[1],g=r[0],f=r[1];switch(e){case 2:return[new be(Math.round(n.left),Math.round(n.top+u)),new be(Math.round(n.left+n.width),Math.round(n.top+u)),new be(Math.round(n.left+n.width),Math.round(f+n.top+u)),new be(Math.round(n.left),Math.round(f+n.top+u))];case 3:return[new be(Math.round(n.left+a),Math.round(n.top)),new be(Math.round(n.left+a+g),Math.round(n.top)),new be(Math.round(n.left+a+g),Math.round(n.height+n.top)),new be(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new be(Math.round(n.left+a),Math.round(n.top+u)),new be(Math.round(n.left+a+g),Math.round(n.top+u)),new be(Math.round(n.left+a+g),Math.round(n.top+u+f)),new be(Math.round(n.left+a),Math.round(n.top+u+f))];default:return[new be(Math.round(A.left),Math.round(A.top)),new be(Math.round(A.left+A.width),Math.round(A.top)),new be(Math.round(A.left+A.width),Math.round(A.height+A.top)),new be(Math.round(A.left),Math.round(A.height+A.top))]}},V5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Mm="Hidden Text",G5=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),A=this._document.createElement("img"),a=this._document.createElement("span"),u=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",u.appendChild(n),A.src=V5,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(Mm)),n.appendChild(a),n.appendChild(A);var g=A.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(Mm)),n.style.lineHeight="normal",A.style.verticalAlign="super";var f=A.offsetTop-n.offsetTop+2;return u.removeChild(n),{baseline:g,middle:f}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Ev=function(){function e(t,r){this.context=t,this.options=r}return e}(),z5=1e4,W5=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A._activeEffects=[],A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),n.canvas||(A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px"),A.fontMetrics=new G5(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),A}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(A){return n.applyEffect(A)})},t.prototype.applyEffect=function(r){this.ctx.save(),T5(r)&&(this.ctx.globalAlpha=r.opacity),D5(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),wv(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Or(this,void 0,void 0,function(){var n;return Ur(this,function(A){switch(A.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Or(this,void 0,void 0,function(){return Ur(this,function(n){switch(n.label){case 0:if(er(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,A){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+A);else{var u=ix(r.text);u.reduce(function(g,f){return a.ctx.fillText(f,g,r.bounds.top+A),g+a.ctx.measureText(f).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(u){return u==="normal"||u==="small-caps"}).join(""),A=Z5(r.fontFamily).join(", "),a=ul(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,A].join(" "),A,a]},t.prototype.renderTextNode=function(r,n){return Or(this,void 0,void 0,function(){var A,a,u,g,f,h,p,w,y=this;return Ur(this,function(C){return A=this.createFontStyle(n),a=A[0],u=A[1],g=A[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(u,g),h=f.baseline,p=f.middle,w=n.paintOrder,r.textBounds.forEach(function(b){w.forEach(function(F){switch(F){case 0:y.ctx.fillStyle=or(n.color),y.renderTextWithLetterSpacing(b,n.letterSpacing,h);var I=n.textShadow;I.length&&b.text.trim().length&&(I.slice(0).reverse().forEach(function(N){y.ctx.shadowColor=or(N.color),y.ctx.shadowOffsetX=N.offsetX.number*y.options.scale,y.ctx.shadowOffsetY=N.offsetY.number*y.options.scale,y.ctx.shadowBlur=N.blur.number,y.renderTextWithLetterSpacing(b,n.letterSpacing,h)}),y.ctx.shadowColor="",y.ctx.shadowOffsetX=0,y.ctx.shadowOffsetY=0,y.ctx.shadowBlur=0),n.textDecorationLine.length&&(y.ctx.fillStyle=or(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:y.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+h),b.bounds.width,1);break;case 2:y.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:y.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+p),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(y.ctx.strokeStyle=or(n.webkitTextStrokeColor),y.ctx.lineWidth=n.webkitTextStrokeWidth,y.ctx.lineJoin=window.chrome?"miter":"round",y.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+h)),y.ctx.strokeStyle="",y.ctx.lineWidth=0,y.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,A){if(A&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=pu(r),u=gu(n);this.path(u),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Or(this,void 0,void 0,function(){var n,A,a,u,g,f,v,v,h,p,w,y,S,C,b,j,F,I,N,v,_,S,j;return Ur(this,function(Q){switch(Q.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,A=r.curves,a=n.styles,u=0,g=n.textNodes,Q.label=1;case 1:return u<g.length?(f=g[u],[4,this.renderTextNode(f,a)]):[3,4];case 2:Q.sent(),Q.label=3;case 3:return u++,[3,1];case 4:if(!(n instanceof rv))return[3,8];Q.label=5;case 5:return Q.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return v=Q.sent(),this.renderReplacedElement(n,A,v),[3,8];case 7:return Q.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof nv&&this.renderReplacedElement(n,A,n.canvas),!(n instanceof sv))return[3,12];Q.label=9;case 9:return Q.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return v=Q.sent(),this.renderReplacedElement(n,A,v),[3,12];case 11:return Q.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ov&&n.tree?(h=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,h.render(n.tree)]):[3,14];case 13:p=Q.sent(),n.width&&n.height&&this.ctx.drawImage(p,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),Q.label=14;case 14:if(n instanceof ax&&(w=Math.min(n.bounds.width,n.bounds.height),n.type===uu?n.checked&&(this.ctx.save(),this.path([new be(n.bounds.left+w*.39363,n.bounds.top+w*.79),new be(n.bounds.left+w*.16,n.bounds.top+w*.5549),new be(n.bounds.left+w*.27347,n.bounds.top+w*.44071),new be(n.bounds.left+w*.39694,n.bounds.top+w*.5649),new be(n.bounds.left+w*.72983,n.bounds.top+w*.23),new be(n.bounds.left+w*.84,n.bounds.top+w*.34085),new be(n.bounds.left+w*.39363,n.bounds.top+w*.79)]),this.ctx.fillStyle=or(Nm),this.ctx.fill(),this.ctx.restore()):n.type===du&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+w/2,n.bounds.top+w/2,w/4,0,Math.PI*2,!0),this.ctx.fillStyle=or(Nm),this.ctx.fill(),this.ctx.restore())),X5(n)&&n.value.length){switch(y=this.createFontStyle(a),S=y[0],C=y[1],b=this.fontMetrics.getMetrics(S,C).baseline,this.ctx.font=S,this.ctx.fillStyle=or(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=$5(n.styles.textAlign),j=pu(n),F=0,n.styles.textAlign){case 1:F+=j.width/2;break;case 2:F+=j.width;break}I=j.add(F,0,0,-j.height/2+1),this.ctx.save(),this.path([new be(j.left,j.top),new be(j.left+j.width,j.top),new be(j.left+j.width,j.top+j.height),new be(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Eo(n.value,I),a.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!er(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];v=void 0,_=N.url,Q.label=15;case 15:return Q.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return v=Q.sent(),this.ctx.drawImage(v,n.bounds.left-(v.width+10),n.bounds.top),[3,18];case 17:return Q.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(S=this.createFontStyle(a)[0],this.ctx.font=S,this.ctx.fillStyle=or(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new Is(n.bounds.left,n.bounds.top+ft(n.styles.paddingTop,n.bounds.width),n.bounds.width,cm(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Eo(r.listValue,j),a.letterSpacing,cm(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Q.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Or(this,void 0,void 0,function(){var n,A,N,a,u,N,g,f,N,h,p,N,w,y,N,C,b,N,F,I,N;return Ur(this,function(v){switch(v.label){case 0:if(er(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:v.sent(),n=0,A=r.negativeZIndex,v.label=2;case 2:return n<A.length?(N=A[n],[4,this.renderStack(N)]):[3,5];case 3:v.sent(),v.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:v.sent(),a=0,u=r.nonInlineLevel,v.label=7;case 7:return a<u.length?(N=u[a],[4,this.renderNode(N)]):[3,10];case 8:v.sent(),v.label=9;case 9:return a++,[3,7];case 10:g=0,f=r.nonPositionedFloats,v.label=11;case 11:return g<f.length?(N=f[g],[4,this.renderStack(N)]):[3,14];case 12:v.sent(),v.label=13;case 13:return g++,[3,11];case 14:h=0,p=r.nonPositionedInlineLevel,v.label=15;case 15:return h<p.length?(N=p[h],[4,this.renderStack(N)]):[3,18];case 16:v.sent(),v.label=17;case 17:return h++,[3,15];case 18:w=0,y=r.inlineLevel,v.label=19;case 19:return w<y.length?(N=y[w],[4,this.renderNode(N)]):[3,22];case 20:v.sent(),v.label=21;case 21:return w++,[3,19];case 22:C=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return C<b.length?(N=b[C],[4,this.renderStack(N)]):[3,26];case 24:v.sent(),v.label=25;case 25:return C++,[3,23];case 26:F=0,I=r.positiveZIndex,v.label=27;case 27:return F<I.length?(N=I[F],[4,this.renderStack(N)]):[3,30];case 28:v.sent(),v.label=29;case 29:return F++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(A,a){var u=Cn(A)?A.start:A;a===0?n.ctx.moveTo(u.x,u.y):n.ctx.lineTo(u.x,u.y),Cn(A)&&n.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},t.prototype.renderRepeat=function(r,n,A,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(A,a),this.ctx.fill(),this.ctx.translate(-A,-a)},t.prototype.resizeImage=function(r,n,A){var a;if(r.width===n&&r.height===A)return r;var u=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,g=u.createElement("canvas");g.width=Math.max(1,n),g.height=Math.max(1,A);var f=g.getContext("2d");return f.drawImage(r,0,0,r.width,r.height,0,0,n,A),g},t.prototype.renderBackgroundImage=function(r){return Or(this,void 0,void 0,function(){var n,A,a,u,g,f;return Ur(this,function(h){switch(h.label){case 0:n=r.styles.backgroundImage.length-1,A=function(p){var w,y,C,k,re,oe,X,ce,L,b,k,re,oe,X,ce,F,I,N,v,_,S,j,Q,D,L,M,k,P,z,X,ce,G,re,oe,le,Y,ue,ee,$,Ae,se,Qe;return Ur(this,function(fe){switch(fe.label){case 0:if(p.type!==0)return[3,5];w=void 0,y=p.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,a.context.cache.match(y)];case 2:return w=fe.sent(),[3,4];case 3:return fe.sent(),a.context.logger.error("Error loading background-image "+y),[3,4];case 4:return w&&(C=oh(r,n,[w.width,w.height,w.width/w.height]),k=C[0],re=C[1],oe=C[2],X=C[3],ce=C[4],L=a.ctx.createPattern(a.resizeImage(w,X,ce),"repeat"),a.renderRepeat(k,L,re,oe)),[3,6];case 5:D6(p)?(b=oh(r,n,[null,null,null]),k=b[0],re=b[1],oe=b[2],X=b[3],ce=b[4],F=F6(p.angle,X,ce),I=F[0],N=F[1],v=F[2],_=F[3],S=F[4],j=document.createElement("canvas"),j.width=X,j.height=ce,Q=j.getContext("2d"),D=Q.createLinearGradient(N,_,v,S),om(p.stops,I).forEach(function(qe){return D.addColorStop(qe.stop,or(qe.color))}),Q.fillStyle=D,Q.fillRect(0,0,X,ce),X>0&&ce>0&&(L=a.ctx.createPattern(j,"repeat"),a.renderRepeat(k,L,re,oe))):T6(p)&&(M=oh(r,n,[null,null,null]),k=M[0],P=M[1],z=M[2],X=M[3],ce=M[4],G=p.position.length===0?[nx]:p.position,re=ft(G[0],X),oe=ft(G[G.length-1],ce),le=I6(p,re,oe,X,ce),Y=le[0],ue=le[1],Y>0&&ue>0&&(ee=a.ctx.createRadialGradient(P+re,z+oe,0,P+re,z+oe,Y),om(p.stops,Y*2).forEach(function(qe){return ee.addColorStop(qe.stop,or(qe.color))}),a.path(k),a.ctx.fillStyle=ee,Y!==ue?($=r.bounds.left+.5*r.bounds.width,Ae=r.bounds.top+.5*r.bounds.height,se=ue/Y,Qe=1/se,a.ctx.save(),a.ctx.translate($,Ae),a.ctx.transform(1,0,0,se,0,0),a.ctx.translate(-$,-Ae),a.ctx.fillRect(P,Qe*(z-Ae)+Ae,X,ce*Qe),a.ctx.restore()):a.ctx.fill())),fe.label=6;case 6:return n--,[2]}})},a=this,u=0,g=r.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return u<g.length?(f=g[u],[5,A(f)]):[3,4];case 2:h.sent(),h.label=3;case 3:return u++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,A){return Or(this,void 0,void 0,function(){return Ur(this,function(a){return this.path(Lm(A,n)),this.ctx.fillStyle=or(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,A,a){return Or(this,void 0,void 0,function(){var u,g;return Ur(this,function(f){switch(f.label){case 0:return n<3?[4,this.renderSolidBorder(r,A,a)]:[3,2];case 1:return f.sent(),[2];case 2:return u=O5(a,A),this.path(u),this.ctx.fillStyle=or(r),this.ctx.fill(),g=k5(a,A),this.path(g),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Or(this,void 0,void 0,function(){var n,A,a,u,g,f,h,p,w=this;return Ur(this,function(y){switch(y.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,A=!pA(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],u=q5(Ii(n.backgroundClip,0),r.curves),A||n.boxShadow.length?(this.ctx.save(),this.path(u),this.ctx.clip(),pA(n.backgroundColor)||(this.ctx.fillStyle=or(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:y.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(C){w.ctx.save();var b=xu(r.curves),F=C.inset?0:z5,I=R5(b,-F+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(w.path(b),w.ctx.clip(),w.mask(I)):(w.mask(b),w.ctx.clip(),w.path(I)),w.ctx.shadowOffsetX=C.offsetX.number+F,w.ctx.shadowOffsetY=C.offsetY.number,w.ctx.shadowColor=or(C.color),w.ctx.shadowBlur=C.blur.number,w.ctx.fillStyle=C.inset?or(C.color):"rgba(0,0,0,1)",w.ctx.fill(),w.ctx.restore()}),y.label=2;case 2:g=0,f=0,h=a,y.label=3;case 3:return f<h.length?(p=h[f],p.style!==0&&!pA(p.color)&&p.width>0?p.style!==2?[3,5]:[4,this.renderDashedDottedBorder(p.color,p.width,g,r.curves,2)]:[3,11]):[3,13];case 4:return y.sent(),[3,11];case 5:return p.style!==3?[3,7]:[4,this.renderDashedDottedBorder(p.color,p.width,g,r.curves,3)];case 6:return y.sent(),[3,11];case 7:return p.style!==4?[3,9]:[4,this.renderDoubleBorder(p.color,p.width,g,r.curves)];case 8:return y.sent(),[3,11];case 9:return[4,this.renderSolidBorder(p.color,g,r.curves)];case 10:y.sent(),y.label=11;case 11:g++,y.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,A,a,u){return Or(this,void 0,void 0,function(){var g,f,h,p,w,y,C,b,F,I,N,v,_,S,j,Q,j,Q;return Ur(this,function(D){return this.ctx.save(),g=L5(a,A),f=Lm(a,A),u===2&&(this.path(f),this.ctx.clip()),Cn(f[0])?(h=f[0].start.x,p=f[0].start.y):(h=f[0].x,p=f[0].y),Cn(f[1])?(w=f[1].end.x,y=f[1].end.y):(w=f[1].x,y=f[1].y),A===0||A===2?C=Math.abs(h-w):C=Math.abs(p-y),this.ctx.beginPath(),u===3?this.formatPath(g):this.formatPath(f.slice(0,2)),b=n<3?n*3:n*2,F=n<3?n*2:n,u===3&&(b=n,F=n),I=!0,C<=b*2?I=!1:C<=b*2+F?(N=C/(2*b+F),b*=N,F*=N):(v=Math.floor((C+F)/(b+F)),_=(C-v*b)/(v-1),S=(C-(v+1)*b)/v,F=S<=0||Math.abs(F-_)<Math.abs(F-S)?_:S),I&&(u===3?this.ctx.setLineDash([0,b+F]):this.ctx.setLineDash([b,F])),u===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=or(r),this.ctx.stroke(),this.ctx.setLineDash([]),u===2&&(Cn(f[0])&&(j=f[3],Q=f[0],this.ctx.beginPath(),this.formatPath([new be(j.end.x,j.end.y),new be(Q.start.x,Q.start.y)]),this.ctx.stroke()),Cn(f[1])&&(j=f[1],Q=f[2],this.ctx.beginPath(),this.formatPath([new be(j.end.x,j.end.y),new be(Q.start.x,Q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Or(this,void 0,void 0,function(){var n;return Ur(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=j5(r),[4,this.renderStack(n)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Ev),X5=function(e){return e instanceof av||e instanceof iv?!0:e instanceof ax&&e.type!==du&&e.type!==uu},q5=function(e,t){switch(e){case 0:return xu(t);case 2:return S5(t);case 1:default:return gu(t)}},$5=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Y5=["-apple-system","system-ui"],Z5=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Y5.indexOf(t)===-1}):e},J5=function(e){zn(t,e);function t(r,n){var A=e.call(this,r,n)||this;return A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=n,A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),A}return t.prototype.render=function(r){return Or(this,void 0,void 0,function(){var n,A;return Ur(this,function(a){switch(a.label){case 0:return n=kf(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,eU(n)];case 1:return A=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Ev),eU=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},tU=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Vl([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Vl([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Vl([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Vl([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),rU=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new tU({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new v5(this,t)}return e.instanceCount=1,e}(),lh=function(e,t){return t===void 0&&(t={}),nU(e,t)};typeof window<"u"&&mv.setContext(window);var nU=function(e,t){return Or(void 0,void 0,void 0,function(){var r,n,A,a,u,g,f,h,p,w,y,C,b,F,I,N,v,_,S,j,D,Q,D,L,M,k,P,z,X,ce,G,re,oe,le,Y,ue,ee,$,Ae,se;return Ur(this,function(Qe){switch(Qe.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return A={allowTaint:(L=t.allowTaint)!==null&&L!==void 0?L:!1,imageTimeout:(M=t.imageTimeout)!==null&&M!==void 0?M:15e3,proxy:t.proxy,useCORS:(k=t.useCORS)!==null&&k!==void 0?k:!1},a=Cf({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},A),u={windowWidth:(z=t.windowWidth)!==null&&z!==void 0?z:n.innerWidth,windowHeight:(X=t.windowHeight)!==null&&X!==void 0?X:n.innerHeight,scrollX:(ce=t.scrollX)!==null&&ce!==void 0?ce:n.pageXOffset,scrollY:(G=t.scrollY)!==null&&G!==void 0?G:n.pageYOffset},g=new Is(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),f=new rU(a,g),h=(re=t.foreignObjectRendering)!==null&&re!==void 0?re:!1,p={allowTaint:(oe=t.allowTaint)!==null&&oe!==void 0?oe:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:h,copyStyles:h},f.logger.debug("Starting document clone with size "+g.width+"x"+g.height+" scrolled to "+-g.left+","+-g.top),w=new jm(f,e,p),y=w.clonedReferenceElement,y?[4,w.toIFrame(r,g)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=Qe.sent(),b=ox(y)||A5(y)?RN(y.ownerDocument):$u(f,y),F=b.width,I=b.height,N=b.left,v=b.top,_=sU(f,y,t.backgroundColor),S={canvas:t.canvas,backgroundColor:_,scale:(Y=(le=t.scale)!==null&&le!==void 0?le:n.devicePixelRatio)!==null&&Y!==void 0?Y:1,x:((ue=t.x)!==null&&ue!==void 0?ue:0)+N,y:((ee=t.y)!==null&&ee!==void 0?ee:0)+v,width:($=t.width)!==null&&$!==void 0?$:Math.ceil(F),height:(Ae=t.height)!==null&&Ae!==void 0?Ae:Math.ceil(I)},h?(f.logger.debug("Document cloned, using foreign object rendering"),D=new J5(f,S),[4,D.render(y)]):[3,3];case 2:return j=Qe.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+N+","+v+" with size "+F+"x"+I+" using computed rendering"),f.logger.debug("Starting DOM parsing"),Q=cv(f,y),_===Q.styles.backgroundColor&&(Q.styles.backgroundColor=Cs.TRANSPARENT),f.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),D=new W5(f,S),[4,D.render(Q)];case 4:j=Qe.sent(),Qe.label=5;case 5:return(!((se=t.removeContainer)!==null&&se!==void 0)||se)&&(jm.destroy(C)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,j]}})})},sU=function(e,t,r){var n=t.ownerDocument,A=n.documentElement?vo(e,getComputedStyle(n.documentElement).backgroundColor):Cs.TRANSPARENT,a=n.body?vo(e,getComputedStyle(n.body).backgroundColor):Cs.TRANSPARENT,u=typeof r=="string"?vo(e,r):r===null?Cs.TRANSPARENT:4294967295;return t===n.documentElement?pA(A)?pA(a)?u:a:A:u};const AU=({qrData:e,repairCode:t,repairId:r,relayName:n,appointmentDate:A,deviceInfo:a})=>{const u=H.useRef(null),g=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),f=()=>{const w=window.open("","_blank");w&&u.current&&lh(u.current).then(y=>{const C=y.toDataURL("image/png");w.document.write(`
          <html>
            <head>
              <title>Code de réparation PC Relais</title>
              <style>
                body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
                .container { max-width: 500px; margin: 0 auto; }
                .header { margin-bottom: 20px; }
                .qr-container { margin: 20px 0; }
                .info { margin: 20px 0; text-align: left; }
                .code { font-size: 24px; font-weight: bold; letter-spacing: 2px; margin: 20px 0; }
                .footer { margin-top: 30px; font-size: 12px; color: #666; }
              </style>
            </head>
            <body>
              <div class="container">
                <div class="header">
                  <h1>PC Relais - Dépôt d'appareil</h1>
                  <p>Présentez ce code à votre point relais lors du dépôt de votre appareil</p>
                </div>
                <div class="qr-container">
                  <img src="${C}" alt="QR Code" style="width: 200px; height: 200px;" />
                </div>
                <div class="code">
                  Code: ${t}
                </div>
                <div class="info">
                  <p><strong>Référence:</strong> ${r.substring(0,8)}</p>
                  <p><strong>Point relais:</strong> ${n}</p>
                  <p><strong>Date prévue:</strong> ${g(A)}</p>
                  <p><strong>Appareil:</strong> ${a.brand} ${a.model} (${a.type})</p>
                </div>
                <div class="footer">
                  <p>Ce code est valable pendant 24 heures à partir de sa génération.</p>
                  <p>Pour toute question, contactez notre service client au 01 23 45 67 89.</p>
                </div>
              </div>
              <script>
                window.onload = function() { window.print(); }
              <\/script>
            </body>
          </html>
        `),w.document.close()})},h=()=>{u.current&&lh(u.current).then(w=>{const y=document.createElement("a");y.download=`pcrelais-code-${t}.png`,y.href=w.toDataURL("image/png"),y.click()})},p=async()=>{if(u.current&&typeof navigator<"u"&&"share"in navigator)try{const w=await lh(u.current),y=await new Promise(C=>{w.toBlob(C,"image/png")});if(y){const C=new File([y],`pcrelais-code-${t}.png`,{type:"image/png"});await navigator.share({title:"PC Relais - Code de réparation",text:`Voici mon code de réparation pour PC Relais: ${t}`,files:[C]})}}catch(w){console.error("Erreur lors du partage:",w)}};return o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Votre demande a été enregistrée !"}),o.jsx("p",{className:"text-gray-600",children:"Présentez ce QR code ou le code ci-dessous lors du dépôt de votre appareil au point relais."})]}),o.jsxs("div",{ref:u,className:"bg-white border border-gray-200 rounded-lg p-6 max-w-md mx-auto",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(BB,{value:e,size:200,level:"H",includeMargin:!0,imageSettings:{src:"/logo.png",height:40,width:40,excavate:!0}})}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Code de réparation"}),o.jsx("div",{className:"text-2xl font-bold tracking-wider bg-gray-100 py-2 px-4 rounded-lg inline-block",children:t})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Référence:"}),o.jsx("span",{className:"font-medium",children:r.substring(0,8)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Point relais:"}),o.jsx("span",{className:"font-medium",children:n})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Date prévue:"}),o.jsx("span",{className:"font-medium",children:g(A)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Appareil:"}),o.jsxs("span",{className:"font-medium",children:[a.brand," ",a.model]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 text-xs text-gray-500 text-center",children:o.jsx("p",{children:"Ce code est valable pendant 24 heures."})})]}),o.jsxs("div",{className:"flex justify-center mt-6 space-x-3",children:[o.jsxs(he,{variant:"outline",onClick:f,className:"flex items-center",children:[o.jsx(g_,{className:"h-4 w-4 mr-2"}),"Imprimer"]}),o.jsxs(he,{variant:"outline",onClick:h,className:"flex items-center",children:[o.jsx(zu,{className:"h-4 w-4 mr-2"}),"Télécharger"]}),typeof navigator<"u"&&"share"in navigator&&o.jsxs(he,{variant:"outline",onClick:p,className:"flex items-center",children:[o.jsx(w_,{className:"h-4 w-4 mr-2"}),"Partager"]})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[o.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Prochaines étapes :"}),o.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600",children:[o.jsx("li",{children:"Apportez votre appareil au point relais sélectionné à la date prévue."}),o.jsx("li",{children:"Présentez ce QR code ou le code de réparation au personnel du point relais."}),o.jsx("li",{children:"Vous recevrez des notifications par email sur l'avancement de votre réparation."}),o.jsx("li",{children:"Une fois la réparation terminée, vous serez notifié pour récupérer votre appareil."})]})]})]})},Hm=[{value:"laptop",label:"Ordinateur portable"},{value:"desktop",label:"Ordinateur de bureau"},{value:"smartphone",label:"Smartphone"},{value:"tablet",label:"Tablette"},{value:"printer",label:"Imprimante"},{value:"other",label:"Autre"}],Pm=[{value:"apple",label:"Apple"},{value:"samsung",label:"Samsung"},{value:"dell",label:"Dell"},{value:"hp",label:"HP"},{value:"lenovo",label:"Lenovo"},{value:"asus",label:"Asus"},{value:"acer",label:"Acer"},{value:"microsoft",label:"Microsoft"},{value:"sony",label:"Sony"},{value:"other",label:"Autre"}],iU=()=>{var fr,vt;const e=kt(),{user:t}=lt(),[r,n]=H.useState(1),[A,a]=H.useState("laptop"),[u,g]=H.useState("dell"),[f,h]=H.useState(null),[p,w]=H.useState(""),[y,C]=H.useState(""),[b,F]=H.useState(""),[I,N]=H.useState(null),[v,_]=H.useState(""),[S,j]=H.useState(""),[Q,D]=H.useState(null),[L,M]=H.useState(""),[k,P]=H.useState(!1),[z,X]=H.useState(!1),[ce,G]=H.useState([]),[re,oe]=H.useState(!1),[le,Y]=H.useState(null),[ue,ee]=H.useState(""),[$,Ae]=H.useState(""),[se,Qe]=H.useState(""),fe=async()=>{if(console.log("handleNext appelé avec les valeurs suivantes:",{deviceType:A,brand:u,model:p,problemDescription:y,step:r}),r===1){P(!0);try{let we="";y.toLowerCase().includes("ne s'allume")?we="Selon votre description, il pourrait s'agir d'un problème d'alimentation ou de batterie. Notre technicien vérifiera l'adaptateur secteur, la prise DC et la batterie. Une réparation simple pourrait coûter entre 60€ et 120€ selon les pièces à remplacer.":y.toLowerCase().includes("écran")?we="Votre appareil semble avoir un problème d'affichage. Cela pourrait être dû à un écran endommagé ou à un problème de connexion avec la carte mère. Le coût estimé de réparation se situe entre 80€ et 200€ selon le modèle.":y.toLowerCase().includes("surchauffe")?we="La surchauffe est souvent causée par une accumulation de poussière dans les ventilateurs ou un problème de pâte thermique. Un nettoyage complet et le remplacement de la pâte thermique coûteraient environ 60€ à 90€.":we="Nous aurons besoin d'examiner votre appareil pour établir un diagnostic précis. Notre technicien effectuera une analyse complète pour identifier la source du problème et vous proposera une solution adaptée.",setTimeout(()=>{_(we),P(!1),n(2)},1500)}catch(we){console.error("Erreur lors de l'analyse IA:",we),P(!1),Y("Une erreur est survenue lors de l'analyse. Veuillez réessayer.")}}else if(r===2)n(3);else if(r===3){if(!S||!L){Y("Veuillez sélectionner un point relais et une date de dépôt.");return}oe(!0),Y(null);try{if(!t)throw new Error("Vous devez être connecté pour soumettre une demande de réparation.");const we={clientId:t.id,deviceType:A,brand:u,model:p,problemDescription:y,statusId:f||"1",preDiagnosis:v,dropOffRelayId:S,appointmentDate:L},de=await mf.createRepair(we);Qe(de.id);const{qrData:Ue,repairCode:ke}=Za.generateQRCodeData(de.id,S,t.id);ee(Ue),Ae(ke),await ms.createNotification({userId:t.id,title:"Demande de réparation créée",message:`Votre demande de réparation a été enregistrée avec succès. Code de réparation: ${ke}`,type:"success",isRead:!1,link:`/repairs/${de.id}`}),console.log("Notification au point relais désactivée temporairement"),oe(!1),n(4)}catch(we){console.error("Erreur lors de la soumission de la demande:",we),Y("Une erreur est survenue lors de la soumission de votre demande. Veuillez réessayer."),oe(!1)}}else r===4&&e("/dashboard",{state:{success:!0,message:"Votre demande de réparation a été soumise avec succès."}})},qe=()=>{n(r-1)};H.useEffect(()=>{b&&r===2&&pe()},[b,r]),H.useEffect(()=>{(async()=>{try{console.log("Début de la récupération des statuts...");const de=await mf.getRepairStatuses();if(console.log("Statuts récupérés:",de),!de||de.length===0){console.warn("Aucun statut n'a été trouvé dans la base de données. Création d'un statut par défaut...");try{h(null);return}catch(ke){console.error("Erreur lors de la création du statut par défaut:",ke)}}const Ue=de.find(ke=>{var rr,gt,$e;return((rr=ke.name)==null?void 0:rr.toLowerCase())==="submitted"||((gt=ke.name)==null?void 0:gt.toLowerCase())==="soumise"||(($e=ke.name)==null?void 0:$e.toLowerCase())==="nouvelle"});Ue?(h(Ue.id),console.log("Statut initial trouvé:",Ue)):(console.error("Aucun statut initial trouvé parmi les statuts disponibles"),de.length>0?(h(de[0].id),console.log("Utilisation du premier statut disponible comme fallback:",de[0])):h(null))}catch(de){console.error("Erreur lors du chargement des statuts:",de),h(null)}})()},[]);const pe=async()=>{if(!b.trim()){Y("Veuillez entrer une adresse pour rechercher les points relais.");return}console.log("Coordonnées actuelles avant vérification:",I);let we=I;!we||typeof we.lat!="number"||typeof we.lng!="number"?(console.log("Coordonnées invalides ou non disponibles, utilisation des coordonnées par défaut pour la France"),we={lat:46.603354,lng:1.888334,address:b,streetAddress:"",city:"",postalCode:""},N(we),console.log("ATTENTION: Utilisation des coordonnées par défaut car aucune coordonnée valide n'a été fournie")):console.log("Utilisation des coordonnées EXACTES fournies par Google Places:",we);try{oe(!0),Y(null),console.log("Recherche de points relais avec les coordonnées EXACTES:",we),(we.city||we.postalCode)&&console.log("Détails de l'adresse pour la recherche:",{adresse:we.address,rue:we.streetAddress,ville:we.city,codePostal:we.postalCode,latitude:we.lat,longitude:we.lng});const de=await vs.getNearbyRelayPointsByCoordinates(we.lat,we.lng,20);G(de),de.length===0?Y("Aucun point relais trouvé à proximité de cette adresse. Essayez une autre adresse ou élargissez votre recherche."):X(!0)}catch(de){console.error("Erreur lors de la recherche des points relais:",de),Y(de.message||"Une erreur est survenue lors de la recherche des points relais. Veuillez réessayer.")}finally{oe(!1)}},Xt=we=>{j(we);const de=ce.find(Ue=>Ue.id===we);if(de){const Ue={id:de.id,businessName:de.businessName,address:de.address,openingHours:de.openingHours,coordinates:{latitude:typeof de.coordinates=="object"?de.coordinates.latitude:0,longitude:typeof de.coordinates=="object"?de.coordinates.longitude:0},email:de.email||"",phoneNumber:"",firstName:"",lastName:"",role:"relayPoint",createdAt:new Date().toISOString(),commission:0};D(Ue)}};return o.jsx(Nr,{children:o.jsxs("div",{className:"py-12 px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Demande de réparation"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Décrivez votre problème et nous nous occupons du reste"})]}),o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between w-full max-w-3xl mx-auto",children:[o.jsxs("div",{className:"relative flex flex-col items-center",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm ${r>=1?"bg-primary":"bg-gray-300"}`,children:"1"}),o.jsx("span",{className:"mt-2 text-sm font-medium text-gray-600",children:"Problème"})]}),o.jsx("div",{className:`flex-1 h-1 mx-2 ${r>=2?"bg-primary":"bg-gray-200"}`}),o.jsxs("div",{className:"relative flex flex-col items-center",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm ${r>=2?"bg-primary":"bg-gray-300"}`,children:"2"}),o.jsx("span",{className:"mt-2 text-sm font-medium text-gray-600",children:"Diagnostic"})]}),o.jsx("div",{className:`flex-1 h-1 mx-2 ${r>=3?"bg-primary":"bg-gray-200"}`}),o.jsxs("div",{className:"relative flex flex-col items-center",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm ${r>=3?"bg-primary":"bg-gray-300"}`,children:"3"}),o.jsx("span",{className:"mt-2 text-sm font-medium text-gray-600",children:"Point relais"})]}),o.jsx("div",{className:`flex-1 h-1 mx-2 ${r>=4?"bg-primary":"bg-gray-200"}`}),o.jsxs("div",{className:"relative flex flex-col items-center",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm ${r>=4?"bg-primary":"bg-gray-300"}`,children:"4"}),o.jsx("span",{className:"mt-2 text-sm font-medium text-gray-600",children:"QR Code"})]})]})}),o.jsx(J,{children:o.jsxs(J.Content,{className:"p-6",children:[r===1&&o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Décrivez votre appareil et le problème rencontré"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(wf,{label:"Type d'appareil",options:Hm,value:A,onChange:a,required:!0,fullWidth:!0}),o.jsx(wf,{label:"Marque",options:Pm,value:u,onChange:g,required:!0,fullWidth:!0})]}),o.jsx(ur,{label:"Modèle",type:"text",value:p,onChange:we=>w(we.target.value),placeholder:"Ex: MacBook Pro 2019, Galaxy S21...",required:!0,fullWidth:!0}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"problem",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description du problème"}),o.jsx("textarea",{id:"problem",rows:5,value:y,onChange:we=>C(we.target.value),placeholder:"Décrivez en détail le problème que vous rencontrez avec votre appareil...",className:"block w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",required:!0}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Plus votre description est précise, plus notre diagnostic sera pertinent."})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(he,{variant:"primary",size:"lg",icon:o.jsx(np,{className:"h-5 w-5"}),iconPosition:"right",onClick:fe,disabled:k||!A||!u||!y,children:k?"Analyse en cours...":"Analyser mon problème"})})]}),r===2&&o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pré-diagnostic IA"}),o.jsxs("div",{className:"bg-primary/5 p-4 rounded-lg border border-primary/20 relative",children:[o.jsx("div",{className:"absolute top-0 right-0 transform -translate-y-1/2 bg-primary text-white text-xs px-2 py-1 rounded",children:"IA"}),o.jsx("p",{className:"text-gray-700",children:v}),o.jsxs("div",{className:"mt-4 flex items-center text-gray-600 text-sm",children:[o.jsx(o_,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:"Ce diagnostic initial est généré par notre intelligence artificielle. Un technicien effectuera une analyse complète."})]})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Votre appareil"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Type d'appareil:"}),o.jsx("p",{className:"font-medium text-gray-900",children:((fr=Hm.find(we=>we.value===A))==null?void 0:fr.label)||A})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Marque:"}),o.jsx("p",{className:"font-medium text-gray-900",children:((vt=Pm.find(we=>we.value===u))==null?void 0:vt.label)||u})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Modèle:"}),o.jsx("p",{className:"font-medium text-gray-900",children:p})]})]})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("label",{className:"inline-flex items-center",children:[o.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary/20"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"J'accepte que mon appareil soit examiné et qu'un devis me soit proposé"})]})}),o.jsxs("div",{className:"flex items-center pt-4",children:[o.jsx(wa,{className:"h-5 w-5 text-primary mr-3"}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Des questions ? Vous pouvez ",o.jsx("a",{href:"#",className:"text-primary font-medium",children:"discuter avec notre assistant"})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx(he,{variant:"outline",onClick:qe,children:"Retour"}),o.jsx(he,{variant:"primary",size:"lg",icon:o.jsx(np,{className:"h-5 w-5"}),iconPosition:"right",onClick:fe,children:"Choisir un point relais"})]})]}),r===3&&o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Choisissez un point relais"}),o.jsx("div",{className:"mb-4",children:o.jsx("div",{className:"relative",children:o.jsx("div",{className:"relative",children:o.jsx(iB,{label:"Votre adresse",placeholder:"Entrez votre adresse pour trouver les points relais proches",value:b,onChange:we=>{F(we)},onPlaceSelect:we=>{we.formatted_address&&F(we.formatted_address)},onCoordinatesSelect:we=>{if(console.log("Coordonnées reçues dans RequestRepairPage:",we),!we||typeof we.lat!="number"||typeof we.lng!="number"){console.error("Coordonnées invalides reçues:",we);const Ue={lat:46.603354,lng:1.888334,address:b,streetAddress:"",city:"",postalCode:""};console.log("Utilisation de coordonnées par défaut:",Ue);try{oe(!0),Y(null),console.log("Recherche directe avec coordonnées par défaut:",Ue),vs.getNearbyRelayPointsByCoordinates(Ue.lat,Ue.lng,20).then(ke=>{G(ke),ke.length===0?Y("Aucun point relais trouvé à proximité de cette adresse. Essayez une autre adresse ou élargissez votre recherche."):X(!0)}).catch(ke=>{console.error("Erreur lors de la recherche des points relais:",ke),Y(ke.message||"Une erreur est survenue lors de la recherche des points relais. Veuillez réessayer.")}).finally(()=>{oe(!1)})}catch(ke){console.error("Erreur lors de la recherche des points relais:",ke),Y(ke.message||"Une erreur est survenue lors de la recherche des points relais. Veuillez réessayer."),oe(!1)}return}we.address&&we.address!==b&&(console.log("Mise à jour de l'adresse complète:",we.address),F(we.address));const de=we;(de.streetAddress||de.city||de.postalCode)&&console.log("Informations décomposées de l'adresse:",{rue:de.streetAddress,ville:de.city,codePostal:de.postalCode});try{oe(!0),Y(null),console.log("Recherche directe avec coordonnées EXACTES:",we);const Ue={lat:we.lat,lng:we.lng,address:we.address||"",streetAddress:we.streetAddress||"",city:we.city||"",postalCode:we.postalCode||""};vs.getNearbyRelayPointsByCoordinates(Ue.lat,Ue.lng,20).then(ke=>{G(ke),ke.length===0?Y("Aucun point relais trouvé à proximité de cette adresse. Essayez une autre adresse ou élargissez votre recherche."):X(!0)}).catch(ke=>{console.error("Erreur lors de la recherche des points relais:",ke),Y(ke.message||"Une erreur est survenue lors de la recherche des points relais. Veuillez réessayer.")}).finally(()=>{oe(!1)})}catch(Ue){console.error("Erreur lors de la recherche des points relais:",Ue),Y(Ue.message||"Une erreur est survenue lors de la recherche des points relais. Veuillez réessayer."),oe(!1)}N(we)},disabled:re})})})}),le&&o.jsx("div",{className:"p-4 mb-4 bg-error/10 border border-error/20 rounded-lg text-error text-sm",children:le}),z&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center relative overflow-hidden",children:[o.jsx("img",{src:"https://images.pexels.com/photos/4386442/pexels-photo-4386442.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",alt:"Carte des points relais",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:o.jsx("p",{className:"text-white text-lg font-medium",children:"Carte interactive des points relais"})})]}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Points relais à proximité"}),re?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):ce.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucun point relais trouvé à proximité. Essayez une autre adresse."}):o.jsx("div",{className:"space-y-3",children:ce.map(we=>o.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${S===we.id?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50"}`,onClick:()=>Xt(we.id),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:we.businessName}),o.jsx("p",{className:"text-gray-600 text-sm mt-1",children:we.address}),o.jsx("p",{className:"text-gray-500 text-xs mt-2",children:typeof we.openingHours=="string"?we.openingHours:we.openingHours&&typeof we.openingHours=="object"?Object.entries(we.openingHours).map(([de,Ue])=>{if(Ue&&typeof Ue=="object"){const ke=Ue;return ke.open&&ke.close?`${de.charAt(0).toUpperCase()+de.slice(1)}: ${ke.open}-${ke.close}`:`${de.charAt(0).toUpperCase()+de.slice(1)}: Fermé`}return`${de.charAt(0).toUpperCase()+de.slice(1)}: ${String(Ue)}`}).join(", "):"Horaires non disponibles"})]}),o.jsxs("div",{className:"bg-primary/10 text-primary px-2 py-1 rounded text-sm font-medium",children:[we.distance," km"]})]})},we.id))}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"preferredDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date préférentielle de dépôt"}),o.jsx("input",{type:"date",id:"preferredDate",value:L,onChange:we=>M(we.target.value),min:new Date().toISOString().split("T")[0],className:"block w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),S&&o.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-100 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Fs,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5"}),o.jsx("div",{children:o.jsx("p",{className:"text-sm text-blue-800",children:"Après validation, vous recevrez un QR code et un code de réparation à présenter lors du dépôt de votre appareil."})})]})})]}),o.jsxs("div",{className:"flex justify-between pt-4",children:[o.jsx(he,{variant:"outline",onClick:qe,disabled:re,children:"Retour"}),o.jsx(he,{variant:"primary",size:"lg",onClick:fe,disabled:!S||!L||re,children:re?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"animate-spin inline-block h-4 w-4 border-b-2 border-white rounded-full mr-2"}),"Traitement..."]}):"Finaliser ma demande"})]})]}),r===4&&o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Votre demande a été enregistrée"}),ue&&$&&se&&o.jsx(AU,{qrData:ue,repairCode:$,repairId:se,relayName:(Q==null?void 0:Q.businessName)||"",appointmentDate:L,deviceInfo:{type:A,brand:u,model:p}}),o.jsx("div",{className:"flex justify-center pt-4",children:o.jsx(he,{variant:"primary",size:"lg",onClick:fe,children:"Retour au tableau de bord"})})]})]})})]})})},yr=[];for(let e=0;e<256;++e)yr.push((e+256).toString(16).slice(1));function aU(e,t=0){return(yr[e[t+0]]+yr[e[t+1]]+yr[e[t+2]]+yr[e[t+3]]+"-"+yr[e[t+4]]+yr[e[t+5]]+"-"+yr[e[t+6]]+yr[e[t+7]]+"-"+yr[e[t+8]]+yr[e[t+9]]+"-"+yr[e[t+10]]+yr[e[t+11]]+yr[e[t+12]]+yr[e[t+13]]+yr[e[t+14]]+yr[e[t+15]]).toLowerCase()}let ch;const oU=new Uint8Array(16);function lU(){if(!ch){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ch=crypto.getRandomValues.bind(crypto)}return ch(oU)}const cU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Km={randomUUID:cU};function uU(e,t,r){var A;if(Km.randomUUID&&!t&&!e)return Km.randomUUID();e=e||{};const n=e.random??((A=e.rng)==null?void 0:A.call(e))??lU();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,aU(n)}const _o={async uploadFile(e,t,r,n,A){try{if(!this.isValidFileType(e,t))throw new Error(`Type de fichier non autorisé: ${e.type}`);if(e.size>10*1024*1024)throw new Error("Le fichier est trop volumineux (max 10MB)");const a=uU(),u=e.name.split(".").pop(),g=`${a}.${u}`,f=`${t==="image"?"images":"documents"}/${g}`,{data:h,error:p}=await Z.storage.from("repair-files").upload(f,e,{cacheControl:"3600",upsert:!1});if(p)throw p;const{data:w}=await Z.storage.from("repair-files").getPublicUrl(f);let y;if(t==="image"){const{data:F}=await Z.storage.from("repair-files").getPublicUrl(f,{transform:{width:200,height:200,resize:"cover"}});y=F==null?void 0:F.publicUrl}const{data:C,error:b}=await Z.from("files").insert({id:a,name:e.name,size:e.size,type:e.type,url:(w==null?void 0:w.publicUrl)||"",thumbnail_url:y||null,created_at:new Date().toISOString(),repair_id:n||null,message_id:A||null,user_id:r}).select().single();if(b)throw await this.deleteFile(f),b;return{id:C.id,name:C.name,size:C.size,type:C.type,url:C.url,thumbnailUrl:C.thumbnail_url,createdAt:C.created_at,repairId:C.repair_id,messageId:C.message_id,userId:C.user_id}}catch(a){return console.error("Erreur lors du téléchargement du fichier:",a),null}},async deleteFile(e){try{const{error:t}=await Z.storage.from("repair-files").remove([e]);if(t)throw t;return!0}catch(t){return console.error("Erreur lors de la suppression du fichier:",t),!1}},async deleteFileById(e){try{const{data:t,error:r}=await Z.from("files").select("*").eq("id",e).single();if(r||!t)throw new Error("Fichier non trouvé");const A=new URL(t.url).pathname.split("/").slice(2).join("/"),{error:a}=await Z.storage.from("repair-files").remove([A]);if(a)throw a;const{error:u}=await Z.from("files").delete().eq("id",e);if(u)throw u;return!0}catch(t){return console.error("Erreur lors de la suppression du fichier:",t),!1}},async getRepairFiles(e){try{const{data:t,error:r}=await Z.from("files").select("*").eq("repair_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>({id:n.id,name:n.name,size:n.size,type:n.type,url:n.url,thumbnailUrl:n.thumbnail_url,createdAt:n.created_at,repairId:n.repair_id,messageId:n.message_id,userId:n.user_id}))}catch(t){return console.error("Erreur lors de la récupération des fichiers:",t),[]}},async getMessageFiles(e){try{const{data:t,error:r}=await Z.from("files").select("*").eq("message_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>({id:n.id,name:n.name,size:n.size,type:n.type,url:n.url,thumbnailUrl:n.thumbnail_url,createdAt:n.created_at,repairId:n.repair_id,messageId:n.message_id,userId:n.user_id}))}catch(t){return console.error("Erreur lors de la récupération des fichiers:",t),[]}},isValidFileType(e,t){return t==="image"?e.type.startsWith("image/"):t==="document"?["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","text/csv"].includes(e.type):!1}},mu=({onFileUploaded:e,acceptedFileType:t,repairId:r,messageId:n,maxSizeMB:A=10,className:a=""})=>{const{user:u}=lt(),[g,f]=H.useState(!1),[h,p]=H.useState(null),[w,y]=H.useState(null),C=H.useRef(null),b=S=>{const j=S.target.files;if(!j||j.length===0)return;const Q=j[0];if(Q.size>A*1024*1024){p(`Le fichier est trop volumineux (max ${A}MB)`);return}if(!_o.isValidFileType(Q,t)){p(`Type de fichier non autorisé: ${Q.type}`);return}y(Q),p(null)},F=async()=>{if(!(!w||!u))try{f(!0),p(null);const S=await _o.uploadFile(w,t,u.id,r,n);if(!S)throw new Error("Échec du téléchargement du fichier");e(S.url,S.name,S.type),y(null),C.current&&(C.current.value="")}catch(S){console.error("Erreur lors du téléchargement:",S),p(S instanceof Error?S.message:"Erreur lors du téléchargement")}finally{f(!1)}},I=()=>{y(null),p(null),C.current&&(C.current.value="")},N=()=>{C.current&&C.current.click()},v=()=>w?w.type.startsWith("image/")?o.jsx(Y1,{className:"h-5 w-5"}):o.jsx(rB,{className:"h-5 w-5"}):o.jsx(rd,{className:"h-5 w-5"}),_=S=>S<1024?S+" B":S<1024*1024?(S/1024).toFixed(1)+" KB":(S/(1024*1024)).toFixed(1)+" MB";return o.jsxs("div",{className:`flex flex-col ${a}`,children:[o.jsx("input",{type:"file",ref:C,onChange:b,accept:t==="image"?"image/*":".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv",className:"hidden"}),o.jsx("div",{className:"flex items-center gap-2",children:w?o.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2 w-full",children:[o.jsx("div",{className:"flex-shrink-0",children:v()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.name}),o.jsx("p",{className:"text-xs text-gray-500",children:_(w.size)})]}),o.jsx("div",{className:"flex-shrink-0 flex gap-2",children:g?o.jsx(qo,{className:"h-5 w-5 animate-spin text-primary"}):o.jsxs(o.Fragment,{children:[o.jsxs(he,{type:"button",variant:"primary",size:"sm",onClick:F,className:"flex items-center gap-1",children:[o.jsx(rd,{className:"h-4 w-4"}),o.jsx("span",{children:"Envoyer"})]}),o.jsx(he,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"text-gray-500",children:o.jsx(xA,{className:"h-4 w-4"})})]})})]}):o.jsxs(he,{type:"button",variant:"outline",size:"sm",onClick:N,disabled:g,className:"flex items-center gap-2",children:[o.jsx(rd,{className:"h-4 w-4"}),o.jsx("span",{children:t==="image"?"Ajouter une image":"Ajouter un document"})]})}),h&&o.jsx("p",{className:"text-sm text-red-500 mt-1",children:h})]})},Gf=({file:e,onDelete:t,showDelete:r=!1,className:n=""})=>{const[A,a]=H.useState(!1),u=e.type.startsWith("image/"),g=e.type==="application/pdf",f=C=>C<1024?C+" B":C<1024*1024?(C/1024).toFixed(1)+" KB":(C/(1024*1024)).toFixed(1)+" MB",h=()=>u?o.jsx(Y1,{className:"h-5 w-5 text-blue-500"}):g?o.jsx(Js,{className:"h-5 w-5 text-red-500"}):e.type.includes("word")?o.jsx(Js,{className:"h-5 w-5 text-blue-700"}):e.type.includes("excel")||e.type.includes("spreadsheet")?o.jsx(Js,{className:"h-5 w-5 text-green-600"}):e.type.includes("presentation")||e.type.includes("powerpoint")?o.jsx(Js,{className:"h-5 w-5 text-orange-500"}):o.jsx(rB,{className:"h-5 w-5 text-gray-500"}),p=()=>{const C=document.createElement("a");C.href=e.url,C.download=e.name,document.body.appendChild(C),C.click(),document.body.removeChild(C)},w=()=>{t&&t(e.id)},y=()=>{a(!A)};return o.jsxs("div",{className:`border rounded-md overflow-hidden ${n}`,children:[u&&e.thumbnailUrl&&!A&&o.jsx("div",{className:"h-32 bg-gray-100 flex items-center justify-center cursor-pointer",onClick:y,children:o.jsx("img",{src:e.thumbnailUrl,alt:e.name,className:"h-full w-full object-contain"})}),u&&A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[o.jsx("img",{src:e.url,alt:e.name,className:"max-h-[80vh] max-w-full object-contain"}),o.jsx(he,{variant:"ghost",size:"sm",onClick:y,className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full p-1",children:o.jsx(xA,{className:"h-5 w-5"})})]})}),g&&!A&&o.jsx("div",{className:"h-32 bg-gray-100 flex items-center justify-center cursor-pointer",onClick:y,children:o.jsx(Js,{className:"h-12 w-12 text-red-500"})}),g&&A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white w-full max-w-4xl h-[80vh]",children:[o.jsx("iframe",{src:`${e.url}#toolbar=0`,title:e.name,className:"w-full h-full"}),o.jsx(he,{variant:"ghost",size:"sm",onClick:y,className:"absolute top-2 right-2 bg-white rounded-full p-1",children:o.jsx(xA,{className:"h-5 w-5"})})]})}),!u&&!g&&o.jsx("div",{className:"h-32 bg-gray-100 flex items-center justify-center",children:h()}),o.jsxs("div",{className:"p-3",children:[o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f(e.size)})]})}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(he,{variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-1",children:[o.jsx(zu,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only sm:not-sr-only",children:"Télécharger"})]}),o.jsxs(he,{variant:"outline",size:"sm",onClick:()=>window.open(e.url,"_blank"),className:"flex items-center gap-1",children:[o.jsx(A_,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only sm:not-sr-only",children:"Ouvrir"})]})]}),r&&t&&o.jsxs(he,{variant:"ghost",size:"sm",onClick:w,className:"text-red-500 hover:text-red-700",children:[o.jsx(xA,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Supprimer"})]})]})]})]})},Vm=({repairId:e,messageId:t,onDeleteFile:r,showDelete:n=!1,className:A=""})=>{const[a,u]=H.useState([]),[g,f]=H.useState(!0),[h,p]=H.useState(null);H.useEffect(()=>{e||t?(async()=>{try{f(!0),p(null);let F=[];e?F=await _o.getRepairFiles(e):t&&(F=await _o.getMessageFiles(t)),u(F)}catch(F){console.error("Erreur lors du chargement des fichiers:",F),p("Impossible de charger les fichiers. Veuillez réessayer.")}finally{f(!1)}})():(f(!1),u([]))},[e,t]);const w=async b=>{try{await _o.deleteFileById(b)?(u(I=>I.filter(N=>N.id!==b)),r&&r(b)):p("Échec de la suppression du fichier. Veuillez réessayer.")}catch(F){console.error("Erreur lors de la suppression du fichier:",F),p("Erreur lors de la suppression du fichier.")}};if(g)return o.jsxs("div",{className:`flex items-center justify-center p-4 ${A}`,children:[o.jsx(qo,{className:"h-6 w-6 animate-spin text-primary"}),o.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Chargement des fichiers..."})]});if(h)return o.jsx("div",{className:`p-4 text-red-500 text-sm ${A}`,children:h});if(a.length===0)return null;const y=a.filter(b=>b.type.startsWith("image/")),C=a.filter(b=>!b.type.startsWith("image/"));return o.jsxs("div",{className:A,children:[y.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Images (",y.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:y.map(b=>o.jsx(Gf,{file:b,onDelete:n?w:void 0,showDelete:n},b.id))})]}),C.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Documents (",C.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:C.map(b=>o.jsx(Gf,{file:b,onDelete:n?w:void 0,showDelete:n},b.id))})]})]})},Gm=()=>{var ce;const{id:e}=Al(),t=kt(),{user:r}=lt(),[n,A]=H.useState(null),[a,u]=H.useState(!0),[g,f]=H.useState(null),[h,p]=H.useState([]),[w,y]=H.useState(!1),[C,b]=H.useState(!1),[F,I]=H.useState(""),[N,v]=H.useState(""),[_,S]=H.useState(""),[j,Q]=H.useState(""),[D,L]=H.useState([]),[M,k]=H.useState(!1);H.useEffect(()=>{(async()=>{var re,oe,le,Y,ue;if(!(!e||!r))try{u(!0),f(null);const{data:ee,error:$}=await Z.from("repair_requests").select("*").eq("id",e).maybeSingle();if($)throw $;if(!ee){const{data:de,error:Ue}=await Z.from("repair_codes").select("*").eq("id",e).maybeSingle();if(Ue)throw Ue;f(de?"Cette réparation existe mais n'a pas encore été complètement enregistrée. Veuillez déposer l'appareil dans un point relais pour finaliser l'enregistrement.":"Réparation non trouvée");return}let Ae=null;if(ee.status_id){const{data:de,error:Ue}=await Z.from("repair_statuses").select("id, code, label").eq("id",ee.status_id).maybeSingle();!Ue&&de&&(Ae=de)}let se=null;if(ee.client_id){const{data:de,error:Ue}=await Z.from("profiles").select("id, first_name, last_name, email, phone").eq("id",ee.client_id).maybeSingle();!Ue&&de&&(se=de)}let Qe=null;if(ee.technician_id){const{data:de,error:Ue}=await Z.from("profiles").select("id, first_name, last_name").eq("id",ee.technician_id).maybeSingle();!Ue&&de&&(Qe=de)}let fe=null;if(ee.drop_off_relay_id){const{data:de,error:Ue}=await Z.from("profiles").select("id, first_name, last_name").eq("id",ee.drop_off_relay_id).maybeSingle();!Ue&&de&&(fe=de)}let qe=null;if(ee.pickup_relay_id){const{data:de,error:Ue}=await Z.from("profiles").select("id, first_name, last_name").eq("id",ee.pickup_relay_id).maybeSingle();!Ue&&de&&(qe=de)}const pe={...ee,status:Ae,client:se,technician:Qe,dropOffRelay:fe,pickupRelay:qe},Xt={id:pe.id,clientId:pe.client_id,clientName:pe.client_first_name&&pe.client_last_name?`${pe.client_first_name} ${pe.client_last_name}`.trim():pe.client?`${pe.client.first_name||""} ${pe.client.last_name||""}`.trim():void 0,clientEmail:(re=pe.client)==null?void 0:re.email,clientPhone:(oe=pe.client)==null?void 0:oe.phone,deviceType:pe.device_type,brand:pe.brand,model:pe.model,problemDescription:pe.problem_description,preDiagnosis:pe.pre_diagnosis,estimatedCost:pe.estimated_cost,statusId:pe.status_id,statusName:(le=pe.status)==null?void 0:le.code,statusLabel:(Y=pe.status)==null?void 0:Y.label,createdAt:pe.created_at,updatedAt:pe.updated_at,dropOffRelayId:pe.drop_off_relay_id,dropOffRelayName:pe.dropOffRelay?`${pe.dropOffRelay.first_name||""} ${pe.dropOffRelay.last_name||""}`.trim():void 0,pickupRelayId:pe.pickup_relay_id,pickupRelayName:pe.pickupRelay?`${pe.pickupRelay.first_name||""} ${pe.pickupRelay.last_name||""}`.trim():void 0,appointmentDate:pe.appointment_date,technicianId:pe.technician_id,technicianName:pe.technician?`${pe.technician.first_name||""} ${pe.technician.last_name||""}`.trim():void 0,notes:ee.notes};A(Xt),I(Xt.notes||""),v(((ue=Xt.estimatedCost)==null?void 0:ue.toString())||""),S(Xt.statusId.toString()),Q(Xt.technicianId||"");const{data:fr,error:vt}=await Z.from("repair_statuses").select("*").order("id");if(vt)throw vt;const we=(fr||[]).map(de=>({id:de.id,code:de.code,label:de.label}));if(p(we),r.role==="admin"){const{data:de,error:Ue}=await Z.from("profiles").select("id, first_name, last_name").eq("role","technician").order("last_name");if(!Ue&&de){const ke=de.map(rr=>({id:rr.id,name:`${rr.first_name||""} ${rr.last_name||""}`.trim()}));L(ke)}}}catch(ee){console.error("Erreur lors du chargement des détails de la réparation:",ee),f("Impossible de charger les détails de la réparation. Veuillez réessayer.")}finally{u(!1)}})()},[e,r]);const P=G=>G?new Date(G).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non défini",z=(G,re)=>{if(!G||!re)return null;const oe=()=>{switch(G){case"pending":return"warning";case"received":case"diagnosed":case"inRepair":return"primary";case"repaired":case"readyForPickup":case"completed":return"success";case"cancelled":return"error";default:return"default"}};return o.jsx(Jt,{variant:oe(),children:re})},X=async()=>{var G;if(!(!n||!r)){if(r.role!=="technician"&&r.role!=="admin"){f("Vous n'avez pas les droits nécessaires pour modifier cette réparation.");return}try{y(!0),b(!1);const re={status_id:_,notes:F,updated_at:new Date().toISOString()};r.role==="technician"&&N&&(re.estimated_cost=parseFloat(N)),r.role==="admin"&&j&&(re.technician_id=j||null);const{error:oe}=await Z.from("repair_requests").update(re).eq("id",n.id);if(oe)throw oe;const le=((G=h.find(Y=>Y.id===_))==null?void 0:G.label)||"";await Z.from("notifications").insert({user_id:n.clientId,title:"Mise à jour de votre réparation",message:`Le statut de votre réparation ${n.brand} ${n.model} a été mis à jour: ${le}`,type:"info",related_to_request_id:n.id,is_read:!1,timestamp:new Date().toISOString()}),b(!0),setTimeout(()=>{window.location.reload()},1500)}catch(re){console.error("Erreur lors de la mise à jour de la réparation:",re),f("Impossible de mettre à jour la réparation. Veuillez réessayer.")}finally{y(!1)}}};return a?o.jsx("div",{className:"p-6 flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):g||!n?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-lg p-4 text-error",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Erreur"}),o.jsx("p",{children:g||"Réparation non trouvée"}),o.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>t(-1),children:"Retour"})]})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",className:"mr-4",onClick:()=>t(-1),children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Détails de la réparation"}),o.jsxs("p",{className:"text-gray-600",children:[n.brand," ",n.model," - ",n.deviceType]})]})]}),C&&o.jsx("div",{className:"mb-6 p-4 bg-success/10 border border-success/20 rounded-lg text-success",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Tr,{className:"h-5 w-5 mr-2"}),o.jsx("p",{children:"La réparation a été mise à jour avec succès."})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsxs(J,{className:"md:col-span-2",children:[o.jsx(J.Header,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(J.Title,{children:"Informations générales"}),z(n.statusName,n.statusLabel)]})}),o.jsx(J.Content,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Appareil"}),o.jsx("p",{className:"text-gray-900",children:n.deviceType})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Marque / Modèle"}),o.jsxs("p",{className:"text-gray-900",children:[n.brand," ",n.model]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date de création"}),o.jsx("p",{className:"text-gray-900",children:P(n.createdAt)})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Dernière mise à jour"}),o.jsx("p",{className:"text-gray-900",children:P(n.updatedAt)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description du problème"}),o.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:n.problemDescription})]}),n.preDiagnosis&&o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Pré-diagnostic"}),o.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:n.preDiagnosis})]}),n.estimatedCost!==void 0&&n.estimatedCost!==null&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Coût estimé"}),o.jsxs("p",{className:"text-gray-900",children:[n.estimatedCost," €"]})]})]})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Contacts"})}),o.jsx(J.Content,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(ca,{className:"h-4 w-4 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Client"})]}),o.jsx("p",{className:"text-gray-900",children:n.clientName||"Non défini"}),n.clientEmail&&o.jsx("p",{className:"text-gray-600 text-sm",children:n.clientEmail}),n.clientPhone&&o.jsx("p",{className:"text-gray-600 text-sm",children:n.clientPhone})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(ll,{className:"h-4 w-4 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Technicien"})]}),o.jsx("p",{className:"text-gray-900",children:n.technicianName||"Non assigné"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Mr,{className:"h-4 w-4 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Point relais (dépôt)"})]}),o.jsx("p",{className:"text-gray-900",children:n.dropOffRelayName||"Non défini"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Mr,{className:"h-4 w-4 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Point relais (retrait)"})]}),o.jsx("p",{className:"text-gray-900",children:n.pickupRelayName||"Non défini"})]})]})})]})]}),((r==null?void 0:r.role)==="technician"||(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="relayPoint")&&o.jsxs(J,{className:"mb-6",children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Gestion de la réparation"})}),o.jsxs(J.Content,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut de la réparation"}),(r==null?void 0:r.role)==="relayPoint"?o.jsx("div",{className:"p-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700",children:((ce=h.find(G=>G.id===n.statusId))==null?void 0:ce.label)||"Non défini"}):o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:_,onChange:G=>S(G.target.value),children:h.map(G=>o.jsx("option",{value:G.id,children:G.label},G.id))})]}),(r==null?void 0:r.role)==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigner un technicien"}),o.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:j,onChange:G=>Q(G.target.value),children:[o.jsx("option",{value:"",children:"-- Sélectionner un technicien --"}),D.map(G=>o.jsx("option",{value:G.id,children:G.name},G.id))]})]}),(r==null?void 0:r.role)==="technician"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coût estimé (€)"}),o.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:N,onChange:G=>v(G.target.value),min:"0",step:"0.01"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(r==null?void 0:r.role)==="relayPoint"?o.jsx("div",{className:"p-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 min-h-[100px] whitespace-pre-line",children:n.notes||"Aucune note disponible"}):o.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:F,onChange:G=>I(G.target.value),rows:4,placeholder:"Ajouter des notes sur la réparation..."})]})]}),o.jsxs("div",{className:"mt-6 border-t pt-6",children:[o.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[o.jsx(Js,{className:"h-5 w-5 mr-2 text-primary"}),"Documents et photos"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx(mu,{onFileUploaded:()=>{k(!0),setTimeout(()=>k(!1),3e3)},acceptedFileType:"image",repairId:e,className:"mb-2"}),o.jsx(mu,{onFileUploaded:()=>{k(!0),setTimeout(()=>k(!1),3e3)},acceptedFileType:"document",repairId:e}),M&&o.jsx("div",{className:"mt-2 p-2 bg-green-50 text-green-700 text-sm rounded",children:"Fichier téléchargé avec succès!"})]}),o.jsx(Vm,{repairId:e,showDelete:(r==null?void 0:r.role)==="technician"||(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="relayPoint",className:"mt-4"})]}),o.jsxs("div",{className:"mt-6 flex justify-between",children:[o.jsxs(he,{variant:"outline",onClick:()=>t(`/chat/${e}`),disabled:w,children:[o.jsx(gf,{className:"h-5 w-5 mr-2"}),"Discuter avec le client"]}),(r==null?void 0:r.role)!=="relayPoint"&&o.jsx(he,{variant:"primary",onClick:X,disabled:w,children:w?"Mise à jour...":"Mettre à jour la réparation"})]})]})]}),(r==null?void 0:r.role)==="client"&&(r==null?void 0:r.id)===n.clientId&&o.jsxs(J,{className:"mb-6",children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Suivi de votre réparation"})}),o.jsxs(J.Content,{children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n.statusName==="completed"?"bg-success text-white":"bg-gray-200 text-gray-500"}`,children:o.jsx(Tr,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"font-medium",children:"Statut actuel"}),o.jsx("p",{className:"text-gray-600",children:n.statusLabel})]})]}),n.estimatedCost!==void 0&&n.estimatedCost!==null&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center",children:o.jsx(r_,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"font-medium",children:"Coût estimé"}),o.jsxs("p",{className:"text-gray-600",children:[n.estimatedCost," €"]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center",children:o.jsx(Gn,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"font-medium",children:"Dernière mise à jour"}),o.jsx("p",{className:"text-gray-600",children:P(n.updatedAt)})]})]})]}),o.jsxs("div",{className:"mt-6 border-t pt-4",children:[o.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[o.jsx(Js,{className:"h-5 w-5 mr-2 text-primary"}),"Documents et photos"]}),o.jsx(Vm,{repairId:e,showDelete:!1,className:"mt-4"})]}),o.jsx("div",{className:"mt-6",children:o.jsx(Se,{to:`/chat/${n.id}`,children:o.jsxs(he,{variant:"outline",className:"w-full",children:[o.jsx(wa,{className:"h-5 w-5 mr-2"}),"Contacter le technicien"]})})})]})]})]})};var dU={};const hc={isPushSupported(){return"serviceWorker"in navigator&&"PushManager"in window},async requestPermission(){if(!this.isPushSupported())throw new Error("Les notifications push ne sont pas supportées par ce navigateur");return await Notification.requestPermission()},async registerServiceWorker(){if(!this.isPushSupported())throw new Error("Les notifications push ne sont pas supportées par ce navigateur");return await navigator.serviceWorker.register("/service-worker.js")},async subscribe(e){try{if(await this.requestPermission()!=="granted")return console.log("Permission de notification refusée"),null;const A=(await(await this.registerServiceWorker()).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(dU.REACT_APP_VAPID_PUBLIC_KEY||"")})).toJSON(),{endpoint:a,keys:u}=A;if(!a||!u)throw new Error("Échec de l'abonnement aux notifications push");const{data:g,error:f}=await Z.from("push_subscriptions").upsert({user_id:e,endpoint:a,p256dh:u.p256dh,auth:u.auth,created_at:new Date().toISOString()}).select().single();if(f)throw f;return{userId:g.user_id,endpoint:g.endpoint,p256dh:g.p256dh,auth:g.auth,createdAt:g.created_at}}catch(t){return console.error("Erreur lors de l'abonnement aux notifications push:",t),null}},async unsubscribe(e){try{if(!this.isPushSupported())return!1;const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();r&&await r.unsubscribe();const{error:n}=await Z.from("push_subscriptions").delete().eq("user_id",e);if(n)throw n;return!0}catch(t){return console.error("Erreur lors du désabonnement aux notifications push:",t),!1}},urlBase64ToUint8Array(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),A=new Uint8Array(n.length);for(let a=0;a<n.length;++a)A[a]=n.charCodeAt(a);return A}},hU=({className:e})=>{const{user:t}=lt(),[r,n]=H.useState(!1),[A,a]=H.useState(!0),[u,g]=H.useState(null);H.useEffect(()=>{(async()=>{if(t)try{if(a(!0),!hc.isPushSupported()){g("Les notifications ne sont pas supportées par votre navigateur");return}const w=await(await navigator.serviceWorker.ready).pushManager.getSubscription();n(!!w)}catch(p){console.error("Erreur lors de la vérification de l'abonnement:",p),g("Impossible de vérifier l'état des notifications")}finally{a(!1)}})()},[t]);const f=async()=>{if(t)try{if(a(!0),g(null),r)if(await hc.unsubscribe(t.id))n(!1);else throw new Error("Échec du désabonnement");else if(await hc.subscribe(t.id))n(!0);else throw new Error("Échec de l'abonnement")}catch(h){console.error("Erreur lors de la gestion de l'abonnement:",h),g("Impossible de gérer les notifications")}finally{a(!1)}};return hc.isPushSupported()?o.jsxs("div",{className:e,children:[o.jsxs(he,{variant:"outline",size:"sm",onClick:f,disabled:A,className:`flex items-center ${r?"text-primary":"text-gray-500"}`,title:r?"Désactiver les notifications":"Activer les notifications",children:[A?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):r?o.jsx(Wo,{className:"h-4 w-4"}):o.jsx(Y8,{className:"h-4 w-4"}),o.jsx("span",{className:"ml-2 hidden md:inline",children:r?"Notifications activées":"Activer les notifications"})]}),u&&o.jsx("div",{className:"text-xs text-error mt-1",children:u})]}):null},fU=()=>{const{id:e}=Al(),t=kt(),{user:r}=lt(),n=H.useRef(null),[A,a]=H.useState(!0),[u,g]=H.useState(null),[f,h]=H.useState([]),[p,w]=H.useState(""),[y,C]=H.useState(!1),[b,F]=H.useState(null),[I,N]=H.useState({}),[v,_]=H.useState(null),[S,j]=H.useState(!1),Q=H.useRef(null);H.useEffect(()=>{(async()=>{if(!(!e||!r))try{a(!0),g(null);const{data:Y,error:ue}=await Z.from("repair_requests").select(`
            id,
            brand,
            model,
            client_id,
            technician_id,
            status:repair_statuses!inner(label),
            client:profiles!client_id(first_name, last_name),
            technician:profiles!technician_id(first_name, last_name)
          `).eq("id",e).single();if(ue)throw ue;if(!Y){g("Réparation non trouvée");return}if(r.id!==Y.client_id&&r.id!==Y.technician_id&&r.role!=="admin"){g("Vous n'êtes pas autorisé à accéder à cette conversation");return}const ee={id:Y.id,brand:Y.brand,model:Y.model,clientId:Y.client_id,clientName:Y.client&&Y.client[0]?`${Y.client[0].first_name} ${Y.client[0].last_name}`:void 0,technicianId:Y.technician_id,technicianName:Y.technician&&Y.technician[0]?`${Y.technician[0].first_name} ${Y.technician[0].last_name}`:void 0,statusLabel:Y.status&&Y.status[0]?Y.status[0].label:void 0};F(ee);const $=await Rn.getChatMessages(e);h($),await Rn.markMessagesAsRead(e,r.id)}catch(Y){console.error("Erreur lors du chargement des données:",Y),g("Impossible de charger les données. Veuillez réessayer.")}finally{a(!1)}})();const oe=Rn.subscribeToMessages(e||"",Y=>{h(ue=>ue.some($=>$.id===Y.id)?ue:[...ue,Y]),r&&Y.senderId!==r.id&&Rn.markMessagesAsRead(e||"",r.id)}),le=Rn.subscribeToTypingEvents(e||"",Y=>{Y.userId!==(r==null?void 0:r.id)&&(N(ue=>({...ue,[Y.userId]:Y.isTyping})),Y.isTyping&&setTimeout(()=>{N(ue=>({...ue,[Y.userId]:!1}))},5e3))});return n.current&&n.current.scrollIntoView({behavior:"smooth"}),()=>{oe(),le()}},[e,r]),H.useEffect(()=>{n.current&&n.current.scrollIntoView({behavior:"smooth"})},[f]);const D=async re=>{if(re.preventDefault(),!(!p.trim()&&!v||!e||!r||y))try{C(!0),await Rn.sendMessage({requestId:e,senderId:r.id,senderRole:r.role,message:p.trim(),isAi:!1},v||void 0)&&(w(""),_(null))}catch(oe){console.error("Erreur lors de l'envoi du message:",oe)}finally{C(!1)}},L=re=>{const oe=re.target.files;if(!oe||oe.length===0)return;const le=oe[0];_(le),re.target.value=""},M=async()=>{if(!(!e||!r||S||f.length===0))try{j(!0);const re=await Rn.exportChatHistory(e);re&&window.open(re,"_blank")}catch(re){console.error("Erreur lors de l'exportation de l'historique:",re)}finally{j(!1)}},k=re=>{w(re.target.value),e&&r&&Rn.updateTypingStatus(e,r.id,!0)},P=re=>new Date(re).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),z=re=>{if(!re.attachmentUrl)return null;const oe={id:re.id||"",name:`Fichier ${re.attachmentType||"joint"}`,size:0,type:re.attachmentType==="image"?"image/jpeg":"application/octet-stream",url:re.attachmentUrl,createdAt:re.timestamp||new Date().toISOString(),userId:re.senderId,messageId:re.id};return o.jsx("div",{className:"mt-2 max-w-sm",children:o.jsx(Gf,{file:oe,showDelete:!1})})},X=Object.values(I).some(re=>re),ce=re=>{const oe=new Date(re),le=new Date,Y=new Date(le);return Y.setDate(Y.getDate()-1),oe.toDateString()===le.toDateString()?"Aujourd'hui":oe.toDateString()===Y.toDateString()?"Hier":oe.toLocaleDateString()},G=re=>{if(re===0)return!0;const oe=new Date(f[re].timestamp||"").toDateString(),le=new Date(f[re-1].timestamp||"").toDateString();return oe!==le};return o.jsxs("div",{className:"flex flex-col h-screen",children:[o.jsxs("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>t(-1),className:"mr-4 text-gray-500 hover:text-gray-700",children:o.jsx(Vn,{className:"h-5 w-5"})}),b&&o.jsxs("div",{children:[o.jsxs("h1",{className:"text-lg font-medium",children:[b.brand," ",b.model]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[b.clientName&&o.jsxs("div",{className:"flex items-center mr-4",children:[o.jsx(ca,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:b.clientName})]}),b.technicianName&&o.jsxs("div",{className:"flex items-center mr-4",children:[o.jsx(ll,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:b.technicianName})]}),b.statusLabel&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Fs,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:b.statusLabel})]})]})]})]}),o.jsx("div",{children:o.jsx(hU,{})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:A?o.jsxs("div",{className:"flex items-center justify-center h-full",children:[o.jsx(qo,{className:"h-8 w-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-2",children:"Chargement des messages..."})]}):u?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow",children:[o.jsx(Fs,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),o.jsx("p",{className:"text-red-500",children:u}),!b&&o.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>t(-1),children:"Retour"})]})}):f.length===0?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow",children:[o.jsx(wa,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Aucun message pour le moment."}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Envoyez un message pour démarrer la conversation."})]})}):o.jsxs("div",{className:"space-y-4",children:[f.map((re,oe)=>o.jsxs(Kt.Fragment,{children:[G(oe)&&o.jsx("div",{className:"flex justify-center my-4",children:o.jsx("div",{className:"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full",children:ce(re.timestamp||"")})}),o.jsx("div",{className:`flex ${re.senderId===(r==null?void 0:r.id)?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[75%] ${re.senderId===(r==null?void 0:r.id)?"bg-primary text-white":"bg-white"} rounded-lg p-3 shadow`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-xs font-medium",children:re.senderId===(r==null?void 0:r.id)?"Vous":re.senderRole==="client"?"Client":re.senderRole==="technician"?"Technicien":re.senderRole==="admin"?"Admin":"Point Relais"}),o.jsx("span",{className:`text-xs ${re.senderId===(r==null?void 0:r.id)?"text-primary-foreground":"text-gray-500"}`,children:P(re.timestamp||"")})]}),o.jsx("p",{className:`${re.senderId===(r==null?void 0:r.id)?"text-primary-foreground":"text-gray-800"}`,children:re.message}),z(re)]})})]},re.id||oe)),X&&o.jsx("div",{className:"flex justify-start my-2",children:o.jsxs("div",{className:"bg-gray-100 text-gray-600 rounded-lg p-2 px-4 flex items-center",children:[o.jsxs("div",{className:"flex space-x-1 mr-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce",style:{animationDelay:"300ms"}}),o.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce",style:{animationDelay:"600ms"}})]}),o.jsx("span",{className:"text-xs",children:"En train d'écrire..."})]})}),o.jsx("div",{ref:n})]})}),o.jsxs("form",{onSubmit:D,className:"p-4 border-t bg-white",children:[v&&o.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border rounded-lg flex items-center",children:[o.jsxs("div",{className:"flex-1 flex items-center overflow-hidden",children:[v.type.startsWith("image/")?o.jsx(Y1,{className:"h-5 w-5 text-gray-500 mr-2"}):o.jsx(Js,{className:"h-5 w-5 text-gray-500 mr-2"}),o.jsx("span",{className:"text-sm truncate",children:v.name})]}),o.jsx("button",{type:"button",className:"ml-2 text-gray-500 hover:text-gray-700",onClick:()=>_(null),children:o.jsx(xA,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"mb-2",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(mu,{onFileUploaded:(re,oe,le)=>{e&&r&&(C(!0),fetch(re).then(Y=>Y.blob()).then(Y=>{const ue=new File([Y],oe,{type:le});return Rn.sendMessage({requestId:e,senderId:r.id,senderRole:r.role,message:"Fichier envoyé",isAi:!1},ue)}).then(Y=>{Y&&(h(ue=>[...ue,Y]),w(""))}).finally(()=>{C(!1)}))},acceptedFileType:"image",messageId:e,className:"flex-1"}),o.jsx(mu,{onFileUploaded:(re,oe,le)=>{e&&r&&(C(!0),fetch(re).then(Y=>Y.blob()).then(Y=>{const ue=new File([Y],oe,{type:le});return Rn.sendMessage({requestId:e,senderId:r.id,senderRole:r.role,message:"Fichier envoyé",isAi:!1},ue)}).then(Y=>{Y&&(h(ue=>[...ue,Y]),w(""))}).finally(()=>{C(!1)}))},acceptedFileType:"document",messageId:e,className:"flex-1"})]})}),o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("button",{type:"button",className:"p-3 border rounded-l-lg bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>{var re;return(re=Q.current)==null?void 0:re.click()},disabled:y,children:o.jsx(f_,{className:"h-5 w-5 text-gray-500"})}),o.jsx("input",{ref:Q,type:"file",className:"hidden",onChange:L,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",disabled:y})]}),o.jsx("input",{type:"text",className:"flex-1 p-3 border-y border-r-0 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tapez votre message...",value:p,onChange:k,disabled:y}),o.jsxs("div",{className:"flex",children:[o.jsx(he,{type:"button",variant:"outline",className:"rounded-none border-y",onClick:M,disabled:y||S||f.length===0,children:S?o.jsx(qo,{className:"h-5 w-5 animate-spin"}):o.jsx(zu,{className:"h-5 w-5"})}),o.jsx(he,{type:"submit",variant:"primary",className:"rounded-l-none",disabled:!p.trim()&&!v||y,children:y?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):o.jsx(m_,{className:"h-5 w-5"})})]})]})]})]})},xU=()=>{const{user:e}=lt(),[t,r]=H.useState([]),[n,A]=H.useState(!0),[a,u]=H.useState(null),[g,f]=H.useState("all"),[h,p]=H.useState("all");H.useEffect(()=>{(async()=>{if(e)try{A(!0),u(null);const S=await En.getAllNotifications(e.id,100);r(S)}catch(S){console.error("Erreur lors du chargement des notifications:",S),u("Impossible de charger les notifications. Veuillez réessayer plus tard.")}finally{A(!1)}})();const _=En.subscribeToNotifications((e==null?void 0:e.id)||"",S=>{r(j=>[S,...j])});return()=>{_()}},[e]);const w=async v=>{try{await En.markAsRead(v)&&r(S=>S.map(j=>j.id===v?{...j,isRead:!0}:j))}catch(_){console.error("Erreur lors du marquage de la notification comme lue:",_)}},y=async v=>{try{await En.deleteNotification(v)&&r(S=>S.filter(j=>j.id!==v))}catch(_){console.error("Erreur lors de la suppression de la notification:",_)}},C=async()=>{if(e)try{await En.markAllAsRead(e.id)&&r(_=>_.map(S=>({...S,isRead:!0})))}catch(v){console.error("Erreur lors du marquage de toutes les notifications comme lues:",v)}},b=v=>{switch(v){case"info":return o.jsx(Fs,{className:"h-5 w-5 text-blue-500"});case"warning":return o.jsx(wo,{className:"h-5 w-5 text-amber-500"});case"success":return o.jsx(Tr,{className:"h-5 w-5 text-green-500"});case"error":return o.jsx(wo,{className:"h-5 w-5 text-red-500"});case"repair":return o.jsx(Gn,{className:"h-5 w-5 text-purple-500"});case"message":return o.jsx(wa,{className:"h-5 w-5 text-primary"});default:return o.jsx(Fs,{className:"h-5 w-5 text-gray-500"})}},F=v=>new Date(v).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=t.filter(v=>!(g==="unread"&&v.isRead||g==="read"&&!v.isRead||h!=="all"&&v.type!==h)),N=t.filter(v=>!v.isRead).length;return o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Se,{to:"/dashboard",className:"mr-4",children:o.jsx(he,{variant:"ghost",className:"p-2",children:o.jsx(Vn,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),o.jsx("p",{className:"text-gray-600 mt-1",children:N>0?`${N} notification${N>1?"s":""} non lue${N>1?"s":""}`:"Toutes les notifications sont lues"})]})]}),o.jsxs("div",{className:"mt-4 md:mt-0 flex flex-wrap gap-2",children:[N>0&&o.jsxs(he,{variant:"outline",onClick:C,className:"flex items-center",children:[o.jsx(Au,{className:"h-4 w-4 mr-2"}),"Tout marquer comme lu"]}),o.jsxs("div",{className:"relative",children:[o.jsxs(he,{variant:"outline",className:"flex items-center",onClick:()=>{const v=document.getElementById("notification-filter");v&&v.click()},children:[o.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Filtrer"]}),o.jsxs("select",{id:"notification-filter",className:"absolute inset-0 opacity-0 cursor-pointer",value:g,onChange:v=>f(v.target.value),children:[o.jsx("option",{value:"all",children:"Toutes"}),o.jsx("option",{value:"unread",children:"Non lues"}),o.jsx("option",{value:"read",children:"Lues"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs(he,{variant:"outline",className:"flex items-center",onClick:()=>{const v=document.getElementById("notification-type-filter");v&&v.click()},children:[o.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Type"]}),o.jsxs("select",{id:"notification-type-filter",className:"absolute inset-0 opacity-0 cursor-pointer",value:h,onChange:v=>p(v.target.value),children:[o.jsx("option",{value:"all",children:"Tous"}),o.jsx("option",{value:"repair",children:"Réparations"}),o.jsx("option",{value:"message",children:"Messages"}),o.jsx("option",{value:"info",children:"Informations"}),o.jsx("option",{value:"success",children:"Succès"}),o.jsx("option",{value:"warning",children:"Avertissements"}),o.jsx("option",{value:"error",children:"Erreurs"})]})]})]})]}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-0",children:n?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-gray-500 mt-4",children:"Chargement des notifications..."})]}):a?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(wo,{className:"h-10 w-10 text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-red-500",children:a}),o.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Réessayer"})]}):I.length===0?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(Wo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Aucune notification à afficher"}),g!=="all"||h!=="all"?o.jsx(he,{variant:"outline",className:"mt-4",onClick:()=>{f("all"),p("all")},children:"Réinitialiser les filtres"}):null]}):o.jsx("div",{className:"divide-y",children:I.map(v=>o.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${v.isRead?"":"bg-blue-50"}`,children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0 mr-4",children:b(v.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("h3",{className:"font-medium",children:v.title}),o.jsx("span",{className:"text-xs text-gray-500 ml-2 whitespace-nowrap",children:F(v.timestamp)})]}),o.jsx("p",{className:"text-gray-600 mt-1",children:v.message}),v.repairInfo&&o.jsxs("div",{className:"mt-2 flex items-center",children:[o.jsx(Jt,{variant:v.repairInfo.statusName==="completed"?"success":v.repairInfo.statusName==="inRepair"?"primary":v.repairInfo.statusName==="cancelled"?"error":"warning",className:"mr-2",children:v.repairInfo.statusLabel}),o.jsxs("span",{className:"text-sm text-gray-600",children:[v.repairInfo.brand," ",v.repairInfo.model]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[v.relatedId&&o.jsx(Se,{to:v.type==="message"?`/chat/${v.relatedId}`:v.type==="repair"?`/repair/${v.relatedId}`:"/",className:"text-sm text-primary hover:underline",children:"Voir les détails"}),o.jsxs("div",{className:"flex space-x-2",children:[!v.isRead&&o.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>w(v.id),title:"Marquer comme lu",className:"text-gray-500 hover:text-primary",children:[o.jsx(Au,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Marquer comme lu"})]}),o.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>y(v.id),title:"Supprimer",className:"text-gray-500 hover:text-red-500",children:[o.jsx(C_,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Supprimer"})]})]})]})]})]})},v.id))})})})]})},gU=()=>{const{user:e}=lt(),[t,r]=H.useState(!1),[n,A]=H.useState(!1),[a,u]=H.useState(null),[g,f]=H.useState(null),[h,p]=H.useState({firstName:"",lastName:"",email:"",phoneNumber:"",relayName:"",address:"",city:"",postalCode:"",openingHours:{monday:{open:"09:00",close:"18:00"},tuesday:{open:"09:00",close:"18:00"},wednesday:{open:"09:00",close:"18:00"},thursday:{open:"09:00",close:"18:00"},friday:{open:"09:00",close:"18:00"},saturday:{open:"09:00",close:"13:00"},sunday:{open:"",close:""}},isActive:!0});H.useEffect(()=>{e&&(p(I=>({...I,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phoneNumber:e.phoneNumber||""})),e.role==="relayPoint"&&w(e.id))},[e]);const w=async I=>{try{const{data:N,error:v}=await Z.from("relay_points").select("*").eq("manager_id",I).single();if(v)throw v;N&&(f(N),p(_=>({..._,relayName:N.name||"",address:N.address||"",city:N.city||"",postalCode:N.postal_code||"",openingHours:N.opening_hours||_.openingHours,isActive:N.is_active!==void 0?N.is_active:!0})))}catch(N){console.error("Erreur lors de la récupération des données du point relais:",N)}},y=I=>{const{name:N,value:v}=I.target;p(_=>({..._,[N]:v}))},C=(I,N,v)=>{p(_=>({..._,openingHours:{..._.openingHours,[I]:{..._.openingHours[I],[N]:v}}}))},b=I=>{const{name:N,checked:v}=I.target;p(_=>({..._,[N]:v}))},F=async I=>{if(I.preventDefault(),!!e){r(!0),u(null),A(!1);try{const{error:N}=await Z.from("profiles").update({first_name:h.firstName,last_name:h.lastName,phone:h.phoneNumber,updated_at:new Date().toISOString()}).eq("id",e.id);if(N)throw N;if(e.role==="relayPoint"){const v={name:h.relayName,address:h.address,city:h.city,postal_code:h.postalCode,opening_hours:h.openingHours,is_active:h.isActive,updated_at:new Date().toISOString()};if(g){const{error:_}=await Z.from("relay_points").update(v).eq("id",g.id);if(_)throw _}else{const{error:_}=await Z.from("relay_points").insert({...v,manager_id:e.id});if(_)throw _}}if(h.email!==e.email){const{error:v}=await Z.auth.updateUser({email:h.email});v&&u("Votre profil a été mis à jour, mais la modification de l'email nécessite une vérification. Vous recevrez un email pour confirmer ce changement.")}A(!0),setTimeout(()=>A(!1),3e3)}catch(N){console.error("Erreur lors de la mise à jour du profil:",N),u(N.message||"Une erreur est survenue lors de la mise à jour du profil")}finally{r(!1)}}};return e?o.jsx(Nr,{children:o.jsx("div",{className:"container-app py-8",children:o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"bg-primary/10 p-3 rounded-full mr-4",children:o.jsx(ca,{className:"h-6 w-6 text-primary"})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mon Profil"})]}),a&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:o.jsx("span",{className:"block sm:inline",children:a})}),n&&o.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:o.jsx("span",{className:"block sm:inline",children:"Votre profil a été mis à jour avec succès!"})}),o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[o.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Informations personnelles"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),o.jsx("input",{type:"text",id:"firstName",name:"firstName",value:h.firstName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),o.jsx("input",{type:"text",id:"lastName",name:"lastName",value:h.lastName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"La modification de l'email nécessitera une vérification par email."})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone"}),o.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:h.phoneNumber,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"})]})]}),(e==null?void 0:e.role)==="relayPoint"&&o.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:o.jsx(sB,{className:"h-5 w-5 text-primary"})}),o.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Informations du point relais"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"relayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du point relais"}),o.jsx("input",{type:"text",id:"relayName",name:"relayName",value:h.relayName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:o.jsx(Mr,{className:"h-5 w-5 text-primary"})}),o.jsx("h3",{className:"text-md font-medium text-gray-800",children:"Adresse"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),o.jsx("input",{type:"text",id:"address",name:"address",value:h.address,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),o.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Code postal"}),o.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:h.postalCode,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary",required:!0})]})]}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:o.jsx(Gn,{className:"h-5 w-5 text-primary"})}),o.jsx("h3",{className:"text-md font-medium text-gray-800",children:"Horaires d'ouverture"})]}),o.jsx("div",{className:"space-y-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(I=>{var v,_;const N={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"};return o.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[o.jsx("div",{className:"col-span-1",children:o.jsx("span",{className:"text-sm font-medium text-gray-700",children:N[I]})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"time",value:((v=h.openingHours[I])==null?void 0:v.open)||"",onChange:S=>C(I,"open",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"time",value:((_=h.openingHours[I])==null?void 0:_.close)||"",onChange:S=>C(I,"close",S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"})})]},I)})}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"isActive",checked:h.isActive,onChange:b,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Point relais actif"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Décochez cette case si vous souhaitez temporairement désactiver votre point relais."})]})]}),o.jsx("div",{className:"pt-4",children:o.jsx(he,{type:"submit",variant:"primary",disabled:t,className:"w-full",children:t?"Mise à jour en cours...":"Mettre à jour mon profil"})})]})]})})})}):o.jsx(Nr,{children:o.jsx("div",{className:"container-app py-8",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{children:"Veuillez vous connecter pour accéder à votre profil."})})})})},pU=()=>{const e=kt(),{user:t}=lt(),[r,n]=H.useState([]),[A,a]=H.useState(!0),[u,g]=H.useState(null),f=(t==null?void 0:t.role)==="admin";H.useEffect(()=>{h()},[]);const h=async()=>{a(!0);try{if(!t){e("/login");return}if(f){const y=await vs.getAllRelayPoints();n(y)}else if(t.role==="relayPoint"){const y=await vs.getRelayPointById(t.id);y?n([y]):g("Impossible de charger vos informations")}else g("Vous n'avez pas les droits pour accéder à cette page"),setTimeout(()=>e("/dashboard"),2e3)}catch(y){console.error("Erreur lors du chargement des points relais:",y),g("Impossible de charger les points relais")}finally{a(!1)}},p=async y=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce point relais ?"))try{console.log(`Tentative de suppression du point relais avec l'ID: ${y}`),alert("Fonctionnalité de suppression à implémenter")}catch(C){console.error("Erreur lors de la suppression:",C),g("Impossible de supprimer le point relais")}},w=y=>{if(!y||typeof y!="object")return"Horaires non disponibles";const C=["monday","tuesday","wednesday","thursday","friday"],b=["saturday","sunday"],F=(v,_)=>!_||!_.open||!_.close?null:`${v.charAt(0).toUpperCase()+v.slice(1)}: ${_.open}-${_.close}`,I=C.map(v=>F(v,y[v])).filter(Boolean).join(", "),N=b.map(v=>F(v,y[v])).filter(Boolean).join(", ");return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:["Semaine: ",I||"Fermé"]}),o.jsxs("div",{children:["Weekend: ",N||"Fermé"]})]})};return o.jsx(Nr,{children:o.jsxs("div",{className:"container mx-auto py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:f?"Points Relais":"Mon Point Relais"}),f&&o.jsxs(he,{variant:"primary",onClick:()=>e("/admin/relay-points/new"),children:[o.jsx(pf,{className:"h-5 w-5 mr-2"}),"Ajouter un point relais"]})]}),u&&o.jsx("div",{className:"mb-4 p-4 bg-error/10 border border-error/20 rounded-lg text-error",children:u}),A?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r.length===0?o.jsx(J,{children:o.jsxs(J.Content,{className:"p-8 text-center text-gray-500",children:[o.jsx("p",{children:"Aucun point relais trouvé."}),f&&o.jsxs(he,{variant:"outline",className:"mt-4",onClick:()=>e("/admin/relay-points/new"),children:[o.jsx(pf,{className:"h-5 w-5 mr-2"}),"Ajouter votre premier point relais"]})]})}):o.jsx("div",{className:"space-y-4",children:r.map(y=>o.jsx(J,{children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y.businessName}),o.jsxs("div",{className:"flex items-start mt-2",children:[o.jsx(Mr,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),o.jsx("p",{className:"text-gray-600",children:y.address})]}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact"}),o.jsx("p",{className:"text-gray-700",children:y.email}),o.jsx("p",{className:"text-gray-700",children:y.phoneNumber})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Horaires"}),o.jsx("div",{className:"text-gray-700 text-sm",children:w(y.openingHours)})]})]}),y.coordinates&&o.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Coordonnées: ",y.coordinates.latitude.toFixed(6),", ",y.coordinates.longitude.toFixed(6)]})]}),o.jsxs("div",{className:"flex mt-4 md:mt-0 space-x-2",children:[o.jsxs(he,{variant:"outline",size:"sm",onClick:()=>e(`/admin/relay-points/edit/${y.id}`),children:[o.jsx(J1,{className:"h-4 w-4 mr-1"}),"Modifier"]}),f&&o.jsxs(he,{variant:"outline",size:"sm",className:"text-error hover:bg-error/10",onClick:()=>p(y.id),children:[o.jsx(E_,{className:"h-4 w-4 mr-1"}),"Supprimer"]})]})]})})},y.id))})]})})},mU=({value:e,onChange:t})=>{const r=[{id:"monday",label:"Lundi"},{id:"tuesday",label:"Mardi"},{id:"wednesday",label:"Mercredi"},{id:"thursday",label:"Jeudi"},{id:"friday",label:"Vendredi"},{id:"saturday",label:"Samedi"},{id:"sunday",label:"Dimanche"}],n=(A,a,u)=>{const g={...e};g[A]||(g[A]={open:"",close:""}),g[A][a]=u,t(g)};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Horaires d'ouverture"}),o.jsx("div",{className:"space-y-3",children:r.map(A=>o.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[o.jsx("div",{className:"text-sm font-medium",children:A.label}),o.jsx(ur,{type:"time",placeholder:"Ouverture",value:e&&e[A.id]&&e[A.id].open||"",onChange:a=>n(A.id,"open",a.target.value),className:"text-sm"}),o.jsx(ur,{type:"time",placeholder:"Fermeture",value:e&&e[A.id]&&e[A.id].close||"",onChange:a=>n(A.id,"close",a.target.value),className:"text-sm"})]},A.id))})]})},zm=()=>{const{id:e}=Al(),t=kt(),{user:r}=lt(),[n,A]=H.useState(!1),[a,u]=H.useState(null),[g,f]=H.useState(!1),[h,p]=H.useState({businessName:"",address:"",email:"",phoneNumber:"",openingHours:{monday:{open:"09:00",close:"18:00"},tuesday:{open:"09:00",close:"18:00"},wednesday:{open:"09:00",close:"18:00"},thursday:{open:"09:00",close:"18:00"},friday:{open:"09:00",close:"18:00"},saturday:{open:"09:00",close:"13:00"},sunday:{open:"",close:""}}});H.useEffect(()=>{(async()=>{if(e){A(!0);try{const I=await vs.getRelayPointById(e);if(r&&r.role!=="admin"&&e!==r.id){u("Vous ne pouvez modifier que votre propre point relais."),A(!1);return}I?p({id:I.id,businessName:I.businessName,address:I.address,email:I.email,phoneNumber:I.phoneNumber,openingHours:I.openingHours||{monday:{open:"09:00",close:"18:00"},tuesday:{open:"09:00",close:"18:00"},wednesday:{open:"09:00",close:"18:00"},thursday:{open:"09:00",close:"18:00"},friday:{open:"09:00",close:"18:00"},saturday:{open:"09:00",close:"13:00"},sunday:{open:"",close:""}},coordinates:I.coordinates}):u("Point relais non trouvé")}catch(I){u("Erreur lors du chargement du point relais"),console.error(I)}finally{A(!1)}}})()},[e]);const w=F=>{const{name:I,value:N}=F.target;p(v=>({...v,[I]:N}))},y=F=>{p(I=>({...I,openingHours:F}))},C=async(F,I)=>{if(p(N=>({...N,address:F})),I){if(console.log("Coordonnées obtenues directement de Google Places:",I),typeof I.lat=="function"&&typeof I.lng=="function"){const N=I.lat(),v=I.lng();console.log("Valeurs extraites:",{latitude:N,longitude:v}),p(_=>({..._,address:F,coordinates:{latitude:N,longitude:v}}));return}else if(I.lat!==void 0&&I.lng!==void 0){p(N=>({...N,address:F,coordinates:{latitude:I.lat,longitude:I.lng}}));return}}try{const N=await vs.geocodeAddress(F);N?(console.log("Coordonnées obtenues via géocodage:",N),p(v=>({...v,address:F,coordinates:N}))):console.warn("Impossible de géocoder l'adresse:",F)}catch(N){console.error("Erreur lors du géocodage de l'adresse:",N)}},b=async F=>{F.preventDefault(),A(!0),u(null),f(!1);try{if(!h.businessName||!h.address||!h.email){u("Veuillez remplir tous les champs obligatoires."),A(!1);return}if(h.id&&r&&r.role!=="admin"&&h.id!==r.id){u("Vous ne pouvez modifier que votre propre point relais."),A(!1);return}if(!h.businessName||!h.address||!h.email)throw new Error("Champs obligatoires manquants");const I={id:h.id,businessName:h.businessName,address:h.address,email:h.email,phoneNumber:h.phoneNumber||"",firstName:h.firstName||"",lastName:h.lastName||"",role:"relayPoint",commission:h.commission||0,openingHours:h.openingHours||{},coordinates:h.coordinates,currentUserId:r==null?void 0:r.id};await vs.createOrUpdateRelayPoint(I)?(f(!0),setTimeout(()=>{(r==null?void 0:r.role)==="admin"?t("/admin/relay-points"):(r==null?void 0:r.role)==="relayPoint"?t("/relay/profile"):t("/dashboard")},1500)):u("Erreur lors de l'enregistrement du point relais")}catch(I){u("Une erreur est survenue"),console.error(I)}finally{A(!1)}};return o.jsx(Nr,{children:o.jsxs("div",{className:"container mx-auto py-8",children:[o.jsxs("div",{className:"mb-6 flex items-center",children:[o.jsxs(he,{variant:"ghost",onClick:()=>t("/admin/relay-points"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:e?"Modifier le point relais":"Ajouter un point relais"})]}),o.jsx(J,{children:o.jsxs(J.Content,{className:"p-6",children:[r&&r.role!=="admin"&&e&&e!==r.id&&o.jsxs("div",{className:"mb-6 p-4 bg-warning/10 border border-warning/20 rounded-lg flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-warning mr-2 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-warning font-medium",children:"Accès limité"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"En tant que point relais, vous ne pouvez modifier que vos propres informations."})]})]}),a&&o.jsx("div",{className:"mb-4 p-4 bg-error/10 border border-error/20 rounded-lg text-error",children:a}),g&&o.jsx("div",{className:"mb-4 p-4 bg-success/10 border border-success/20 rounded-lg text-success",children:"Point relais enregistré avec succès!"}),o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsx(ur,{label:"Nom du point relais",name:"businessName",value:h.businessName||"",onChange:w,placeholder:"Ex: PC Relais Paris",required:!0}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Adresse complète"}),o.jsxs("div",{className:"relative",children:[o.jsx(iB,{label:"",placeholder:"Entrez l'adresse complète",value:h.address||"",onChange:F=>p(I=>({...I,address:F})),onPlaceSelect:F=>{var I;if(F&&F.formatted_address){const N=(I=F.geometry)==null?void 0:I.location;C(F.formatted_address,N)}}}),h.coordinates&&o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Coordonnées: ",parseFloat(String(h.coordinates.latitude)).toFixed(6),",",parseFloat(String(h.coordinates.longitude)).toFixed(6)]}),o.jsx("div",{className:"absolute right-3 top-3 text-gray-400",children:o.jsx(Mr,{className:"h-5 w-5"})})]}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"L'adresse sera automatiquement géocodée pour calculer les distances."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(ur,{label:"Email",name:"email",type:"email",value:h.email||"",onChange:w,placeholder:"contact@pcrelais.fr",required:!0}),o.jsx(ur,{label:"Téléphone",name:"phoneNumber",value:h.phoneNumber||"",onChange:w,placeholder:"01 23 45 67 89"})]}),o.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-lg mb-6",children:[o.jsxs("div",{className:"flex items-start mb-3",children:[o.jsx(Gn,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-800",children:"Horaires d'ouverture"}),o.jsx("p",{className:"text-sm text-blue-600",children:"Ces horaires seront affichés aux clients lors de la sélection d'un point relais."})]})]}),o.jsx(mU,{value:h.openingHours,onChange:y})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx(he,{type:"submit",variant:"primary",size:"lg",disabled:n,children:n?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-white rounded-full"}),"Enregistrement..."]}):o.jsxs("span",{className:"flex items-center",children:[o.jsx(Z1,{className:"h-5 w-5 mr-2"}),"Enregistrer"]})})})]})]})})]})})},wU=()=>{const e=kt(),{user:t}=lt(),[r,n]=H.useState([]),[A,a]=H.useState(!0),[u,g]=H.useState(""),[f,h]=H.useState(!1),[p,w]=H.useState({first_name:"",last_name:"",email:"",phone:"",specialization:"",password:""}),[y,C]=H.useState(null),[b,F]=H.useState(null);H.useEffect(()=>{if((t==null?void 0:t.role)!=="admin"){e("/");return}I()},[t,e]);const I=async()=>{try{a(!0);const{data:j,error:Q}=await Z.from("profiles").select("*").eq("role","technician").order("last_name",{ascending:!0});if(Q)throw Q;n(j||[])}catch(j){console.error("Erreur lors de la récupération des techniciens:",j)}finally{a(!1)}},N=j=>{const{name:Q,value:D}=j.target;w(L=>({...L,[Q]:D}))},v=async j=>{j.preventDefault(),C(null);try{if(!p.first_name||!p.last_name||!p.email||!p.password){C("Veuillez remplir tous les champs obligatoires.");return}const{data:Q,error:D}=await Z.auth.signUp({email:p.email,password:p.password,options:{data:{first_name:p.first_name,last_name:p.last_name,role:"technician"}}});if(D)throw D;if(Q.user){const{error:L}=await Z.from("profiles").update({first_name:p.first_name,last_name:p.last_name,phone:p.phone,specialization:p.specialization,is_active:!0,role:"technician"}).eq("id",Q.user.id);if(L)throw L}w({first_name:"",last_name:"",email:"",phone:"",specialization:"",password:""}),F("Technicien ajouté avec succès."),h(!1),I(),setTimeout(()=>{F(null)},3e3)}catch(Q){console.error("Erreur lors de l'ajout du technicien:",Q),C(Q.message||"Une erreur est survenue lors de l'ajout du technicien.")}},_=async(j,Q)=>{try{console.log(`Tentative de modification du statut pour le technicien ${j}`),F("Pour activer/désactiver les techniciens, veuillez d'abord exécuter la migration 11_add_is_active_column.sql."),setTimeout(()=>F(null),5e3);try{const{data:D,error:L}=await Z.rpc("check_column_exists",{table_name:"profiles",column_name:"is_active"});if(L){console.error("Erreur lors de la vérification de la colonne:",L),C("Impossible de vérifier si la colonne is_active existe. Veuillez exécuter la migration 11_add_is_active_column.sql.");return}if(D){const{error:M}=await Z.from("profiles").update({is_active:!Q}).eq("id",j);if(M)throw M;n(k=>k.map(P=>P.id===j?{...P,is_active:!Q}:P)),F("Statut du technicien mis à jour avec succès.")}else C("La colonne is_active n'existe pas encore. Veuillez exécuter la migration 11_add_is_active_column.sql.")}catch(D){console.error("Erreur lors de la modification du statut:",D),C(D.message||"Erreur lors de la modification du statut du technicien.")}}catch(D){console.error("Erreur lors de la modification du statut:",D),C(D.message||"Erreur lors de la modification du statut du technicien."),setTimeout(()=>C(null),3e3)}},S=r.filter(j=>{var M;const Q=`${j.first_name} ${j.last_name}`.toLowerCase(),D=((M=j.email)==null?void 0:M.toLowerCase())||"",L=u.toLowerCase();return Q.includes(L)||D.includes(L)});return o.jsxs("div",{className:"container mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",className:"mr-4",onClick:()=>e("/admin"),children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des techniciens"}),o.jsx("p",{className:"text-gray-600",children:"Ajoutez, modifiez ou supprimez des techniciens"})]})]}),b&&o.jsx("div",{className:"mb-6 p-4 bg-success/10 border border-success/20 rounded-lg text-success",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Tr,{className:"h-5 w-5 mr-2"}),o.jsx("p",{children:b})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[o.jsxs("div",{className:"relative w-full md:w-64",children:[o.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx("input",{type:"text",placeholder:"Rechercher un technicien...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:u,onChange:j=>g(j.target.value)})]}),o.jsx(he,{variant:"primary",onClick:()=>h(!f),children:f?o.jsxs(o.Fragment,{children:[o.jsx(__,{className:"h-5 w-5 mr-2"}),"Annuler"]}):o.jsxs(o.Fragment,{children:[o.jsx(pf,{className:"h-5 w-5 mr-2"}),"Ajouter un technicien"]})})]}),f&&o.jsxs(J,{className:"mb-6",children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Ajouter un nouveau technicien"})}),o.jsxs(J.Content,{children:[y&&o.jsx("div",{className:"mb-4 p-3 bg-error/10 border border-error/20 rounded-md text-error text-sm",children:y}),o.jsxs("form",{onSubmit:v,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Prénom ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"text",name:"first_name",value:p.first_name,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"text",name:"last_name",value:p.last_name,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"email",name:"email",value:p.email,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),o.jsx("input",{type:"tel",name:"phone",value:p.phone,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spécialisation"}),o.jsx("input",{type:"text",name:"specialization",value:p.specialization,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ex: Smartphones, Ordinateurs..."})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mot de passe ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"password",name:"password",value:p.password,onChange:N,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(he,{type:"submit",variant:"primary",children:"Ajouter le technicien"})})]})]})]}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-0",children:A?o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):S.length===0?o.jsx("div",{className:"p-6 text-center text-gray-500",children:u?"Aucun technicien ne correspond à votre recherche.":"Aucun technicien disponible."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spécialisation"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'ajout"}),o.jsx("th",{scope:"col",className:"relative px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(j=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsx("div",{children:o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[j.first_name," ",j.last_name]})})})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-gray-900",children:j.email}),j.phone&&o.jsx("div",{className:"text-sm text-gray-500",children:j.phone})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:j.specialization||"Non spécifiée"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Jt,{variant:j.is_active===!1?"error":"success",children:j.is_active===!1?"Inactif":"Actif"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(j.created_at).toLocaleDateString("fr-FR")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(he,{variant:"outline",size:"sm",onClick:()=>_(j.id,!!j.is_active),children:j.is_active?"Désactiver":"Activer"}),o.jsx(he,{variant:"ghost",size:"sm",onClick:()=>e(`/admin/technicians/edit/${j.id}`),children:o.jsx(J1,{className:"h-4 w-4"})})]})})]},j.id))})]})})})})]})},yU=()=>{const{id:e}=Al(),t=kt(),[r,n]=H.useState(!0),[A,a]=H.useState(!1),[u,g]=H.useState(null),[f,h]=H.useState(null),[p,w]=H.useState({first_name:"",last_name:"",email:"",phone:"",specialization:"",is_active:!0});H.useEffect(()=>{(async()=>{try{if(n(!0),!e){g("ID du technicien manquant");return}const{data:F,error:I}=await Z.from("profiles").select("*").eq("id",e).eq("role","technician").single();if(I)throw I;if(!F){g("Technicien non trouvé");return}w({first_name:F.first_name||"",last_name:F.last_name||"",email:F.email||"",phone:F.phone||"",specialization:F.specialization||"",is_active:F.is_active!==!1})}catch(F){console.error("Erreur lors de la récupération du technicien:",F),g(F.message||"Erreur lors de la récupération du technicien")}finally{n(!1)}})()},[e]);const y=b=>{const{name:F,value:I,type:N}=b.target;if(N==="checkbox"){const v=b.target.checked;w(_=>({..._,[F]:v}))}else w(v=>({...v,[F]:I}))},C=async b=>{b.preventDefault();try{if(a(!0),g(null),!e){g("ID du technicien manquant");return}const{data:F,error:I}=await Z.rpc("check_column_exists",{table_name:"profiles",column_name:"is_active"});if(I)throw console.error("Erreur lors de la vérification de la colonne:",I),new Error("Impossible de vérifier si la colonne is_active existe. Veuillez exécuter la migration 11_add_is_active_column.sql.");const{data:N,error:v}=await Z.rpc("check_column_exists",{table_name:"profiles",column_name:"specialization"});if(v)throw console.error("Erreur lors de la vérification de la colonne:",v),new Error("Impossible de vérifier si la colonne specialization existe. Veuillez exécuter la migration 11_add_is_active_column.sql.");const _={first_name:p.first_name,last_name:p.last_name,phone:p.phone||null};F&&(_.is_active=p.is_active),N&&(_.specialization=p.specialization||null);const{error:S}=await Z.from("profiles").update(_).eq("id",e);if(S)throw S;h("Technicien mis à jour avec succès"),setTimeout(()=>{t("/admin/technicians")},2e3)}catch(F){console.error("Erreur lors de la mise à jour du technicien:",F),g(F.message||"Erreur lors de la mise à jour du technicien")}finally{a(!1)}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",onClick:()=>t("/admin/technicians"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Modifier le technicien"})]}),u&&o.jsx("div",{className:"mb-6 p-4 bg-error/10 border border-error/20 rounded-md text-error",children:u}),f&&o.jsx("div",{className:"mb-6 p-4 bg-success/10 border border-success/20 rounded-md text-success",children:f}),r?o.jsx("div",{className:"flex justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Informations du technicien"})}),o.jsx(J.Content,{children:o.jsxs("form",{onSubmit:C,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Prénom ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"text",name:"first_name",value:p.first_name,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("input",{type:"text",name:"last_name",value:p.last_name,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",o.jsx("span",{className:"text-gray-400 text-xs",children:"(non modifiable)"})]}),o.jsx("input",{type:"email",name:"email",value:p.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 bg-gray-100 rounded-md cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),o.jsx("input",{type:"tel",name:"phone",value:p.phone||"",onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spécialisation"}),o.jsx("input",{type:"text",name:"specialization",value:p.specialization||"",onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:p.is_active,onChange:y,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),o.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Technicien actif"})]})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(he,{type:"button",variant:"outline",onClick:()=>t("/admin/technicians"),className:"mr-2",children:"Annuler"}),o.jsx(he,{type:"submit",disabled:A,children:A?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-white rounded-full"}),"Enregistrement..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Z1,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]})]})})]})]})},BU=()=>{lt();const e=kt(),[t,r]=H.useState([]),[n,A]=H.useState([]),[a,u]=H.useState(""),[g,f]=H.useState(!0),[h,p]=H.useState(null),[w,y]=H.useState(null);H.useEffect(()=>{C()},[]),H.useEffect(()=>{if(a){const N=a.toLowerCase(),v=t.filter(_=>_.first_name.toLowerCase().includes(N)||_.last_name.toLowerCase().includes(N)||_.email.toLowerCase().includes(N)||_.role.toLowerCase().includes(N));A(v)}else A(t)},[a,t]);const C=async()=>{try{f(!0),p(null);const{data:N,error:v}=await Z.from("profiles").select("*").order("created_at",{ascending:!1});if(v)throw v;N&&(r(N),A(N))}catch(N){console.error("Erreur lors de la récupération des utilisateurs:",N),p(N.message||"Erreur lors de la récupération des utilisateurs.")}finally{f(!1)}},b=async(N,v)=>{try{console.log(`Tentative de modification du statut pour l'utilisateur ${N}`);try{const{data:_,error:S}=await Z.rpc("check_column_exists",{table_name:"profiles",column_name:"is_active"});if(S){console.error("Erreur lors de la vérification de la colonne:",S),p("Impossible de vérifier si la colonne is_active existe. Veuillez exécuter la migration 11_add_is_active_column.sql.");return}if(_){const{error:j}=await Z.from("profiles").update({is_active:!v}).eq("id",N);if(j)throw j;r(Q=>Q.map(D=>D.id===N?{...D,is_active:!v}:D)),y("Statut de l'utilisateur mis à jour avec succès."),setTimeout(()=>y(null),3e3)}else p("La colonne is_active n'existe pas encore. Veuillez exécuter la migration 11_add_is_active_column.sql."),setTimeout(()=>p(null),3e3)}catch(_){console.error("Erreur lors de la modification du statut:",_),p(_.message||"Erreur lors de la modification du statut de l'utilisateur."),setTimeout(()=>p(null),3e3)}}catch(_){console.error("Erreur lors de la modification du statut:",_),p(_.message||"Erreur lors de la modification du statut de l'utilisateur."),setTimeout(()=>p(null),3e3)}},F=N=>{switch(N.toLowerCase()){case"admin":return"primary";case"technician":return"success";case"relay":case"relaypoint":return"warning";case"client":return"secondary";default:return"default"}},I=N=>{switch(N.toLowerCase()){case"admin":return"Administrateur";case"technician":return"Technicien";case"relay":case"relaypoint":return"Point Relais";case"client":return"Client";default:return N}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",onClick:()=>e("/admin"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]}),h&&o.jsx("div",{className:"mb-6 p-4 bg-error/10 border border-error/20 rounded-md text-error",children:h}),w&&o.jsx("div",{className:"mb-6 p-4 bg-success/10 border border-success/20 rounded-md text-success",children:w}),o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:o.jsxs("div",{className:"relative w-full md:w-64",children:[o.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:a,onChange:N=>u(N.target.value)})]})}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-0",children:g?o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.length===0?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun utilisateur trouvé."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(N=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsx("div",{children:o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.first_name," ",N.last_name]})})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(ol,{className:"h-4 w-4 mr-1"}),N.email]}),N.phone&&o.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[o.jsx(Wu,{className:"h-4 w-4 mr-1"}),N.phone]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Jt,{variant:F(N.role),children:I(N.role)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Jt,{variant:N.is_active===!1?"error":"success",children:N.is_active===!1?"Inactif":"Actif"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(N.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("div",{className:"flex justify-end space-x-2",children:o.jsx(he,{variant:"outline",size:"sm",onClick:()=>b(N.id,!!N.is_active),children:N.is_active===!1?"Activer":"Désactiver"})})})]},N.id))})]})})})})]})},vU=()=>{lt();const e=kt(),[t,r]=H.useState([]),[n,A]=H.useState(!0),[a,u]=H.useState(!1),[g,f]=H.useState(null),[h,p]=H.useState(null);H.useEffect(()=>{w()},[]);const w=async()=>{try{A(!0),f(null);const{data:b,error:F}=await Z.from("system_settings").select("*").limit(1);if(F&&(F.code==="404"||F.message.includes("does not exist")))r([{id:"default-1",key:"company_name",value:"PC Relais",description:"Nom de l'entreprise",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-2",key:"contact_email",value:"contact@pcrelais.fr",description:"Email de contact",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-3",key:"contact_phone",value:"01 23 45 67 89",description:"Téléphone de contact",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-4",key:"default_repair_price",value:"49.99",description:"Prix par défaut d'une réparation (€)",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-5",key:"max_repair_days",value:"14",description:"Nombre maximum de jours pour une réparation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),f("La table des paramètres système n'existe pas encore. Les paramètres affichés sont des valeurs par défaut et ne seront pas enregistrés.");else{const{data:N,error:v}=await Z.from("system_settings").select("*").order("key",{ascending:!0});if(v)throw v;N&&N.length>0?r(N):(r([{id:"default-1",key:"company_name",value:"PC Relais",description:"Nom de l'entreprise",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-2",key:"contact_email",value:"contact@pcrelais.fr",description:"Email de contact",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-3",key:"contact_phone",value:"01 23 45 67 89",description:"Téléphone de contact",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-4",key:"default_repair_price",value:"49.99",description:"Prix par défaut d'une réparation (€)",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-5",key:"max_repair_days",value:"14",description:"Nombre maximum de jours pour une réparation",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),f("Aucun paramètre système trouvé. Les paramètres affichés sont des valeurs par défaut."))}}catch(b){console.error("Erreur lors de la récupération des paramètres:",b),f(b.message||"Erreur lors de la récupération des paramètres système.")}finally{A(!1)}},y=(b,F)=>{r(I=>I.map(N=>N.id===b?{...N,value:F}:N))},C=async()=>{try{u(!0),f(null);const{data:b,error:F}=await Z.from("system_settings").select("*").limit(1);if(F&&(F.code==="404"||F.message.includes("does not exist"))){f("La table des paramètres système n'existe pas encore. Veuillez exécuter la migration pour créer cette table.");return}for(const N of t){const{error:v}=await Z.from("system_settings").upsert({id:N.id.startsWith("default-")?void 0:N.id,key:N.key,value:N.value,description:N.description,updated_at:new Date().toISOString()});if(v)throw v}p("Paramètres système mis à jour avec succès."),setTimeout(()=>p(null),3e3),w()}catch(b){console.error("Erreur lors de la sauvegarde des paramètres:",b),f(b.message||"Erreur lors de la sauvegarde des paramètres système.")}finally{u(!1)}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",onClick:()=>e("/admin"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Paramètres du système"})]}),g&&o.jsx("div",{className:"mb-6 p-4 bg-error/10 border border-error/20 rounded-md text-error",children:g}),h&&o.jsx("div",{className:"mb-6 p-4 bg-success/10 border border-success/20 rounded-md text-success",children:h}),o.jsxs("div",{className:"mb-6 flex justify-end space-x-2",children:[o.jsxs(he,{variant:"outline",onClick:w,disabled:n,children:[o.jsx(p_,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Rafraîchir"]}),o.jsx(he,{variant:"primary",onClick:C,disabled:a||n,children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-white rounded-full"}),"Enregistrement..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Z1,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Paramètres généraux"})}),o.jsx(J.Content,{children:n?o.jsx("div",{className:"flex justify-center py-6",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsx("div",{className:"space-y-6",children:t.map(b=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:`setting-${b.id}`,className:"block text-sm font-medium text-gray-700",children:b.description}),o.jsx("p",{className:"text-xs text-gray-500",children:b.key})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("input",{id:`setting-${b.id}`,type:"text",value:b.value,onChange:F=>y(b.id,F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})})]},b.id))})})]}),o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Création de la table des paramètres"}),o.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Si vous rencontrez des erreurs concernant la table des paramètres, vous pouvez créer la migration SQL suivante :"}),o.jsx("pre",{className:"bg-gray-800 text-white p-4 rounded-md text-sm overflow-x-auto",children:`-- Création de la table des paramètres système
CREATE TABLE IF NOT EXISTS system_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  key TEXT NOT NULL UNIQUE,
  value TEXT NOT NULL,
  description TEXT,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- Création d'une fonction pour vérifier si une table existe
CREATE OR REPLACE FUNCTION check_table_exists(table_name text)
RETURNS boolean
LANGUAGE plpgsql
SECURITY DEFINER
AS $$
DECLARE
  table_exists boolean;
BEGIN
  SELECT EXISTS (
    SELECT 1
    FROM information_schema.tables
    WHERE table_schema = 'public'
      AND table_name = $1
  ) INTO table_exists;
  
  RETURN table_exists;
END;
$$;

-- Autoriser l'accès à cette fonction pour tous les utilisateurs authentifiés
GRANT EXECUTE ON FUNCTION check_table_exists TO authenticated;

-- Ajouter des paramètres par défaut
INSERT INTO system_settings (key, value, description)
VALUES
  ('company_name', 'PC Relais', 'Nom de l''entreprise'),
  ('contact_email', 'contact@pcrelais.fr', 'Email de contact'),
  ('contact_phone', '01 23 45 67 89', 'Téléphone de contact'),
  ('default_repair_price', '49.99', 'Prix par défaut d''une réparation (€)'),
  ('max_repair_days', '14', 'Nombre maximum de jours pour une réparation')
ON CONFLICT (key) DO NOTHING;

-- Ajouter les politiques RLS
ALTER TABLE system_settings ENABLE ROW LEVEL SECURITY;

-- Politique pour les administrateurs (lecture et écriture)
CREATE POLICY admin_system_settings ON system_settings
  FOR ALL
  USING (auth.uid() IN (SELECT id FROM profiles WHERE role = 'admin'))
  WITH CHECK (auth.uid() IN (SELECT id FROM profiles WHERE role = 'admin'));

-- Politique pour les autres utilisateurs (lecture seule)
CREATE POLICY read_system_settings ON system_settings
  FOR SELECT
  USING (true);`})]})]})},CU=()=>{lt();const e=kt(),[t,r]=H.useState(!0),[n,A]=H.useState(null),[a,u]=H.useState([]),[g,f]=H.useState([]),[h,p]=H.useState([]),[w,y]=H.useState([]),[C,b]=H.useState(0),[F,I]=H.useState(0),[N,v]=H.useState(0),[_,S]=H.useState(0);H.useEffect(()=>{j()},[]);const j=async()=>{var D;try{r(!0),A(null);const{count:L}=await Z.from("repair_requests").select("*",{count:"exact",head:!0});b(L||0);const{data:M,error:k}=await Z.from("repair_requests").select(`
          status_id,
          repair_statuses (
            code,
            name
          )
        `);if(k)throw k;if(M){const Y={};M.forEach(se=>{var fe;const Qe=((fe=se.repair_statuses)==null?void 0:fe.code)||"UNKNOWN";Y[Qe]=(Y[Qe]||0)+1});const ue={SUBMITTED:"#3b82f6",RECEIVED:"#8b5cf6",TO_DIAGNOSE:"#ec4899",IN_REPAIR:"#f97316",REPAIRED:"#10b981",READY_FOR_PICKUP:"#14b8a6",COMPLETED:"#22c55e",CANCELLED:"#ef4444",UNKNOWN:"#6b7280"},ee=Object.entries(Y).map(([se,Qe])=>({status:se,count:Qe,color:ue[se]||"#6b7280"}));u(ee);const $=Y.COMPLETED||0,Ae=L?L-$:0;v($),S(Ae)}const{data:P,error:z}=await Z.from("repair_requests").select("created_at");if(z)throw z;if(P){const Y={};P.forEach(ee=>{const $=new Date(ee.created_at),Ae=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`;Y[Ae]=(Y[Ae]||0)+1});const ue=Object.entries(Y).sort(([ee],[$])=>ee.localeCompare($)).map(([ee,$])=>{const[Ae,se]=ee.split("-");return{month:new Date(parseInt(Ae),parseInt(se)-1,1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),count:$}});f(ue)}const{data:X,error:ce}=await Z.from("repair_requests").select(`
          drop_off_relay_id,
          profiles!repair_requests_drop_off_relay_id_fkey (
            first_name,
            last_name
          )
        `);if(ce)throw ce;if(X){const Y={},ue={};X.forEach($=>{var Ae,se;if($.drop_off_relay_id){Y[$.drop_off_relay_id]=(Y[$.drop_off_relay_id]||0)+1;const Qe=((Ae=$.profiles)==null?void 0:Ae.first_name)||"",fe=((se=$.profiles)==null?void 0:se.last_name)||"";ue[$.drop_off_relay_id]=`${Qe} ${fe}`.trim()||"Point relais inconnu"}});const ee=Object.entries(Y).map(([$,Ae])=>({relay_name:ue[$],count:Ae})).sort(($,Ae)=>Ae.count-$.count);p(ee)}const{data:G,error:re}=await Z.from("repair_requests").select(`
          technician_id,
          profiles!repair_requests_technician_id_fkey (
            first_name,
            last_name
          )
        `);if(re)throw re;if(G){const Y={},ue={};G.forEach($=>{var Ae,se;if($.technician_id){Y[$.technician_id]=(Y[$.technician_id]||0)+1;const Qe=((Ae=$.profiles)==null?void 0:Ae.first_name)||"",fe=((se=$.profiles)==null?void 0:se.last_name)||"";ue[$.technician_id]=`${Qe} ${fe}`.trim()||"Technicien inconnu"}});const ee=Object.entries(Y).map(([$,Ae])=>({technician_name:ue[$],count:Ae})).sort(($,Ae)=>Ae.count-$.count);y(ee)}const{data:oe,error:le}=await Z.from("repair_requests").select("created_at, updated_at").eq("status_id",((D=(await Z.from("repair_statuses").select("id").eq("code","COMPLETED").single()).data)==null?void 0:D.id)||"");if(le)throw le;if(oe&&oe.length>0){let Y=0;oe.forEach(ue=>{const ee=new Date(ue.created_at),$=new Date(ue.updated_at),Ae=Math.abs($.getTime()-ee.getTime()),se=Math.ceil(Ae/(1e3*60*60*24));Y+=se}),I(Math.round(Y/oe.length))}}catch(L){console.error("Erreur lors de la récupération des statistiques:",L),A(L.message||"Erreur lors de la récupération des statistiques.")}finally{r(!1)}},Q=()=>{try{let D="data:text/csv;charset=utf-8,";D+=`Catégorie,Donnée,Valeur
`,a.forEach(k=>{D+=`Statut,${k.status},${k.count}
`}),g.forEach(k=>{D+=`Mois,${k.month},${k.count}
`}),h.forEach(k=>{D+=`Point Relais,${k.relay_name},${k.count}
`}),w.forEach(k=>{D+=`Technicien,${k.technician_name},${k.count}
`}),D+=`Global,Total des réparations,${C}
`,D+=`Global,Réparations terminées,${N}
`,D+=`Global,Réparations en cours,${_}
`,D+=`Global,Temps moyen de réparation (jours),${F}
`;const L=encodeURI(D),M=document.createElement("a");M.setAttribute("href",L),M.setAttribute("download",`pc-relais-statistiques-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(M),M.click(),document.body.removeChild(M)}catch(D){console.error("Erreur lors de l'exportation des données:",D),A("Erreur lors de l'exportation des données.")}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",onClick:()=>e("/admin"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Rapports et statistiques"})]}),n&&o.jsx("div",{className:"mb-6 p-4 bg-error/10 border border-error/20 rounded-md text-error",children:n}),o.jsx("div",{className:"mb-6 flex justify-end",children:o.jsxs(he,{variant:"outline",onClick:Q,disabled:t,children:[o.jsx(zu,{className:"h-4 w-4 mr-2"}),"Exporter les données (CSV)"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(J,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(rp,{className:"h-8 w-8 text-blue-500 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total des réparations"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:t?"...":C})]})})}),o.jsx(J,{className:"bg-gradient-to-br from-green-50 to-green-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(nB,{className:"h-8 w-8 text-green-500 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Réparations terminées"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:t?"...":N})]})})}),o.jsx(J,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(rp,{className:"h-8 w-8 text-orange-500 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Réparations en cours"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:t?"...":_})]})})}),o.jsx(J,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-none",children:o.jsx(J.Content,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(su,{className:"h-8 w-8 text-purple-500 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Temps moyen de réparation"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:t?"...":`${F} jours`})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations par statut"})}),o.jsx(J.Content,{children:t?o.jsx("div",{className:"flex justify-center py-6",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.length===0?o.jsx("div",{className:"text-center py-6 text-gray-500",children:"Aucune donnée disponible"}):o.jsx("div",{className:"space-y-4",children:a.map((D,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-32 text-sm font-medium",children:D.status}),o.jsx("div",{className:"flex-1 mx-2",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"h-2.5 rounded-full",style:{width:`${D.count/C*100}%`,backgroundColor:D.color}})})}),o.jsx("div",{className:"w-12 text-right text-sm font-medium",children:D.count})]},L))})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations par mois"})}),o.jsx(J.Content,{children:t?o.jsx("div",{className:"flex justify-center py-6",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g.length===0?o.jsx("div",{className:"text-center py-6 text-gray-500",children:"Aucune donnée disponible"}):o.jsx("div",{className:"space-y-4",children:g.map((D,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-40 text-sm font-medium",children:D.month}),o.jsx("div",{className:"flex-1 mx-2",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"h-2.5 rounded-full bg-blue-600",style:{width:`${D.count/Math.max(...g.map(M=>M.count))*100}%`}})})}),o.jsx("div",{className:"w-12 text-right text-sm font-medium",children:D.count})]},L))})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations par point relais"})}),o.jsx(J.Content,{children:t?o.jsx("div",{className:"flex justify-center py-6",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):h.length===0?o.jsx("div",{className:"text-center py-6 text-gray-500",children:"Aucune donnée disponible"}):o.jsx("div",{className:"space-y-4",children:h.map((D,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-40 text-sm font-medium truncate",title:D.relay_name,children:D.relay_name}),o.jsx("div",{className:"flex-1 mx-2",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"h-2.5 rounded-full bg-yellow-500",style:{width:`${D.count/Math.max(...h.map(M=>M.count))*100}%`}})})}),o.jsx("div",{className:"w-12 text-right text-sm font-medium",children:D.count})]},L))})})]}),o.jsxs(J,{children:[o.jsx(J.Header,{children:o.jsx(J.Title,{children:"Réparations par technicien"})}),o.jsx(J.Content,{children:t?o.jsx("div",{className:"flex justify-center py-6",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):w.length===0?o.jsx("div",{className:"text-center py-6 text-gray-500",children:"Aucune donnée disponible"}):o.jsx("div",{className:"space-y-4",children:w.map((D,L)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-40 text-sm font-medium truncate",title:D.technician_name,children:D.technician_name}),o.jsx("div",{className:"flex-1 mx-2",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"h-2.5 rounded-full bg-green-600",style:{width:`${D.count/Math.max(...w.map(M=>M.count))*100}%`}})})}),o.jsx("div",{className:"w-12 text-right text-sm font-medium",children:D.count})]},L))})})]})]})]})};var Fe;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var Wm=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Xm;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Xm||(Xm={}));function EU(e){return Object.values(Fe).includes(e)}var wu;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wu||(wu={}));var bU=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[wu.SCAN_TYPE_CAMERA,wu.SCAN_TYPE_FILE],e}(),bv=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Wm.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Wm.get(t))},e}(),qm=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),zf;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(zf||(zf={}));var _U=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:zf.UNKWOWN_ERROR}},e}(),NU=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function hs(e){return typeof e>"u"||e===null}var Gi=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),_v=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var A=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(A),u=Object.keys(t),g=0,f=u;g<f.length;g++){var h=f[g];if(a.has(h))return r.logError("".concat(h," is not supported videoConstaints."),!0),!1}return!0},e}(),Wf={exports:{}};(function(e,t){(function(r,n){n(t)})(Te,function(r){function n(T){return T==null}var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,s){T.__proto__=s}||function(T,s){for(var i in s)s.hasOwnProperty(i)&&(T[i]=s[i])};function a(T,s){A(T,s);function i(){this.constructor=T}T.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}function u(T,s){var i=Object.setPrototypeOf;i?i(T,s):T.__proto__=s}function g(T,s){s===void 0&&(s=T.constructor);var i=Error.captureStackTrace;i&&i(T,s)}var f=function(T){a(s,T);function s(i){var l=this.constructor,c=T.call(this,i)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),g(c),c}return s}(Error);class h extends f{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}h.kind="Exception";class p extends h{}p.kind="ArgumentException";class w extends h{}w.kind="IllegalArgumentException";class y{constructor(s){if(this.binarizer=s,s===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,i){return this.binarizer.getBlackRow(s,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,i,l,c){const d=this.binarizer.getLuminanceSource().crop(s,i,l,c);return new y(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends h{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class b{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(s,i,l,c,d){for(;d--;)l[c++]=s[i++]}static currentTimeMillis(){return Date.now()}}class I extends h{}I.kind="IndexOutOfBoundsException";class N extends I{constructor(s=void 0,i=void 0){super(i),this.index=s,this.message=i}}N.kind="ArrayIndexOutOfBoundsException";class v{static fill(s,i){for(let l=0,c=s.length;l<c;l++)s[l]=i}static fillWithin(s,i,l,c){v.rangeCheck(s.length,i,l);for(let d=i;d<l;d++)s[d]=c}static rangeCheck(s,i,l){if(i>l)throw new w("fromIndex("+i+") > toIndex("+l+")");if(i<0)throw new N(i);if(l>s)throw new N(l)}static asList(...s){return s}static create(s,i,l){return Array.from({length:s}).map(d=>Array.from({length:i}).fill(l))}static createInt32Array(s,i,l){return Array.from({length:s}).map(d=>Int32Array.from({length:i}).fill(l))}static equals(s,i){if(!s||!i||!s.length||!i.length||s.length!==i.length)return!1;for(let l=0,c=s.length;l<c;l++)if(s[l]!==i[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let i=1;for(const l of s)i=31*i+l;return i}static fillUint8Array(s,i){for(let l=0;l!==s.length;l++)s[l]=i}static copyOf(s,i){return s.slice(0,i)}static copyOfUint8Array(s,i){if(s.length<=i){const l=new Uint8Array(i);return l.set(s),l}return s.slice(0,i)}static copyOfRange(s,i,l){const c=l-i,d=new Int32Array(c);return F.arraycopy(s,i,d,0,c),d}static binarySearch(s,i,l){l===void 0&&(l=v.numberComparator);let c=0,d=s.length-1;for(;c<=d;){const x=d+c>>1,m=l(i,s[x]);if(m>0)c=x+1;else if(m<0)d=x-1;else return x}return-c-1}static numberComparator(s,i){return s-i}}class _{static numberOfTrailingZeros(s){let i;if(s===0)return 32;let l=31;return i=s<<16,i!==0&&(l-=16,s=i),i=s<<8,i!==0&&(l-=8,s=i),i=s<<4,i!==0&&(l-=4,s=i),i=s<<2,i!==0&&(l-=2,s=i),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let i=1;return s>>>16||(i+=16,s<<=16),s>>>24||(i+=8,s<<=8),s>>>28||(i+=4,s<<=4),s>>>30||(i+=2,s<<=2),i-=s>>>31,i}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,i){return Math.trunc(s/i)}static parseInt(s,i=void 0){return parseInt(s,i)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class S{constructor(s,i){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,i==null?this.bits=S.makeArray(s):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const i=S.makeArray(s);F.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const i=this.size;if(s>=i)return i;const l=this.bits;let c=Math.floor(s/32),d=l[c];d&=~((1<<(s&31))-1);const x=l.length;for(;d===0;){if(++c===x)return i;d=l[c]}const m=c*32+_.numberOfTrailingZeros(d);return m>i?i:m}getNextUnset(s){const i=this.size;if(s>=i)return i;const l=this.bits;let c=Math.floor(s/32),d=~l[c];d&=~((1<<(s&31))-1);const x=l.length;for(;d===0;){if(++c===x)return i;d=~l[c]}const m=c*32+_.numberOfTrailingZeros(d);return m>i?i:m}setBulk(s,i){this.bits[Math.floor(s/32)]=i}setRange(s,i){if(i<s||s<0||i>this.size)throw new w;if(i===s)return;i--;const l=Math.floor(s/32),c=Math.floor(i/32),d=this.bits;for(let x=l;x<=c;x++){const m=x>l?0:s&31,E=(2<<(x<c?31:i&31))-(1<<m);d[x]|=E}}clear(){const s=this.bits.length,i=this.bits;for(let l=0;l<s;l++)i[l]=0}isRange(s,i,l){if(i<s||s<0||i>this.size)throw new w;if(i===s)return!0;i--;const c=Math.floor(s/32),d=Math.floor(i/32),x=this.bits;for(let m=c;m<=d;m++){const B=m>c?0:s&31,U=(2<<(m<d?31:i&31))-(1<<B)&4294967295;if((x[m]&U)!==(l?U:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,i){if(i<0||i>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let l=i;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const i=s.size;this.ensureCapacity(this.size+i);for(let l=0;l<i;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new w("Sizes don't match");const i=this.bits;for(let l=0,c=i.length;l<c;l++)i[l]^=s.bits[l]}toBytes(s,i,l,c){for(let d=0;d<c;d++){let x=0;for(let m=0;m<8;m++)this.get(s)&&(x|=1<<7-m),s++;i[l+d]=x}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),l=i+1,c=this.bits;for(let d=0;d<l;d++){let x=c[d];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,s[i-d]=x}if(this.size!==l*32){const d=l*32-this.size;let x=s[0]>>>d;for(let m=1;m<l;m++){const B=s[m];x|=B<<32-d,s[m-1]=x,x=B>>>d}s[l-1]=x}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof S))return!1;const i=s;return this.size===i.size&&v.equals(this.bits,i.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let s="";for(let i=0,l=this.size;i<l;i++)i&7||(s+=" "),s+=this.get(i)?"X":".";return s}clone(){return new S(this.size,this.bits.slice())}}var j;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(j||(j={}));var Q=j;class D extends h{static getFormatInstance(){return new D}}D.kind="FormatException";var L;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(L||(L={}));class M{constructor(s,i,l,...c){this.valueIdentifier=s,this.name=l,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,M.VALUE_IDENTIFIER_TO_ECI.set(s,this),M.NAME_TO_ECI.set(l,this);const d=this.values;for(let x=0,m=d.length;x!==m;x++){const B=d[x];M.VALUES_TO_ECI.set(B,this)}for(const x of c)M.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new D("incorect value");const i=M.VALUES_TO_ECI.get(s);if(i===void 0)throw new D("incorect value");return i}static getCharacterSetECIByName(s){const i=M.NAME_TO_ECI.get(s);if(i===void 0)throw new D("incorect value");return i}equals(s){if(!(s instanceof M))return!1;const i=s;return this.getName()===i.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(L.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(L.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(L.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(L.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(L.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(L.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(L.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(L.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(L.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(L.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(L.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(L.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(L.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(L.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(L.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(L.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(L.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(L.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(L.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(L.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(L.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(L.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(L.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(L.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(L.Big5,28,"Big5"),M.GB18030=new M(L.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(L.EUC_KR,30,"EUC_KR","EUC-KR");class k extends h{}k.kind="UnsupportedOperationException";class P{static decode(s,i){const l=this.encodingName(i);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!P.isBrowser()&&s==="ISO-8859-1"}static encode(s,i){const l=this.encodingName(i);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof M?s:M.getCharacterSetECIByName(s)}static decodeFallback(s,i){const l=this.encodingCharacterSet(i);if(P.isDecodeFallbackSupported(l)){let c="";for(let d=0,x=s.length;d<x;d++){let m=s[d].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new k(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(M.UTF8)||s.equals(M.ISO8859_1)||s.equals(M.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),c=[];for(let d=0;d<l.length;d++)c.push(l[d].charCodeAt(0));return new Uint8Array(c)}}class z{static castAsNonUtf8Char(s,i=null){const l=i?i.getName():this.ISO88591;return P.decode(new Uint8Array([s]),l)}static guessEncoding(s,i){if(i!=null&&i.get(Q.CHARACTER_SET)!==void 0)return i.get(Q.CHARACTER_SET).toString();const l=s.length;let c=!0,d=!0,x=!0,m=0,B=0,E=0,U=0,R=0,O=0,V=0,W=0,q=0,te=0,ae=0;const ye=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let Be=0;Be<l&&(c||d||x);Be++){const ge=s[Be]&255;x&&(m>0?ge&128?m--:x=!1:ge&128&&(ge&64?(m++,ge&32?(m++,ge&16?(m++,ge&8?x=!1:U++):E++):B++):x=!1)),c&&(ge>127&&ge<160?c=!1:ge>159&&(ge<192||ge===215||ge===247)&&ae++),d&&(R>0?ge<64||ge===127||ge>252?d=!1:R--:ge===128||ge===160||ge>239?d=!1:ge>160&&ge<224?(O++,W=0,V++,V>q&&(q=V)):ge>127?(R++,V=0,W++,W>te&&(te=W)):(V=0,W=0))}return x&&m>0&&(x=!1),d&&R>0&&(d=!1),x&&(ye||B+E+U>0)?z.UTF8:d&&(z.ASSUME_SHIFT_JIS||q>=3||te>=3)?z.SHIFT_JIS:c&&d?q===2&&O===2||ae*10>=l?z.SHIFT_JIS:z.ISO88591:c?z.ISO88591:d?z.SHIFT_JIS:x?z.UTF8:z.PLATFORM_DEFAULT_ENCODING}static format(s,...i){let l=-1;function c(x,m,B,E,U,R){if(x==="%%")return"%";if(i[++l]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let O=U?parseInt(U.substr(1)):void 0,V;switch(R){case"s":V=i[l];break;case"c":V=i[l][0];break;case"f":V=parseFloat(i[l]).toFixed(x);break;case"p":V=parseFloat(i[l]).toPrecision(x);break;case"e":V=parseFloat(i[l]).toExponential(x);break;case"x":V=parseInt(i[l]).toString(O||16);break;case"d":V=parseFloat(parseInt(i[l],O||10).toPrecision(x)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(O);let W=parseInt(B),q=B&&B[0]+""=="0"?"0":" ";for(;V.length<W;)V=m!==void 0?V+q:q+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,c)}static getBytes(s,i){return P.encode(s,i)}static getCharCode(s,i=0){return s.charCodeAt(i)}static getCharAt(s){return String.fromCharCode(s)}}z.SHIFT_JIS=M.SJIS.getName(),z.GB2312="GB2312",z.ISO88591=M.ISO8859_1.getName(),z.EUC_JP="EUC_JP",z.UTF8=M.UTF8.getName(),z.PLATFORM_DEFAULT_ENCODING=z.UTF8,z.ASSUME_SHIFT_JIS=!1;class X{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=z.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,i,l){for(let c=i;i<i+l;c++)this.append(s[c]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,i){this.value=this.value.substr(0,s)+i+this.value.substr(s+1)}substring(s,i){return this.value.substring(s,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,i){this.value=this.value.substr(0,s)+i+this.value.substr(s+i.length)}}class ce{constructor(s,i,l,c){if(this.width=s,this.height=i,this.rowSize=l,this.bits=c,i==null&&(i=s),this.height=i,s<1||i<1)throw new w("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const i=s.length,l=s[0].length,c=new ce(l,i);for(let d=0;d<i;d++){const x=s[d];for(let m=0;m<l;m++)x[m]&&c.set(m,d)}return c}static parseFromString(s,i,l){if(s===null)throw new w("stringRepresentation cannot be null");const c=new Array(s.length);let d=0,x=0,m=-1,B=0,E=0;for(;E<s.length;)if(s.charAt(E)===`
`||s.charAt(E)==="\r"){if(d>x){if(m===-1)m=d-x;else if(d-x!==m)throw new w("row lengths do not match");x=d,B++}E++}else if(s.substring(E,E+i.length)===i)E+=i.length,c[d]=!0,d++;else if(s.substring(E,E+l.length)===l)E+=l.length,c[d]=!1,d++;else throw new w("illegal character encountered: "+s.substring(E));if(d>x){if(m===-1)m=d-x;else if(d-x!==m)throw new w("row lengths do not match");B++}const U=new ce(m,B);for(let R=0;R<d;R++)c[R]&&U.set(Math.floor(R%m),Math.floor(R/m));return U}get(s,i){const l=i*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,i){const l=i*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,i){const l=i*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,i){const l=i*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new w("input matrix dimensions do not match");const i=new S(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let d=0,x=this.height;d<x;d++){const m=d*l,B=s.getRow(d,i).getBitArray();for(let E=0;E<l;E++)c[m+E]^=B[E]}}clear(){const s=this.bits,i=s.length;for(let l=0;l<i;l++)s[l]=0}setRegion(s,i,l,c){if(i<0||s<0)throw new w("Left and top must be nonnegative");if(c<1||l<1)throw new w("Height and width must be at least 1");const d=s+l,x=i+c;if(x>this.height||d>this.width)throw new w("The region must fit inside the matrix");const m=this.rowSize,B=this.bits;for(let E=i;E<x;E++){const U=E*m;for(let R=s;R<d;R++)B[U+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(s,i){i==null||i.getSize()<this.width?i=new S(this.width):i.clear();const l=this.rowSize,c=this.bits,d=s*l;for(let x=0;x<l;x++)i.setBulk(x*32,c[d+x]);return i}setRow(s,i){F.arraycopy(i.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),i=this.getHeight();let l=new S(s),c=new S(s);for(let d=0,x=Math.floor((i+1)/2);d<x;d++)l=this.getRow(d,l),c=this.getRow(i-1-d,c),l.reverse(),c.reverse(),this.setRow(d,c),this.setRow(i-1-d,l)}getEnclosingRectangle(){const s=this.width,i=this.height,l=this.rowSize,c=this.bits;let d=s,x=i,m=-1,B=-1;for(let E=0;E<i;E++)for(let U=0;U<l;U++){const R=c[E*l+U];if(R!==0){if(E<x&&(x=E),E>B&&(B=E),U*32<d){let O=0;for(;!(R<<31-O&4294967295);)O++;U*32+O<d&&(d=U*32+O)}if(U*32+31>m){let O=31;for(;!(R>>>O);)O--;U*32+O>m&&(m=U*32+O)}}}return m<d||B<x?null:Int32Array.from([d,x,m-d+1,B-x+1])}getTopLeftOnBit(){const s=this.rowSize,i=this.bits;let l=0;for(;l<i.length&&i[l]===0;)l++;if(l===i.length)return null;const c=l/s;let d=l%s*32;const x=i[l];let m=0;for(;!(x<<31-m&4294967295);)m++;return d+=m,Int32Array.from([d,c])}getBottomRightOnBit(){const s=this.rowSize,i=this.bits;let l=i.length-1;for(;l>=0&&i[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/s);let d=Math.floor(l%s)*32;const x=i[l];let m=31;for(;!(x>>>m);)m--;return d+=m,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof ce))return!1;const i=s;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&v.equals(this.bits,i.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+v.hashCode(this.bits),s}toString(s="X ",i="  ",l=`
`){return this.buildToString(s,i,l)}buildToString(s,i,l){let c=new X;for(let d=0,x=this.height;d<x;d++){for(let m=0,B=this.width;m<B;m++)c.append(this.get(m,d)?s:i);c.append(l)}return c.toString()}clone(){return new ce(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends h{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class re extends b{constructor(s){super(s),this.luminances=re.EMPTY,this.buckets=new Int32Array(re.LUMINANCE_BUCKETS)}getBlackRow(s,i){const l=this.getLuminanceSource(),c=l.getWidth();i==null||i.getSize()<c?i=new S(c):i.clear(),this.initArrays(c);const d=l.getRow(s,this.luminances),x=this.buckets;for(let B=0;B<c;B++)x[(d[B]&255)>>re.LUMINANCE_SHIFT]++;const m=re.estimateBlackPoint(x);if(c<3)for(let B=0;B<c;B++)(d[B]&255)<m&&i.set(B);else{let B=d[0]&255,E=d[1]&255;for(let U=1;U<c-1;U++){const R=d[U+1]&255;(E*4-B-R)/2<m&&i.set(U),B=E,E=R}}return i}getBlackMatrix(){const s=this.getLuminanceSource(),i=s.getWidth(),l=s.getHeight(),c=new ce(i,l);this.initArrays(i);const d=this.buckets;for(let B=1;B<5;B++){const E=Math.floor(l*B/5),U=s.getRow(E,this.luminances),R=Math.floor(i*4/5);for(let O=Math.floor(i/5);O<R;O++){const V=U[O]&255;d[V>>re.LUMINANCE_SHIFT]++}}const x=re.estimateBlackPoint(d),m=s.getMatrix();for(let B=0;B<l;B++){const E=B*i;for(let U=0;U<i;U++)(m[E+U]&255)<x&&c.set(U,B)}return c}createBinarizer(s){return new re(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const i=this.buckets;for(let l=0;l<re.LUMINANCE_BUCKETS;l++)i[l]=0}static estimateBlackPoint(s){const i=s.length;let l=0,c=0,d=0;for(let U=0;U<i;U++)s[U]>d&&(c=U,d=s[U]),s[U]>l&&(l=s[U]);let x=0,m=0;for(let U=0;U<i;U++){const R=U-c,O=s[U]*R*R;O>m&&(x=U,m=O)}if(c>x){const U=c;c=x,x=U}if(x-c<=i/16)throw new G;let B=x-1,E=-1;for(let U=x-1;U>c;U--){const R=U-c,O=R*R*(x-U)*(l-s[U]);O>E&&(B=U,E=O)}return B<<re.LUMINANCE_SHIFT}}re.LUMINANCE_BITS=5,re.LUMINANCE_SHIFT=8-re.LUMINANCE_BITS,re.LUMINANCE_BUCKETS=1<<re.LUMINANCE_BITS,re.EMPTY=Uint8ClampedArray.from([0]);class oe extends re{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),i=s.getWidth(),l=s.getHeight();if(i>=oe.MINIMUM_DIMENSION&&l>=oe.MINIMUM_DIMENSION){const c=s.getMatrix();let d=i>>oe.BLOCK_SIZE_POWER;i&oe.BLOCK_SIZE_MASK&&d++;let x=l>>oe.BLOCK_SIZE_POWER;l&oe.BLOCK_SIZE_MASK&&x++;const m=oe.calculateBlackPoints(c,d,x,i,l),B=new ce(i,l);oe.calculateThresholdForBlock(c,d,x,i,l,m,B),this.matrix=B}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new oe(s)}static calculateThresholdForBlock(s,i,l,c,d,x,m){const B=d-oe.BLOCK_SIZE,E=c-oe.BLOCK_SIZE;for(let U=0;U<l;U++){let R=U<<oe.BLOCK_SIZE_POWER;R>B&&(R=B);const O=oe.cap(U,2,l-3);for(let V=0;V<i;V++){let W=V<<oe.BLOCK_SIZE_POWER;W>E&&(W=E);const q=oe.cap(V,2,i-3);let te=0;for(let ye=-2;ye<=2;ye++){const Be=x[O+ye];te+=Be[q-2]+Be[q-1]+Be[q]+Be[q+1]+Be[q+2]}const ae=te/25;oe.thresholdBlock(s,W,R,ae,c,m)}}}static cap(s,i,l){return s<i?i:s>l?l:s}static thresholdBlock(s,i,l,c,d,x){for(let m=0,B=l*d+i;m<oe.BLOCK_SIZE;m++,B+=d)for(let E=0;E<oe.BLOCK_SIZE;E++)(s[B+E]&255)<=c&&x.set(i+E,l+m)}static calculateBlackPoints(s,i,l,c,d){const x=d-oe.BLOCK_SIZE,m=c-oe.BLOCK_SIZE,B=new Array(l);for(let E=0;E<l;E++){B[E]=new Int32Array(i);let U=E<<oe.BLOCK_SIZE_POWER;U>x&&(U=x);for(let R=0;R<i;R++){let O=R<<oe.BLOCK_SIZE_POWER;O>m&&(O=m);let V=0,W=255,q=0;for(let ae=0,ye=U*c+O;ae<oe.BLOCK_SIZE;ae++,ye+=c){for(let Be=0;Be<oe.BLOCK_SIZE;Be++){const ge=s[ye+Be]&255;V+=ge,ge<W&&(W=ge),ge>q&&(q=ge)}if(q-W>oe.MIN_DYNAMIC_RANGE)for(ae++,ye+=c;ae<oe.BLOCK_SIZE;ae++,ye+=c)for(let Be=0;Be<oe.BLOCK_SIZE;Be++)V+=s[ye+Be]&255}let te=V>>oe.BLOCK_SIZE_POWER*2;if(q-W<=oe.MIN_DYNAMIC_RANGE&&(te=W/2,E>0&&R>0)){const ae=(B[E-1][R]+2*B[E][R-1]+B[E-1][R-1])/4;W<ae&&(te=ae)}B[E][R]=te}}return B}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class le{constructor(s,i){this.width=s,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,i,l,c){throw new k("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new k("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new k("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let i=new X;for(let l=0;l<this.height;l++){const c=this.getRow(l,s);for(let d=0;d<this.width;d++){const x=c[d]&255;let m;x<64?m="#":x<128?m="+":x<192?m=".":m=" ",i.append(m)}i.append(`
`)}return i.toString()}}class Y extends le{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,i){const l=this.delegate.getRow(s,i),c=this.getWidth();for(let d=0;d<c;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(i);for(let c=0;c<i;c++)l[c]=255-(s[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,i,l,c){return new Y(this.delegate.crop(s,i,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class ue extends le{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const i=s.getContext("2d").getImageData(0,0,s.width,s.height);return ue.toGrayscaleBuffer(i.data,s.width,s.height)}static toGrayscaleBuffer(s,i,l){const c=new Uint8ClampedArray(i*l);for(let d=0,x=0,m=s.length;d<m;d+=4,x++){let B;if(s[d+3]===0)B=255;else{const U=s[d],R=s[d+1],O=s[d+2];B=306*U+601*R+117*O+512>>10}c[x]=B}return c}getRow(s,i){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth(),c=s*l;return i===null?i=this.buffer.slice(c,c+l):(i.length<l&&(i=new Uint8ClampedArray(l)),i.set(this.buffer.slice(c,c+l))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,i,l,c){return super.crop(s,i,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const i=this.getTempCanvasElement(),l=i.getContext("2d"),c=s*ue.DEGREE_TO_RADIANS,d=this.canvas.width,x=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*x),B=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*x);return i.width=m,i.height=B,l.translate(m/2,B/2),l.rotate(c),l.drawImage(this.canvas,d/-2,x/-2),this.buffer=ue.makeBufferFromCanvasImageData(i),this}invert(){return new Y(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class ee{constructor(s,i,l){this.deviceId=s,this.label=i,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var $=(globalThis||Te||self||window||void 0)&&(globalThis||Te||self||window||void 0).__awaiter||function(T,s,i,l){function c(d){return d instanceof i?d:new i(function(x){x(d)})}return new(i||(i=Promise))(function(d,x){function m(U){try{E(l.next(U))}catch(R){x(R)}}function B(U){try{E(l.throw(U))}catch(R){x(R)}}function E(U){U.done?d(U.value):c(U.value).then(m,B)}E((l=l.apply(T,s||[])).next())})};class Ae{constructor(s,i=500,l){this.reader=s,this.timeBetweenScansMillis=i,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return $(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const l of s){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const d=l.deviceId||l.id,x=l.label||`Video device ${i.length+1}`,m=l.groupId,B={deviceId:d,label:x,kind:c,groupId:m};i.push(B)}return i})}getVideoInputDevices(){return $(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new ee(i.deviceId,i.label))})}findDeviceById(s){return $(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,i){return $(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,i)})}decodeOnceFromVideoDevice(s,i){return $(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(s,i){return $(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,i)})}decodeOnceFromStream(s,i){return $(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,i);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,i,l){return $(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,i,l)})}decodeFromVideoDevice(s,i,l){return $(this,void 0,void 0,function*(){let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,i,l)})}decodeFromConstraints(s,i,l){return $(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(c,i,l)})}decodeFromStream(s,i,l){return $(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,i);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,i){return $(this,void 0,void 0,function*(){const l=this.prepareVideoElement(i);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((i,l)=>this.playVideoOnLoad(s,()=>i()))}playVideoOnLoad(s,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",i),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return $(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,i){const l=document.getElementById(s);if(!l)throw new p(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==i.toLowerCase())throw new p(`element with id '${s}' must be an ${i} element`);return l}decodeFromImage(s,i){if(!s&&!i)throw new p("either imageElement with a src set or an url must be provided");return i&&!s?this.decodeFromImageUrl(i):this.decodeFromImageElement(s)}decodeFromVideo(s,i){if(!s&&!i)throw new p("Either an element with a src set or an URL must be provided");return i&&!s?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,i,l){if(s===void 0&&i===void 0)throw new p("Either an element with a src set or an URL must be provided");return i&&!s?this.decodeFromVideoUrlContinuously(i,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new p("An image element must be provided.");this.reset();const i=this.prepareImageElement(s);this.imageElement=i;let l;return this.isImageLoaded(i)?l=this.decodeOnce(i,!1,!0):l=this._decodeOnLoadImage(i),l}decodeFromVideoElement(s){const i=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(s,i){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,i)}_decodeFromVideoElementSetup(s){if(!s)throw new p("A video element must be provided.");this.reset();const i=this.prepareVideoElement(s);return this.videoElement=i,i}decodeFromImageUrl(s){if(!s)throw new p("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const l=this._decodeOnLoadImage(i);return i.src=s,l}decodeFromVideoUrl(s){if(!s)throw new p("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),l=this.decodeFromVideoElement(i);return i.src=s,l}decodeFromVideoUrlContinuously(s,i){if(!s)throw new p("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,i);return l.src=s,c}_decodeOnLoadImage(s){return new Promise((i,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(i,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return $(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,i){return $(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,i)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let i;return typeof s>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof s=="string"&&(i=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(i=s),i}prepareVideoElement(s){let i;return!s&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof s=="string"&&(i=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(i=s),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(s,i=!0,l=!0){this._stopAsyncDecode=!1;const c=(d,x)=>{if(this._stopAsyncDecode){x(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(s);d(m)}catch(m){const B=i&&m instanceof G,U=(m instanceof C||m instanceof D)&&l;if(B||U)return setTimeout(c,this._timeBetweenDecodingAttempts,d,x);x(m)}};return new Promise((d,x)=>c(d,x))}decodeContinuously(s,i){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(s);i(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){i(null,c);const d=c instanceof C||c instanceof D,x=c instanceof G;(d||x)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const i=this.createBinaryBitmap(s);return this.decodeBitmap(i)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,i,l){i||(i={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(s,i,l=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const i=this.getCaptureCanvas(s),l=new ue(i),c=new oe(l);return new y(c)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const i=this.createCaptureCanvas(s);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let l,c;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,c=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,c=s.naturalHeight||s.height)),i.style.width=l+"px",i.style.height=c+"px",i.width=l,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,i){try{s.srcObject=i}catch{s.src=URL.createObjectURL(i)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(s,i,l=i==null?0:8*i.length,c,d,x=F.currentTimeMillis()){this.text=s,this.rawBytes=i,this.numBits=l,this.resultPoints=c,this.format=d,this.timestamp=x,this.text=s,this.rawBytes=i,l==null?this.numBits=i==null?0:8*i.length:this.numBits=l,this.resultPoints=c,this.format=d,this.resultMetadata=null,x==null?this.timestamp=F.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,i)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const i=this.resultPoints;if(i===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(i.length+s.length);F.arraycopy(i,0,l,0,i.length),F.arraycopy(s,0,l,i.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Qe;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Qe||(Qe={}));var fe=Qe,qe;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(qe||(qe={}));var pe=qe;class Xt{constructor(s,i,l,c,d=-1,x=-1){this.rawBytes=s,this.text=i,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=x,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fr{exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}static addOrSubtract(s,i){return s^i}}class vt{constructor(s,i){if(i.length===0)throw new w;this.field=s;const l=i.length;if(l>1&&i[0]===0){let c=1;for(;c<l&&i[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),F.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const i=this.coefficients;let l;if(s===1){l=0;for(let x=0,m=i.length;x!==m;x++){const B=i[x];l=fr.addOrSubtract(l,B)}return l}l=i[0];const c=i.length,d=this.field;for(let x=1;x<c;x++)l=fr.addOrSubtract(d.multiply(s,l),i[x]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let i=this.coefficients,l=s.coefficients;if(i.length>l.length){const x=i;i=l,l=x}let c=new Int32Array(l.length);const d=l.length-i.length;F.arraycopy(l,0,c,0,d);for(let x=d;x<l.length;x++)c[x]=fr.addOrSubtract(i[x-d],l[x]);return new vt(this.field,c)}multiply(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const i=this.coefficients,l=i.length,c=s.coefficients,d=c.length,x=new Int32Array(l+d-1),m=this.field;for(let B=0;B<l;B++){const E=i[B];for(let U=0;U<d;U++)x[B+U]=fr.addOrSubtract(x[B+U],m.multiply(E,c[U]))}return new vt(m,x)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const i=this.coefficients.length,l=this.field,c=new Int32Array(i),d=this.coefficients;for(let x=0;x<i;x++)c[x]=l.multiply(d[x],s);return new vt(l,c)}multiplyByMonomial(s,i){if(s<0)throw new w;if(i===0)return this.field.getZero();const l=this.coefficients,c=l.length,d=new Int32Array(c+s),x=this.field;for(let m=0;m<c;m++)d[m]=x.multiply(l[m],i);return new vt(x,d)}divide(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new w("Divide by 0");const i=this.field;let l=i.getZero(),c=this;const d=s.getCoefficient(s.getDegree()),x=i.inverse(d);for(;c.getDegree()>=s.getDegree()&&!c.isZero();){const m=c.getDegree()-s.getDegree(),B=i.multiply(c.getCoefficient(c.getDegree()),x),E=s.multiplyByMonomial(m,B),U=i.buildMonomial(m,B);l=l.addOrSubtract(U),c=c.addOrSubtract(E)}return[l,c]}toString(){let s="";for(let i=this.getDegree();i>=0;i--){let l=this.getCoefficient(i);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),i===0||l!==1){const c=this.field.log(l);c===0?s+="1":c===1?s+="a":(s+="a^",s+=c)}i!==0&&(i===1?s+="x":(s+="x^",s+=i))}}return s}}class we extends h{}we.kind="ArithmeticException";class de extends fr{constructor(s,i,l){super(),this.primitive=s,this.size=i,this.generatorBase=l;const c=new Int32Array(i);let d=1;for(let m=0;m<i;m++)c[m]=d,d*=2,d>=i&&(d^=s,d&=i-1);this.expTable=c;const x=new Int32Array(i);for(let m=0;m<i-1;m++)x[c[m]]=m;this.logTable=x,this.zero=new vt(this,Int32Array.from([0])),this.one=new vt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,i){if(s<0)throw new w;if(i===0)return this.zero;const l=new Int32Array(s+1);return l[0]=i,new vt(this,l)}inverse(s){if(s===0)throw new we;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,i){return s===0||i===0?0:this.expTable[(this.logTable[s]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}de.AZTEC_DATA_12=new de(4201,4096,1),de.AZTEC_DATA_10=new de(1033,1024,1),de.AZTEC_DATA_6=new de(67,64,1),de.AZTEC_PARAM=new de(19,16,1),de.QR_CODE_FIELD_256=new de(285,256,0),de.DATA_MATRIX_FIELD_256=new de(301,256,1),de.AZTEC_DATA_8=de.DATA_MATRIX_FIELD_256,de.MAXICODE_FIELD_64=de.AZTEC_DATA_6;class Ue extends h{}Ue.kind="ReedSolomonException";class ke extends h{}ke.kind="IllegalStateException";class rr{constructor(s){this.field=s}decode(s,i){const l=this.field,c=new vt(l,s),d=new Int32Array(i);let x=!0;for(let V=0;V<i;V++){const W=c.evaluateAt(l.exp(V+l.getGeneratorBase()));d[d.length-1-V]=W,W!==0&&(x=!1)}if(x)return;const m=new vt(l,d),B=this.runEuclideanAlgorithm(l.buildMonomial(i,1),m,i),E=B[0],U=B[1],R=this.findErrorLocations(E),O=this.findErrorMagnitudes(U,R);for(let V=0;V<R.length;V++){const W=s.length-1-l.log(R[V]);if(W<0)throw new Ue("Bad error location");s[W]=de.addOrSubtract(s[W],O[V])}}runEuclideanAlgorithm(s,i,l){if(s.getDegree()<i.getDegree()){const V=s;s=i,i=V}const c=this.field;let d=s,x=i,m=c.getZero(),B=c.getOne();for(;x.getDegree()>=(l/2|0);){let V=d,W=m;if(d=x,m=B,d.isZero())throw new Ue("r_{i-1} was zero");x=V;let q=c.getZero();const te=d.getCoefficient(d.getDegree()),ae=c.inverse(te);for(;x.getDegree()>=d.getDegree()&&!x.isZero();){const ye=x.getDegree()-d.getDegree(),Be=c.multiply(x.getCoefficient(x.getDegree()),ae);q=q.addOrSubtract(c.buildMonomial(ye,Be)),x=x.addOrSubtract(d.multiplyByMonomial(ye,Be))}if(B=q.multiply(m).addOrSubtract(W),x.getDegree()>=d.getDegree())throw new ke("Division algorithm failed to reduce polynomial?")}const E=B.getCoefficient(0);if(E===0)throw new Ue("sigmaTilde(0) was zero");const U=c.inverse(E),R=B.multiplyScalar(U),O=x.multiplyScalar(U);return[R,O]}findErrorLocations(s){const i=s.getDegree();if(i===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(i);let c=0;const d=this.field;for(let x=1;x<d.getSize()&&c<i;x++)s.evaluateAt(x)===0&&(l[c]=d.inverse(x),c++);if(c!==i)throw new Ue("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,i){const l=i.length,c=new Int32Array(l),d=this.field;for(let x=0;x<l;x++){const m=d.inverse(i[x]);let B=1;for(let E=0;E<l;E++)if(x!==E){const U=d.multiply(i[E],m),R=U&1?U&-2:U|1;B=d.multiply(B,R)}c[x]=d.multiply(s.evaluateAt(m),d.inverse(B)),d.getGeneratorBase()!==0&&(c[x]=d.multiply(c[x],m))}return c}}var gt;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(gt||(gt={}));class $e{decode(s){this.ddata=s;let i=s.getBits(),l=this.extractBits(i),c=this.correctBits(l),d=$e.convertBoolArrayToByteArray(c),x=$e.getEncodedData(c),m=new Xt(d,x,null,null);return m.setNumBits(c.length),m}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let i=s.length,l=gt.UPPER,c=gt.UPPER,d="",x=0;for(;x<i;)if(c===gt.BINARY){if(i-x<5)break;let m=$e.readCode(s,x,5);if(x+=5,m===0){if(i-x<11)break;m=$e.readCode(s,x,11)+31,x+=11}for(let B=0;B<m;B++){if(i-x<8){x=i;break}const E=$e.readCode(s,x,8);d+=z.castAsNonUtf8Char(E),x+=8}c=l}else{let m=c===gt.DIGIT?4:5;if(i-x<m)break;let B=$e.readCode(s,x,m);x+=m;let E=$e.getCharacter(c,B);E.startsWith("CTRL_")?(l=c,c=$e.getTable(E.charAt(5)),E.charAt(6)==="L"&&(l=c)):(d+=E,c=l)}return d}static getTable(s){switch(s){case"L":return gt.LOWER;case"P":return gt.PUNCT;case"M":return gt.MIXED;case"D":return gt.DIGIT;case"B":return gt.BINARY;case"U":default:return gt.UPPER}}static getCharacter(s,i){switch(s){case gt.UPPER:return $e.UPPER_TABLE[i];case gt.LOWER:return $e.LOWER_TABLE[i];case gt.MIXED:return $e.MIXED_TABLE[i];case gt.PUNCT:return $e.PUNCT_TABLE[i];case gt.DIGIT:return $e.DIGIT_TABLE[i];default:throw new ke("Bad table")}}correctBits(s){let i,l;this.ddata.getNbLayers()<=2?(l=6,i=de.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,i=de.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,i=de.AZTEC_DATA_10):(l=12,i=de.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),d=s.length/l;if(d<c)throw new D;let x=s.length%l,m=new Int32Array(d);for(let O=0;O<d;O++,x+=l)m[O]=$e.readCode(s,x,l);try{new rr(i).decode(m,d-c)}catch(O){throw new D(O)}let B=(1<<l)-1,E=0;for(let O=0;O<c;O++){let V=m[O];if(V===0||V===B)throw new D;(V===1||V===B-1)&&E++}let U=new Array(c*l-E),R=0;for(let O=0;O<c;O++){let V=m[O];if(V===1||V===B-1)U.fill(V>1,R,R+l-1),R+=l-1;else for(let W=l-1;W>=0;--W)U[R++]=(V&1<<W)!==0}return U}extractBits(s){let i=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(i?11:14)+l*4,d=new Int32Array(c),x=new Array(this.totalBitsInLayer(l,i));if(i)for(let m=0;m<d.length;m++)d[m]=m;else{let m=c+1+2*_.truncDivision(_.truncDivision(c,2)-1,15),B=c/2,E=_.truncDivision(m,2);for(let U=0;U<B;U++){let R=U+_.truncDivision(U,15);d[B-U-1]=E-R-1,d[B+U]=E+R+1}}for(let m=0,B=0;m<l;m++){let E=(l-m)*4+(i?9:12),U=m*2,R=c-1-U;for(let O=0;O<E;O++){let V=O*2;for(let W=0;W<2;W++)x[B+V+W]=s.get(d[U+W],d[U+O]),x[B+2*E+V+W]=s.get(d[U+O],d[R-W]),x[B+4*E+V+W]=s.get(d[R-W],d[R-O]),x[B+6*E+V+W]=s.get(d[R-O],d[U+W])}B+=E*8}return x}static readCode(s,i,l){let c=0;for(let d=i;d<i+l;d++)c<<=1,s[d]&&(c|=1);return c}static readByte(s,i){let l=s.length-i;return l>=8?$e.readCode(s,i,8):$e.readCode(s,i,l)<<8-l}static convertBoolArrayToByteArray(s){let i=new Uint8Array((s.length+7)/8);for(let l=0;l<i.length;l++)i[l]=$e.readByte(s,8*l);return i}totalBitsInLayer(s,i){return((i?88:112)+16*s)*s}}$e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],$e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],$e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],$e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],$e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ke{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,i,l,c){const d=s-l,x=i-c;return Math.sqrt(d*d+x*x)}static sum(s){let i=0;for(let l=0,c=s.length;l!==c;l++){const d=s[l];i+=d}return i}}class Wn{static floatToIntBits(s){return s}}Wn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(s,i){this.x=s,this.y=i}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Ce){const i=s;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Wn.floatToIntBits(this.x)+Wn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const i=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),c=this.distance(s[0],s[2]);let d,x,m;if(l>=i&&l>=c?(x=s[0],d=s[1],m=s[2]):c>=l&&c>=i?(x=s[1],d=s[0],m=s[2]):(x=s[2],d=s[0],m=s[1]),this.crossProductZ(d,x,m)<0){const B=d;d=m,m=B}s[0]=d,s[1]=x,s[2]=m}static distance(s,i){return Ke.distance(s.x,s.y,i.x,i.y)}static crossProductZ(s,i,l){const c=i.x,d=i.y;return(l.x-c)*(s.y-d)-(l.y-d)*(s.x-c)}}class xr{constructor(s,i){this.bits=s,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Un extends xr{constructor(s,i,l,c,d){super(s,i),this.compact=l,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Kr{constructor(s,i,l,c){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),i==null&&(i=Kr.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),c==null&&(c=s.getHeight()/2|0);const d=i/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=c-d,this.downInit=c+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let s=this.leftInit,i=this.rightInit,l=this.upInit,c=this.downInit,d=!1,x=!0,m=!1,B=!1,E=!1,U=!1,R=!1;const O=this.width,V=this.height;for(;x;){x=!1;let W=!0;for(;(W||!B)&&i<O;)W=this.containsBlackPoint(l,c,i,!1),W?(i++,x=!0,B=!0):B||i++;if(i>=O){d=!0;break}let q=!0;for(;(q||!E)&&c<V;)q=this.containsBlackPoint(s,i,c,!0),q?(c++,x=!0,E=!0):E||c++;if(c>=V){d=!0;break}let te=!0;for(;(te||!U)&&s>=0;)te=this.containsBlackPoint(l,c,s,!1),te?(s--,x=!0,U=!0):U||s--;if(s<0){d=!0;break}let ae=!0;for(;(ae||!R)&&l>=0;)ae=this.containsBlackPoint(s,i,l,!0),ae?(l--,x=!0,R=!0):R||l--;if(l<0){d=!0;break}x&&(m=!0)}if(!d&&m){const W=i-s;let q=null;for(let Be=1;q===null&&Be<W;Be++)q=this.getBlackPointOnSegment(s,c-Be,s+Be,c);if(q==null)throw new G;let te=null;for(let Be=1;te===null&&Be<W;Be++)te=this.getBlackPointOnSegment(s,l+Be,s+Be,l);if(te==null)throw new G;let ae=null;for(let Be=1;ae===null&&Be<W;Be++)ae=this.getBlackPointOnSegment(i,l+Be,i-Be,l);if(ae==null)throw new G;let ye=null;for(let Be=1;ye===null&&Be<W;Be++)ye=this.getBlackPointOnSegment(i,c-Be,i-Be,c);if(ye==null)throw new G;return this.centerEdges(ye,q,ae,te)}else throw new G}getBlackPointOnSegment(s,i,l,c){const d=Ke.round(Ke.distance(s,i,l,c)),x=(l-s)/d,m=(c-i)/d,B=this.image;for(let E=0;E<d;E++){const U=Ke.round(s+E*x),R=Ke.round(i+E*m);if(B.get(U,R))return new Ce(U,R)}return null}centerEdges(s,i,l,c){const d=s.getX(),x=s.getY(),m=i.getX(),B=i.getY(),E=l.getX(),U=l.getY(),R=c.getX(),O=c.getY(),V=Kr.CORR;return d<this.width/2?[new Ce(R-V,O+V),new Ce(m+V,B+V),new Ce(E-V,U-V),new Ce(d+V,x-V)]:[new Ce(R+V,O+V),new Ce(m+V,B-V),new Ce(E-V,U+V),new Ce(d-V,x-V)]}containsBlackPoint(s,i,l,c){const d=this.image;if(c){for(let x=s;x<=i;x++)if(d.get(x,l))return!0}else for(let x=s;x<=i;x++)if(d.get(l,x))return!0;return!1}}Kr.INIT_SIZE=10,Kr.CORR=1;class ii{static checkAndNudgePoints(s,i){const l=s.getWidth(),c=s.getHeight();let d=!0;for(let x=0;x<i.length&&d;x+=2){const m=Math.floor(i[x]),B=Math.floor(i[x+1]);if(m<-1||m>l||B<-1||B>c)throw new G;d=!1,m===-1?(i[x]=0,d=!0):m===l&&(i[x]=l-1,d=!0),B===-1?(i[x+1]=0,d=!0):B===c&&(i[x+1]=c-1,d=!0)}d=!0;for(let x=i.length-2;x>=0&&d;x-=2){const m=Math.floor(i[x]),B=Math.floor(i[x+1]);if(m<-1||m>l||B<-1||B>c)throw new G;d=!1,m===-1?(i[x]=0,d=!0):m===l&&(i[x]=l-1,d=!0),B===-1?(i[x+1]=0,d=!0):B===c&&(i[x+1]=c-1,d=!0)}}}class nr{constructor(s,i,l,c,d,x,m,B,E){this.a11=s,this.a21=i,this.a31=l,this.a12=c,this.a22=d,this.a32=x,this.a13=m,this.a23=B,this.a33=E}static quadrilateralToQuadrilateral(s,i,l,c,d,x,m,B,E,U,R,O,V,W,q,te){const ae=nr.quadrilateralToSquare(s,i,l,c,d,x,m,B);return nr.squareToQuadrilateral(E,U,R,O,V,W,q,te).times(ae)}transformPoints(s){const i=s.length,l=this.a11,c=this.a12,d=this.a13,x=this.a21,m=this.a22,B=this.a23,E=this.a31,U=this.a32,R=this.a33;for(let O=0;O<i;O+=2){const V=s[O],W=s[O+1],q=d*V+B*W+R;s[O]=(l*V+x*W+E)/q,s[O+1]=(c*V+m*W+U)/q}}transformPointsWithValues(s,i){const l=this.a11,c=this.a12,d=this.a13,x=this.a21,m=this.a22,B=this.a23,E=this.a31,U=this.a32,R=this.a33,O=s.length;for(let V=0;V<O;V++){const W=s[V],q=i[V],te=d*W+B*q+R;s[V]=(l*W+x*q+E)/te,i[V]=(c*W+m*q+U)/te}}static squareToQuadrilateral(s,i,l,c,d,x,m,B){const E=s-l+d-m,U=i-c+x-B;if(E===0&&U===0)return new nr(l-s,d-l,s,c-i,x-c,i,0,0,1);{const R=l-d,O=m-d,V=c-x,W=B-x,q=R*W-O*V,te=(E*W-O*U)/q,ae=(R*U-E*V)/q;return new nr(l-s+te*l,m-s+ae*m,s,c-i+te*c,B-i+ae*B,i,te,ae,1)}}static quadrilateralToSquare(s,i,l,c,d,x,m,B){return nr.squareToQuadrilateral(s,i,l,c,d,x,m,B).buildAdjoint()}buildAdjoint(){return new nr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new nr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Qs extends ii{sampleGrid(s,i,l,c,d,x,m,B,E,U,R,O,V,W,q,te,ae,ye,Be){const ge=nr.quadrilateralToQuadrilateral(c,d,x,m,B,E,U,R,O,V,W,q,te,ae,ye,Be);return this.sampleGridWithTransform(s,i,l,ge)}sampleGridWithTransform(s,i,l,c){if(i<=0||l<=0)throw new G;const d=new ce(i,l),x=new Float32Array(2*i);for(let m=0;m<l;m++){const B=x.length,E=m+.5;for(let U=0;U<B;U+=2)x[U]=U/2+.5,x[U+1]=E;c.transformPoints(x),ii.checkAndNudgePoints(s,x);try{for(let U=0;U<B;U+=2)s.get(Math.floor(x[U]),Math.floor(x[U+1]))&&d.set(U/2,m)}catch{throw new G}}return d}}class Xn{static setGridSampler(s){Xn.gridSampler=s}static getInstance(){return Xn.gridSampler}}Xn.gridSampler=new Qs;class sr{constructor(s,i){this.x=s,this.y=i}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class va{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let i=this.getMatrixCenter(),l=this.getBullsEyeCorners(i);if(s){let x=l[0];l[0]=l[2],l[2]=x}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Un(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new G;let i=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],i),this.sampleLine(s[1],s[2],i),this.sampleLine(s[2],s[3],i),this.sampleLine(s[3],s[0],i)]);this.shift=this.getRotation(l,i);let c=0;for(let x=0;x<4;x++){let m=l[(this.shift+x)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,i){let l=0;s.forEach((c,d,x)=>{let m=(c>>i-2<<1)+(c&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(_.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new G}getCorrectedParameterData(s,i){let l,c;i?(l=7,c=2):(l=10,c=4);let d=l-c,x=new Int32Array(l);for(let B=l-1;B>=0;--B)x[B]=s&15,s>>=4;try{new rr(de.AZTEC_PARAM).decode(x,d)}catch{throw new G}let m=0;for(let B=0;B<c;B++)m=(m<<4)+x[B];return m}getBullsEyeCorners(s){let i=s,l=s,c=s,d=s,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(i,x,1,-1),O=this.getFirstDifferent(l,x,1,1),V=this.getFirstDifferent(c,x,-1,1),W=this.getFirstDifferent(d,x,-1,-1);if(this.nbCenterLayers>2){let q=this.distancePoint(W,R)*this.nbCenterLayers/(this.distancePoint(d,i)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(R,O,V,W))break}i=R,l=O,c=V,d=W,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let m=new Ce(i.getX()+.5,i.getY()-.5),B=new Ce(l.getX()+.5,l.getY()+.5),E=new Ce(c.getX()-.5,c.getY()+.5),U=new Ce(d.getX()-.5,d.getY()-.5);return this.expandSquare([m,B,E,U],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,i,l,c;try{let m=new Kr(this.image).detect();s=m[0],i=m[1],l=m[2],c=m[3]}catch{let B=this.image.getWidth()/2,E=this.image.getHeight()/2;s=this.getFirstDifferent(new sr(B+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new sr(B+7,E+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new sr(B-7,E+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new sr(B-7,E-7),!1,-1,-1).toResultPoint()}let d=Ke.round((s.getX()+c.getX()+i.getX()+l.getX())/4),x=Ke.round((s.getY()+c.getY()+i.getY()+l.getY())/4);try{let m=new Kr(this.image,15,d,x).detect();s=m[0],i=m[1],l=m[2],c=m[3]}catch{s=this.getFirstDifferent(new sr(d+7,x-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new sr(d+7,x+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new sr(d-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new sr(d-7,x-7),!1,-1,-1).toResultPoint()}return d=Ke.round((s.getX()+c.getX()+i.getX()+l.getX())/4),x=Ke.round((s.getY()+c.getY()+i.getY()+l.getY())/4),new sr(d,x)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,i,l,c,d){let x=Xn.getInstance(),m=this.getDimension(),B=m/2-this.nbCenterLayers,E=m/2+this.nbCenterLayers;return x.sampleGrid(s,m,m,B,B,E,B,E,E,B,E,i.getX(),i.getY(),l.getX(),l.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(s,i,l){let c=0,d=this.distanceResultPoint(s,i),x=d/l,m=s.getX(),B=s.getY(),E=x*(i.getX()-s.getX())/d,U=x*(i.getY()-s.getY())/d;for(let R=0;R<l;R++)this.image.get(Ke.round(m+R*E),Ke.round(B+R*U))&&(c|=1<<l-R-1);return c}isWhiteOrBlackRectangle(s,i,l,c){let d=3;s=new sr(s.getX()-d,s.getY()+d),i=new sr(i.getX()-d,i.getY()-d),l=new sr(l.getX()+d,l.getY()-d),c=new sr(c.getX()+d,c.getY()+d);let x=this.getColor(c,s);if(x===0)return!1;let m=this.getColor(s,i);return m!==x||(m=this.getColor(i,l),m!==x)?!1:(m=this.getColor(l,c),m===x)}getColor(s,i){let l=this.distancePoint(s,i),c=(i.getX()-s.getX())/l,d=(i.getY()-s.getY())/l,x=0,m=s.getX(),B=s.getY(),E=this.image.get(s.getX(),s.getY()),U=Math.ceil(l);for(let O=0;O<U;O++)m+=c,B+=d,this.image.get(Ke.round(m),Ke.round(B))!==E&&x++;let R=x/l;return R>.1&&R<.9?0:R<=.1===E?1:-1}getFirstDifferent(s,i,l,c){let d=s.getX()+l,x=s.getY()+c;for(;this.isValid(d,x)&&this.image.get(d,x)===i;)d+=l,x+=c;for(d-=l,x-=c;this.isValid(d,x)&&this.image.get(d,x)===i;)d+=l;for(d-=l;this.isValid(d,x)&&this.image.get(d,x)===i;)x+=c;return x-=c,new sr(d,x)}expandSquare(s,i,l){let c=l/(2*i),d=s[0].getX()-s[2].getX(),x=s[0].getY()-s[2].getY(),m=(s[0].getX()+s[2].getX())/2,B=(s[0].getY()+s[2].getY())/2,E=new Ce(m+c*d,B+c*x),U=new Ce(m-c*d,B-c*x);d=s[1].getX()-s[3].getX(),x=s[1].getY()-s[3].getY(),m=(s[1].getX()+s[3].getX())/2,B=(s[1].getY()+s[3].getY())/2;let R=new Ce(m+c*d,B+c*x),O=new Ce(m-c*d,B-c*x);return[E,R,U,O]}isValid(s,i){return s>=0&&s<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(s){let i=Ke.round(s.getX()),l=Ke.round(s.getY());return this.isValid(i,l)}distancePoint(s,i){return Ke.distance(s.getX(),s.getY(),i.getX(),i.getY())}distanceResultPoint(s,i){return Ke.distance(s.getX(),s.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class Qn{decode(s,i=null){let l=null,c=new va(s.getBlackMatrix()),d=null,x=null;try{let U=c.detectMirror(!1);d=U.getPoints(),this.reportFoundResultPoints(i,d),x=new $e().decode(U)}catch(U){l=U}if(x==null)try{let U=c.detectMirror(!0);d=U.getPoints(),this.reportFoundResultPoints(i,d),x=new $e().decode(U)}catch(U){throw l??U}let m=new se(x.getText(),x.getRawBytes(),x.getNumBits(),d,fe.AZTEC,F.currentTimeMillis()),B=x.getByteSegments();B!=null&&m.putMetadata(pe.BYTE_SEGMENTS,B);let E=x.getECLevel();return E!=null&&m.putMetadata(pe.ERROR_CORRECTION_LEVEL,E),m}reportFoundResultPoints(s,i){if(s!=null){let l=s.get(Q.NEED_RESULT_POINT_CALLBACK);l!=null&&i.forEach((c,d,x)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class FA extends Ae{constructor(s=500){super(new Qn,s)}}class Ut{decode(s,i){try{return this.doDecode(s,i)}catch{if(i&&i.get(Q.TRY_HARDER)===!0&&s.isRotateSupported()){const d=s.rotateCounterClockwise(),x=this.doDecode(d,i),m=x.getResultMetadata();let B=270;m!==null&&m.get(pe.ORIENTATION)===!0&&(B=B+m.get(pe.ORIENTATION)%360),x.putMetadata(pe.ORIENTATION,B);const E=x.getResultPoints();if(E!==null){const U=d.getHeight();for(let R=0;R<E.length;R++)E[R]=new Ce(U-E[R].getY()-1,E[R].getX())}return x}else throw new G}}reset(){}doDecode(s,i){const l=s.getWidth(),c=s.getHeight();let d=new S(l);const x=i&&i.get(Q.TRY_HARDER)===!0,m=Math.max(1,c>>(x?8:5));let B;x?B=c:B=15;const E=Math.trunc(c/2);for(let U=0;U<B;U++){const R=Math.trunc((U+1)/2),O=(U&1)===0,V=E+m*(O?R:-R);if(V<0||V>=c)break;try{d=s.getBlackRow(V,d)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(d.reverse(),i&&i.get(Q.NEED_RESULT_POINT_CALLBACK)===!0)){const q=new Map;i.forEach((te,ae)=>q.set(ae,te)),q.delete(Q.NEED_RESULT_POINT_CALLBACK),i=q}try{const q=this.decodeRow(V,d,i);if(W===1){q.putMetadata(pe.ORIENTATION,180);const te=q.getResultPoints();te!==null&&(te[0]=new Ce(l-te[0].getX()-1,te[0].getY()),te[1]=new Ce(l-te[1].getX()-1,te[1].getY()))}return q}catch{}}}throw new G}static recordPattern(s,i,l){const c=l.length;for(let E=0;E<c;E++)l[E]=0;const d=s.getSize();if(i>=d)throw new G;let x=!s.get(i),m=0,B=i;for(;B<d;){if(s.get(B)!==x)l[m]++;else{if(++m===c)break;l[m]=1,x=!x}B++}if(!(m===c||m===c-1&&B===d))throw new G}static recordPatternInReverse(s,i,l){let c=l.length,d=s.get(i);for(;i>0&&c>=0;)s.get(--i)!==d&&(c--,d=!d);if(c>=0)throw new G;Ut.recordPattern(s,i+1,l)}static patternMatchVariance(s,i,l){const c=s.length;let d=0,x=0;for(let E=0;E<c;E++)d+=s[E],x+=i[E];if(d<x)return Number.POSITIVE_INFINITY;const m=d/x;l*=m;let B=0;for(let E=0;E<c;E++){const U=s[E],R=i[E]*m,O=U>R?U-R:R-U;if(O>l)return Number.POSITIVE_INFINITY;B+=O}return B/d}}class ve extends Ut{static findStartPattern(s){const i=s.getSize(),l=s.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),x=l,m=!1;const B=6;for(let E=l;E<i;E++)if(s.get(E)!==m)d[c]++;else{if(c===B-1){let U=ve.MAX_AVG_VARIANCE,R=-1;for(let O=ve.CODE_START_A;O<=ve.CODE_START_C;O++){const V=Ut.patternMatchVariance(d,ve.CODE_PATTERNS[O],ve.MAX_INDIVIDUAL_VARIANCE);V<U&&(U=V,R=O)}if(R>=0&&s.isRange(Math.max(0,x-(E-x)/2),x,!1))return Int32Array.from([x,E,R]);x+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,m=!m}throw new G}static decodeCode(s,i,l){Ut.recordPattern(s,l,i);let c=ve.MAX_AVG_VARIANCE,d=-1;for(let x=0;x<ve.CODE_PATTERNS.length;x++){const m=ve.CODE_PATTERNS[x],B=this.patternMatchVariance(i,m,ve.MAX_INDIVIDUAL_VARIANCE);B<c&&(c=B,d=x)}if(d>=0)return d;throw new G}decodeRow(s,i,l){const c=l&&l.get(Q.ASSUME_GS1)===!0,d=ve.findStartPattern(i),x=d[2];let m=0;const B=new Uint8Array(20);B[m++]=x;let E;switch(x){case ve.CODE_START_A:E=ve.CODE_CODE_A;break;case ve.CODE_START_B:E=ve.CODE_CODE_B;break;case ve.CODE_START_C:E=ve.CODE_CODE_C;break;default:throw new D}let U=!1,R=!1,O="",V=d[0],W=d[1];const q=Int32Array.from([0,0,0,0,0,0]);let te=0,ae=0,ye=x,Be=0,ge=!0,ze=!1,Le=!1;for(;!U;){const xi=R;switch(R=!1,te=ae,ae=ve.decodeCode(i,q,W),B[m++]=ae,ae!==ve.CODE_STOP&&(ge=!0),ae!==ve.CODE_STOP&&(Be++,ye+=Be*ae),V=W,W+=q.reduce((rC,nC)=>rC+nC,0),ae){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new D}switch(E){case ve.CODE_CODE_A:if(ae<64)Le===ze?O+=String.fromCharCode(32+ae):O+=String.fromCharCode(32+ae+128),Le=!1;else if(ae<96)Le===ze?O+=String.fromCharCode(ae-64):O+=String.fromCharCode(ae+64),Le=!1;else switch(ae!==ve.CODE_STOP&&(ge=!1),ae){case ve.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!ze&&Le?(ze=!0,Le=!1):ze&&Le?(ze=!1,Le=!1):Le=!0;break;case ve.CODE_SHIFT:R=!0,E=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:E=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:E=ve.CODE_CODE_C;break;case ve.CODE_STOP:U=!0;break}break;case ve.CODE_CODE_B:if(ae<96)Le===ze?O+=String.fromCharCode(32+ae):O+=String.fromCharCode(32+ae+128),Le=!1;else switch(ae!==ve.CODE_STOP&&(ge=!1),ae){case ve.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!ze&&Le?(ze=!0,Le=!1):ze&&Le?(ze=!1,Le=!1):Le=!0;break;case ve.CODE_SHIFT:R=!0,E=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:E=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:E=ve.CODE_CODE_C;break;case ve.CODE_STOP:U=!0;break}break;case ve.CODE_CODE_C:if(ae<100)ae<10&&(O+="0"),O+=ae;else switch(ae!==ve.CODE_STOP&&(ge=!1),ae){case ve.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case ve.CODE_CODE_A:E=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:E=ve.CODE_CODE_B;break;case ve.CODE_STOP:U=!0;break}break}xi&&(E=E===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const zr=W-V;if(W=i.getNextUnset(W),!i.isRange(W,Math.min(i.getSize(),W+(W-V)/2),!1))throw new G;if(ye-=Be*te,ye%103!==te)throw new C;const Dn=O.length;if(Dn===0)throw new G;Dn>0&&ge&&(E===ve.CODE_CODE_C?O=O.substring(0,Dn-2):O=O.substring(0,Dn-1));const Wr=(d[1]+d[0])/2,ut=V+zr/2,wr=B.length,nn=new Uint8Array(wr);for(let xi=0;xi<wr;xi++)nn[xi]=B[xi];const fi=[new Ce(Wr,s),new Ce(ut,s)];return new se(O,nn,0,fi,fe.CODE_128,new Date().getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class Qt extends Ut{constructor(s=!1,i=!1){super(),this.usingCheckDigit=s,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,i,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let d=Qt.findAsteriskPattern(i,c),x=i.getNextSet(d[1]),m=i.getSize(),B,E;do{Qt.recordPattern(i,x,c);let q=Qt.toNarrowWidePattern(c);if(q<0)throw new G;B=Qt.patternToChar(q),this.decodeRowResult+=B,E=x;for(let te of c)x+=te;x=i.getNextSet(x)}while(B!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let U=0;for(let q of c)U+=q;let R=x-E-U;if(x!==m&&R*2<U)throw new G;if(this.usingCheckDigit){let q=this.decodeRowResult.length-1,te=0;for(let ae=0;ae<q;ae++)te+=Qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ae));if(this.decodeRowResult.charAt(q)!==Qt.ALPHABET_STRING.charAt(te%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,q)}if(this.decodeRowResult.length===0)throw new G;let O;this.extendedMode?O=Qt.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;let V=(d[1]+d[0])/2,W=E+U/2;return new se(O,null,0,[new Ce(V,s),new Ce(W,s)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(s,i){let l=s.getSize(),c=s.getNextSet(0),d=0,x=c,m=!1,B=i.length;for(let E=c;E<l;E++)if(s.get(E)!==m)i[d]++;else{if(d===B-1){if(this.toNarrowWidePattern(i)===Qt.ASTERISK_ENCODING&&s.isRange(Math.max(0,x-Math.floor((E-x)/2)),x,!1))return[x,E];x+=i[0]+i[1],i.copyWithin(0,2,2+d-1),i[d-1]=0,i[d]=0,d--}else d++;i[d]=1,m=!m}throw new G}static toNarrowWidePattern(s){let i=s.length,l=0,c;do{let d=2147483647;for(let B of s)B<d&&B>l&&(d=B);l=d,c=0;let x=0,m=0;for(let B=0;B<i;B++){let E=s[B];E>l&&(m|=1<<i-1-B,c++,x+=E)}if(c===3){for(let B=0;B<i&&c>0;B++){let E=s[B];if(E>l&&(c--,E*2>=x))return-1}return m}}while(c>3);return-1}static patternToChar(s){for(let i=0;i<Qt.CHARACTER_ENCODINGS.length;i++)if(Qt.CHARACTER_ENCODINGS[i]===s)return Qt.ALPHABET_STRING.charAt(i);if(s===Qt.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(s){let i=s.length,l="";for(let c=0;c<i;c++){let d=s.charAt(c);if(d==="+"||d==="$"||d==="%"||d==="/"){let x=s.charAt(c+1),m="\0";switch(d){case"+":if(x>="A"&&x<="Z")m=String.fromCharCode(x.charCodeAt(0)+32);else throw new D;break;case"$":if(x>="A"&&x<="Z")m=String.fromCharCode(x.charCodeAt(0)-64);else throw new D;break;case"%":if(x>="A"&&x<="E")m=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")m=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")m=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")m=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")m="\0";else if(x==="V")m="@";else if(x==="W")m="`";else if(x==="X"||x==="Y"||x==="Z")m="";else throw new D;break;case"/":if(x>="A"&&x<="O")m=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")m=":";else throw new D;break}l+=m,c++}else l+=d}return l}}Qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Qt.ASTERISK_ENCODING=148;class At extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,i,l){let c=this.decodeStart(i),d=this.decodeEnd(i),x=new X;At.decodeMiddle(i,c[1],d[0],x);let m=x.toString(),B=null;l!=null&&(B=l.get(Q.ALLOWED_LENGTHS)),B==null&&(B=At.DEFAULT_ALLOWED_LENGTHS);let E=m.length,U=!1,R=0;for(let W of B){if(E===W){U=!0;break}W>R&&(R=W)}if(!U&&E>R&&(U=!0),!U)throw new D;const O=[new Ce(c[1],s),new Ce(d[0],s)];return new se(m,null,0,O,fe.ITF,new Date().getTime())}static decodeMiddle(s,i,l,c){let d=new Int32Array(10),x=new Int32Array(5),m=new Int32Array(5);for(d.fill(0),x.fill(0),m.fill(0);i<l;){Ut.recordPattern(s,i,d);for(let E=0;E<5;E++){let U=2*E;x[E]=d[U],m[E]=d[U+1]}let B=At.decodeDigit(x);c.append(B.toString()),B=this.decodeDigit(m),c.append(B.toString()),d.forEach(function(E){i+=E})}}decodeStart(s){let i=At.skipWhiteSpace(s),l=At.findGuardPattern(s,i,At.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,i){let l=this.narrowLineWidth*10;l=l<i?l:i;for(let c=i-1;l>0&&c>=0&&!s.get(c);c--)l--;if(l!==0)throw new G}static skipWhiteSpace(s){const i=s.getSize(),l=s.getNextSet(0);if(l===i)throw new G;return l}decodeEnd(s){s.reverse();try{let i=At.skipWhiteSpace(s),l;try{l=At.findGuardPattern(s,i,At.END_PATTERN_REVERSED[0])}catch(d){d instanceof G&&(l=At.findGuardPattern(s,i,At.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let c=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-c,l}finally{s.reverse()}}static findGuardPattern(s,i,l){let c=l.length,d=new Int32Array(c),x=s.getSize(),m=!1,B=0,E=i;d.fill(0);for(let U=i;U<x;U++)if(s.get(U)!==m)d[B]++;else{if(B===c-1){if(Ut.patternMatchVariance(d,l,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return[E,U];E+=d[0]+d[1],F.arraycopy(d,2,d,0,B-1),d[B-1]=0,d[B]=0,B--}else B++;d[B]=1,m=!m}throw new G}static decodeDigit(s){let i=At.MAX_AVG_VARIANCE,l=-1,c=At.PATTERNS.length;for(let d=0;d<c;d++){let x=At.PATTERNS[d],m=Ut.patternMatchVariance(s,x,At.MAX_INDIVIDUAL_VARIANCE);m<i?(i=m,l=d):m===i&&(l=-1)}if(l>=0)return l%10;throw new G}}At.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],At.MAX_AVG_VARIANCE=.38,At.MAX_INDIVIDUAL_VARIANCE=.5,At.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],At.START_PATTERN=Int32Array.from([1,1,1,1]),At.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let i=!1,l,c=0,d=Int32Array.from([0,0,0]);for(;!i;){d=Int32Array.from([0,0,0]),l=Ct.findGuardPattern(s,c,!1,this.START_END_PATTERN,d);let x=l[0];c=l[1];let m=x-(c-x);m>=0&&(i=s.isRange(m,x,!1))}return l}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let i=s.length;if(i===0)return!1;let l=parseInt(s.charAt(i-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,i-1))===l}static getStandardUPCEANChecksum(s){let i=s.length,l=0;for(let c=i-1;c>=0;c-=2){let d=s.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new D;l+=d}l*=3;for(let c=i-2;c>=0;c-=2){let d=s.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new D;l+=d}return(1e3-l)%10}static decodeEnd(s,i){return Ct.findGuardPattern(s,i,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,i,l,c){return this.findGuardPattern(s,i,l,c,new Int32Array(c.length))}static findGuardPattern(s,i,l,c,d){let x=s.getSize();i=l?s.getNextUnset(i):s.getNextSet(i);let m=0,B=i,E=c.length,U=l;for(let R=i;R<x;R++)if(s.get(R)!==U)d[m]++;else{if(m===E-1){if(Ut.patternMatchVariance(d,c,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([B,R]);B+=d[0]+d[1];let O=d.slice(2,d.length-1);for(let V=0;V<m-1;V++)d[V]=O[V];d[m-1]=0,d[m]=0,m--}else m++;d[m]=1,U=!U}throw new G}static decodeDigit(s,i,l,c){this.recordPattern(s,l,i);let d=this.MAX_AVG_VARIANCE,x=-1,m=c.length;for(let B=0;B<m;B++){let E=c[B],U=Ut.patternMatchVariance(i,E,Ct.MAX_INDIVIDUAL_VARIANCE);U<d&&(d=U,x=B)}if(x>=0)return x;throw new G}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ds{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,i,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(i,l,c),x=c.toString(),m=Ds.parseExtensionString(x),B=[new Ce((l[0]+l[1])/2,s),new Ce(d,s)],E=new se(x,null,0,B,fe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(s,i,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),x=i[1],m=0;for(let E=0;E<5&&x<d;E++){let U=Ct.decodeDigit(s,c,x,Ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+U%10);for(let R of c)x+=R;U>=10&&(m|=1<<4-E),E!==4&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(l.length!==5)throw new G;let B=this.determineCheckDigit(m);if(Ds.extensionChecksum(l.toString())!==B)throw new G;return x}static extensionChecksum(s){let i=s.length,l=0;for(let c=i-2;c>=0;c-=2)l+=s.charAt(c).charCodeAt(0)-48;l*=3;for(let c=i-1;c>=0;c-=2)l+=s.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let i=0;i<10;i++)if(s===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new G}static parseExtensionString(s){if(s.length!==5)return null;let i=Ds.parseExtension5String(s);return i==null?null:new Map([[pe.SUGGESTED_PRICE,i]])}static parseExtension5String(s){let i;switch(s.charAt(0)){case"0":i="£";break;case"5":i="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let l=parseInt(s.substring(1)),c=(l/100).toString(),d=l%100,x=d<10?"0"+d:d.toString();return i+c+"."+x}}class Ca{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,i,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(i,l,c),x=c.toString(),m=Ca.parseExtensionString(x),B=[new Ce((l[0]+l[1])/2,s),new Ce(d,s)],E=new se(x,null,0,B,fe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(s,i,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),x=i[1],m=0;for(let B=0;B<2&&x<d;B++){let E=Ct.decodeDigit(s,c,x,Ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let U of c)x+=U;E>=10&&(m|=1<<1-B),B!==1&&(x=s.getNextSet(x),x=s.getNextUnset(x))}if(l.length!==2)throw new G;if(parseInt(l.toString())%4!==m)throw new G;return x}static parseExtensionString(s){return s.length!==2?null:new Map([[pe.ISSUE_NUMBER,parseInt(s)]])}}class Ea{static decodeRow(s,i,l){let c=Ct.findGuardPattern(i,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ds().decodeRow(s,i,c)}catch{return new Ca().decodeRow(s,i,c)}}}Ea.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Je extends Ct{constructor(){super(),this.decodeRowStringBuffer="",Je.L_AND_G_PATTERNS=Je.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let i=Je.L_PATTERNS[s-10],l=new Int32Array(i.length);for(let c=0;c<i.length;c++)l[c]=i[i.length-c-1];Je.L_AND_G_PATTERNS[s]=l}}decodeRow(s,i,l){let c=Je.findStartGuardPattern(i),d=l==null?null:l.get(Q.NEED_RESULT_POINT_CALLBACK);if(d!=null){const ge=new Ce((c[0]+c[1])/2,s);d.foundPossibleResultPoint(ge)}let x=this.decodeMiddle(i,c,this.decodeRowStringBuffer),m=x.rowOffset,B=x.resultString;if(d!=null){const ge=new Ce(m,s);d.foundPossibleResultPoint(ge)}let E=this.decodeEnd(i,m);if(d!=null){const ge=new Ce((E[0]+E[1])/2,s);d.foundPossibleResultPoint(ge)}let U=E[1],R=U+(U-E[0]);if(R>=i.getSize()||!i.isRange(U,R,!1))throw new G;let O=B.toString();if(O.length<8)throw new D;if(!Je.checkChecksum(O))throw new C;let V=(c[1]+c[0])/2,W=(E[1]+E[0])/2,q=this.getBarcodeFormat(),te=[new Ce(V,s),new Ce(W,s)],ae=new se(O,null,0,te,q,new Date().getTime()),ye=0;try{let ge=Ea.decodeRow(s,i,E[1]);ae.putMetadata(pe.UPC_EAN_EXTENSION,ge.getText()),ae.putAllMetadata(ge.getResultMetadata()),ae.addResultPoints(ge.getResultPoints()),ye=ge.getText().length}catch{}let Be=l==null?null:l.get(Q.ALLOWED_EAN_EXTENSIONS);if(Be!=null){let ge=!1;for(let ze in Be)if(ye.toString()===ze){ge=!0;break}if(!ge)throw new G}return ae}decodeEnd(s,i){return Je.findGuardPattern(s,i,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Je.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let i=s.length;if(i===0)return!1;let l=parseInt(s.charAt(i-1),10);return Je.getStandardUPCEANChecksum(s.substring(0,i-1))===l}static getStandardUPCEANChecksum(s){let i=s.length,l=0;for(let c=i-1;c>=0;c-=2){let d=s.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new D;l+=d}l*=3;for(let c=i-2;c>=0;c-=2){let d=s.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new D;l+=d}return(1e3-l)%10}}class qn extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,i,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),x=i[1],m=0;for(let E=0;E<6&&x<d;E++){let U=Je.decodeDigit(s,c,x,Je.L_AND_G_PATTERNS);l+=String.fromCharCode(48+U%10);for(let R of c)x+=R;U>=10&&(m|=1<<5-E)}l=qn.determineFirstDigit(l,m),x=Je.findGuardPattern(s,x,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&x<d;E++){let U=Je.decodeDigit(s,c,x,Je.L_PATTERNS);l+=String.fromCharCode(48+U);for(let R of c)x+=R}return{rowOffset:x,resultString:l}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(s,i){for(let l=0;l<10;l++)if(i===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new G}}qn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class dl extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,i,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),x=i[1];for(let B=0;B<4&&x<d;B++){let E=Je.decodeDigit(s,c,x,Je.L_PATTERNS);l+=String.fromCharCode(48+E);for(let U of c)x+=U}x=Je.findGuardPattern(s,x,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let B=0;B<4&&x<d;B++){let E=Je.decodeDigit(s,c,x,Je.L_PATTERNS);l+=String.fromCharCode(48+E);for(let U of c)x+=U}return{rowOffset:x,resultString:l}}getBarcodeFormat(){return fe.EAN_8}}class hl extends Je{constructor(){super(...arguments),this.ean13Reader=new qn}getBarcodeFormat(){return fe.UPC_A}decode(s,i){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,i,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,i,l))}decodeMiddle(s,i,l){return this.ean13Reader.decodeMiddle(s,i,l)}maybeReturnResult(s){let i=s.getText();if(i.charAt(0)==="0"){let l=new se(i.substring(1),null,null,s.getResultPoints(),fe.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new G}reset(){this.ean13Reader.reset()}}class rn extends Je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,i,l){const c=this.decodeMiddleCounters.map(E=>E);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=s.getSize();let x=i[1],m=0;for(let E=0;E<6&&x<d;E++){const U=rn.decodeDigit(s,c,x,rn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+U%10);for(let R of c)x+=R;U>=10&&(m|=1<<5-E)}let B=rn.determineNumSysAndCheckDigit(l,m);return{rowOffset:x,resultString:B}}decodeEnd(s,i){return rn.findGuardPatternWithoutCounters(s,i,!0,rn.MIDDLE_END_PATTERN)}checkChecksum(s){return Je.checkChecksum(rn.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,i){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let d=String.fromCharCode(48+l),x=String.fromCharCode(48+c);return d+s+x}throw G.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(s){const i=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new X;l.append(s.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:l.appendChars(i,0,2),l.append(c),l.append("0000"),l.appendChars(i,2,3);break;case 3:l.appendChars(i,0,3),l.append("00000"),l.appendChars(i,3,2);break;case 4:l.appendChars(i,0,4),l.append("00000"),l.append(i[4]);break;default:l.appendChars(i,0,5),l.append("0000"),l.append(c);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}rn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ai extends Ut{constructor(s){super();let i=s==null?null:s.get(Q.POSSIBLE_FORMATS),l=[];n(i)?(l.push(new qn),l.push(new hl),l.push(new dl),l.push(new rn)):(i.indexOf(fe.EAN_13)>-1&&l.push(new qn),i.indexOf(fe.UPC_A)>-1&&l.push(new hl),i.indexOf(fe.EAN_8)>-1&&l.push(new dl),i.indexOf(fe.UPC_E)>-1&&l.push(new rn)),this.readers=l}decodeRow(s,i,l){for(let c of this.readers)try{const d=c.decodeRow(s,i,l),x=d.getBarcodeFormat()===fe.EAN_13&&d.getText().charAt(0)==="0",m=l==null?null:l.get(Q.POSSIBLE_FORMATS),B=m==null||m.includes(fe.UPC_A);if(x&&B){const E=d.getRawBytes(),U=new se(d.getText().substring(1),E,E?E.length:null,d.getResultPoints(),fe.UPC_A);return U.putAllMetadata(d.getResultMetadata()),U}return d}catch{}throw new G}reset(){for(let s of this.readers)s.reset()}}class Ar extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,i){for(let l=0;l<i.length;l++)if(Ut.patternMatchVariance(s,i[l],Ar.MAX_INDIVIDUAL_VARIANCE)<Ar.MAX_AVG_VARIANCE)return l;throw new G}static count(s){return Ke.sum(new Int32Array(s))}static increment(s,i){let l=0,c=i[0];for(let d=1;d<s.length;d++)i[d]>c&&(c=i[d],l=d);s[l]++}static decrement(s,i){let l=0,c=i[0];for(let d=1;d<s.length;d++)i[d]<c&&(c=i[d],l=d);s[l]--}static isFinderPattern(s){let i=s[0]+s[1],l=i+s[2]+s[3],c=i/l;if(c>=Ar.MIN_FINDER_PATTERN_RATIO&&c<=Ar.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let m of s)m>x&&(x=m),m<d&&(d=m);return x<10*d}return!1}}Ar.MAX_AVG_VARIANCE=.2,Ar.MAX_INDIVIDUAL_VARIANCE=.45,Ar.MIN_FINDER_PATTERN_RATIO=9.5/12,Ar.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ts{constructor(s,i){this.value=s,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ts))return!1;const i=s;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class IA{constructor(s,i,l,c,d){this.value=s,this.startEnd=i,this.value=s,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Ce(l,d)),this.resultPoints.push(new Ce(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof IA))return!1;const i=s;return this.value===i.value}hashCode(){return this.value}}class fn{constructor(){}static getRSSvalue(s,i,l){let c=0;for(let B of s)c+=B;let d=0,x=0,m=s.length;for(let B=0;B<m-1;B++){let E;for(E=1,x|=1<<B;E<s[B];E++,x&=~(1<<B)){let U=fn.combins(c-E-1,m-B-2);if(l&&x===0&&c-E-(m-B-1)>=m-B-1&&(U-=fn.combins(c-E-(m-B),m-B-2)),m-B-1>1){let R=0;for(let O=c-E-(m-B-2);O>i;O--)R+=fn.combins(c-E-O-1,m-B-3);U-=R*(m-1-B)}else c-E>i&&U--;d+=U}c-=E}return d}static combins(s,i){let l,c;s-i>i?(c=i,l=s-i):(c=s-i,l=i);let d=1,x=1;for(let m=s;m>l;m--)d*=m,x<=c&&(d/=x,x++);for(;x<=c;)d/=x,x++;return d}}class fl{static buildBitArray(s){let i=s.length*2-1;s[s.length-1].getRightChar()==null&&(i-=1);let l=12*i,c=new S(l),d=0,m=s[0].getRightChar().getValue();for(let B=11;B>=0;--B)m&1<<B&&c.set(d),d++;for(let B=1;B<s.length;++B){let E=s[B],U=E.getLeftChar().getValue();for(let R=11;R>=0;--R)U&1<<R&&c.set(d),d++;if(E.getRightChar()!=null){let R=E.getRightChar().getValue();for(let O=11;O>=0;--O)R&1<<O&&c.set(d),d++}}return c}}class Lt{constructor(s,i){i?this.decodedInformation=null:(this.finished=s,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class xn{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class gr extends xn{constructor(s,i){super(s),this.value=i}getValue(){return this.value}isFNC1(){return this.value===gr.FNC1}}gr.FNC1="$";class cs extends xn{constructor(s,i,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class gn extends xn{constructor(s,i,l){if(super(s),i<0||i>10||l<0||l>10)throw new D;this.firstDigit=i,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===gn.FNC1}isAnyFNC1(){return this.firstDigit===gn.FNC1||this.secondDigit===gn.FNC1}}gn.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new G;let i=s.substring(0,2);for(let d of Ne.TWO_DIGIT_DATA_LENGTH)if(d[0]===i)return d[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,d[2],s):Ne.processFixedAI(2,d[1],s);if(s.length<3)throw new G;let l=s.substring(0,3);for(let d of Ne.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,d[2],s):Ne.processFixedAI(3,d[1],s);for(let d of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,d[2],s):Ne.processFixedAI(4,d[1],s);if(s.length<4)throw new G;let c=s.substring(0,4);for(let d of Ne.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,d[2],s):Ne.processFixedAI(4,d[1],s);throw new G}static processFixedAI(s,i,l){if(l.length<s)throw new G;let c=l.substring(0,s);if(l.length<s+i)throw new G;let d=l.substring(s,s+i),x=l.substring(s+i),m="("+c+")"+d,B=Ne.parseFieldsInGeneralPurpose(x);return B==null?m:m+B}static processVariableAI(s,i,l){let c=l.substring(0,s),d;l.length<s+i?d=l.length:d=s+i;let x=l.substring(s,d),m=l.substring(d),B="("+c+")"+x,E=Ne.parseFieldsInGeneralPurpose(m);return E==null?B:B+E}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class oi{constructor(s){this.buffer=new X,this.information=s}decodeAllCodes(s,i){let l=i,c=null;do{let d=this.decodeGeneralPurposeField(l,c),x=Ne.parseFieldsInGeneralPurpose(d.getNewString());if(x!=null&&s.append(x),d.isRemaining()?c=""+d.getRemainingValue():c=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let i=s;i<s+3;++i)if(this.information.get(i))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new gn(this.information.getSize(),gn.FNC1,gn.FNC1):new gn(this.information.getSize(),d-1,gn.FNC1)}let i=this.extractNumericValueFromBitArray(s,7),l=(i-8)/11,c=(i-8)%11;return new gn(s+7,l,c)}extractNumericValueFromBitArray(s,i){return oi.extractNumericValueFromBitArray(this.information,s,i)}static extractNumericValueFromBitArray(s,i,l){let c=0;for(let d=0;d<l;++d)s.get(i+d)&&(c|=1<<l-d-1);return c}decodeGeneralPurposeField(s,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new cs(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new cs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,i;do{let l=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),s=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),s=i.isFinished()):(i=this.parseNumericBlock(),s=i.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let i;return s.isSecondDigitFNC1()?i=new cs(this.current.getPosition(),this.buffer.toString()):i=new cs(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Lt(!0,i)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let i=new cs(this.current.getPosition(),this.buffer.toString());return new Lt(!0,i)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let i=new cs(this.current.getPosition(),this.buffer.toString());return new Lt(!0,i)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let i=new cs(this.current.getPosition(),this.buffer.toString());return new Lt(!0,i)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lt(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(s,5);if(i>=5&&i<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,8);return c>=232&&c<253}decodeIsoIec646(s){let i=this.extractNumericValueFromBitArray(s,5);if(i===15)return new gr(s+5,gr.FNC1);if(i>=5&&i<15)return new gr(s+5,"0"+(i-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new gr(s+7,""+(l+1));if(l>=90&&l<116)return new gr(s+7,""+(l+7));let c=this.extractNumericValueFromBitArray(s,8),d;switch(c){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new D}return new gr(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(s,5);if(i>=5&&i<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let i=this.extractNumericValueFromBitArray(s,5);if(i===15)return new gr(s+5,gr.FNC1);if(i>=5&&i<15)return new gr(s+5,"0"+(i-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new gr(s+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ke("Decoding invalid alphanumeric value: "+l)}return new gr(s+6,c)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let i=0;i<5&&i+s<this.information.getSize();++i)if(i===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+i))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let i=s;i<s+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let i=0;i<4&&i+s<this.information.getSize();++i)if(this.information.get(s+i))return!1;return!0}}class i0{constructor(s){this.information=s,this.generalDecoder=new oi(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vr extends i0{constructor(s){super(s)}encodeCompressedGtin(s,i){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,i,l)}encodeCompressedGtinWithoutAI(s,i,l){for(let c=0;c<4;++c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);d/100===0&&s.append("0"),d/10===0&&s.append("0"),s.append(d)}Vr.appendCheckDigit(s,l)}static appendCheckDigit(s,i){let l=0;for(let c=0;c<13;c++){let d=s.charAt(c+i).charCodeAt(0)-48;l+=c&1?d:3*d}l=10-l%10,l===10&&(l=0),s.append(l)}}Vr.GTIN_SIZE=40;class li extends Vr{constructor(s){super(s)}parseInformation(){let s=new X;s.append("(01)");let i=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,li.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(s,li.HEADER_SIZE+44)}}li.HEADER_SIZE=4;class xl extends i0{constructor(s){super(s)}parseInformation(){let s=new X;return this.getGeneralDecoder().decodeAllCodes(s,xl.HEADER_SIZE)}}xl.HEADER_SIZE=5;class gl extends Vr{constructor(s){super(s)}encodeCompressedWeight(s,i,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,l);this.addWeightCode(s,c);let d=this.checkWeight(c),x=1e5;for(let m=0;m<5;++m)d/x===0&&s.append("0"),x/=10;s.append(d)}}class $n extends gl{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=$n.HEADER_SIZE+gl.GTIN_SIZE+$n.WEIGHT_SIZE)throw new G;let s=new X;return this.encodeCompressedGtin(s,$n.HEADER_SIZE),this.encodeCompressedWeight(s,$n.HEADER_SIZE+gl.GTIN_SIZE,$n.WEIGHT_SIZE),s.toString()}}$n.HEADER_SIZE=5,$n.WEIGHT_SIZE=15;class Iv extends $n{constructor(s){super(s)}addWeightCode(s,i){s.append("(3103)")}checkWeight(s){return s}}class Sv extends $n{constructor(s){super(s)}addWeightCode(s,i){i<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Yn extends Vr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Yn.HEADER_SIZE+Vr.GTIN_SIZE)throw new G;let s=new X;this.encodeCompressedGtin(s,Yn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Yn.HEADER_SIZE+Vr.GTIN_SIZE,Yn.LAST_DIGIT_SIZE);s.append("(392"),s.append(i),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Yn.HEADER_SIZE+Vr.GTIN_SIZE+Yn.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}Yn.HEADER_SIZE=8,Yn.LAST_DIGIT_SIZE=2;class jr extends Vr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<jr.HEADER_SIZE+Vr.GTIN_SIZE)throw new G;let s=new X;this.encodeCompressedGtin(s,jr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(jr.HEADER_SIZE+Vr.GTIN_SIZE,jr.LAST_DIGIT_SIZE);s.append("(393"),s.append(i),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(jr.HEADER_SIZE+Vr.GTIN_SIZE+jr.LAST_DIGIT_SIZE,jr.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(jr.HEADER_SIZE+Vr.GTIN_SIZE+jr.LAST_DIGIT_SIZE+jr.FIRST_THREE_DIGITS_SIZE,null);return s.append(c.getNewString()),s.toString()}}jr.HEADER_SIZE=8,jr.LAST_DIGIT_SIZE=2,jr.FIRST_THREE_DIGITS_SIZE=10;class Et extends gl{constructor(s,i,l){super(s),this.dateCode=l,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE+Et.DATE_SIZE)throw new G;let s=new X;return this.encodeCompressedGtin(s,Et.HEADER_SIZE),this.encodeCompressedWeight(s,Et.HEADER_SIZE+Et.GTIN_SIZE,Et.WEIGHT_SIZE),this.encodeCompressedDate(s,Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Et.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let c=l%32;l/=32;let d=l%12+1;l/=12;let x=l;x/10==0&&s.append("0"),s.append(x),d/10==0&&s.append("0"),s.append(d),c/10==0&&s.append("0"),s.append(c)}addWeightCode(s,i){s.append("("),s.append(this.firstAIdigits),s.append(i/1e5),s.append(")")}checkWeight(s){return s%1e5}}Et.HEADER_SIZE=8,Et.WEIGHT_SIZE=20,Et.DATE_SIZE=16;function cx(T){try{if(T.get(1))return new li(T);if(!T.get(2))return new xl(T);switch(oi.extractNumericValueFromBitArray(T,1,4)){case 4:return new Iv(T);case 5:return new Sv(T)}switch(oi.extractNumericValueFromBitArray(T,1,5)){case 12:return new Yn(T);case 13:return new jr(T)}switch(oi.extractNumericValueFromBitArray(T,1,7)){case 56:return new Et(T,"310","11");case 57:return new Et(T,"320","11");case 58:return new Et(T,"310","13");case 59:return new Et(T,"320","13");case 60:return new Et(T,"310","15");case 61:return new Et(T,"320","15");case 62:return new Et(T,"310","17");case 63:return new Et(T,"320","17")}}catch(s){throw console.log(s),new ke("unknown decoder: "+T)}}class Rs{constructor(s,i,l,c){this.leftchar=s,this.rightchar=i,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,i){return s instanceof Rs?Rs.equalsOrNull(s.leftchar,i.leftchar)&&Rs.equalsOrNull(s.rightchar,i.rightchar)&&Rs.equalsOrNull(s.finderpattern,i.finderpattern):!1}static equalsOrNull(s,i){return s===null?i===null:Rs.equals(s,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class a0{constructor(s,i,l){this.pairs=s,this.rowNumber=i,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,i){return s instanceof a0?this.checkEqualitity(s,i)&&s.wasReversed===i.wasReversed:!1}checkEqualitity(s,i){if(!s||!i)return;let l;return s.forEach((c,d)=>{i.forEach(x=>{c.getLeftChar().getValue()===x.getLeftChar().getValue()&&c.getRightChar().getValue()===x.getRightChar().getValue()&&c.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(l=!0)})}),l}}class xe extends Ar{constructor(s){super(...arguments),this.pairs=new Array(xe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,i,l){this.pairs.length=0,this.startFromEven=!1;try{return xe.constructResult(this.decodeRow2pairs(s,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,xe.constructResult(this.decodeRow2pairs(s,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,i){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,s))}catch(d){if(d instanceof G){if(!this.pairs.length)throw new G;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(s,!1),c){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new G}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),i}checkRows(s,i){for(let l=i;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let x of s)this.pairs.push(x.getPairs());if(this.pairs.push(c.getPairs()),!xe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(c);try{return this.checkRows(d,l+1)}catch(x){this.verbose&&console.log(x)}}throw new G}static isValidSequence(s){for(let i of xe.FINDER_PATTERN_SEQUENCES){if(s.length>i.length)continue;let l=!0;for(let c=0;c<s.length;c++)if(s[c].getFinderPattern().getValue()!=i[c]){l=!1;break}if(l)return!0}return!1}storeRow(s,i){let l=0,c=!1,d=!1;for(;l<this.rows.length;){let x=this.rows[l];if(x.getRowNumber()>s){d=x.isEquivalent(this.pairs);break}c=x.isEquivalent(this.pairs),l++}d||c||xe.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new a0(this.pairs,s,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,i){for(let l of i)if(l.getPairs().length!==s.length){for(let c of l.getPairs())for(let d of s)if(Rs.equals(c,d))break}}static isPartialRow(s,i){for(let l of i){let c=!0;for(let d of s){let x=!1;for(let m of l.getPairs())if(d.equals(m)){x=!0;break}if(!x){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(s){let i=fl.buildBitArray(s),c=cx(i).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),x=s[s.length-1].getFinderPattern().getResultPoints(),m=[d[0],d[1],x[0],x[1]];return new se(c,null,null,m,fe.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),i=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),d=2;for(let m=1;m<this.pairs.size();++m){let B=this.pairs.get(m);c+=B.getLeftChar().getChecksumPortion(),d++;let E=B.getRightChar();E!=null&&(c+=E.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==i.getValue()}static getNextSecondBar(s,i){let l;return s.get(i)?(l=s.getNextUnset(i),l=s.getNextSet(l)):(l=s.getNextSet(i),l=s.getNextUnset(l)),l}retrieveNextPair(s,i,l){let c=i.length%2==0;this.startFromEven&&(c=!c);let d,x=!0,m=-1;do this.findNextPair(s,i,m),d=this.parseFoundFinderPattern(s,l,c),d==null?m=xe.getNextSecondBar(s,this.startEnd[0]):x=!1;while(x);let B=this.decodeDataCharacter(s,d,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new G;let E;try{E=this.decodeDataCharacter(s,d,c,!1)}catch(U){E=null,this.verbose&&console.log(U)}return new Rs(B,E,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,i,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=s.getSize(),x;l>=0?x=l:this.isEmptyPair(i)?x=0:x=i[i.length-1].getFinderPattern().getStartEnd()[1];let m=i.length%2!=0;this.startFromEven&&(m=!m);let B=!1;for(;x<d&&(B=!s.get(x),!!B);)x++;let E=0,U=x;for(let R=x;R<d;R++)if(s.get(R)!=B)c[E]++;else{if(E==3){if(m&&xe.reverseCounters(c),xe.isFinderPattern(c)){this.startEnd[0]=U,this.startEnd[1]=R;return}m&&xe.reverseCounters(c),U+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,E--}else E++;c[E]=1,B=!B}throw new G}static reverseCounters(s){let i=s.length;for(let l=0;l<i/2;++l){let c=s[l];s[l]=s[i-l-1],s[i-l-1]=c}}parseFoundFinderPattern(s,i,l){let c,d,x;if(l){let E=this.startEnd[0]-1;for(;E>=0&&!s.get(E);)E--;E++,c=this.startEnd[0]-E,d=E,x=this.startEnd[1]}else d=this.startEnd[0],x=s.getNextUnset(this.startEnd[1]+1),c=x-this.startEnd[1];let m=this.getDecodeFinderCounters();F.arraycopy(m,0,m,1,m.length-1),m[0]=c;let B;try{B=this.parseFinderValue(m,xe.FINDER_PATTERNS)}catch{return null}return new IA(B,[d,x],d,x,i)}decodeDataCharacter(s,i,l,c){let d=this.getDataCharacterCounters();for(let ut=0;ut<d.length;ut++)d[ut]=0;if(c)xe.recordPatternInReverse(s,i.getStartEnd()[0],d);else{xe.recordPattern(s,i.getStartEnd()[1],d);for(let ut=0,wr=d.length-1;ut<wr;ut++,wr--){let nn=d[ut];d[ut]=d[wr],d[wr]=nn}}let x=17,m=Ke.sum(new Int32Array(d))/x,B=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(m-B)/B>.3)throw new G;let E=this.getOddCounts(),U=this.getEvenCounts(),R=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let ut=0;ut<d.length;ut++){let wr=1*d[ut]/m,nn=wr+.5;if(nn<1){if(wr<.3)throw new G;nn=1}else if(nn>8){if(wr>8.7)throw new G;nn=8}let fi=ut/2;ut&1?(U[fi]=nn,O[fi]=wr-nn):(E[fi]=nn,R[fi]=wr-nn)}this.adjustOddEvenCounts(x);let V=4*i.getValue()+(l?0:2)+(c?0:1)-1,W=0,q=0;for(let ut=E.length-1;ut>=0;ut--){if(xe.isNotA1left(i,l,c)){let wr=xe.WEIGHTS[V][2*ut];q+=E[ut]*wr}W+=E[ut]}let te=0;for(let ut=U.length-1;ut>=0;ut--)if(xe.isNotA1left(i,l,c)){let wr=xe.WEIGHTS[V][2*ut+1];te+=U[ut]*wr}let ae=q+te;if(W&1||W>13||W<4)throw new G;let ye=(13-W)/2,Be=xe.SYMBOL_WIDEST[ye],ge=9-Be,ze=fn.getRSSvalue(E,Be,!0),Le=fn.getRSSvalue(U,ge,!1),zr=xe.EVEN_TOTAL_SUBSET[ye],Dn=xe.GSUM[ye],Wr=ze*zr+Le+Dn;return new Ts(Wr,ae)}static isNotA1left(s,i,l){return!(s.getValue()==0&&i&&l)}adjustOddEvenCounts(s){let i=Ke.sum(new Int32Array(this.getOddCounts())),l=Ke.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;i>13?d=!0:i<4&&(c=!0);let x=!1,m=!1;l>13?m=!0:l<4&&(x=!0);let B=i+l-s,E=(i&1)==1,U=(l&1)==0;if(B==1)if(E){if(U)throw new G;d=!0}else{if(!U)throw new G;m=!0}else if(B==-1)if(E){if(U)throw new G;c=!0}else{if(!U)throw new G;x=!0}else if(B==0){if(E){if(!U)throw new G;i<l?(c=!0,m=!0):(d=!0,x=!0)}else if(U)throw new G}else throw new G;if(c){if(d)throw new G;xe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&xe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(m)throw new G;xe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&xe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xe.SYMBOL_WIDEST=[7,5,4,3,1],xe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],xe.GSUM=[0,348,1388,2948,3988],xe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],xe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],xe.FINDER_PAT_A=0,xe.FINDER_PAT_B=1,xe.FINDER_PAT_C=2,xe.FINDER_PAT_D=3,xe.FINDER_PAT_E=4,xe.FINDER_PAT_F=5,xe.FINDER_PATTERN_SEQUENCES=[[xe.FINDER_PAT_A,xe.FINDER_PAT_A],[xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B],[xe.FINDER_PAT_A,xe.FINDER_PAT_C,xe.FINDER_PAT_B,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_C],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F]],xe.MAX_PAIRS=11;class Uv extends Ts{constructor(s,i,l){super(s,i),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Dt extends Ar{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,i,l){const c=this.decodePair(i,!1,s,l);Dt.addOrTally(this.possibleLeftPairs,c),i.reverse();let d=this.decodePair(i,!0,s,l);Dt.addOrTally(this.possibleRightPairs,d),i.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Dt.checkChecksum(x,m))return Dt.constructResult(x,m)}throw new G}static addOrTally(s,i){if(i==null)return;let l=!1;for(let c of s)if(c.getValue()===i.getValue()){c.incrementCount(),l=!0;break}l||s.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,i){let l=4537077*s.getValue()+i.getValue(),c=new String(l).toString(),d=new X;for(let E=13-c.length;E>0;E--)d.append("0");d.append(c);let x=0;for(let E=0;E<13;E++){let U=d.charAt(E).charCodeAt(0)-48;x+=E&1?U:3*U}x=10-x%10,x===10&&(x=0),d.append(x.toString());let m=s.getFinderPattern().getResultPoints(),B=i.getFinderPattern().getResultPoints();return new se(d.toString(),null,0,[m[0],m[1],B[0],B[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(s,i){let l=(s.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*s.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(s,i,l,c){try{let d=this.findFinderPattern(s,i),x=this.parseFoundFinderPattern(s,l,i,d),m=c==null?null:c.get(Q.NEED_RESULT_POINT_CALLBACK);if(m!=null){let U=(d[0]+d[1])/2;i&&(U=s.getSize()-1-U),m.foundPossibleResultPoint(new Ce(U,l))}let B=this.decodeDataCharacter(s,x,!0),E=this.decodeDataCharacter(s,x,!1);return new Uv(1597*B.getValue()+E.getValue(),B.getChecksumPortion()+4*E.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(s,i,l){let c=this.getDataCharacterCounters();for(let te=0;te<c.length;te++)c[te]=0;if(l)Ut.recordPatternInReverse(s,i.getStartEnd()[0],c);else{Ut.recordPattern(s,i.getStartEnd()[1]+1,c);for(let te=0,ae=c.length-1;te<ae;te++,ae--){let ye=c[te];c[te]=c[ae],c[ae]=ye}}let d=l?16:15,x=Ke.sum(new Int32Array(c))/d,m=this.getOddCounts(),B=this.getEvenCounts(),E=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let te=0;te<c.length;te++){let ae=c[te]/x,ye=Math.floor(ae+.5);ye<1?ye=1:ye>8&&(ye=8);let Be=Math.floor(te/2);te&1?(B[Be]=ye,U[Be]=ae-ye):(m[Be]=ye,E[Be]=ae-ye)}this.adjustOddEvenCounts(l,d);let R=0,O=0;for(let te=m.length-1;te>=0;te--)O*=9,O+=m[te],R+=m[te];let V=0,W=0;for(let te=B.length-1;te>=0;te--)V*=9,V+=B[te],W+=B[te];let q=O+3*V;if(l){if(R&1||R>12||R<4)throw new G;let te=(12-R)/2,ae=Dt.OUTSIDE_ODD_WIDEST[te],ye=9-ae,Be=fn.getRSSvalue(m,ae,!1),ge=fn.getRSSvalue(B,ye,!0),ze=Dt.OUTSIDE_EVEN_TOTAL_SUBSET[te],Le=Dt.OUTSIDE_GSUM[te];return new Ts(Be*ze+ge+Le,q)}else{if(W&1||W>10||W<4)throw new G;let te=(10-W)/2,ae=Dt.INSIDE_ODD_WIDEST[te],ye=9-ae,Be=fn.getRSSvalue(m,ae,!0),ge=fn.getRSSvalue(B,ye,!1),ze=Dt.INSIDE_ODD_TOTAL_SUBSET[te],Le=Dt.INSIDE_GSUM[te];return new Ts(ge*ze+Be+Le,q)}}findFinderPattern(s,i){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=s.getSize(),d=!1,x=0;for(;x<c&&(d=!s.get(x),i!==d);)x++;let m=0,B=x;for(let E=x;E<c;E++)if(s.get(E)!==d)l[m]++;else{if(m===3){if(Ar.isFinderPattern(l))return[B,E];B+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,d=!d}throw new G}parseFoundFinderPattern(s,i,l,c){let d=s.get(c[0]),x=c[0]-1;for(;x>=0&&d!==s.get(x);)x--;x++;const m=c[0]-x,B=this.getDecodeFinderCounters(),E=new Int32Array(B.length);F.arraycopy(B,0,E,1,B.length-1),E[0]=m;const U=this.parseFinderValue(E,Dt.FINDER_PATTERNS);let R=x,O=c[1];return l&&(R=s.getSize()-1-R,O=s.getSize()-1-O),new IA(U,[x,c[1]],R,O,i)}adjustOddEvenCounts(s,i){let l=Ke.sum(new Int32Array(this.getOddCounts())),c=Ke.sum(new Int32Array(this.getEvenCounts())),d=!1,x=!1,m=!1,B=!1;s?(l>12?x=!0:l<4&&(d=!0),c>12?B=!0:c<4&&(m=!0)):(l>11?x=!0:l<5&&(d=!0),c>10?B=!0:c<4&&(m=!0));let E=l+c-i,U=(l&1)===(s?1:0),R=(c&1)===1;if(E===1)if(U){if(R)throw new G;x=!0}else{if(!R)throw new G;B=!0}else if(E===-1)if(U){if(R)throw new G;d=!0}else{if(!R)throw new G;m=!0}else if(E===0){if(U){if(!R)throw new G;l<c?(d=!0,B=!0):(x=!0,m=!0)}else if(R)throw new G}else throw new G;if(d){if(x)throw new G;Ar.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Ar.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(B)throw new G;Ar.increment(this.getEvenCounts(),this.getOddRoundingErrors())}B&&Ar.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Dt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Dt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Dt.OUTSIDE_GSUM=[0,161,961,2015,2715],Dt.INSIDE_GSUM=[0,336,1036,1516],Dt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Dt.INSIDE_ODD_WIDEST=[2,4,6,8],Dt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ci extends Ut{constructor(s,i){super(),this.readers=[],this.verbose=i===!0;const l=s?s.get(Q.POSSIBLE_FORMATS):null,c=s&&s.get(Q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(fe.EAN_13)||l.includes(fe.UPC_A)||l.includes(fe.EAN_8)||l.includes(fe.UPC_E))&&this.readers.push(new ai(s)),l.includes(fe.CODE_39)&&this.readers.push(new Qt(c)),l.includes(fe.CODE_128)&&this.readers.push(new ve),l.includes(fe.ITF)&&this.readers.push(new At),l.includes(fe.RSS_14)&&this.readers.push(new Dt),l.includes(fe.RSS_EXPANDED)&&this.readers.push(new xe(this.verbose))):(this.readers.push(new ai(s)),this.readers.push(new Qt),this.readers.push(new ai(s)),this.readers.push(new ve),this.readers.push(new At),this.readers.push(new Dt),this.readers.push(new xe(this.verbose)))}decodeRow(s,i,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(s,i,l)}catch{}throw new G}reset(){this.readers.forEach(s=>s.reset())}}class Qv extends Ae{constructor(s=500,i){super(new ci(i),s,i)}}class nt{constructor(s,i,l){this.ecCodewords=s,this.ecBlocks=[i],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class rt{constructor(s,i){this.count=s,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(s,i,l,c,d,x){this.versionNumber=s,this.symbolSizeRows=i,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=x;let m=0;const B=x.getECCodewords(),E=x.getECBlocks();for(let U of E)m+=U.getCount()*(U.getDataCodewords()+B);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,i){if(s&1||i&1)throw new D;for(let l of Ye.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===i)return l;throw new D}toString(){return""+this.versionNumber}static buildVersions(){return[new Ye(1,10,10,8,8,new nt(5,new rt(1,3))),new Ye(2,12,12,10,10,new nt(7,new rt(1,5))),new Ye(3,14,14,12,12,new nt(10,new rt(1,8))),new Ye(4,16,16,14,14,new nt(12,new rt(1,12))),new Ye(5,18,18,16,16,new nt(14,new rt(1,18))),new Ye(6,20,20,18,18,new nt(18,new rt(1,22))),new Ye(7,22,22,20,20,new nt(20,new rt(1,30))),new Ye(8,24,24,22,22,new nt(24,new rt(1,36))),new Ye(9,26,26,24,24,new nt(28,new rt(1,44))),new Ye(10,32,32,14,14,new nt(36,new rt(1,62))),new Ye(11,36,36,16,16,new nt(42,new rt(1,86))),new Ye(12,40,40,18,18,new nt(48,new rt(1,114))),new Ye(13,44,44,20,20,new nt(56,new rt(1,144))),new Ye(14,48,48,22,22,new nt(68,new rt(1,174))),new Ye(15,52,52,24,24,new nt(42,new rt(2,102))),new Ye(16,64,64,14,14,new nt(56,new rt(2,140))),new Ye(17,72,72,16,16,new nt(36,new rt(4,92))),new Ye(18,80,80,18,18,new nt(48,new rt(4,114))),new Ye(19,88,88,20,20,new nt(56,new rt(4,144))),new Ye(20,96,96,22,22,new nt(68,new rt(4,174))),new Ye(21,104,104,24,24,new nt(56,new rt(6,136))),new Ye(22,120,120,18,18,new nt(68,new rt(6,175))),new Ye(23,132,132,20,20,new nt(62,new rt(8,163))),new Ye(24,144,144,22,22,new nt(62,new rt(8,156),new rt(2,155))),new Ye(25,8,18,6,16,new nt(7,new rt(1,5))),new Ye(26,8,32,6,14,new nt(11,new rt(1,10))),new Ye(27,12,26,10,24,new nt(14,new rt(1,16))),new Ye(28,12,36,10,16,new nt(18,new rt(1,22))),new Ye(29,16,36,14,16,new nt(24,new rt(1,32))),new Ye(30,16,48,14,22,new nt(28,new rt(1,49)))]}}Ye.VERSIONS=Ye.buildVersions();class o0{constructor(s){const i=s.getHeight();if(i<8||i>144||i&1)throw new D;this.version=o0.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const i=s.getHeight(),l=s.getWidth();return Ye.getVersionForDimensions(i,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let i=0,l=4,c=0;const d=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let m=!1,B=!1,E=!1,U=!1;do if(l===d&&c===0&&!m)s[i++]=this.readCorner1(d,x)&255,l-=2,c+=2,m=!0;else if(l===d-2&&c===0&&x&3&&!B)s[i++]=this.readCorner2(d,x)&255,l-=2,c+=2,B=!0;else if(l===d+4&&c===2&&!(x&7)&&!E)s[i++]=this.readCorner3(d,x)&255,l-=2,c+=2,E=!0;else if(l===d-2&&c===0&&(x&7)===4&&!U)s[i++]=this.readCorner4(d,x)&255,l-=2,c+=2,U=!0;else{do l<d&&c>=0&&!this.readMappingMatrix.get(c,l)&&(s[i++]=this.readUtah(l,c,d,x)&255),l-=2,c+=2;while(l>=0&&c<x);l+=1,c+=3;do l>=0&&c<x&&!this.readMappingMatrix.get(c,l)&&(s[i++]=this.readUtah(l,c,d,x)&255),l+=2,c-=2;while(l<d&&c>=0);l+=3,c+=1}while(l<d||c<x);if(i!==this.version.getTotalCodewords())throw new D;return s}readModule(s,i,l,c){return s<0&&(s+=l,i+=4-(l+4&7)),i<0&&(i+=c,s+=4-(c+4&7)),this.readMappingMatrix.set(i,s),this.mappingBitMatrix.get(i,s)}readUtah(s,i,l,c){let d=0;return this.readModule(s-2,i-2,l,c)&&(d|=1),d<<=1,this.readModule(s-2,i-1,l,c)&&(d|=1),d<<=1,this.readModule(s-1,i-2,l,c)&&(d|=1),d<<=1,this.readModule(s-1,i-1,l,c)&&(d|=1),d<<=1,this.readModule(s-1,i,l,c)&&(d|=1),d<<=1,this.readModule(s,i-2,l,c)&&(d|=1),d<<=1,this.readModule(s,i-1,l,c)&&(d|=1),d<<=1,this.readModule(s,i,l,c)&&(d|=1),d}readCorner1(s,i){let l=0;return this.readModule(s-1,0,s,i)&&(l|=1),l<<=1,this.readModule(s-1,1,s,i)&&(l|=1),l<<=1,this.readModule(s-1,2,s,i)&&(l|=1),l<<=1,this.readModule(0,i-2,s,i)&&(l|=1),l<<=1,this.readModule(0,i-1,s,i)&&(l|=1),l<<=1,this.readModule(1,i-1,s,i)&&(l|=1),l<<=1,this.readModule(2,i-1,s,i)&&(l|=1),l<<=1,this.readModule(3,i-1,s,i)&&(l|=1),l}readCorner2(s,i){let l=0;return this.readModule(s-3,0,s,i)&&(l|=1),l<<=1,this.readModule(s-2,0,s,i)&&(l|=1),l<<=1,this.readModule(s-1,0,s,i)&&(l|=1),l<<=1,this.readModule(0,i-4,s,i)&&(l|=1),l<<=1,this.readModule(0,i-3,s,i)&&(l|=1),l<<=1,this.readModule(0,i-2,s,i)&&(l|=1),l<<=1,this.readModule(0,i-1,s,i)&&(l|=1),l<<=1,this.readModule(1,i-1,s,i)&&(l|=1),l}readCorner3(s,i){let l=0;return this.readModule(s-1,0,s,i)&&(l|=1),l<<=1,this.readModule(s-1,i-1,s,i)&&(l|=1),l<<=1,this.readModule(0,i-3,s,i)&&(l|=1),l<<=1,this.readModule(0,i-2,s,i)&&(l|=1),l<<=1,this.readModule(0,i-1,s,i)&&(l|=1),l<<=1,this.readModule(1,i-3,s,i)&&(l|=1),l<<=1,this.readModule(1,i-2,s,i)&&(l|=1),l<<=1,this.readModule(1,i-1,s,i)&&(l|=1),l}readCorner4(s,i){let l=0;return this.readModule(s-3,0,s,i)&&(l|=1),l<<=1,this.readModule(s-2,0,s,i)&&(l|=1),l<<=1,this.readModule(s-1,0,s,i)&&(l|=1),l<<=1,this.readModule(0,i-2,s,i)&&(l|=1),l<<=1,this.readModule(0,i-1,s,i)&&(l|=1),l<<=1,this.readModule(1,i-1,s,i)&&(l|=1),l<<=1,this.readModule(2,i-1,s,i)&&(l|=1),l<<=1,this.readModule(3,i-1,s,i)&&(l|=1),l}extractDataRegion(s){const i=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==i)throw new w("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),x=i/c|0,m=l/d|0,B=x*c,E=m*d,U=new ce(E,B);for(let R=0;R<x;++R){const O=R*c;for(let V=0;V<m;++V){const W=V*d;for(let q=0;q<c;++q){const te=R*(c+2)+1+q,ae=O+q;for(let ye=0;ye<d;++ye){const Be=V*(d+2)+1+ye;if(s.get(Be,te)){const ge=W+ye;U.set(ge,ae)}}}}}return U}}class l0{constructor(s,i){this.numDataCodewords=s,this.codewords=i}static getDataBlocks(s,i){const l=i.getECBlocks();let c=0;const d=l.getECBlocks();for(let q of d)c+=q.getCount();const x=new Array(c);let m=0;for(let q of d)for(let te=0;te<q.getCount();te++){const ae=q.getDataCodewords(),ye=l.getECCodewords()+ae;x[m++]=new l0(ae,new Uint8Array(ye))}const E=x[0].codewords.length-l.getECCodewords(),U=E-1;let R=0;for(let q=0;q<U;q++)for(let te=0;te<m;te++)x[te].codewords[q]=s[R++];const O=i.getVersionNumber()===24,V=O?8:m;for(let q=0;q<V;q++)x[q].codewords[E-1]=s[R++];const W=x[0].codewords.length;for(let q=E;q<W;q++)for(let te=0;te<m;te++){const ae=O?(te+8)%m:te,ye=O&&ae>7?q-1:q;x[ae].codewords[ye]=s[R++]}if(R!==s.length)throw new w;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class c0{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new w(""+s);let i=0,l=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(l>0){const x=8-l,m=s<x?s:x,B=x-m,E=255>>8-m<<B;i=(d[c]&E)>>B,s-=m,l+=m,l===8&&(l=0,c++)}if(s>0){for(;s>=8;)i=i<<8|d[c]&255,c++,s-=8;if(s>0){const x=8-s,m=255>>x<<x;i=i<<s|(d[c]&m)>>x,l+=s}}return this.bitOffset=l,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class js{static decode(s){const i=new c0(s),l=new X,c=new X,d=new Array;let x=qt.ASCII_ENCODE;do if(x===qt.ASCII_ENCODE)x=this.decodeAsciiSegment(i,l,c);else{switch(x){case qt.C40_ENCODE:this.decodeC40Segment(i,l);break;case qt.TEXT_ENCODE:this.decodeTextSegment(i,l);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,l);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,l);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(i,l,d);break;default:throw new D}x=qt.ASCII_ENCODE}while(x!==qt.PAD_ENCODE&&i.available()>0);return c.length()>0&&l.append(c.toString()),new Xt(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,i,l){let c=!1;do{let d=s.readBits(8);if(d===0)throw new D;if(d<=128)return c&&(d+=128),i.append(String.fromCharCode(d-1)),qt.ASCII_ENCODE;if(d===129)return qt.PAD_ENCODE;if(d<=229){const x=d-130;x<10&&i.append("0"),i.append(""+x)}else switch(d){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),l.insert(0,"");break;case 237:i.append("[)>06"),l.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new D;break}}while(s.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(s,i){let l=!1;const c=[];let d=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),c);for(let m=0;m<3;m++){const B=c[m];switch(d){case 0:if(B<3)d=B+1;else if(B<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[B];l?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):i.append(E)}else throw new D;break;case 1:l?(i.append(String.fromCharCode(B+128)),l=!1):i.append(String.fromCharCode(B)),d=0;break;case 2:if(B<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[B];l?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):i.append(E)}else switch(B){case 27:i.append("");break;case 30:l=!0;break;default:throw new D}d=0;break;case 3:l?(i.append(String.fromCharCode(B+224)),l=!1):i.append(String.fromCharCode(B+96)),d=0;break;default:throw new D}}}while(s.available()>0)}static decodeTextSegment(s,i){let l=!1,c=[],d=0;do{if(s.available()===8)return;const x=s.readBits(8);if(x===254)return;this.parseTwoBytes(x,s.readBits(8),c);for(let m=0;m<3;m++){const B=c[m];switch(d){case 0:if(B<3)d=B+1;else if(B<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[B];l?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):i.append(E)}else throw new D;break;case 1:l?(i.append(String.fromCharCode(B+128)),l=!1):i.append(String.fromCharCode(B)),d=0;break;case 2:if(B<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[B];l?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):i.append(E)}else switch(B){case 27:i.append("");break;case 30:l=!0;break;default:throw new D}d=0;break;case 3:if(B<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[B];l?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):i.append(E),d=0}else throw new D;break;default:throw new D}}}while(s.available()>0)}static decodeAnsiX12Segment(s,i){const l=[];do{if(s.available()===8)return;const c=s.readBits(8);if(c===254)return;this.parseTwoBytes(c,s.readBits(8),l);for(let d=0;d<3;d++){const x=l[d];switch(x){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(x<14)i.append(String.fromCharCode(x+44));else if(x<40)i.append(String.fromCharCode(x+51));else throw new D;break}}}while(s.available()>0)}static parseTwoBytes(s,i,l){let c=(s<<8)+i-1,d=Math.floor(c/1600);l[0]=d,c-=d*1600,d=Math.floor(c/40),l[1]=d,l[2]=c-d*40}static decodeEdifactSegment(s,i){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let c=s.readBits(6);if(c===31){const d=8-s.getBitOffset();d!==8&&s.readBits(d);return}c&32||(c|=64),i.append(String.fromCharCode(c))}}while(s.available()>0)}static decodeBase256Segment(s,i,l){let c=1+s.getByteOffset();const d=this.unrandomize255State(s.readBits(8),c++);let x;if(d===0?x=s.available()/8|0:d<250?x=d:x=250*(d-249)+this.unrandomize255State(s.readBits(8),c++),x<0)throw new D;const m=new Uint8Array(x);for(let B=0;B<x;B++){if(s.available()<8)throw new D;m[B]=this.unrandomize255State(s.readBits(8),c++)}l.push(m);try{i.append(P.decode(m,z.ISO88591))}catch(B){throw new ke("Platform does not support required encoding: "+B.message)}}static unrandomize255State(s,i){const l=149*i%255+1,c=s-l;return c>=0?c:c+256}}js.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],js.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],js.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],js.TEXT_SHIFT2_SET_CHARS=js.C40_SHIFT2_SET_CHARS,js.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Dv{constructor(){this.rsDecoder=new rr(de.DATA_MATRIX_FIELD_256)}decode(s){const i=new o0(s),l=i.getVersion(),c=i.readCodewords(),d=l0.getDataBlocks(c,l);let x=0;for(let E of d)x+=E.getNumDataCodewords();const m=new Uint8Array(x),B=d.length;for(let E=0;E<B;E++){const U=d[E],R=U.getCodewords(),O=U.getNumDataCodewords();this.correctErrors(R,O);for(let V=0;V<O;V++)m[V*B+E]=R[V]}return js.decode(m)}correctErrors(s,i){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-i)}catch{throw new C}for(let c=0;c<i;c++)s[c]=l[c]}}class Mt{constructor(s){this.image=s,this.rectangleDetector=new Kr(this.image)}detect(){const s=this.rectangleDetector.detect();let i=this.detectSolid1(s);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new G;i=this.shiftToModuleCenter(i);const l=i[0],c=i[1],d=i[2],x=i[3];let m=this.transitionsBetween(l,x)+1,B=this.transitionsBetween(d,x)+1;(m&1)===1&&(m+=1),(B&1)===1&&(B+=1),4*m<7*B&&4*B<7*m&&(m=B=Math.max(m,B));let E=Mt.sampleGrid(this.image,l,c,d,x,m,B);return new xr(E,[l,c,d,x])}static shiftPoint(s,i,l){let c=(i.getX()-s.getX())/(l+1),d=(i.getY()-s.getY())/(l+1);return new Ce(s.getX()+c,s.getY()+d)}static moveAway(s,i,l){let c=s.getX(),d=s.getY();return c<i?c-=1:c+=1,d<l?d-=1:d+=1,new Ce(c,d)}detectSolid1(s){let i=s[0],l=s[1],c=s[3],d=s[2],x=this.transitionsBetween(i,l),m=this.transitionsBetween(l,c),B=this.transitionsBetween(c,d),E=this.transitionsBetween(d,i),U=x,R=[d,i,l,c];return U>m&&(U=m,R[0]=i,R[1]=l,R[2]=c,R[3]=d),U>B&&(U=B,R[0]=l,R[1]=c,R[2]=d,R[3]=i),U>E&&(R[0]=c,R[1]=d,R[2]=i,R[3]=l),R}detectSolid2(s){let i=s[0],l=s[1],c=s[2],d=s[3],x=this.transitionsBetween(i,d),m=Mt.shiftPoint(l,c,(x+1)*4),B=Mt.shiftPoint(c,l,(x+1)*4),E=this.transitionsBetween(m,i),U=this.transitionsBetween(B,d);return E<U?(s[0]=i,s[1]=l,s[2]=c,s[3]=d):(s[0]=l,s[1]=c,s[2]=d,s[3]=i),s}correctTopRight(s){let i=s[0],l=s[1],c=s[2],d=s[3],x=this.transitionsBetween(i,d),m=this.transitionsBetween(l,d),B=Mt.shiftPoint(i,l,(m+1)*4),E=Mt.shiftPoint(c,l,(x+1)*4);x=this.transitionsBetween(B,d),m=this.transitionsBetween(E,d);let U=new Ce(d.getX()+(c.getX()-l.getX())/(x+1),d.getY()+(c.getY()-l.getY())/(x+1)),R=new Ce(d.getX()+(i.getX()-l.getX())/(m+1),d.getY()+(i.getY()-l.getY())/(m+1));if(!this.isValid(U))return this.isValid(R)?R:null;if(!this.isValid(R))return U;let O=this.transitionsBetween(B,U)+this.transitionsBetween(E,U),V=this.transitionsBetween(B,R)+this.transitionsBetween(E,R);return O>V?U:R}shiftToModuleCenter(s){let i=s[0],l=s[1],c=s[2],d=s[3],x=this.transitionsBetween(i,d)+1,m=this.transitionsBetween(c,d)+1,B=Mt.shiftPoint(i,l,m*4),E=Mt.shiftPoint(c,l,x*4);x=this.transitionsBetween(B,d)+1,m=this.transitionsBetween(E,d)+1,(x&1)===1&&(x+=1),(m&1)===1&&(m+=1);let U=(i.getX()+l.getX()+c.getX()+d.getX())/4,R=(i.getY()+l.getY()+c.getY()+d.getY())/4;i=Mt.moveAway(i,U,R),l=Mt.moveAway(l,U,R),c=Mt.moveAway(c,U,R),d=Mt.moveAway(d,U,R);let O,V;return B=Mt.shiftPoint(i,l,m*4),B=Mt.shiftPoint(B,d,x*4),O=Mt.shiftPoint(l,i,m*4),O=Mt.shiftPoint(O,c,x*4),E=Mt.shiftPoint(c,d,m*4),E=Mt.shiftPoint(E,l,x*4),V=Mt.shiftPoint(d,c,m*4),V=Mt.shiftPoint(V,i,x*4),[B,O,E,V]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,i,l,c,d,x,m){return Xn.getInstance().sampleGrid(s,x,m,.5,.5,x-.5,.5,x-.5,m-.5,.5,m-.5,i.getX(),i.getY(),d.getX(),d.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(s,i){let l=Math.trunc(s.getX()),c=Math.trunc(s.getY()),d=Math.trunc(i.getX()),x=Math.trunc(i.getY()),m=Math.abs(x-c)>Math.abs(d-l);if(m){let q=l;l=c,c=q,q=d,d=x,x=q}let B=Math.abs(d-l),E=Math.abs(x-c),U=-B/2,R=c<x?1:-1,O=l<d?1:-1,V=0,W=this.image.get(m?c:l,m?l:c);for(let q=l,te=c;q!==d;q+=O){let ae=this.image.get(m?te:q,m?q:te);if(ae!==W&&(V++,W=ae),U+=E,U>0){if(te===x)break;te+=R,U-=B}}return V}}class Os{constructor(){this.decoder=new Dv}decode(s,i=null){let l,c;if(i!=null&&i.has(Q.PURE_BARCODE)){const E=Os.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(E),c=Os.NO_POINTS}else{const E=new Mt(s.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),c=E.getPoints()}const d=l.getRawBytes(),x=new se(l.getText(),d,8*d.length,c,fe.DATA_MATRIX,F.currentTimeMillis()),m=l.getByteSegments();m!=null&&x.putMetadata(pe.BYTE_SEGMENTS,m);const B=l.getECLevel();return B!=null&&x.putMetadata(pe.ERROR_CORRECTION_LEVEL,B),x}reset(){}static extractPureBits(s){const i=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(i==null||l==null)throw new G;const c=this.moduleSize(i,s);let d=i[1];const x=l[1];let m=i[0];const E=(l[0]-m+1)/c,U=(x-d+1)/c;if(E<=0||U<=0)throw new G;const R=c/2;d+=R,m+=R;const O=new ce(E,U);for(let V=0;V<U;V++){const W=d+V*c;for(let q=0;q<E;q++)s.get(m+q*c,W)&&O.set(q,V)}return O}static moduleSize(s,i){const l=i.getWidth();let c=s[0];const d=s[1];for(;c<l&&i.get(c,d);)c++;if(c===l)throw new G;const x=c-s[0];if(x===0)throw new G;return x}}Os.NO_POINTS=[];class Tv extends Ae{constructor(s=500){super(new Os,s)}}var ui;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(ui||(ui={}));class dt{constructor(s,i,l){this.value=s,this.stringValue=i,this.bits=l,dt.FOR_BITS.set(l,this),dt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new p(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof dt))return!1;const i=s;return this.value===i.value}static forBits(s){if(s<0||s>=dt.FOR_BITS.size)throw new w;return dt.FOR_BITS.get(s)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(ui.L,"L",1),dt.M=new dt(ui.M,"M",0),dt.Q=new dt(ui.Q,"Q",3),dt.H=new dt(ui.H,"H",2);class Fr{constructor(s){this.errorCorrectionLevel=dt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,i){return _.bitCount(s^i)}static decodeFormatInformation(s,i){const l=Fr.doDecodeFormatInformation(s,i);return l!==null?l:Fr.doDecodeFormatInformation(s^Fr.FORMAT_INFO_MASK_QR,i^Fr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,i){let l=Number.MAX_SAFE_INTEGER,c=0;for(const d of Fr.FORMAT_INFO_DECODE_LOOKUP){const x=d[0];if(x===s||x===i)return new Fr(d[1]);let m=Fr.numBitsDiffering(s,x);m<l&&(c=d[1],l=m),s!==i&&(m=Fr.numBitsDiffering(i,x),m<l&&(c=d[1],l=m))}return l<=3?new Fr(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Fr))return!1;const i=s;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Fr.FORMAT_INFO_MASK_QR=21522,Fr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ne{constructor(s,...i){this.ecCodewordsPerBlock=s,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const i=this.ecBlocks;for(const l of i)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(s,i){this.count=s,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class De{constructor(s,i,...l){this.versionNumber=s,this.alignmentPatternCenters=i,this.ecBlocks=l;let c=0;const d=l[0].getECCodewordsPerBlock(),x=l[0].getECBlocks();for(const m of x)c+=m.getCount()*(m.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new D;try{return this.getVersionForNumber((s-17)/4)}catch{throw new D}}static getVersionForNumber(s){if(s<1||s>40)throw new w;return De.VERSIONS[s-1]}static decodeVersionInformation(s){let i=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<De.VERSION_DECODE_INFO.length;c++){const d=De.VERSION_DECODE_INFO[c];if(d===s)return De.getVersionForNumber(c+7);const x=Fr.numBitsDiffering(s,d);x<i&&(l=c+7,i=x)}return i<=3?De.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),i=new ce(s);i.setRegion(0,0,9,9),i.setRegion(s-8,0,8,9),i.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const d=this.alignmentPatternCenters[c]-2;for(let x=0;x<l;x++)c===0&&(x===0||x===l-1)||c===l-1&&x===0||i.setRegion(this.alignmentPatternCenters[x]-2,d,5,5)}return i.setRegion(6,9,1,s-17),i.setRegion(9,6,s-17,1),this.versionNumber>6&&(i.setRegion(s-11,0,3,6),i.setRegion(0,s-11,6,3)),i}toString(){return""+this.versionNumber}}De.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),De.VERSIONS=[new De(1,new Int32Array(0),new ne(7,new K(1,19)),new ne(10,new K(1,16)),new ne(13,new K(1,13)),new ne(17,new K(1,9))),new De(2,Int32Array.from([6,18]),new ne(10,new K(1,34)),new ne(16,new K(1,28)),new ne(22,new K(1,22)),new ne(28,new K(1,16))),new De(3,Int32Array.from([6,22]),new ne(15,new K(1,55)),new ne(26,new K(1,44)),new ne(18,new K(2,17)),new ne(22,new K(2,13))),new De(4,Int32Array.from([6,26]),new ne(20,new K(1,80)),new ne(18,new K(2,32)),new ne(26,new K(2,24)),new ne(16,new K(4,9))),new De(5,Int32Array.from([6,30]),new ne(26,new K(1,108)),new ne(24,new K(2,43)),new ne(18,new K(2,15),new K(2,16)),new ne(22,new K(2,11),new K(2,12))),new De(6,Int32Array.from([6,34]),new ne(18,new K(2,68)),new ne(16,new K(4,27)),new ne(24,new K(4,19)),new ne(28,new K(4,15))),new De(7,Int32Array.from([6,22,38]),new ne(20,new K(2,78)),new ne(18,new K(4,31)),new ne(18,new K(2,14),new K(4,15)),new ne(26,new K(4,13),new K(1,14))),new De(8,Int32Array.from([6,24,42]),new ne(24,new K(2,97)),new ne(22,new K(2,38),new K(2,39)),new ne(22,new K(4,18),new K(2,19)),new ne(26,new K(4,14),new K(2,15))),new De(9,Int32Array.from([6,26,46]),new ne(30,new K(2,116)),new ne(22,new K(3,36),new K(2,37)),new ne(20,new K(4,16),new K(4,17)),new ne(24,new K(4,12),new K(4,13))),new De(10,Int32Array.from([6,28,50]),new ne(18,new K(2,68),new K(2,69)),new ne(26,new K(4,43),new K(1,44)),new ne(24,new K(6,19),new K(2,20)),new ne(28,new K(6,15),new K(2,16))),new De(11,Int32Array.from([6,30,54]),new ne(20,new K(4,81)),new ne(30,new K(1,50),new K(4,51)),new ne(28,new K(4,22),new K(4,23)),new ne(24,new K(3,12),new K(8,13))),new De(12,Int32Array.from([6,32,58]),new ne(24,new K(2,92),new K(2,93)),new ne(22,new K(6,36),new K(2,37)),new ne(26,new K(4,20),new K(6,21)),new ne(28,new K(7,14),new K(4,15))),new De(13,Int32Array.from([6,34,62]),new ne(26,new K(4,107)),new ne(22,new K(8,37),new K(1,38)),new ne(24,new K(8,20),new K(4,21)),new ne(22,new K(12,11),new K(4,12))),new De(14,Int32Array.from([6,26,46,66]),new ne(30,new K(3,115),new K(1,116)),new ne(24,new K(4,40),new K(5,41)),new ne(20,new K(11,16),new K(5,17)),new ne(24,new K(11,12),new K(5,13))),new De(15,Int32Array.from([6,26,48,70]),new ne(22,new K(5,87),new K(1,88)),new ne(24,new K(5,41),new K(5,42)),new ne(30,new K(5,24),new K(7,25)),new ne(24,new K(11,12),new K(7,13))),new De(16,Int32Array.from([6,26,50,74]),new ne(24,new K(5,98),new K(1,99)),new ne(28,new K(7,45),new K(3,46)),new ne(24,new K(15,19),new K(2,20)),new ne(30,new K(3,15),new K(13,16))),new De(17,Int32Array.from([6,30,54,78]),new ne(28,new K(1,107),new K(5,108)),new ne(28,new K(10,46),new K(1,47)),new ne(28,new K(1,22),new K(15,23)),new ne(28,new K(2,14),new K(17,15))),new De(18,Int32Array.from([6,30,56,82]),new ne(30,new K(5,120),new K(1,121)),new ne(26,new K(9,43),new K(4,44)),new ne(28,new K(17,22),new K(1,23)),new ne(28,new K(2,14),new K(19,15))),new De(19,Int32Array.from([6,30,58,86]),new ne(28,new K(3,113),new K(4,114)),new ne(26,new K(3,44),new K(11,45)),new ne(26,new K(17,21),new K(4,22)),new ne(26,new K(9,13),new K(16,14))),new De(20,Int32Array.from([6,34,62,90]),new ne(28,new K(3,107),new K(5,108)),new ne(26,new K(3,41),new K(13,42)),new ne(30,new K(15,24),new K(5,25)),new ne(28,new K(15,15),new K(10,16))),new De(21,Int32Array.from([6,28,50,72,94]),new ne(28,new K(4,116),new K(4,117)),new ne(26,new K(17,42)),new ne(28,new K(17,22),new K(6,23)),new ne(30,new K(19,16),new K(6,17))),new De(22,Int32Array.from([6,26,50,74,98]),new ne(28,new K(2,111),new K(7,112)),new ne(28,new K(17,46)),new ne(30,new K(7,24),new K(16,25)),new ne(24,new K(34,13))),new De(23,Int32Array.from([6,30,54,78,102]),new ne(30,new K(4,121),new K(5,122)),new ne(28,new K(4,47),new K(14,48)),new ne(30,new K(11,24),new K(14,25)),new ne(30,new K(16,15),new K(14,16))),new De(24,Int32Array.from([6,28,54,80,106]),new ne(30,new K(6,117),new K(4,118)),new ne(28,new K(6,45),new K(14,46)),new ne(30,new K(11,24),new K(16,25)),new ne(30,new K(30,16),new K(2,17))),new De(25,Int32Array.from([6,32,58,84,110]),new ne(26,new K(8,106),new K(4,107)),new ne(28,new K(8,47),new K(13,48)),new ne(30,new K(7,24),new K(22,25)),new ne(30,new K(22,15),new K(13,16))),new De(26,Int32Array.from([6,30,58,86,114]),new ne(28,new K(10,114),new K(2,115)),new ne(28,new K(19,46),new K(4,47)),new ne(28,new K(28,22),new K(6,23)),new ne(30,new K(33,16),new K(4,17))),new De(27,Int32Array.from([6,34,62,90,118]),new ne(30,new K(8,122),new K(4,123)),new ne(28,new K(22,45),new K(3,46)),new ne(30,new K(8,23),new K(26,24)),new ne(30,new K(12,15),new K(28,16))),new De(28,Int32Array.from([6,26,50,74,98,122]),new ne(30,new K(3,117),new K(10,118)),new ne(28,new K(3,45),new K(23,46)),new ne(30,new K(4,24),new K(31,25)),new ne(30,new K(11,15),new K(31,16))),new De(29,Int32Array.from([6,30,54,78,102,126]),new ne(30,new K(7,116),new K(7,117)),new ne(28,new K(21,45),new K(7,46)),new ne(30,new K(1,23),new K(37,24)),new ne(30,new K(19,15),new K(26,16))),new De(30,Int32Array.from([6,26,52,78,104,130]),new ne(30,new K(5,115),new K(10,116)),new ne(28,new K(19,47),new K(10,48)),new ne(30,new K(15,24),new K(25,25)),new ne(30,new K(23,15),new K(25,16))),new De(31,Int32Array.from([6,30,56,82,108,134]),new ne(30,new K(13,115),new K(3,116)),new ne(28,new K(2,46),new K(29,47)),new ne(30,new K(42,24),new K(1,25)),new ne(30,new K(23,15),new K(28,16))),new De(32,Int32Array.from([6,34,60,86,112,138]),new ne(30,new K(17,115)),new ne(28,new K(10,46),new K(23,47)),new ne(30,new K(10,24),new K(35,25)),new ne(30,new K(19,15),new K(35,16))),new De(33,Int32Array.from([6,30,58,86,114,142]),new ne(30,new K(17,115),new K(1,116)),new ne(28,new K(14,46),new K(21,47)),new ne(30,new K(29,24),new K(19,25)),new ne(30,new K(11,15),new K(46,16))),new De(34,Int32Array.from([6,34,62,90,118,146]),new ne(30,new K(13,115),new K(6,116)),new ne(28,new K(14,46),new K(23,47)),new ne(30,new K(44,24),new K(7,25)),new ne(30,new K(59,16),new K(1,17))),new De(35,Int32Array.from([6,30,54,78,102,126,150]),new ne(30,new K(12,121),new K(7,122)),new ne(28,new K(12,47),new K(26,48)),new ne(30,new K(39,24),new K(14,25)),new ne(30,new K(22,15),new K(41,16))),new De(36,Int32Array.from([6,24,50,76,102,128,154]),new ne(30,new K(6,121),new K(14,122)),new ne(28,new K(6,47),new K(34,48)),new ne(30,new K(46,24),new K(10,25)),new ne(30,new K(2,15),new K(64,16))),new De(37,Int32Array.from([6,28,54,80,106,132,158]),new ne(30,new K(17,122),new K(4,123)),new ne(28,new K(29,46),new K(14,47)),new ne(30,new K(49,24),new K(10,25)),new ne(30,new K(24,15),new K(46,16))),new De(38,Int32Array.from([6,32,58,84,110,136,162]),new ne(30,new K(4,122),new K(18,123)),new ne(28,new K(13,46),new K(32,47)),new ne(30,new K(48,24),new K(14,25)),new ne(30,new K(42,15),new K(32,16))),new De(39,Int32Array.from([6,26,54,82,110,138,166]),new ne(30,new K(20,117),new K(4,118)),new ne(28,new K(40,47),new K(7,48)),new ne(30,new K(43,24),new K(22,25)),new ne(30,new K(10,15),new K(67,16))),new De(40,Int32Array.from([6,30,58,86,114,142,170]),new ne(30,new K(19,118),new K(6,119)),new ne(28,new K(18,47),new K(31,48)),new ne(30,new K(34,24),new K(34,25)),new ne(30,new K(20,15),new K(61,16)))];var ir;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(ir||(ir={}));class pn{constructor(s,i){this.value=s,this.isMasked=i}unmaskBitMatrix(s,i){for(let l=0;l<i;l++)for(let c=0;c<i;c++)this.isMasked(l,c)&&s.flip(c,l)}}pn.values=new Map([[ir.DATA_MASK_000,new pn(ir.DATA_MASK_000,(T,s)=>(T+s&1)===0)],[ir.DATA_MASK_001,new pn(ir.DATA_MASK_001,(T,s)=>(T&1)===0)],[ir.DATA_MASK_010,new pn(ir.DATA_MASK_010,(T,s)=>s%3===0)],[ir.DATA_MASK_011,new pn(ir.DATA_MASK_011,(T,s)=>(T+s)%3===0)],[ir.DATA_MASK_100,new pn(ir.DATA_MASK_100,(T,s)=>(Math.floor(T/2)+Math.floor(s/3)&1)===0)],[ir.DATA_MASK_101,new pn(ir.DATA_MASK_101,(T,s)=>T*s%6===0)],[ir.DATA_MASK_110,new pn(ir.DATA_MASK_110,(T,s)=>T*s%6<3)],[ir.DATA_MASK_111,new pn(ir.DATA_MASK_111,(T,s)=>(T+s+T*s%3&1)===0)]]);class Rv{constructor(s){const i=s.getHeight();if(i<21||(i&3)!==1)throw new D;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);const i=this.bitMatrix.getHeight();let l=0;const c=i-7;for(let d=i-1;d>=c;d--)l=this.copyBit(8,d,l);for(let d=i-8;d<i;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Fr.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new D}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),i=Math.floor((s-17)/4);if(i<=6)return De.getVersionForNumber(i);let l=0;const c=s-11;for(let x=5;x>=0;x--)for(let m=s-9;m>=c;m--)l=this.copyBit(m,x,l);let d=De.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let x=5;x>=0;x--)for(let m=s-9;m>=c;m--)l=this.copyBit(x,m,l);if(d=De.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new D}copyBit(s,i,l){return(this.isMirror?this.bitMatrix.get(i,s):this.bitMatrix.get(s,i))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),i=this.readVersion(),l=pn.values.get(s.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const d=i.buildFunctionPattern();let x=!0;const m=new Uint8Array(i.getTotalCodewords());let B=0,E=0,U=0;for(let R=c-1;R>0;R-=2){R===6&&R--;for(let O=0;O<c;O++){const V=x?c-1-O:O;for(let W=0;W<2;W++)d.get(R-W,V)||(U++,E<<=1,this.bitMatrix.get(R-W,V)&&(E|=1),U===8&&(m[B++]=E,U=0,E=0))}x=!x}if(B!==i.getTotalCodewords())throw new D;return m}remask(){if(this.parsedFormatInfo===null)return;const s=pn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,i)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let i=0,l=s.getWidth();i<l;i++)for(let c=i+1,d=s.getHeight();c<d;c++)s.get(i,c)!==s.get(c,i)&&(s.flip(c,i),s.flip(i,c))}}class u0{constructor(s,i){this.numDataCodewords=s,this.codewords=i}static getDataBlocks(s,i,l){if(s.length!==i.getTotalCodewords())throw new w;const c=i.getECBlocksForLevel(l);let d=0;const x=c.getECBlocks();for(const W of x)d+=W.getCount();const m=new Array(d);let B=0;for(const W of x)for(let q=0;q<W.getCount();q++){const te=W.getDataCodewords(),ae=c.getECCodewordsPerBlock()+te;m[B++]=new u0(te,new Uint8Array(ae))}const E=m[0].codewords.length;let U=m.length-1;for(;U>=0&&m[U].codewords.length!==E;)U--;U++;const R=E-c.getECCodewordsPerBlock();let O=0;for(let W=0;W<R;W++)for(let q=0;q<B;q++)m[q].codewords[W]=s[O++];for(let W=U;W<B;W++)m[W].codewords[R]=s[O++];const V=m[0].codewords.length;for(let W=R;W<V;W++)for(let q=0;q<B;q++){const te=q<U?W:W+1;m[q].codewords[te]=s[O++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var mn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(mn||(mn={}));class Re{constructor(s,i,l,c){this.value=s,this.stringValue=i,this.characterCountBitsForVersions=l,this.bits=c,Re.FOR_BITS.set(c,this),Re.FOR_VALUE.set(s,this)}static forBits(s){const i=Re.FOR_BITS.get(s);if(i===void 0)throw new w;return i}getCharacterCountBits(s){const i=s.getVersionNumber();let l;return i<=9?l=0:i<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Re))return!1;const i=s;return this.value===i.value}toString(){return this.stringValue}}Re.FOR_BITS=new Map,Re.FOR_VALUE=new Map,Re.TERMINATOR=new Re(mn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Re.NUMERIC=new Re(mn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Re.ALPHANUMERIC=new Re(mn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Re.STRUCTURED_APPEND=new Re(mn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Re.BYTE=new Re(mn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Re.ECI=new Re(mn.ECI,"ECI",Int32Array.from([0,0,0]),7),Re.KANJI=new Re(mn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Re.FNC1_FIRST_POSITION=new Re(mn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Re.FNC1_SECOND_POSITION=new Re(mn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Re.HANZI=new Re(mn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Nt{static decode(s,i,l,c){const d=new c0(s);let x=new X;const m=new Array;let B=-1,E=-1;try{let U=null,R=!1,O;do{if(d.available()<4)O=Re.TERMINATOR;else{const V=d.readBits(4);O=Re.forBits(V)}switch(O){case Re.TERMINATOR:break;case Re.FNC1_FIRST_POSITION:case Re.FNC1_SECOND_POSITION:R=!0;break;case Re.STRUCTURED_APPEND:if(d.available()<16)throw new D;B=d.readBits(8),E=d.readBits(8);break;case Re.ECI:const V=Nt.parseECIValue(d);if(U=M.getCharacterSetECIByValue(V),U===null)throw new D;break;case Re.HANZI:const W=d.readBits(4),q=d.readBits(O.getCharacterCountBits(i));W===Nt.GB2312_SUBSET&&Nt.decodeHanziSegment(d,x,q);break;default:const te=d.readBits(O.getCharacterCountBits(i));switch(O){case Re.NUMERIC:Nt.decodeNumericSegment(d,x,te);break;case Re.ALPHANUMERIC:Nt.decodeAlphanumericSegment(d,x,te,R);break;case Re.BYTE:Nt.decodeByteSegment(d,x,te,U,m,c);break;case Re.KANJI:Nt.decodeKanjiSegment(d,x,te);break;default:throw new D}break}}while(O!==Re.TERMINATOR)}catch{throw new D}return new Xt(s,x.toString(),m.length===0?null:m,l===null?null:l.toString(),B,E)}static decodeHanziSegment(s,i,l){if(l*13>s.available())throw new D;const c=new Uint8Array(2*l);let d=0;for(;l>0;){const x=s.readBits(13);let m=x/96<<8&4294967295|x%96;m<959?m+=41377:m+=42657,c[d]=m>>8&255,c[d+1]=m&255,d+=2,l--}try{i.append(P.decode(c,z.GB2312))}catch(x){throw new D(x)}}static decodeKanjiSegment(s,i,l){if(l*13>s.available())throw new D;const c=new Uint8Array(2*l);let d=0;for(;l>0;){const x=s.readBits(13);let m=x/192<<8&4294967295|x%192;m<7936?m+=33088:m+=49472,c[d]=m>>8,c[d+1]=m,d+=2,l--}try{i.append(P.decode(c,z.SHIFT_JIS))}catch(x){throw new D(x)}}static decodeByteSegment(s,i,l,c,d,x){if(8*l>s.available())throw new D;const m=new Uint8Array(l);for(let E=0;E<l;E++)m[E]=s.readBits(8);let B;c===null?B=z.guessEncoding(m,x):B=c.getName();try{i.append(P.decode(m,B))}catch(E){throw new D(E)}d.push(m)}static toAlphaNumericChar(s){if(s>=Nt.ALPHANUMERIC_CHARS.length)throw new D;return Nt.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,i,l,c){const d=i.length();for(;l>1;){if(s.available()<11)throw new D;const x=s.readBits(11);i.append(Nt.toAlphaNumericChar(Math.floor(x/45))),i.append(Nt.toAlphaNumericChar(x%45)),l-=2}if(l===1){if(s.available()<6)throw new D;i.append(Nt.toAlphaNumericChar(s.readBits(6)))}if(c)for(let x=d;x<i.length();x++)i.charAt(x)==="%"&&(x<i.length()-1&&i.charAt(x+1)==="%"?i.deleteCharAt(x+1):i.setCharAt(x,""))}static decodeNumericSegment(s,i,l){for(;l>=3;){if(s.available()<10)throw new D;const c=s.readBits(10);if(c>=1e3)throw new D;i.append(Nt.toAlphaNumericChar(Math.floor(c/100))),i.append(Nt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(Nt.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(s.available()<7)throw new D;const c=s.readBits(7);if(c>=100)throw new D;i.append(Nt.toAlphaNumericChar(Math.floor(c/10))),i.append(Nt.toAlphaNumericChar(c%10))}else if(l===1){if(s.available()<4)throw new D;const c=s.readBits(4);if(c>=10)throw new D;i.append(Nt.toAlphaNumericChar(c))}}static parseECIValue(s){const i=s.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const l=s.readBits(8);return(i&63)<<8&4294967295|l}if((i&224)===192){const l=s.readBits(16);return(i&31)<<16&4294967295|l}throw new D}}Nt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Nt.GB2312_SUBSET=1;class ux{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const i=s[0];s[0]=s[2],s[2]=i}}class jv{constructor(){this.rsDecoder=new rr(de.QR_CODE_FIELD_256)}decodeBooleanArray(s,i){return this.decodeBitMatrix(ce.parseFromBooleanArray(s),i)}decodeBitMatrix(s,i){const l=new Rv(s);let c=null;try{return this.decodeBitMatrixParser(l,i)}catch(d){c=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,i);return d.setOther(new ux(!0)),d}catch(d){throw c!==null?c:d}}decodeBitMatrixParser(s,i){const l=s.readVersion(),c=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),x=u0.getDataBlocks(d,l,c);let m=0;for(const U of x)m+=U.getNumDataCodewords();const B=new Uint8Array(m);let E=0;for(const U of x){const R=U.getCodewords(),O=U.getNumDataCodewords();this.correctErrors(R,O);for(let V=0;V<O;V++)B[E++]=R[V]}return Nt.decode(B,l,c,i)}correctErrors(s,i){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-i)}catch{throw new C}for(let c=0;c<i;c++)s[c]=l[c]}}class d0 extends Ce{constructor(s,i,l){super(s,i),this.estimatedModuleSize=l}aboutEquals(s,i,l){if(Math.abs(i-this.getY())<=s&&Math.abs(l-this.getX())<=s){const c=Math.abs(s-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(s,i,l){const c=(this.getX()+i)/2,d=(this.getY()+s)/2,x=(this.estimatedModuleSize+l)/2;return new d0(c,d,x)}}class pl{constructor(s,i,l,c,d,x,m){this.image=s,this.startX=i,this.startY=l,this.width=c,this.height=d,this.moduleSize=x,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,i=this.height,l=this.width,c=s+l,d=this.startY+i/2,x=new Int32Array(3),m=this.image;for(let B=0;B<i;B++){const E=d+(B&1?-Math.floor((B+1)/2):Math.floor((B+1)/2));x[0]=0,x[1]=0,x[2]=0;let U=s;for(;U<c&&!m.get(U,E);)U++;let R=0;for(;U<c;){if(m.get(U,E))if(R===1)x[1]++;else if(R===2){if(this.foundPatternCross(x)){const O=this.handlePossibleCenter(x,E,U);if(O!==null)return O}x[0]=x[2],x[1]=1,x[2]=0,R=1}else x[++R]++;else R===1&&R++,x[R]++;U++}if(this.foundPatternCross(x)){const O=this.handlePossibleCenter(x,E,c);if(O!==null)return O}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(s,i){return i-s[2]-s[1]/2}foundPatternCross(s){const i=this.moduleSize,l=i/2;for(let c=0;c<3;c++)if(Math.abs(i-s[c])>=l)return!1;return!0}crossCheckVertical(s,i,l,c){const d=this.image,x=d.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let B=s;for(;B>=0&&d.get(i,B)&&m[1]<=l;)m[1]++,B--;if(B<0||m[1]>l)return NaN;for(;B>=0&&!d.get(i,B)&&m[0]<=l;)m[0]++,B--;if(m[0]>l)return NaN;for(B=s+1;B<x&&d.get(i,B)&&m[1]<=l;)m[1]++,B++;if(B===x||m[1]>l)return NaN;for(;B<x&&!d.get(i,B)&&m[2]<=l;)m[2]++,B++;if(m[2]>l)return NaN;const E=m[0]+m[1]+m[2];return 5*Math.abs(E-c)>=2*c?NaN:this.foundPatternCross(m)?pl.centerFromEnd(m,B):NaN}handlePossibleCenter(s,i,l){const c=s[0]+s[1]+s[2],d=pl.centerFromEnd(s,l),x=this.crossCheckVertical(i,d,2*s[1],c);if(!isNaN(x)){const m=(s[0]+s[1]+s[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(m,x,d))return E.combineEstimate(x,d,m);const B=new d0(d,x,m);this.possibleCenters.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return null}}class h0 extends Ce{constructor(s,i,l,c){super(s,i),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,i,l){if(Math.abs(i-this.getY())<=s&&Math.abs(l-this.getX())<=s){const c=Math.abs(s-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(s,i,l){const c=this.count+1,d=(this.count*this.getX()+i)/c,x=(this.count*this.getY()+s)/c,m=(this.count*this.estimatedModuleSize+l)/c;return new h0(d,x,m,c)}}class Ov{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ar{constructor(s,i){this.image=s,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const i=s!=null&&s.get(Q.TRY_HARDER)!==void 0,l=s!=null&&s.get(Q.PURE_BARCODE)!==void 0,c=this.image,d=c.getHeight(),x=c.getWidth();let m=Math.floor(3*d/(4*ar.MAX_MODULES));(m<ar.MIN_SKIP||i)&&(m=ar.MIN_SKIP);let B=!1;const E=new Int32Array(5);for(let R=m-1;R<d&&!B;R+=m){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let O=0;for(let V=0;V<x;V++)if(c.get(V,R))(O&1)===1&&O++,E[O]++;else if(O&1)E[O]++;else if(O===4)if(ar.foundPatternCross(E)){if(this.handlePossibleCenter(E,R,V,l)===!0)if(m=2,this.hasSkipped===!0)B=this.haveMultiplyConfirmedCenters();else{const q=this.findRowSkip();q>E[2]&&(R+=q-E[2]-m,V=x-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,O=3;continue}O=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,O=3;else E[++O]++;ar.foundPatternCross(E)&&this.handlePossibleCenter(E,R,x,l)===!0&&(m=E[0],this.hasSkipped&&(B=this.haveMultiplyConfirmedCenters()))}const U=this.selectBestPatterns();return Ce.orderBestPatterns(U),new Ov(U)}static centerFromEnd(s,i){return i-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let i=0;for(let d=0;d<5;d++){const x=s[d];if(x===0)return!1;i+=x}if(i<7)return!1;const l=i/7,c=l/2;return Math.abs(l-s[0])<c&&Math.abs(l-s[1])<c&&Math.abs(3*l-s[2])<3*c&&Math.abs(l-s[3])<c&&Math.abs(l-s[4])<c}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,i,l,c){const d=this.getCrossCheckStateCount();let x=0;const m=this.image;for(;s>=x&&i>=x&&m.get(i-x,s-x);)d[2]++,x++;if(s<x||i<x)return!1;for(;s>=x&&i>=x&&!m.get(i-x,s-x)&&d[1]<=l;)d[1]++,x++;if(s<x||i<x||d[1]>l)return!1;for(;s>=x&&i>=x&&m.get(i-x,s-x)&&d[0]<=l;)d[0]++,x++;if(d[0]>l)return!1;const B=m.getHeight(),E=m.getWidth();for(x=1;s+x<B&&i+x<E&&m.get(i+x,s+x);)d[2]++,x++;if(s+x>=B||i+x>=E)return!1;for(;s+x<B&&i+x<E&&!m.get(i+x,s+x)&&d[3]<l;)d[3]++,x++;if(s+x>=B||i+x>=E||d[3]>=l)return!1;for(;s+x<B&&i+x<E&&m.get(i+x,s+x)&&d[4]<l;)d[4]++,x++;if(d[4]>=l)return!1;const U=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(U-c)<2*c&&ar.foundPatternCross(d)}crossCheckVertical(s,i,l,c){const d=this.image,x=d.getHeight(),m=this.getCrossCheckStateCount();let B=s;for(;B>=0&&d.get(i,B);)m[2]++,B--;if(B<0)return NaN;for(;B>=0&&!d.get(i,B)&&m[1]<=l;)m[1]++,B--;if(B<0||m[1]>l)return NaN;for(;B>=0&&d.get(i,B)&&m[0]<=l;)m[0]++,B--;if(m[0]>l)return NaN;for(B=s+1;B<x&&d.get(i,B);)m[2]++,B++;if(B===x)return NaN;for(;B<x&&!d.get(i,B)&&m[3]<l;)m[3]++,B++;if(B===x||m[3]>=l)return NaN;for(;B<x&&d.get(i,B)&&m[4]<l;)m[4]++,B++;if(m[4]>=l)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=2*c?NaN:ar.foundPatternCross(m)?ar.centerFromEnd(m,B):NaN}crossCheckHorizontal(s,i,l,c){const d=this.image,x=d.getWidth(),m=this.getCrossCheckStateCount();let B=s;for(;B>=0&&d.get(B,i);)m[2]++,B--;if(B<0)return NaN;for(;B>=0&&!d.get(B,i)&&m[1]<=l;)m[1]++,B--;if(B<0||m[1]>l)return NaN;for(;B>=0&&d.get(B,i)&&m[0]<=l;)m[0]++,B--;if(m[0]>l)return NaN;for(B=s+1;B<x&&d.get(B,i);)m[2]++,B++;if(B===x)return NaN;for(;B<x&&!d.get(B,i)&&m[3]<l;)m[3]++,B++;if(B===x||m[3]>=l)return NaN;for(;B<x&&d.get(B,i)&&m[4]<l;)m[4]++,B++;if(m[4]>=l)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=c?NaN:ar.foundPatternCross(m)?ar.centerFromEnd(m,B):NaN}handlePossibleCenter(s,i,l,c){const d=s[0]+s[1]+s[2]+s[3]+s[4];let x=ar.centerFromEnd(s,l),m=this.crossCheckVertical(i,Math.floor(x),s[2],d);if(!isNaN(m)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(m),s[2],d),!isNaN(x)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(x),s[2],d)))){const B=d/7;let E=!1;const U=this.possibleCenters;for(let R=0,O=U.length;R<O;R++){const V=U[R];if(V.aboutEquals(B,m,x)){U[R]=V.combineEstimate(m,x,B),E=!0;break}}if(!E){const R=new h0(x,m,B);U.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const l of this.possibleCenters)if(l.getCount()>=ar.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,i=0;const l=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=ar.CENTER_QUORUM&&(s++,i+=x.getEstimatedModuleSize());if(s<3)return!1;const c=i/l;let d=0;for(const x of this.possibleCenters)d+=Math.abs(x.getEstimatedModuleSize()-c);return d<=.05*i}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new G;const i=this.possibleCenters;let l;if(s>3){let c=0,d=0;for(const B of this.possibleCenters){const E=B.getEstimatedModuleSize();c+=E,d+=E*E}l=c/s;let x=Math.sqrt(d/s-l*l);i.sort((B,E)=>{const U=Math.abs(E.getEstimatedModuleSize()-l),R=Math.abs(B.getEstimatedModuleSize()-l);return U<R?-1:U>R?1:0});const m=Math.max(.2*l,x);for(let B=0;B<i.length&&i.length>3;B++){const E=i[B];Math.abs(E.getEstimatedModuleSize()-l)>m&&(i.splice(B,1),B--)}}if(i.length>3){let c=0;for(const d of i)c+=d.getEstimatedModuleSize();l=c/i.length,i.sort((d,x)=>{if(x.getCount()===d.getCount()){const m=Math.abs(x.getEstimatedModuleSize()-l),B=Math.abs(d.getEstimatedModuleSize()-l);return m<B?1:m>B?-1:0}else return x.getCount()-d.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}ar.CENTER_QUORUM=2,ar.MIN_SKIP=3,ar.MAX_MODULES=57;class ba{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(Q.NEED_RESULT_POINT_CALLBACK);const l=new ar(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const i=s.getTopLeft(),l=s.getTopRight(),c=s.getBottomLeft(),d=this.calculateModuleSize(i,l,c);if(d<1)throw new G("No pattern found in proccess finder.");const x=ba.computeDimension(i,l,c,d),m=De.getProvisionalVersionForDimension(x),B=m.getDimensionForVersion()-7;let E=null;if(m.getAlignmentPatternCenters().length>0){const V=l.getX()-i.getX()+c.getX(),W=l.getY()-i.getY()+c.getY(),q=1-3/B,te=Math.floor(i.getX()+q*(V-i.getX())),ae=Math.floor(i.getY()+q*(W-i.getY()));for(let ye=4;ye<=16;ye<<=1)try{E=this.findAlignmentInRegion(d,te,ae,ye);break}catch(Be){if(!(Be instanceof G))throw Be}}const U=ba.createTransform(i,l,c,E,x),R=ba.sampleGrid(this.image,U,x);let O;return E===null?O=[c,i,l]:O=[c,i,l,E],new xr(R,O)}static createTransform(s,i,l,c,d){const x=d-3.5;let m,B,E,U;return c!==null?(m=c.getX(),B=c.getY(),E=x-3,U=E):(m=i.getX()-s.getX()+l.getX(),B=i.getY()-s.getY()+l.getY(),E=x,U=x),nr.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,E,U,3.5,x,s.getX(),s.getY(),i.getX(),i.getY(),m,B,l.getX(),l.getY())}static sampleGrid(s,i,l){return Xn.getInstance().sampleGridWithTransform(s,l,l,i)}static computeDimension(s,i,l,c){const d=Ke.round(Ce.distance(s,i)/c),x=Ke.round(Ce.distance(s,l)/c);let m=Math.floor((d+x)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new G("Dimensions could be not found.")}return m}calculateModuleSize(s,i,l){return(this.calculateModuleSizeOneWay(s,i)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,i){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(s,i,l,c){let d=this.sizeOfBlackWhiteBlackRun(s,i,l,c),x=1,m=s-(l-s);m<0?(x=s/(s-m),m=0):m>=this.image.getWidth()&&(x=(this.image.getWidth()-1-s)/(m-s),m=this.image.getWidth()-1);let B=Math.floor(i-(c-i)*x);return x=1,B<0?(x=i/(i-B),B=0):B>=this.image.getHeight()&&(x=(this.image.getHeight()-1-i)/(B-i),B=this.image.getHeight()-1),m=Math.floor(s+(m-s)*x),d+=this.sizeOfBlackWhiteBlackRun(s,i,m,B),d-1}sizeOfBlackWhiteBlackRun(s,i,l,c){const d=Math.abs(c-i)>Math.abs(l-s);if(d){let V=s;s=i,i=V,V=l,l=c,c=V}const x=Math.abs(l-s),m=Math.abs(c-i);let B=-x/2;const E=s<l?1:-1,U=i<c?1:-1;let R=0;const O=l+E;for(let V=s,W=i;V!==O;V+=E){const q=d?W:V,te=d?V:W;if(R===1===this.image.get(q,te)){if(R===2)return Ke.distance(V,W,s,i);R++}if(B+=m,B>0){if(W===c)break;W+=U,B-=x}}return R===2?Ke.distance(l+E,c,s,i):NaN}findAlignmentInRegion(s,i,l,c){const d=Math.floor(c*s),x=Math.max(0,i-d),m=Math.min(this.image.getWidth()-1,i+d);if(m-x<s*3)throw new G("Alignment top exceeds estimated module size.");const B=Math.max(0,l-d),E=Math.min(this.image.getHeight()-1,l+d);if(E-B<s*3)throw new G("Alignment bottom exceeds estimated module size.");return new pl(this.image,x,B,m-x,E-B,s,this.resultPointCallback).find()}}class ks{constructor(){this.decoder=new jv}getDecoder(){return this.decoder}decode(s,i){let l,c;if(i!=null&&i.get(Q.PURE_BARCODE)!==void 0){const B=ks.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(B,i),c=ks.NO_POINTS}else{const B=new ba(s.getBlackMatrix()).detect(i);l=this.decoder.decodeBitMatrix(B.getBits(),i),c=B.getPoints()}l.getOther()instanceof ux&&l.getOther().applyMirroredCorrection(c);const d=new se(l.getText(),l.getRawBytes(),void 0,c,fe.QR_CODE,void 0),x=l.getByteSegments();x!==null&&d.putMetadata(pe.BYTE_SEGMENTS,x);const m=l.getECLevel();return m!==null&&d.putMetadata(pe.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(d.putMetadata(pe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(pe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){const i=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(i===null||l===null)throw new G;const c=this.moduleSize(i,s);let d=i[1],x=l[1],m=i[0],B=l[0];if(m>=B||d>=x)throw new G;if(x-d!==B-m&&(B=m+(x-d),B>=s.getWidth()))throw new G;const E=Math.round((B-m+1)/c),U=Math.round((x-d+1)/c);if(E<=0||U<=0)throw new G;if(U!==E)throw new G;const R=Math.floor(c/2);d+=R,m+=R;const O=m+Math.floor((E-1)*c)-B;if(O>0){if(O>R)throw new G;m-=O}const V=d+Math.floor((U-1)*c)-x;if(V>0){if(V>R)throw new G;d-=V}const W=new ce(E,U);for(let q=0;q<U;q++){const te=d+Math.floor(q*c);for(let ae=0;ae<E;ae++)s.get(m+Math.floor(ae*c),te)&&W.set(ae,q)}return W}static moduleSize(s,i){const l=i.getHeight(),c=i.getWidth();let d=s[0],x=s[1],m=!0,B=0;for(;d<c&&x<l;){if(m!==i.get(d,x)){if(++B===5)break;m=!m}d++,x++}if(d===c||x===l)throw new G;return(d-s[0])/7}}ks.NO_POINTS=new Array;class Oe{PDF417Common(){}static getBitCountSum(s){return Ke.sum(s)}static toIntArray(s){if(s==null||!s.length)return Oe.EMPTY_INT_ARRAY;const i=new Int32Array(s.length);let l=0;for(const c of s)i[l++]=c;return i}static getCodeword(s){const i=v.binarySearch(Oe.SYMBOL_TABLE,s&262143);return i<0?-1:(Oe.CODEWORD_TABLE[i]-1)%Oe.NUMBER_OF_CODEWORDS}}Oe.NUMBER_OF_CODEWORDS=929,Oe.MAX_CODEWORDS_IN_BARCODE=Oe.NUMBER_OF_CODEWORDS-1,Oe.MIN_ROWS_IN_BARCODE=3,Oe.MAX_ROWS_IN_BARCODE=90,Oe.MODULES_IN_CODEWORD=17,Oe.MODULES_IN_STOP_PATTERN=18,Oe.BARS_IN_MODULE=8,Oe.EMPTY_INT_ARRAY=new Int32Array([]),Oe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Oe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class kv{constructor(s,i){this.bits=s,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class He{static detectMultiple(s,i,l){let c=s.getBlackMatrix(),d=He.detect(l,c);return d.length||(c=c.clone(),c.rotate180(),d=He.detect(l,c)),new kv(c,d)}static detect(s,i){const l=new Array;let c=0,d=0,x=!1;for(;c<i.getHeight();){const m=He.findVertices(i,c,d);if(m[0]==null&&m[3]==null){if(!x)break;x=!1,d=0;for(const B of l)B[1]!=null&&(c=Math.trunc(Math.max(c,B[1].getY()))),B[3]!=null&&(c=Math.max(c,Math.trunc(B[3].getY())));c+=He.ROW_STEP;continue}if(x=!0,l.push(m),!s)break;m[2]!=null?(d=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(d=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return l}static findVertices(s,i,l){const c=s.getHeight(),d=s.getWidth(),x=new Array(8);return He.copyToResult(x,He.findRowsWithPattern(s,c,d,i,l,He.START_PATTERN),He.INDEXES_START_PATTERN),x[4]!=null&&(l=Math.trunc(x[4].getX()),i=Math.trunc(x[4].getY())),He.copyToResult(x,He.findRowsWithPattern(s,c,d,i,l,He.STOP_PATTERN),He.INDEXES_STOP_PATTERN),x}static copyToResult(s,i,l){for(let c=0;c<l.length;c++)s[l[c]]=i[c]}static findRowsWithPattern(s,i,l,c,d,x){const m=new Array(4);let B=!1;const E=new Int32Array(x.length);for(;c<i;c+=He.ROW_STEP){let R=He.findGuardPattern(s,d,c,l,!1,x,E);if(R!=null){for(;c>0;){const O=He.findGuardPattern(s,d,--c,l,!1,x,E);if(O!=null)R=O;else{c++;break}}m[0]=new Ce(R[0],c),m[1]=new Ce(R[1],c),B=!0;break}}let U=c+1;if(B){let R=0,O=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;U<i;U++){const V=He.findGuardPattern(s,O[0],U,l,!1,x,E);if(V!=null&&Math.abs(O[0]-V[0])<He.MAX_PATTERN_DRIFT&&Math.abs(O[1]-V[1])<He.MAX_PATTERN_DRIFT)O=V,R=0;else{if(R>He.SKIPPED_ROW_COUNT_MAX)break;R++}}U-=R+1,m[2]=new Ce(O[0],U),m[3]=new Ce(O[1],U)}return U-c<He.BARCODE_MIN_HEIGHT&&v.fill(m,null),m}static findGuardPattern(s,i,l,c,d,x,m){v.fillWithin(m,0,m.length,0);let B=i,E=0;for(;s.get(B,l)&&B>0&&E++<He.MAX_PIXEL_DRIFT;)B--;let U=B,R=0,O=x.length;for(let V=d;U<c;U++)if(s.get(U,l)!==V)m[R]++;else{if(R===O-1){if(He.patternMatchVariance(m,x,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return new Int32Array([B,U]);B+=m[0]+m[1],F.arraycopy(m,2,m,0,R-1),m[R-1]=0,m[R]=0,R--}else R++;m[R]=1,V=!V}return R===O-1&&He.patternMatchVariance(m,x,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE?new Int32Array([B,U-1]):null}static patternMatchVariance(s,i,l){let c=s.length,d=0,x=0;for(let E=0;E<c;E++)d+=s[E],x+=i[E];if(d<x)return 1/0;let m=d/x;l*=m;let B=0;for(let E=0;E<c;E++){let U=s[E],R=i[E]*m,O=U>R?U-R:R-U;if(O>l)return 1/0;B+=O}return B/d}}He.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),He.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),He.MAX_AVG_VARIANCE=.42,He.MAX_INDIVIDUAL_VARIANCE=.8,He.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),He.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),He.MAX_PIXEL_DRIFT=3,He.MAX_PATTERN_DRIFT=5,He.SKIPPED_ROW_COUNT_MAX=25,He.ROW_STEP=5,He.BARCODE_MIN_HEIGHT=10;class pr{constructor(s,i){if(i.length===0)throw new w;this.field=s;let l=i.length;if(l>1&&i[0]===0){let c=1;for(;c<l&&i[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),F.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let i=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)i=this.field.add(this.field.multiply(s,i),this.coefficients[c]);return i}add(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let i=this.coefficients,l=s.coefficients;if(i.length>l.length){let x=i;i=l,l=x}let c=new Int32Array(l.length),d=l.length-i.length;F.arraycopy(l,0,c,0,d);for(let x=d;x<l.length;x++)c[x]=this.field.add(i[x-d],l[x]);return new pr(this.field,c)}subtract(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof pr?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new pr(this.field,new Int32Array([0]));let i=this.coefficients,l=i.length,c=s.coefficients,d=c.length,x=new Int32Array(l+d-1);for(let m=0;m<l;m++){let B=i[m];for(let E=0;E<d;E++)x[m+E]=this.field.add(x[m+E],this.field.multiply(B,c[E]))}return new pr(this.field,x)}negative(){let s=this.coefficients.length,i=new Int32Array(s);for(let l=0;l<s;l++)i[l]=this.field.subtract(0,this.coefficients[l]);return new pr(this.field,i)}multiplyScalar(s){if(s===0)return new pr(this.field,new Int32Array([0]));if(s===1)return this;let i=this.coefficients.length,l=new Int32Array(i);for(let c=0;c<i;c++)l[c]=this.field.multiply(this.coefficients[c],s);return new pr(this.field,l)}multiplyByMonomial(s,i){if(s<0)throw new w;if(i===0)return new pr(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+s);for(let d=0;d<l;d++)c[d]=this.field.multiply(this.coefficients[d],i);return new pr(this.field,c)}toString(){let s=new X;for(let i=this.getDegree();i>=0;i--){let l=this.getCoefficient(i);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(i===0||l!==1)&&s.append(l),i!==0&&(i===1?s.append("x"):(s.append("x^"),s.append(i))))}return s.toString()}}class Lv{add(s,i){return(s+i)%this.modulus}subtract(s,i){return(this.modulus+s-i)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}inverse(s){if(s===0)throw new we;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,i){return s===0||i===0?0:this.expTable[(this.logTable[s]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class f0 extends Lv{constructor(s,i){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let c=0;c<s;c++)this.expTable[c]=l,l=l*i%s;for(let c=0;c<s-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new pr(this,new Int32Array([0])),this.one=new pr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,i){if(s<0)throw new w;if(i===0)return this.zero;let l=new Int32Array(s+1);return l[0]=i,new pr(this,l)}}f0.PDF417_GF=new f0(Oe.NUMBER_OF_CODEWORDS,3);class dx{constructor(){this.field=f0.PDF417_GF}decode(s,i,l){let c=new pr(this.field,s),d=new Int32Array(i),x=!1;for(let W=i;W>0;W--){let q=c.evaluateAt(this.field.exp(W));d[i-W]=q,q!==0&&(x=!0)}if(!x)return 0;let m=this.field.getOne();if(l!=null)for(const W of l){let q=this.field.exp(s.length-1-W),te=new pr(this.field,new Int32Array([this.field.subtract(0,q),1]));m=m.multiply(te)}let B=new pr(this.field,d),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),B,i),U=E[0],R=E[1],O=this.findErrorLocations(U),V=this.findErrorMagnitudes(R,U,O);for(let W=0;W<O.length;W++){let q=s.length-1-this.field.log(O[W]);if(q<0)throw C.getChecksumInstance();s[q]=this.field.subtract(s[q],V[W])}return O.length}runEuclideanAlgorithm(s,i,l){if(s.getDegree()<i.getDegree()){let O=s;s=i,i=O}let c=s,d=i,x=this.field.getZero(),m=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let O=c,V=x;if(c=d,x=m,c.isZero())throw C.getChecksumInstance();d=O;let W=this.field.getZero(),q=c.getCoefficient(c.getDegree()),te=this.field.inverse(q);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let ae=d.getDegree()-c.getDegree(),ye=this.field.multiply(d.getCoefficient(d.getDegree()),te);W=W.add(this.field.buildMonomial(ae,ye)),d=d.subtract(c.multiplyByMonomial(ae,ye))}m=W.multiply(x).subtract(V).negative()}let B=m.getCoefficient(0);if(B===0)throw C.getChecksumInstance();let E=this.field.inverse(B),U=m.multiply(E),R=d.multiply(E);return[U,R]}findErrorLocations(s){let i=s.getDegree(),l=new Int32Array(i),c=0;for(let d=1;d<this.field.getSize()&&c<i;d++)s.evaluateAt(d)===0&&(l[c]=this.field.inverse(d),c++);if(c!==i)throw C.getChecksumInstance();return l}findErrorMagnitudes(s,i,l){let c=i.getDegree(),d=new Int32Array(c);for(let E=1;E<=c;E++)d[c-E]=this.field.multiply(E,i.getCoefficient(E));let x=new pr(this.field,d),m=l.length,B=new Int32Array(m);for(let E=0;E<m;E++){let U=this.field.inverse(l[E]),R=this.field.subtract(0,s.evaluateAt(U)),O=this.field.inverse(x.evaluateAt(U));B[E]=this.field.multiply(R,O)}return B}}class SA{constructor(s,i,l,c,d){s instanceof SA?this.constructor_2(s):this.constructor_1(s,i,l,c,d)}constructor_1(s,i,l,c,d){const x=i==null||l==null,m=c==null||d==null;if(x&&m)throw new G;x?(i=new Ce(0,c.getY()),l=new Ce(0,d.getY())):m&&(c=new Ce(s.getWidth()-1,i.getY()),d=new Ce(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=i,this.bottomLeft=l,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(i.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,i){return s==null?i:i==null?s:new SA(s.image,s.topLeft,s.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(s,i,l){let c=this.topLeft,d=this.bottomLeft,x=this.topRight,m=this.bottomRight;if(s>0){let B=l?this.topLeft:this.topRight,E=Math.trunc(B.getY()-s);E<0&&(E=0);let U=new Ce(B.getX(),E);l?c=U:x=U}if(i>0){let B=l?this.bottomLeft:this.bottomRight,E=Math.trunc(B.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let U=new Ce(B.getX(),E);l?d=U:m=U}return new SA(this.image,c,d,x,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Mv{constructor(s,i,l,c){this.columnCount=s,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=l,this.rowCount=i+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class _a{constructor(){this.buffer=""}static form(s,i){let l=-1;function c(x,m,B,E,U,R){if(x==="%%")return"%";if(i[++l]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let O=U?parseInt(U.substr(1)):void 0,V;switch(R){case"s":V=i[l];break;case"c":V=i[l][0];break;case"f":V=parseFloat(i[l]).toFixed(x);break;case"p":V=parseFloat(i[l]).toPrecision(x);break;case"e":V=parseFloat(i[l]).toExponential(x);break;case"x":V=parseInt(i[l]).toString(O||16);break;case"d":V=parseFloat(parseInt(i[l],O||10).toPrecision(x)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(O);let W=parseInt(B),q=B&&B[0]+""=="0"?"0":" ";for(;V.length<W;)V=m!==void 0?V+q:q+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,c)}format(s,...i){this.buffer+=_a.form(s,i)}toString(){return this.buffer}}class Na{constructor(s){this.boundingBox=new SA(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let i=this.getCodeword(s);if(i!=null)return i;for(let l=1;l<Na.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(s)-l;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(s)+l,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,i){this.codewords[this.imageRowToCodewordIndex(s)]=i}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new _a;let i=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",i++);continue}s.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}return s.toString()}}Na.MAX_NEARBY_DISTANCE=5;class Fa{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let i=this.values.get(s);i==null&&(i=0),i++,this.values.set(s,i)}getValue(){let s=-1,i=new Array;for(const[l,c]of this.values.entries()){const d={getKey:()=>l,getValue:()=>c};d.getValue()>s?(s=d.getValue(),i=[],i.push(d.getKey())):d.getValue()===s&&i.push(d.getKey())}return Oe.toIntArray(i)}getConfidence(s){return this.values.get(s)}}class hx extends Na{constructor(s,i){super(s),this._isLeft=i}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,s);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),B=-1,E=1,U=0;for(let R=x;R<m;R++){if(i[R]==null)continue;let O=i[R],V=O.getRowNumber()-B;if(V===0)U++;else if(V===1)E=Math.max(E,U),U=1,B=O.getRowNumber();else if(V<0||O.getRowNumber()>=s.getRowCount()||V>R)i[R]=null;else{let W;E>2?W=(E-2)*V:W=V;let q=W>=R;for(let te=1;te<=W&&!q;te++)q=i[R-te]!=null;q?i[R]=null:(B=O.getRowNumber(),U=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let i=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(s){let i=this.getBoundingBox(),l=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),x=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),B=-1;for(let E=d;E<x;E++){if(m[E]==null)continue;let U=m[E];U.setRowNumberAsRowIndicatorColumn();let R=U.getRowNumber()-B;R===0||(R===1?B=U.getRowNumber():U.getRowNumber()>=s.getRowCount()?m[E]=null:B=U.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),i=new Fa,l=new Fa,c=new Fa,d=new Fa;for(let m of s){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let B=m.getValue()%30,E=m.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:l.setValue(B*3+1);break;case 1:d.setValue(B/3),c.setValue(B%3);break;case 2:i.setValue(B+1);break}}if(i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||d.getValue().length===0||i.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<Oe.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>Oe.MAX_ROWS_IN_BARCODE)return null;let x=new Mv(i.getValue()[0],l.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,x),x}removeIncorrectCodewords(s,i){for(let l=0;l<s.length;l++){let c=s[l];if(s[l]==null)continue;let d=c.getValue()%30,x=c.getRowNumber();if(x>i.getRowCount()){s[l]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:d*3+1!==i.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==i.getErrorCorrectionLevel()||d%3!==i.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==i.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ia{constructor(s,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Oe.MAX_CODEWORDS_IN_BARCODE,i;do i=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let l=this.detectionResultColumns[i].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&i[l]!=null&&s[l].getRowNumber()===i[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++){if(i[l]==null)continue;let c=i[l].getRowNumber(),d=0;for(let x=this.barcodeColumnCount+1;x>0&&d<this.ADJUST_ROW_NUMBER_SKIP;x--){let m=this.detectionResultColumns[x].getCodewords()[l];m!=null&&(d=Ia.adjustRowNumberIfValid(c,d,m),m.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,i=this.detectionResultColumns[0].getCodewords();for(let l=0;l<i.length;l++){if(i[l]==null)continue;let c=i[l].getRowNumber(),d=0;for(let x=1;x<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;x++){let m=this.detectionResultColumns[x].getCodewords()[l];m!=null&&(d=Ia.adjustRowNumberIfValid(c,d,m),m.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,i,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),i=0):++i),i}adjustRowNumbers(s,i,l){if(!this.detectionResultColumns[s-1])return;let c=l[i],d=this.detectionResultColumns[s-1].getCodewords(),x=d;this.detectionResultColumns[s+1]!=null&&(x=this.detectionResultColumns[s+1].getCodewords());let m=new Array(14);m[2]=d[i],m[3]=x[i],i>0&&(m[0]=l[i-1],m[4]=d[i-1],m[5]=x[i-1]),i>1&&(m[8]=l[i-2],m[10]=d[i-2],m[11]=x[i-2]),i<l.length-1&&(m[1]=l[i+1],m[6]=d[i+1],m[7]=x[i+1]),i<l.length-2&&(m[9]=l[i+2],m[12]=d[i+2],m[13]=x[i+2]);for(let B of m)if(Ia.adjustRowNumber(c,B))return}static adjustRowNumber(s,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===s.getBucket()?(s.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,i){this.detectionResultColumns[s]=i}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new _a;for(let l=0;l<s.getCodewords().length;l++){i.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[l];if(d==null){i.format("    |   ");continue}i.format(" %3d|%3d",d.getRowNumber(),d.getValue())}i.format("%n")}return i.toString()}}class Sa{constructor(s,i,l,c){this.rowNumber=Sa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(i),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Sa.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Sa.BARCODE_ROW_UNKNOWN=-1;class Gr{static initialize(){for(let s=0;s<Oe.SYMBOL_TABLE.length;s++){let i=Oe.SYMBOL_TABLE[s],l=i&1;for(let c=0;c<Oe.BARS_IN_MODULE;c++){let d=0;for(;(i&1)===l;)d+=1,i>>=1;l=i&1,Gr.RATIOS_TABLE[s]||(Gr.RATIOS_TABLE[s]=new Array(Oe.BARS_IN_MODULE)),Gr.RATIOS_TABLE[s][Oe.BARS_IN_MODULE-c-1]=Math.fround(d/Oe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let i=Gr.getDecodedCodewordValue(Gr.sampleBitCounts(s));return i!==-1?i:Gr.getClosestDecodedValue(s)}static sampleBitCounts(s){let i=Ke.sum(s),l=new Int32Array(Oe.BARS_IN_MODULE),c=0,d=0;for(let x=0;x<Oe.MODULES_IN_CODEWORD;x++){let m=i/(2*Oe.MODULES_IN_CODEWORD)+x*i/Oe.MODULES_IN_CODEWORD;d+s[c]<=m&&(d+=s[c],c++),l[c]++}return l}static getDecodedCodewordValue(s){let i=Gr.getBitValue(s);return Oe.getCodeword(i)===-1?-1:i}static getBitValue(s){let i=0;for(let l=0;l<s.length;l++)for(let c=0;c<s[l];c++)i=i<<1|(l%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(s){let i=Ke.sum(s),l=new Array(Oe.BARS_IN_MODULE);if(i>1)for(let x=0;x<l.length;x++)l[x]=Math.fround(s[x]/i);let c=Wn.MAX_VALUE,d=-1;this.bSymbolTableReady||Gr.initialize();for(let x=0;x<Gr.RATIOS_TABLE.length;x++){let m=0,B=Gr.RATIOS_TABLE[x];for(let E=0;E<Oe.BARS_IN_MODULE;E++){let U=Math.fround(B[E]-l[E]);if(m+=Math.fround(U*U),m>=c)break}m<c&&(c=m,d=Oe.SYMBOL_TABLE[x])}return d}}Gr.bSymbolTableReady=!1,Gr.RATIOS_TABLE=new Array(Oe.SYMBOL_TABLE.length).map(T=>new Array(Oe.BARS_IN_MODULE));class fx{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class xx{static parseLong(s,i=void 0){return parseInt(s,i)}}class gx extends h{}gx.kind="NullPointerException";class Hv{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,i,l){if(s==null)throw new gx;if(i<0||i>s.length||l<0||i+l>s.length||i+l<0)throw new I;if(l===0)return;for(let c=0;c<l;c++)this.write(s[i+c])}flush(){}close(){}}class Pv extends h{}class Kv extends Hv{constructor(s=32){if(super(),this.count=0,s<0)throw new w("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new Pv;l=_.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,i,l){if(i<0||i>s.length||l<0||i+l-s.length>0)throw new I;this.ensureCapacity(this.count+l),F.arraycopy(s,i,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var at;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(at||(at={}));function px(){if(typeof window<"u")return window.BigInt||null;if(typeof Te<"u")return Te.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ml;function Ls(T){if(typeof ml>"u"&&(ml=px()),ml===null)throw new Error("BigInt is not supported!");return ml(T)}function Vv(){let T=[];T[0]=Ls(1);let s=Ls(900);T[1]=s;for(let i=2;i<16;i++)T[i]=T[i-1]*s;return T}class ie{static decode(s,i){let l=new X(""),c=M.ISO8859_1;l.enableDecoding(c);let d=1,x=s[d++],m=new fx;for(;d<s[0];){switch(x){case ie.TEXT_COMPACTION_MODE_LATCH:d=ie.textCompaction(s,d,l);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:d=ie.byteCompaction(x,s,c,d,l);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:d=ie.numericCompaction(s,d,l);break;case ie.ECI_CHARSET:M.getCharacterSetECIByValue(s[d++]);break;case ie.ECI_GENERAL_PURPOSE:d+=2;break;case ie.ECI_USER_DEFINED:d++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=ie.decodeMacroBlock(s,d,m);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new D;default:d--,d=ie.textCompaction(s,d,l);break}if(d<s.length)x=s[d++];else throw D.getFormatInstance()}if(l.length()===0)throw D.getFormatInstance();let B=new Xt(null,l.toString(),null,i);return B.setOther(m),B}static decodeMacroBlock(s,i,l){if(i+ie.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw D.getFormatInstance();let c=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ie.NUMBER_OF_SEQUENCE_CODEWORDS;m++,i++)c[m]=s[i];l.setSegmentIndex(_.parseInt(ie.decodeBase900toBase10(c,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;i=ie.textCompaction(s,i,d),l.setFileId(d.toString());let x=-1;for(s[i]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=i+1);i<s[0];)switch(s[i]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,s[i]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new X;i=ie.textCompaction(s,i+1,m),l.setFileName(m.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let B=new X;i=ie.textCompaction(s,i+1,B),l.setSender(B.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new X;i=ie.textCompaction(s,i+1,E),l.setAddressee(E.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let U=new X;i=ie.numericCompaction(s,i+1,U),l.setSegmentCount(_.parseInt(U.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new X;i=ie.numericCompaction(s,i+1,R),l.setTimestamp(xx.parseLong(R.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let O=new X;i=ie.numericCompaction(s,i+1,O),l.setChecksum(_.parseInt(O.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new X;i=ie.numericCompaction(s,i+1,V),l.setFileSize(xx.parseLong(V.toString()));break;default:throw D.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:i++,l.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(x!==-1){let m=i-x;l.isLastSegment()&&m--,l.setOptionalData(v.copyOfRange(s,x,x+m))}return i}static textCompaction(s,i,l){let c=new Int32Array((s[0]-i)*2),d=new Int32Array((s[0]-i)*2),x=0,m=!1;for(;i<s[0]&&!m;){let B=s[i++];if(B<ie.TEXT_COMPACTION_MODE_LATCH)c[x]=B/30,c[x+1]=B%30,x+=2;else switch(B){case ie.TEXT_COMPACTION_MODE_LATCH:c[x++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,m=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[x]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,B=s[i++],d[x]=B,x++;break}}return ie.decodeTextCompaction(c,d,x,l),i}static decodeTextCompaction(s,i,l,c){let d=at.ALPHA,x=at.ALPHA,m=0;for(;m<l;){let B=s[m],E="";switch(d){case at.ALPHA:if(B<26)E=String.fromCharCode(65+B);else switch(B){case 26:E=" ";break;case ie.LL:d=at.LOWER;break;case ie.ML:d=at.MIXED;break;case ie.PS:x=d,d=at.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.LOWER:if(B<26)E=String.fromCharCode(97+B);else switch(B){case 26:E=" ";break;case ie.AS:x=d,d=at.ALPHA_SHIFT;break;case ie.ML:d=at.MIXED;break;case ie.PS:x=d,d=at.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.MIXED:if(B<ie.PL)E=ie.MIXED_CHARS[B];else switch(B){case ie.PL:d=at.PUNCT;break;case 26:E=" ";break;case ie.LL:d=at.LOWER;break;case ie.AL:d=at.ALPHA;break;case ie.PS:x=d,d=at.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.PUNCT:if(B<ie.PAL)E=ie.PUNCT_CHARS[B];else switch(B){case ie.PAL:d=at.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.ALPHA_SHIFT:if(d=x,B<26)E=String.fromCharCode(65+B);else switch(B){case 26:E=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.PUNCT_SHIFT:if(d=x,B<ie.PAL)E=ie.PUNCT_CHARS[B];else switch(B){case ie.PAL:d=at.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break}E!==""&&c.append(E),m++}}static byteCompaction(s,i,l,c,d){let x=new Kv,m=0,B=0,E=!1;switch(s){case ie.BYTE_COMPACTION_MODE_LATCH:let U=new Int32Array(6),R=i[c++];for(;c<i[0]&&!E;)switch(U[m++]=R,B=900*B+R,R=i[c++],R){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:c--,E=!0;break;default:if(m%5===0&&m>0){for(let O=0;O<6;++O)x.write(Number(Ls(B)>>Ls(8*(5-O))));B=0,m=0}break}c===i[0]&&R<ie.TEXT_COMPACTION_MODE_LATCH&&(U[m++]=R);for(let O=0;O<m;O++)x.write(U[O]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!E;){let O=i[c++];if(O<ie.TEXT_COMPACTION_MODE_LATCH)m++,B=900*B+O;else switch(O){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:c--,E=!0;break}if(m%5===0&&m>0){for(let V=0;V<6;++V)x.write(Number(Ls(B)>>Ls(8*(5-V))));B=0,m=0}}break}return d.append(P.decode(x.toByteArray(),l)),c}static numericCompaction(s,i,l){let c=0,d=!1,x=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;i<s[0]&&!d;){let m=s[i++];if(i===s[0]&&(d=!0),m<ie.TEXT_COMPACTION_MODE_LATCH)x[c]=m,c++;else switch(m){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,d=!0;break}(c%ie.MAX_NUMERIC_CODEWORDS===0||m===ie.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(l.append(ie.decodeBase900toBase10(x,c)),c=0)}return i}static decodeBase900toBase10(s,i){let l=Ls(0);for(let d=0;d<i;d++)l+=ie.EXP900[i-d-1]*Ls(s[d]);let c=l.toString();if(c.charAt(0)!=="1")throw new D;return c.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=px()?Vv():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Pe{constructor(){}static decode(s,i,l,c,d,x,m){let B=new SA(s,i,l,c,d),E=null,U=null,R;for(let W=!0;;W=!1){if(i!=null&&(E=Pe.getRowIndicatorColumn(s,B,i,!0,x,m)),c!=null&&(U=Pe.getRowIndicatorColumn(s,B,c,!1,x,m)),R=Pe.merge(E,U),R==null)throw G.getNotFoundInstance();let q=R.getBoundingBox();if(W&&q!=null&&(q.getMinY()<B.getMinY()||q.getMaxY()>B.getMaxY()))B=q;else break}R.setBoundingBox(B);let O=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,E),R.setDetectionResultColumn(O,U);let V=E!=null;for(let W=1;W<=O;W++){let q=V?W:O-W;if(R.getDetectionResultColumn(q)!==void 0)continue;let te;q===0||q===O?te=new hx(B,q===0):te=new Na(B),R.setDetectionResultColumn(q,te);let ae=-1,ye=ae;for(let Be=B.getMinY();Be<=B.getMaxY();Be++){if(ae=Pe.getStartColumn(R,q,Be,V),ae<0||ae>B.getMaxX()){if(ye===-1)continue;ae=ye}let ge=Pe.detectCodeword(s,B.getMinX(),B.getMaxX(),V,ae,Be,x,m);ge!=null&&(te.setCodeword(Be,ge),ye=ae,x=Math.min(x,ge.getWidth()),m=Math.max(m,ge.getWidth()))}}return Pe.createDecoderResult(R)}static merge(s,i){if(s==null&&i==null)return null;let l=Pe.getBarcodeMetadata(s,i);if(l==null)return null;let c=SA.merge(Pe.adjustBoundingBox(s),Pe.adjustBoundingBox(i));return new Ia(l,c)}static adjustBoundingBox(s){if(s==null)return null;let i=s.getRowHeights();if(i==null)return null;let l=Pe.getMax(i),c=0;for(let m of i)if(c+=l-m,m>0)break;let d=s.getCodewords();for(let m=0;c>0&&d[m]==null;m++)c--;let x=0;for(let m=i.length-1;m>=0&&(x+=l-i[m],!(i[m]>0));m--);for(let m=d.length-1;x>0&&d[m]==null;m--)x--;return s.getBoundingBox().addMissingRows(c,x,s.isLeft())}static getMax(s){let i=-1;for(let l of s)i=Math.max(i,l);return i}static getBarcodeMetadata(s,i){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(s,i,l,c,d,x){let m=new hx(i,c);for(let B=0;B<2;B++){let E=B===0?1:-1,U=Math.trunc(Math.trunc(l.getX()));for(let R=Math.trunc(Math.trunc(l.getY()));R<=i.getMaxY()&&R>=i.getMinY();R+=E){let O=Pe.detectCodeword(s,0,s.getWidth(),c,U,R,d,x);O!=null&&(m.setCodeword(R,O),c?U=O.getStartX():U=O.getEndX())}}return m}static adjustCodewordCount(s,i){let l=i[0][1],c=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Pe.getNumberOfECCodeWords(s.getBarcodeECLevel());if(c.length===0){if(d<1||d>Oe.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();l.setValue(d)}else c[0]!==d&&l.setValue(d)}static createDecoderResult(s){let i=Pe.createBarcodeMatrix(s);Pe.adjustCodewordCount(s,i);let l=new Array,c=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],x=new Array;for(let B=0;B<s.getBarcodeRowCount();B++)for(let E=0;E<s.getBarcodeColumnCount();E++){let U=i[B][E+1].getValue(),R=B*s.getBarcodeColumnCount()+E;U.length===0?l.push(R):U.length===1?c[R]=U[0]:(x.push(R),d.push(U))}let m=new Array(d.length);for(let B=0;B<m.length;B++)m[B]=d[B];return Pe.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),c,Oe.toIntArray(l),Oe.toIntArray(x),m)}static createDecoderResultFromAmbiguousValues(s,i,l,c,d){let x=new Int32Array(c.length),m=100;for(;m-- >0;){for(let B=0;B<x.length;B++)i[c[B]]=d[B][x[B]];try{return Pe.decodeCodewords(i,s,l)}catch(B){if(!(B instanceof C))throw B}if(x.length===0)throw C.getChecksumInstance();for(let B=0;B<x.length;B++)if(x[B]<d[B].length-1){x[B]++;break}else if(x[B]=0,B===x.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(s){let i=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let d=0;d<i[c].length;d++)i[c][d]=new Fa;let l=0;for(let c of s.getDetectionResultColumns()){if(c!=null){for(let d of c.getCodewords())if(d!=null){let x=d.getRowNumber();if(x>=0){if(x>=i.length)continue;i[x][l].setValue(d.getValue())}}}l++}return i}static isValidBarcodeColumn(s,i){return i>=0&&i<=s.getBarcodeColumnCount()+1}static getStartColumn(s,i,l,c){let d=c?1:-1,x=null;if(Pe.isValidBarcodeColumn(s,i-d)&&(x=s.getDetectionResultColumn(i-d).getCodeword(l)),x!=null)return c?x.getEndX():x.getStartX();if(x=s.getDetectionResultColumn(i).getCodewordNearby(l),x!=null)return c?x.getStartX():x.getEndX();if(Pe.isValidBarcodeColumn(s,i-d)&&(x=s.getDetectionResultColumn(i-d).getCodewordNearby(l)),x!=null)return c?x.getEndX():x.getStartX();let m=0;for(;Pe.isValidBarcodeColumn(s,i-d);){i-=d;for(let B of s.getDetectionResultColumn(i).getCodewords())if(B!=null)return(c?B.getEndX():B.getStartX())+d*m*(B.getEndX()-B.getStartX());m++}return c?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,i,l,c,d,x,m,B){d=Pe.adjustCodewordStartColumn(s,i,l,c,d,x);let E=Pe.getModuleBitCount(s,i,l,c,d,x);if(E==null)return null;let U,R=Ke.sum(E);if(c)U=d+R;else{for(let W=0;W<E.length/2;W++){let q=E[W];E[W]=E[E.length-1-W],E[E.length-1-W]=q}U=d,d=U-R}if(!Pe.checkCodewordSkew(R,m,B))return null;let O=Gr.getDecodedValue(E),V=Oe.getCodeword(O);return V===-1?null:new Sa(d,U,Pe.getCodewordBucketNumber(O),V)}static getModuleBitCount(s,i,l,c,d,x){let m=d,B=new Int32Array(8),E=0,U=c?1:-1,R=c;for(;(c?m<l:m>=i)&&E<B.length;)s.get(m,x)===R?(B[E]++,m+=U):(E++,R=!R);return E===B.length||m===(c?l:i)&&E===B.length-1?B:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,i,l,c,d,x){let m=d,B=c?-1:1;for(let E=0;E<2;E++){for(;(c?m>=i:m<l)&&c===s.get(m,x);){if(Math.abs(d-m)>Pe.CODEWORD_SKEW_SIZE)return d;m+=B}B=-B,c=!c}return m}static checkCodewordSkew(s,i,l){return i-Pe.CODEWORD_SKEW_SIZE<=s&&s<=l+Pe.CODEWORD_SKEW_SIZE}static decodeCodewords(s,i,l){if(s.length===0)throw D.getFormatInstance();let c=1<<i+1,d=Pe.correctErrors(s,l,c);Pe.verifyCodewordCount(s,c);let x=ie.decode(s,""+i);return x.setErrorsCorrected(d),x.setErasures(l.length),x}static correctErrors(s,i,l){if(i!=null&&i.length>l/2+Pe.MAX_ERRORS||l<0||l>Pe.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return Pe.errorCorrection.decode(s,l,i)}static verifyCodewordCount(s,i){if(s.length<4)throw D.getFormatInstance();let l=s[0];if(l>s.length)throw D.getFormatInstance();if(l===0)if(i<s.length)s[0]=s.length-i;else throw D.getFormatInstance()}static getBitCountForCodeword(s){let i=new Int32Array(8),l=0,c=i.length-1;for(;!((s&1)!==l&&(l=s&1,c--,c<0));)i[c]++,s>>=1;return i}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Pe.getCodewordBucketNumber(Pe.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let i=new _a;for(let l=0;l<s.length;l++){i.format("Row %2d: ",l);for(let c=0;c<s[l].length;c++){let d=s[l][c];d.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}i.format("%n")}return i.toString()}}Pe.CODEWORD_SKEW_SIZE=2,Pe.MAX_ERRORS=3,Pe.MAX_EC_CODEWORDS=512,Pe.errorCorrection=new dx;class mr{decode(s,i=null){let l=mr.decode(s,i,!1);if(l==null||l.length===0||l[0]==null)throw G.getNotFoundInstance();return l[0]}decodeMultiple(s,i=null){try{return mr.decode(s,i,!0)}catch(l){throw l instanceof D||l instanceof C?G.getNotFoundInstance():l}}static decode(s,i,l){const c=new Array,d=He.detectMultiple(s,i,l);for(const x of d.getPoints()){const m=Pe.decode(d.getBits(),x[4],x[5],x[6],x[7],mr.getMinCodewordWidth(x),mr.getMaxCodewordWidth(x)),B=new se(m.getText(),m.getRawBytes(),void 0,x,fe.PDF_417);B.putMetadata(pe.ERROR_CORRECTION_LEVEL,m.getECLevel());const E=m.getOther();E!=null&&B.putMetadata(pe.PDF417_EXTRA_METADATA,E),c.push(B)}return c.map(x=>x)}static getMaxWidth(s,i){return s==null||i==null?0:Math.trunc(Math.abs(s.getX()-i.getX()))}static getMinWidth(s,i){return s==null||i==null?_.MAX_VALUE:Math.trunc(Math.abs(s.getX()-i.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(mr.getMaxWidth(s[0],s[4]),mr.getMaxWidth(s[6],s[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.max(mr.getMaxWidth(s[1],s[5]),mr.getMaxWidth(s[7],s[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(mr.getMinWidth(s[0],s[4]),mr.getMinWidth(s[6],s[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.min(mr.getMinWidth(s[1],s[5]),mr.getMinWidth(s[7],s[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}reset(){}}class wl extends h{}wl.kind="ReaderException";class mx{constructor(s,i){this.verbose=s===!0,i&&this.setHints(i)}decode(s,i){return i&&this.setHints(i),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const i=!n(s)&&s.get(Q.TRY_HARDER)===!0,l=n(s)?null:s.get(Q.POSSIBLE_FORMATS),c=new Array;if(!n(l)){const d=l.some(x=>x===fe.UPC_A||x===fe.UPC_E||x===fe.EAN_13||x===fe.EAN_8||x===fe.CODABAR||x===fe.CODE_39||x===fe.CODE_93||x===fe.CODE_128||x===fe.ITF||x===fe.RSS_14||x===fe.RSS_EXPANDED);d&&!i&&c.push(new ci(s,this.verbose)),l.includes(fe.QR_CODE)&&c.push(new ks),l.includes(fe.DATA_MATRIX)&&c.push(new Os),l.includes(fe.AZTEC)&&c.push(new Qn),l.includes(fe.PDF_417)&&c.push(new mr),d&&i&&c.push(new ci(s,this.verbose))}c.length===0&&(i||c.push(new ci(s,this.verbose)),c.push(new ks),c.push(new Os),c.push(new Qn),c.push(new mr),i&&c.push(new ci(s,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new wl("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(s,this.hints)}catch(l){if(l instanceof wl)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class Gv extends Ae{constructor(s=null,i=500){const l=new mx;l.setHints(s),super(l,i)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class zv extends Ae{constructor(s=500){super(new mr,s)}}class Wv extends Ae{constructor(s=500){super(new ks,s)}}var x0;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(x0||(x0={}));var $t=x0;class g0{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new vt(s,Int32Array.from([1])))}buildGenerator(s){const i=this.cachedGenerators;if(s>=i.length){let l=i[i.length-1];const c=this.field;for(let d=i.length;d<=s;d++){const x=l.multiply(new vt(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));i.push(x),l=x}}return i[s]}encode(s,i){if(i===0)throw new w("No error correction bytes");const l=s.length-i;if(l<=0)throw new w("No data bytes provided");const c=this.buildGenerator(i),d=new Int32Array(l);F.arraycopy(s,0,d,0,l);let x=new vt(this.field,d);x=x.multiplyByMonomial(i,1);const B=x.divide(c)[1].getCoefficients(),E=i-B.length;for(let U=0;U<E;U++)s[l+U]=0;F.arraycopy(B,0,s,l+E,B.length)}}class Tt{constructor(){}static applyMaskPenaltyRule1(s){return Tt.applyMaskPenaltyRule1Internal(s,!0)+Tt.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let i=0;const l=s.getArray(),c=s.getWidth(),d=s.getHeight();for(let x=0;x<d-1;x++){const m=l[x];for(let B=0;B<c-1;B++){const E=m[B];E===m[B+1]&&E===l[x+1][B]&&E===l[x+1][B+1]&&i++}}return Tt.N2*i}static applyMaskPenaltyRule3(s){let i=0;const l=s.getArray(),c=s.getWidth(),d=s.getHeight();for(let x=0;x<d;x++)for(let m=0;m<c;m++){const B=l[x];m+6<c&&B[m]===1&&B[m+1]===0&&B[m+2]===1&&B[m+3]===1&&B[m+4]===1&&B[m+5]===0&&B[m+6]===1&&(Tt.isWhiteHorizontal(B,m-4,m)||Tt.isWhiteHorizontal(B,m+7,m+11))&&i++,x+6<d&&l[x][m]===1&&l[x+1][m]===0&&l[x+2][m]===1&&l[x+3][m]===1&&l[x+4][m]===1&&l[x+5][m]===0&&l[x+6][m]===1&&(Tt.isWhiteVertical(l,m,x-4,x)||Tt.isWhiteVertical(l,m,x+7,x+11))&&i++}return i*Tt.N3}static isWhiteHorizontal(s,i,l){i=Math.max(i,0),l=Math.min(l,s.length);for(let c=i;c<l;c++)if(s[c]===1)return!1;return!0}static isWhiteVertical(s,i,l,c){l=Math.max(l,0),c=Math.min(c,s.length);for(let d=l;d<c;d++)if(s[d][i]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let i=0;const l=s.getArray(),c=s.getWidth(),d=s.getHeight();for(let B=0;B<d;B++){const E=l[B];for(let U=0;U<c;U++)E[U]===1&&i++}const x=s.getHeight()*s.getWidth();return Math.floor(Math.abs(i*2-x)*10/x)*Tt.N4}static getDataMaskBit(s,i,l){let c,d;switch(s){case 0:c=l+i&1;break;case 1:c=l&1;break;case 2:c=i%3;break;case 3:c=(l+i)%3;break;case 4:c=Math.floor(l/2)+Math.floor(i/3)&1;break;case 5:d=l*i,c=(d&1)+d%3;break;case 6:d=l*i,c=(d&1)+d%3&1;break;case 7:d=l*i,c=d%3+(l+i&1)&1;break;default:throw new w("Invalid mask pattern: "+s)}return c===0}static applyMaskPenaltyRule1Internal(s,i){let l=0;const c=i?s.getHeight():s.getWidth(),d=i?s.getWidth():s.getHeight(),x=s.getArray();for(let m=0;m<c;m++){let B=0,E=-1;for(let U=0;U<d;U++){const R=i?x[m][U]:x[U][m];R===E?B++:(B>=5&&(l+=Tt.N1+(B-5)),B=1,E=R)}B>=5&&(l+=Tt.N1+(B-5))}return l}}Tt.N1=3,Tt.N2=3,Tt.N3=40,Tt.N4=10;class yl{constructor(s,i){this.width=s,this.height=i;const l=new Array(i);for(let c=0;c!==i;c++)l[c]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,i){return this.bytes[i][s]}getArray(){return this.bytes}setNumber(s,i,l){this.bytes[i][s]=l}setBoolean(s,i,l){this.bytes[i][s]=l?1:0}clear(s){for(const i of this.bytes)v.fill(i,s)}equals(s){if(!(s instanceof yl))return!1;const i=s;if(this.width!==i.width||this.height!==i.height)return!1;for(let l=0,c=this.height;l<c;++l){const d=this.bytes[l],x=i.bytes[l];for(let m=0,B=this.width;m<B;++m)if(d[m]!==x[m])return!1}return!0}toString(){const s=new X;for(let i=0,l=this.height;i<l;++i){const c=this.bytes[i];for(let d=0,x=this.width;d<x;++d)switch(c[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class UA{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new X;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<UA.NUM_MASK_PATTERNS}}UA.NUM_MASK_PATTERNS=8;class ct extends h{}ct.kind="WriterException";class je{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,i,l,c,d){je.clearMatrix(d),je.embedBasicPatterns(l,d),je.embedTypeInfo(i,c,d),je.maybeEmbedVersionInfo(l,d),je.embedDataBits(s,c,d)}static embedBasicPatterns(s,i){je.embedPositionDetectionPatternsAndSeparators(i),je.embedDarkDotAtLeftBottomCorner(i),je.maybeEmbedPositionAdjustmentPatterns(s,i),je.embedTimingPatterns(i)}static embedTypeInfo(s,i,l){const c=new S;je.makeTypeInfoBits(s,i,c);for(let d=0,x=c.getSize();d<x;++d){const m=c.get(c.getSize()-1-d),B=je.TYPE_INFO_COORDINATES[d],E=B[0],U=B[1];if(l.setBoolean(E,U,m),d<8){const R=l.getWidth()-d-1;l.setBoolean(R,8,m)}else{const O=l.getHeight()-7+(d-8);l.setBoolean(8,O,m)}}}static maybeEmbedVersionInfo(s,i){if(s.getVersionNumber()<7)return;const l=new S;je.makeVersionInfoBits(s,l);let c=6*3-1;for(let d=0;d<6;++d)for(let x=0;x<3;++x){const m=l.get(c);c--,i.setBoolean(d,i.getHeight()-11+x,m),i.setBoolean(i.getHeight()-11+x,d,m)}}static embedDataBits(s,i,l){let c=0,d=-1,x=l.getWidth()-1,m=l.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);m>=0&&m<l.getHeight();){for(let B=0;B<2;++B){const E=x-B;if(!je.isEmpty(l.get(E,m)))continue;let U;c<s.getSize()?(U=s.get(c),++c):U=!1,i!==255&&Tt.getDataMaskBit(i,E,m)&&(U=!U),l.setBoolean(E,m,U)}m+=d}d=-d,m+=d,x-=2}if(c!==s.getSize())throw new ct("Not all bits consumed: "+c+"/"+s.getSize())}static findMSBSet(s){return 32-_.numberOfLeadingZeros(s)}static calculateBCHCode(s,i){if(i===0)throw new w("0 polynomial");const l=je.findMSBSet(i);for(s<<=l-1;je.findMSBSet(s)>=l;)s^=i<<je.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,i,l){if(!UA.isValidMaskPattern(i))throw new ct("Invalid mask pattern");const c=s.getBits()<<3|i;l.appendBits(c,5);const d=je.calculateBCHCode(c,je.TYPE_INFO_POLY);l.appendBits(d,10);const x=new S;if(x.appendBits(je.TYPE_INFO_MASK_PATTERN,15),l.xor(x),l.getSize()!==15)throw new ct("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,i){i.appendBits(s.getVersionNumber(),6);const l=je.calculateBCHCode(s.getVersionNumber(),je.VERSION_INFO_POLY);if(i.appendBits(l,12),i.getSize()!==18)throw new ct("should not happen but we got: "+i.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let i=8;i<s.getWidth()-8;++i){const l=(i+1)%2;je.isEmpty(s.get(i,6))&&s.setNumber(i,6,l),je.isEmpty(s.get(6,i))&&s.setNumber(6,i,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new ct;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,i,l){for(let c=0;c<8;++c){if(!je.isEmpty(l.get(s+c,i)))throw new ct;l.setNumber(s+c,i,0)}}static embedVerticalSeparationPattern(s,i,l){for(let c=0;c<7;++c){if(!je.isEmpty(l.get(s,i+c)))throw new ct;l.setNumber(s,i+c,0)}}static embedPositionAdjustmentPattern(s,i,l){for(let c=0;c<5;++c){const d=je.POSITION_ADJUSTMENT_PATTERN[c];for(let x=0;x<5;++x)l.setNumber(s+x,i+c,d[x])}}static embedPositionDetectionPattern(s,i,l){for(let c=0;c<7;++c){const d=je.POSITION_DETECTION_PATTERN[c];for(let x=0;x<7;++x)l.setNumber(s+x,i+c,d[x])}}static embedPositionDetectionPatternsAndSeparators(s){const i=je.POSITION_DETECTION_PATTERN[0].length;je.embedPositionDetectionPattern(0,0,s),je.embedPositionDetectionPattern(s.getWidth()-i,0,s),je.embedPositionDetectionPattern(0,s.getWidth()-i,s);const l=8;je.embedHorizontalSeparationPattern(0,l-1,s),je.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),je.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const c=7;je.embedVerticalSeparationPattern(c,0,s),je.embedVerticalSeparationPattern(s.getHeight()-c-1,0,s),je.embedVerticalSeparationPattern(c,s.getHeight()-c,s)}static maybeEmbedPositionAdjustmentPatterns(s,i){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,c=je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,x=c.length;d!==x;d++){const m=c[d];if(m>=0)for(let B=0;B!==x;B++){const E=c[B];E>=0&&je.isEmpty(i.get(E,m))&&je.embedPositionAdjustmentPattern(E-2,m-2,i)}}}}je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),je.VERSION_INFO_POLY=7973,je.TYPE_INFO_POLY=1335,je.TYPE_INFO_MASK_PATTERN=21522;class Xv{constructor(s,i){this.dataBytes=s,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pt{constructor(){}static calculateMaskPenalty(s){return Tt.applyMaskPenaltyRule1(s)+Tt.applyMaskPenaltyRule2(s)+Tt.applyMaskPenaltyRule3(s)+Tt.applyMaskPenaltyRule4(s)}static encode(s,i,l=null){let c=pt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get($t.CHARACTER_SET)!==void 0;d&&(c=l.get($t.CHARACTER_SET).toString());const x=this.chooseMode(s,c),m=new S;if(x===Re.BYTE&&(d||pt.DEFAULT_BYTE_MODE_ENCODING!==c)){const Be=M.getCharacterSetECIByName(c);Be!==void 0&&this.appendECI(Be,m)}this.appendModeInfo(x,m);const B=new S;this.appendBytes(s,x,B,c);let E;if(l!==null&&l.get($t.QR_VERSION)!==void 0){const Be=Number.parseInt(l.get($t.QR_VERSION).toString(),10);E=De.getVersionForNumber(Be);const ge=this.calculateBitsNeeded(x,m,B,E);if(!this.willFit(ge,E,i))throw new ct("Data too big for requested version")}else E=this.recommendVersion(i,x,m,B);const U=new S;U.appendBitArray(m);const R=x===Re.BYTE?B.getSizeInBytes():s.length;this.appendLengthInfo(R,E,x,U),U.appendBitArray(B);const O=E.getECBlocksForLevel(i),V=E.getTotalCodewords()-O.getTotalECCodewords();this.terminateBits(V,U);const W=this.interleaveWithECBytes(U,E.getTotalCodewords(),V,O.getNumBlocks()),q=new UA;q.setECLevel(i),q.setMode(x),q.setVersion(E);const te=E.getDimensionForVersion(),ae=new yl(te,te),ye=this.chooseMaskPattern(W,i,E,ae);return q.setMaskPattern(ye),je.buildMatrix(W,i,E,ye,ae),q.setMatrix(ae),q}static recommendVersion(s,i,l,c){const d=this.calculateBitsNeeded(i,l,c,De.getVersionForNumber(1)),x=this.chooseVersion(d,s),m=this.calculateBitsNeeded(i,l,c,x);return this.chooseVersion(m,s)}static calculateBitsNeeded(s,i,l,c){return i.getSize()+s.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(s){return s<pt.ALPHANUMERIC_TABLE.length?pt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,i=null){if(M.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(s))return Re.KANJI;let l=!1,c=!1;for(let d=0,x=s.length;d<x;++d){const m=s.charAt(d);if(pt.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Re.BYTE}return c?Re.ALPHANUMERIC:l?Re.NUMERIC:Re.BYTE}static isOnlyDoubleByteKanji(s){let i;try{i=P.encode(s,M.SJIS)}catch{return!1}const l=i.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const d=i[c]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,i,l,c){let d=Number.MAX_SAFE_INTEGER,x=-1;for(let m=0;m<UA.NUM_MASK_PATTERNS;m++){je.buildMatrix(s,i,l,m,c);let B=this.calculateMaskPenalty(c);B<d&&(d=B,x=m)}return x}static chooseVersion(s,i){for(let l=1;l<=40;l++){const c=De.getVersionForNumber(l);if(pt.willFit(s,c,i))return c}throw new ct("Data too big")}static willFit(s,i,l){const c=i.getTotalCodewords(),x=i.getECBlocksForLevel(l).getTotalECCodewords(),m=c-x,B=(s+7)/8;return m>=B}static terminateBits(s,i){const l=s*8;if(i.getSize()>l)throw new ct("data bits cannot fit in the QR Code"+i.getSize()+" > "+l);for(let x=0;x<4&&i.getSize()<l;++x)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let x=c;x<8;x++)i.appendBit(!1);const d=s-i.getSizeInBytes();for(let x=0;x<d;++x)i.appendBits(x&1?17:236,8);if(i.getSize()!==l)throw new ct("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,i,l,c,d,x){if(c>=l)throw new ct("Block ID too large");const m=s%l,B=l-m,E=Math.floor(s/l),U=E+1,R=Math.floor(i/l),O=R+1,V=E-R,W=U-O;if(V!==W)throw new ct("EC bytes mismatch");if(l!==B+m)throw new ct("RS blocks mismatch");if(s!==(R+V)*B+(O+W)*m)throw new ct("Total bytes mismatch");c<B?(d[0]=R,x[0]=V):(d[0]=O,x[0]=W)}static interleaveWithECBytes(s,i,l,c){if(s.getSizeInBytes()!==l)throw new ct("Number of bits and data bytes does not match");let d=0,x=0,m=0;const B=new Array;for(let U=0;U<c;++U){const R=new Int32Array(1),O=new Int32Array(1);pt.getNumDataBytesAndNumECBytesForBlockID(i,l,c,U,R,O);const V=R[0],W=new Uint8Array(V);s.toBytes(8*d,W,0,V);const q=pt.generateECBytes(W,O[0]);B.push(new Xv(W,q)),x=Math.max(x,V),m=Math.max(m,q.length),d+=R[0]}if(l!==d)throw new ct("Data bytes does not match offset");const E=new S;for(let U=0;U<x;++U)for(const R of B){const O=R.getDataBytes();U<O.length&&E.appendBits(O[U],8)}for(let U=0;U<m;++U)for(const R of B){const O=R.getErrorCorrectionBytes();U<O.length&&E.appendBits(O[U],8)}if(i!==E.getSizeInBytes())throw new ct("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(s,i){const l=s.length,c=new Int32Array(l+i);for(let x=0;x<l;x++)c[x]=s[x]&255;new g0(de.QR_CODE_FIELD_256).encode(c,i);const d=new Uint8Array(i);for(let x=0;x<i;x++)d[x]=c[l+x];return d}static appendModeInfo(s,i){i.appendBits(s.getBits(),4)}static appendLengthInfo(s,i,l,c){const d=l.getCharacterCountBits(i);if(s>=1<<d)throw new ct(s+" is bigger than "+((1<<d)-1));c.appendBits(s,d)}static appendBytes(s,i,l,c){switch(i){case Re.NUMERIC:pt.appendNumericBytes(s,l);break;case Re.ALPHANUMERIC:pt.appendAlphanumericBytes(s,l);break;case Re.BYTE:pt.append8BitBytes(s,l,c);break;case Re.KANJI:pt.appendKanjiBytes(s,l);break;default:throw new ct("Invalid mode: "+i)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const i=pt.getDigit(s);return i>=0&&i<=9}static appendNumericBytes(s,i){const l=s.length;let c=0;for(;c<l;){const d=pt.getDigit(s.charAt(c));if(c+2<l){const x=pt.getDigit(s.charAt(c+1)),m=pt.getDigit(s.charAt(c+2));i.appendBits(d*100+x*10+m,10),c+=3}else if(c+1<l){const x=pt.getDigit(s.charAt(c+1));i.appendBits(d*10+x,7),c+=2}else i.appendBits(d,4),c++}}static appendAlphanumericBytes(s,i){const l=s.length;let c=0;for(;c<l;){const d=pt.getAlphanumericCode(s.charCodeAt(c));if(d===-1)throw new ct;if(c+1<l){const x=pt.getAlphanumericCode(s.charCodeAt(c+1));if(x===-1)throw new ct;i.appendBits(d*45+x,11),c+=2}else i.appendBits(d,6),c++}}static append8BitBytes(s,i,l){let c;try{c=P.encode(s,l)}catch(d){throw new ct(d)}for(let d=0,x=c.length;d!==x;d++){const m=c[d];i.appendBits(m,8)}}static appendKanjiBytes(s,i){let l;try{l=P.encode(s,M.SJIS)}catch(d){throw new ct(d)}const c=l.length;for(let d=0;d<c;d+=2){const x=l[d]&255,m=l[d+1]&255,B=x<<8&4294967295|m;let E=-1;if(B>=33088&&B<=40956?E=B-33088:B>=57408&&B<=60351&&(E=B-49472),E===-1)throw new ct("Invalid byte sequence");const U=(E>>8)*192+(E&255);i.appendBits(U,13)}}static appendECI(s,i){i.appendBits(Re.ECI.getBits(),4),i.appendBits(s.getValue(),8)}}pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pt.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class QA{write(s,i,l,c=null){if(s.length===0)throw new w("Found empty contents");if(i<0||l<0)throw new w("Requested dimensions are too small: "+i+"x"+l);let d=dt.L,x=QA.QUIET_ZONE_SIZE;c!==null&&(c.get($t.ERROR_CORRECTION)!==void 0&&(d=dt.fromString(c.get($t.ERROR_CORRECTION).toString())),c.get($t.MARGIN)!==void 0&&(x=Number.parseInt(c.get($t.MARGIN).toString(),10)));const m=pt.encode(s,d,c);return this.renderResult(m,i,l,x)}writeToDom(s,i,l,c,d=null){typeof s=="string"&&(s=document.querySelector(s));const x=this.write(i,l,c,d);s&&s.appendChild(x)}renderResult(s,i,l,c){const d=s.getMatrix();if(d===null)throw new ke;const x=d.getWidth(),m=d.getHeight(),B=x+c*2,E=m+c*2,U=Math.max(i,B),R=Math.max(l,E),O=Math.min(Math.floor(U/B),Math.floor(R/E)),V=Math.floor((U-x*O)/2),W=Math.floor((R-m*O)/2),q=this.createSVGElement(U,R);for(let te=0,ae=W;te<m;te++,ae+=O)for(let ye=0,Be=V;ye<x;ye++,Be+=O)if(d.get(ye,te)===1){const ge=this.createSvgRectElement(Be,ae,O,O);q.appendChild(ge)}return q}createSVGElement(s,i){const l=document.createElementNS(QA.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",i.toString()),l}createSvgRectElement(s,i,l,c){const d=document.createElementNS(QA.SVG_NS,"rect");return d.setAttributeNS(null,"x",s.toString()),d.setAttributeNS(null,"y",i.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",c.toString()),d.setAttributeNS(null,"fill","#000000"),d}}QA.QUIET_ZONE_SIZE=4,QA.SVG_NS="http://www.w3.org/2000/svg";class di{encode(s,i,l,c,d){if(s.length===0)throw new w("Found empty contents");if(i!==fe.QR_CODE)throw new w("Can only encode QR_CODE, but got "+i);if(l<0||c<0)throw new w(`Requested dimensions are too small: ${l}x${c}`);let x=dt.L,m=di.QUIET_ZONE_SIZE;d!==null&&(d.get($t.ERROR_CORRECTION)!==void 0&&(x=dt.fromString(d.get($t.ERROR_CORRECTION).toString())),d.get($t.MARGIN)!==void 0&&(m=Number.parseInt(d.get($t.MARGIN).toString(),10)));const B=pt.encode(s,x,d);return di.renderResult(B,l,c,m)}static renderResult(s,i,l,c){const d=s.getMatrix();if(d===null)throw new ke;const x=d.getWidth(),m=d.getHeight(),B=x+c*2,E=m+c*2,U=Math.max(i,B),R=Math.max(l,E),O=Math.min(Math.floor(U/B),Math.floor(R/E)),V=Math.floor((U-x*O)/2),W=Math.floor((R-m*O)/2),q=new ce(U,R);for(let te=0,ae=W;te<m;te++,ae+=O)for(let ye=0,Be=V;ye<x;ye++,Be+=O)d.get(ye,te)===1&&q.setRegion(Be,ae,O,O);return q}}di.QUIET_ZONE_SIZE=4;class qv{encode(s,i,l,c,d){let x;switch(i){case fe.QR_CODE:x=new di;break;default:throw new w("No encoder available for format "+i)}return x.encode(s,i,l,c,d)}}class Zn extends le{constructor(s,i,l,c,d,x,m,B){if(super(x,m),this.yuvData=s,this.dataWidth=i,this.dataHeight=l,this.left=c,this.top=d,c+x>i||d+m>l)throw new w("Crop rectangle does not fit within image data.");B&&this.reverseHorizontal(x,m)}getRow(s,i){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(i==null||i.length<l)&&(i=new Uint8ClampedArray(l));const c=(s+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,c,i,0,l),i}getMatrix(){const s=this.getWidth(),i=this.getHeight();if(s===this.dataWidth&&i===this.dataHeight)return this.yuvData;const l=s*i,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return F.arraycopy(this.yuvData,d,c,0,l),c;for(let x=0;x<i;x++){const m=x*s;F.arraycopy(this.yuvData,d,c,m,s),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(s,i,l,c){return new Zn(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+i,l,c,!1)}renderThumbnail(){const s=this.getWidth()/Zn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Zn.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*i),c=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let x=0;x<i;x++){const m=x*s;for(let B=0;B<s;B++){const E=c[d+B*Zn.THUMBNAIL_SCALE_FACTOR]&255;l[m+B]=4278190080|E*65793}d+=this.dataWidth*Zn.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Zn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Zn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,i){const l=this.yuvData;for(let c=0,d=this.top*this.dataWidth+this.left;c<i;c++,d+=this.dataWidth){const x=d+s/2;for(let m=d,B=d+s-1;m<x;m++,B--){const E=l[m];l[m]=l[B],l[B]=E}}}invert(){return new Y(this)}}Zn.THUMBNAIL_SCALE_FACTOR=2;class p0 extends le{constructor(s,i,l,c,d,x,m){if(super(i,l),this.dataWidth=c,this.dataHeight=d,this.left=x,this.top=m,s.BYTES_PER_ELEMENT===4){const B=i*l,E=new Uint8ClampedArray(B);for(let U=0;U<B;U++){const R=s[U],O=R>>16&255,V=R>>7&510,W=R&255;E[U]=(O+V+W)/4&255}this.luminances=E}else this.luminances=s;if(c===void 0&&(this.dataWidth=i),d===void 0&&(this.dataHeight=l),x===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+l>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(s,i){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(i==null||i.length<l)&&(i=new Uint8ClampedArray(l));const c=(s+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,c,i,0,l),i}getMatrix(){const s=this.getWidth(),i=this.getHeight();if(s===this.dataWidth&&i===this.dataHeight)return this.luminances;const l=s*i,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return F.arraycopy(this.luminances,d,c,0,l),c;for(let x=0;x<i;x++){const m=x*s;F.arraycopy(this.luminances,d,c,m,s),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(s,i,l,c){return new p0(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+s,this.top+i)}invert(){return new Y(this)}}class wx extends M{static forName(s){return this.getCharacterSetECIByName(s)}}class m0{}m0.ISO_8859_1=M.ISO8859_1;class yx{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Bx{static singletonList(s){return[s]}static min(s,i){return s.sort(i)[0]}}class $v{constructor(s){this.previous=s}getPrevious(){return this.previous}}class hi extends $v{constructor(s,i,l){super(s),this.value=i,this.bitCount=l}appendTo(s,i){s.appendBits(this.value,this.bitCount)}add(s,i){return new hi(this,s,i)}addBinaryShift(s,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new hi(this,s,i)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+_.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class w0 extends hi{constructor(s,i,l){super(s,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=l}appendTo(s,i){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(i[this.binaryShiftStart+l],8)}addBinaryShift(s,i){return new w0(this,s,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yv(T,s,i){return new w0(T,s,i)}function Ua(T,s,i){return new hi(T,s,i)}const Zv=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ms=0,Bl=1,wn=2,vx=3,Jn=4,Jv=new hi(null,0,0),y0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function eC(T){for(let s of T)v.fill(s,-1);return T[Ms][Jn]=0,T[Bl][Jn]=0,T[Bl][Ms]=28,T[vx][Jn]=0,T[wn][Jn]=0,T[wn][Ms]=15,T}const Cx=eC(v.createInt32Array(6,6));class es{constructor(s,i,l,c){this.token=s,this.mode=i,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,i){let l=this.bitCount,c=this.token;if(s!==this.mode){let x=y0[this.mode][s];c=Ua(c,x&65535,x>>16),l+=x>>16}let d=s===wn?4:5;return c=Ua(c,i,d),new es(c,s,0,l+d)}shiftAndAppend(s,i){let l=this.token,c=this.mode===wn?4:5;return l=Ua(l,Cx[this.mode][s],c),l=Ua(l,i,5),new es(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(s){let i=this.token,l=this.mode,c=this.bitCount;if(this.mode===Jn||this.mode===wn){let m=y0[l][Ms];i=Ua(i,m&65535,m>>16),c+=m>>16,l=Ms}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new es(i,l,this.binaryShiftByteCount+1,c+d);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(s+1)),x}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Yv(i,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new es(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let i=this.bitCount+(y0[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?i+=es.calculateBinaryShiftCost(s)-es.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(i+=10),i<=s.bitCount}toBitArray(s){let i=[];for(let c=this.endBinaryShift(s.length).token;c!==null;c=c.getPrevious())i.unshift(c);let l=new S;for(const c of i)c.appendTo(l,s);return l}toString(){return z.format("%s bits=%d bytes=%d",Zv[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}es.INITIAL_STATE=new es(Jv,Ms,0,0);function tC(T){const s=z.getCharCode(" "),i=z.getCharCode("."),l=z.getCharCode(",");T[Ms][s]=1;const c=z.getCharCode("Z"),d=z.getCharCode("A");for(let O=d;O<=c;O++)T[Ms][O]=O-d+2;T[Bl][s]=1;const x=z.getCharCode("z"),m=z.getCharCode("a");for(let O=m;O<=x;O++)T[Bl][O]=O-m+2;T[wn][s]=1;const B=z.getCharCode("9"),E=z.getCharCode("0");for(let O=E;O<=B;O++)T[wn][O]=O-E+2;T[wn][l]=12,T[wn][i]=13;const U=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let O=0;O<U.length;O++)T[vx][z.getCharCode(U[O])]=O;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let O=0;O<R.length;O++)z.getCharCode(R[O])>0&&(T[Jn][z.getCharCode(R[O])]=O);return T}const B0=tC(v.createInt32Array(5,256));class Qa{constructor(s){this.text=s}encode(){const s=z.getCharCode(" "),i=z.getCharCode(`
`);let l=Bx.singletonList(es.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let x,m=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case z.getCharCode("\r"):x=m===i?2:0;break;case z.getCharCode("."):x=m===s?3:0;break;case z.getCharCode(","):x=m===s?4:0;break;case z.getCharCode(":"):x=m===s?5:0;break;default:x=0}x>0?(l=Qa.updateStateListForPair(l,d,x),d++):l=this.updateStateListForChar(l,d)}return Bx.min(l,(d,x)=>d.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,i){const l=[];for(let c of s)this.updateStateForChar(c,i,l);return Qa.simplifyStates(l)}updateStateForChar(s,i,l){let c=this.text[i]&255,d=B0[s.getMode()][c]>0,x=null;for(let m=0;m<=Jn;m++){let B=B0[m][c];if(B>0){if(x==null&&(x=s.endBinaryShift(i)),!d||m===s.getMode()||m===wn){const E=x.latchAndAppend(m,B);l.push(E)}if(!d&&Cx[s.getMode()][m]>=0){const E=x.shiftAndAppend(m,B);l.push(E)}}}if(s.getBinaryShiftByteCount()>0||B0[s.getMode()][c]===0){let m=s.addBinaryShiftChar(i);l.push(m)}}static updateStateListForPair(s,i,l){const c=[];for(let d of s)this.updateStateForPair(d,i,l,c);return this.simplifyStates(c)}static updateStateForPair(s,i,l,c){let d=s.endBinaryShift(i);if(c.push(d.latchAndAppend(Jn,l)),s.getMode()!==Jn&&c.push(d.shiftAndAppend(Jn,l)),l===3||l===4){let x=d.latchAndAppend(wn,16-l).latchAndAppend(wn,1);c.push(x)}if(s.getBinaryShiftByteCount()>0){let x=s.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(x)}}static simplifyStates(s){let i=[];for(const l of s){let c=!0;for(const d of i){if(d.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(d)&&(i=i.filter(x=>x!==d))}c&&i.push(l)}return i}}class et{constructor(){}static encodeBytes(s){return et.encode(s,et.DEFAULT_EC_PERCENT,et.DEFAULT_AZTEC_LAYERS)}static encode(s,i,l){let c=new Qa(s).encode(),d=_.truncDivision(c.getSize()*i,100)+11,x=c.getSize()+d,m,B,E,U,R;if(l!==et.DEFAULT_AZTEC_LAYERS){if(m=l<0,B=Math.abs(l),B>(m?et.MAX_NB_BITS_COMPACT:et.MAX_NB_BITS))throw new w(z.format("Illegal value %s for layers",l));E=et.totalBitsInLayer(B,m),U=et.WORD_SIZE[B];let ge=E-E%U;if(R=et.stuffBits(c,U),R.getSize()+d>ge)throw new w("Data to large for user specified layer");if(m&&R.getSize()>U*64)throw new w("Data to large for user specified layer")}else{U=0,R=null;for(let ge=0;;ge++){if(ge>et.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(m=ge<=3,B=m?ge+1:ge,E=et.totalBitsInLayer(B,m),x>E)continue;(R==null||U!==et.WORD_SIZE[B])&&(U=et.WORD_SIZE[B],R=et.stuffBits(c,U));let ze=E-E%U;if(!(m&&R.getSize()>U*64)&&R.getSize()+d<=ze)break}}let O=et.generateCheckWords(R,E,U),V=R.getSize()/U,W=et.generateModeMessage(m,B,V),q=(m?11:14)+B*4,te=new Int32Array(q),ae;if(m){ae=q;for(let ge=0;ge<te.length;ge++)te[ge]=ge}else{ae=q+1+2*_.truncDivision(_.truncDivision(q,2)-1,15);let ge=_.truncDivision(q,2),ze=_.truncDivision(ae,2);for(let Le=0;Le<ge;Le++){let zr=Le+_.truncDivision(Le,15);te[ge-Le-1]=ze-zr-1,te[ge+Le]=ze+zr+1}}let ye=new ce(ae);for(let ge=0,ze=0;ge<B;ge++){let Le=(B-ge)*4+(m?9:12);for(let zr=0;zr<Le;zr++){let Dn=zr*2;for(let Wr=0;Wr<2;Wr++)O.get(ze+Dn+Wr)&&ye.set(te[ge*2+Wr],te[ge*2+zr]),O.get(ze+Le*2+Dn+Wr)&&ye.set(te[ge*2+zr],te[q-1-ge*2-Wr]),O.get(ze+Le*4+Dn+Wr)&&ye.set(te[q-1-ge*2-Wr],te[q-1-ge*2-zr]),O.get(ze+Le*6+Dn+Wr)&&ye.set(te[q-1-ge*2-zr],te[ge*2+Wr])}ze+=Le*8}if(et.drawModeMessage(ye,m,ae,W),m)et.drawBullsEye(ye,_.truncDivision(ae,2),5);else{et.drawBullsEye(ye,_.truncDivision(ae,2),7);for(let ge=0,ze=0;ge<_.truncDivision(q,2)-1;ge+=15,ze+=16)for(let Le=_.truncDivision(ae,2)&1;Le<ae;Le+=2)ye.set(_.truncDivision(ae,2)-ze,Le),ye.set(_.truncDivision(ae,2)+ze,Le),ye.set(Le,_.truncDivision(ae,2)-ze),ye.set(Le,_.truncDivision(ae,2)+ze)}let Be=new yx;return Be.setCompact(m),Be.setSize(ae),Be.setLayers(B),Be.setCodeWords(V),Be.setMatrix(ye),Be}static drawBullsEye(s,i,l){for(let c=0;c<l;c+=2)for(let d=i-c;d<=i+c;d++)s.set(d,i-c),s.set(d,i+c),s.set(i-c,d),s.set(i+c,d);s.set(i-l,i-l),s.set(i-l+1,i-l),s.set(i-l,i-l+1),s.set(i+l,i-l),s.set(i+l,i-l+1),s.set(i+l,i+l-1)}static generateModeMessage(s,i,l){let c=new S;return s?(c.appendBits(i-1,2),c.appendBits(l-1,6),c=et.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(l-1,11),c=et.generateCheckWords(c,40,4)),c}static drawModeMessage(s,i,l,c){let d=_.truncDivision(l,2);if(i)for(let x=0;x<7;x++){let m=d-3+x;c.get(x)&&s.set(m,d-5),c.get(x+7)&&s.set(d+5,m),c.get(20-x)&&s.set(m,d+5),c.get(27-x)&&s.set(d-5,m)}else for(let x=0;x<10;x++){let m=d-5+x+_.truncDivision(x,5);c.get(x)&&s.set(m,d-7),c.get(x+10)&&s.set(d+7,m),c.get(29-x)&&s.set(m,d+7),c.get(39-x)&&s.set(d-7,m)}}static generateCheckWords(s,i,l){let c=s.getSize()/l,d=new g0(et.getGF(l)),x=_.truncDivision(i,l),m=et.bitsToWords(s,l,x);d.encode(m,x-c);let B=i%l,E=new S;E.appendBits(0,B);for(const U of Array.from(m))E.appendBits(U,l);return E}static bitsToWords(s,i,l){let c=new Int32Array(l),d,x;for(d=0,x=s.getSize()/i;d<x;d++){let m=0;for(let B=0;B<i;B++)m|=s.get(d*i+B)?1<<i-B-1:0;c[d]=m}return c}static getGF(s){switch(s){case 4:return de.AZTEC_PARAM;case 6:return de.AZTEC_DATA_6;case 8:return de.AZTEC_DATA_8;case 10:return de.AZTEC_DATA_10;case 12:return de.AZTEC_DATA_12;default:throw new w("Unsupported word size "+s)}}static stuffBits(s,i){let l=new S,c=s.getSize(),d=(1<<i)-2;for(let x=0;x<c;x+=i){let m=0;for(let B=0;B<i;B++)(x+B>=c||s.get(x+B))&&(m|=1<<i-1-B);(m&d)===d?(l.appendBits(m&d,i),x--):m&d?l.appendBits(m,i):(l.appendBits(m|1,i),x--)}return l}static totalBitsInLayer(s,i){return((i?88:112)+16*s)*s}}et.DEFAULT_EC_PERCENT=33,et.DEFAULT_AZTEC_LAYERS=0,et.MAX_NB_BITS=32,et.MAX_NB_BITS_COMPACT=4,et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class vl{encode(s,i,l,c){return this.encodeWithHints(s,i,l,c,null)}encodeWithHints(s,i,l,c,d){let x=m0.ISO_8859_1,m=et.DEFAULT_EC_PERCENT,B=et.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has($t.CHARACTER_SET)&&(x=wx.forName(d.get($t.CHARACTER_SET).toString())),d.has($t.ERROR_CORRECTION)&&(m=_.parseInt(d.get($t.ERROR_CORRECTION).toString())),d.has($t.AZTEC_LAYERS)&&(B=_.parseInt(d.get($t.AZTEC_LAYERS).toString()))),vl.encodeLayers(s,i,l,c,x,m,B)}static encodeLayers(s,i,l,c,d,x,m){if(i!==fe.AZTEC)throw new w("Can only encode AZTEC, but got "+i);let B=et.encode(z.getBytes(s,d),x,m);return vl.renderResult(B,l,c)}static renderResult(s,i,l){let c=s.getMatrix();if(c==null)throw new ke;let d=c.getWidth(),x=c.getHeight(),m=Math.max(i,d),B=Math.max(l,x),E=Math.min(m/d,B/x),U=(m-d*E)/2,R=(B-x*E)/2,O=new ce(m,B);for(let V=0,W=R;V<x;V++,W+=E)for(let q=0,te=U;q<d;q++,te+=E)c.get(q,V)&&O.setRegion(te,W,E,E);return O}}r.AbstractExpandedDecoder=i0,r.ArgumentException=p,r.ArithmeticException=we,r.AztecCode=yx,r.AztecCodeReader=Qn,r.AztecCodeWriter=vl,r.AztecDecoder=$e,r.AztecDetector=va,r.AztecDetectorResult=Un,r.AztecEncoder=et,r.AztecHighLevelEncoder=Qa,r.AztecPoint=sr,r.BarcodeFormat=fe,r.Binarizer=b,r.BinaryBitmap=y,r.BitArray=S,r.BitMatrix=ce,r.BitSource=c0,r.BrowserAztecCodeReader=FA,r.BrowserBarcodeReader=Qv,r.BrowserCodeReader=Ae,r.BrowserDatamatrixCodeReader=Tv,r.BrowserMultiFormatReader=Gv,r.BrowserPDF417Reader=zv,r.BrowserQRCodeReader=Wv,r.BrowserQRCodeSvgWriter=QA,r.CharacterSetECI=M,r.ChecksumException=C,r.Code128Reader=ve,r.Code39Reader=Qt,r.DataMatrixDecodedBitStreamParser=js,r.DataMatrixReader=Os,r.DecodeHintType=Q,r.DecoderResult=Xt,r.DefaultGridSampler=Qs,r.DetectorResult=xr,r.EAN13Reader=qn,r.EncodeHintType=$t,r.Exception=h,r.FormatException=D,r.GenericGF=de,r.GenericGFPoly=vt,r.GlobalHistogramBinarizer=re,r.GridSampler=ii,r.GridSamplerInstance=Xn,r.HTMLCanvasElementLuminanceSource=ue,r.HybridBinarizer=oe,r.ITFReader=At,r.IllegalArgumentException=w,r.IllegalStateException=ke,r.InvertedLuminanceSource=Y,r.LuminanceSource=le,r.MathUtils=Ke,r.MultiFormatOneDReader=ci,r.MultiFormatReader=mx,r.MultiFormatWriter=qv,r.NotFoundException=G,r.OneDReader=Ut,r.PDF417DecodedBitStreamParser=ie,r.PDF417DecoderErrorCorrection=dx,r.PDF417Reader=mr,r.PDF417ResultMetadata=fx,r.PerspectiveTransform=nr,r.PlanarYUVLuminanceSource=Zn,r.QRCodeByteMatrix=yl,r.QRCodeDataMask=pn,r.QRCodeDecodedBitStreamParser=Nt,r.QRCodeDecoderErrorCorrectionLevel=dt,r.QRCodeDecoderFormatInformation=Fr,r.QRCodeEncoder=pt,r.QRCodeEncoderQRCode=UA,r.QRCodeMaskUtil=Tt,r.QRCodeMatrixUtil=je,r.QRCodeMode=Re,r.QRCodeReader=ks,r.QRCodeVersion=De,r.QRCodeWriter=di,r.RGBLuminanceSource=p0,r.RSS14Reader=Dt,r.RSSExpandedReader=xe,r.ReaderException=wl,r.ReedSolomonDecoder=rr,r.ReedSolomonEncoder=g0,r.ReedSolomonException=Ue,r.Result=se,r.ResultMetadataType=pe,r.ResultPoint=Ce,r.StringUtils=z,r.UnsupportedOperationException=k,r.VideoInputDevice=ee,r.WhiteRectangleDetector=Kr,r.WriterException=ct,r.ZXingArrays=v,r.ZXingCharset=wx,r.ZXingInteger=_,r.ZXingStandardCharsets=m0,r.ZXingStringBuilder=X,r.ZXingStringEncoding=P,r.ZXingSystem=F,r.createAbstractExpandedDecoder=cx,Object.defineProperty(r,"__esModule",{value:!0})})})(Wf,Wf.exports);var yt=Wf.exports;const FU=sw(yt),IU=nw({__proto__:null,default:FU},[yt]);var $m=function(){function e(t,r,n){if(this.formatMap=new Map([[Fe.QR_CODE,yt.BarcodeFormat.QR_CODE],[Fe.AZTEC,yt.BarcodeFormat.AZTEC],[Fe.CODABAR,yt.BarcodeFormat.CODABAR],[Fe.CODE_39,yt.BarcodeFormat.CODE_39],[Fe.CODE_93,yt.BarcodeFormat.CODE_93],[Fe.CODE_128,yt.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,yt.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,yt.BarcodeFormat.MAXICODE],[Fe.ITF,yt.BarcodeFormat.ITF],[Fe.EAN_13,yt.BarcodeFormat.EAN_13],[Fe.EAN_8,yt.BarcodeFormat.EAN_8],[Fe.PDF_417,yt.BarcodeFormat.PDF_417],[Fe.RSS_14,yt.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,yt.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,yt.BarcodeFormat.UPC_A],[Fe.UPC_E,yt.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!IU)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var A=this.createZXingFormats(t),a=new Map;a.set(yt.DecodeHintType.POSSIBLE_FORMATS,A),a.set(yt.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,A){try{n(r.decode(t))}catch(a){A(a)}})},e.prototype.decode=function(t){var r=new yt.MultiFormatReader(this.verbose,this.hints),n=new yt.HTMLCanvasElementLuminanceSource(t),A=new yt.BinaryBitmap(new yt.HybridBinarizer(n)),a=r.decode(A);return{text:a.text,format:bv.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,A){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,A=t;n<A.length;n++){var a=A[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),SU=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})},UU=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Ym=function(){function e(t,r,n){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var A=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(A),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return SU(this,void 0,void 0,function(){var r,n;return UU(this,function(A){switch(A.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=A.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:bv.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,A=0,a=t;A<a.length;A++){var u=a[A],g=u.boundingBox.width*u.boundingBox.height;g>n&&(n=g,r=u)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,A=t;n<A.length;n++){var a=A[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,A){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Zm=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})},Jm=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},QU=function(){function e(t,r,n,A){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Ym.isSupported()?(this.primaryDecoder=new Ym(t,n,A),this.secondaryDecoder=new $m(t,n,A)):this.primaryDecoder=new $m(t,n,A)}return e.prototype.decodeAsync=function(t){return Zm(this,void 0,void 0,function(){var r;return Jm(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Zm(this,void 0,void 0,function(){var r,n;return Jm(this,function(A){switch(A.label){case 0:r=performance.now(),A.label=1;case 1:return A.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,A.sent()];case 3:if(n=A.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var A=n[r];t+=A}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),lx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,A){n.__proto__=A}||function(n,A){for(var a in A)Object.prototype.hasOwnProperty.call(A,a)&&(n[a]=A[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yu=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})},Bu=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Nv=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),DU=function(e){lx(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var A={advanced:[n]};return this.track.applyConstraints(A)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Nv),TU=function(e){lx(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(DU),RU=function(e){lx(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(Nv),jU=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new TU(this.track)},e.prototype.torchFeature=function(){return new RU(this.track)},e}(),OU=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,A=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,A),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,A){return yu(this,void 0,void 0,function(){var a,u;return Bu(this,function(g){switch(g.label){case 0:return a=new e(t,r,A),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:g.sent(),g.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return yu(this,void 0,void 0,function(){return Bu(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var A=t.mediaStream.getVideoTracks(),a=A.length,u=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++u,u>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new jU(this.getFirstTrackOrFail())},e}(),kU=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return yu(this,void 0,void 0,function(){return Bu(this,function(A){return[2,OU.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return yu(this,void 0,void 0,function(){var r,n;return Bu(this,function(A){switch(A.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=A.sent(),[2,new e(n)]}})})},e}(),ew=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})},tw=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},LU=function(){function e(){}return e.failIfNotSupported=function(){return ew(this,void 0,void 0,function(){return tw(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return ew(this,void 0,void 0,function(){return tw(this,function(r){return[2,kU.create(t)]})})},e}(),MU=function(e,t,r,n){function A(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function g(p){try{h(n.next(p))}catch(w){u(w)}}function f(p){try{h(n.throw(p))}catch(w){u(w)}}function h(p){p.done?a(p.value):A(p.value).then(g,f)}h((n=n.apply(e,t||[])).next())})},HU=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,A,a,u;return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,A&&(a=h[0]&2?A.return:h[0]?A.throw||((a=A.return)&&a.call(A),0):A.next)&&!(a=a.call(A,h[1])).done)return a;switch(A=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,A=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],A=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},PU=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Gi.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Gi.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return MU(this,void 0,void 0,function(){var t,r,n,A,a,u,g;return HU(this,function(f){switch(f.label){case 0:return t=function(h){for(var p=h.getVideoTracks(),w=0,y=p;w<y.length;w++){var C=y[w];C.enabled=!1,C.stop(),h.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=f.sent(),A=[],a=0,u=n;a<u.length;a++)g=u[a],g.kind==="videoinput"&&A.push({id:g.deviceId,label:g.label});return t(r),[2,A]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(a){for(var u=[],g=0,f=a;g<f.length;g++){var h=f[g];h.kind==="video"&&u.push({id:h.id,label:h.label})}t(u)},A=MediaStreamTrack;A.getSources(n)})},e}(),jt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(jt||(jt={}));var KU=function(){function e(){this.state=jt.NOT_STARTED,this.onGoingTransactionNewState=jt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===jt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===jt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case jt.UNKNOWN:throw"Transition from unknown is not allowed";case jt.NOT_STARTED:this.failIfNewStateIs(t,[jt.PAUSED]);break;case jt.SCANNING:break;case jt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,A=r;n<A.length;n++){var a=A[n];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),VU=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===jt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==jt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===jt.PAUSED},e}(),GU=function(){function e(){}return e.create=function(){return new VU(new KU)},e}(),zU=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,A){n.__proto__=A}||function(n,A){for(var a in A)Object.prototype.hasOwnProperty.call(A,a)&&(n[a]=A[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),an=function(e){zU(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(bU),WU=function(){function e(t,r){this.logger=r,this.fps=an.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=an.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?_v.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!hs(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),XU=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new NU(this.verbose),this.qrcode=new QU(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=GU.create()}return e.prototype.start=function(t,r,n,A){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;A?u=A:u=this.verbose?this.logger.log:function(){};var g=WU.create(r,this.logger);this.clearElement();var f=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var h=f,p=document.getElementById(this.elementId);p.clientWidth?p.clientWidth:an.DEFAULT_WIDTH,p.style.position="relative",this.shouldScan=!0,this.element=p;var w=this,y=this.stateManagerProxy.startTransition(jt.SCANNING);return new Promise(function(C,b){var F=h?g.videoConstraints:w.createVideoConstraints(t);if(!F){y.cancel(),b("videoConstraints should be defined");return}var I={};(!h||g.aspectRatio)&&(I.aspectRatio=g.aspectRatio);var N={onRenderSurfaceReady:function(v,_){w.setupUi(v,_,g),w.isScanning=!0,w.foreverScan(g,n,u)}};LU.failIfNotSupported().then(function(v){v.create(F).then(function(_){return _.render(a.element,I,N).then(function(S){w.renderedCamera=S,y.execute(),C(null)}).catch(function(S){y.cancel(),b(S)})}).catch(function(_){y.cancel(),b(Gi.errorGettingUserMedia(_))})}).catch(function(v){y.cancel(),b(Gi.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jt.PAUSED),this.showPausedState(),(hs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(jt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(jt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var a=document.getElementById(an.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},A=this;return this.renderedCamera.close().then(function(){return A.renderedCamera=null,A.element&&(A.element.removeChild(A.canvasElement),A.canvasElement=null),n(),A.qrRegion&&(A.qrRegion=null),A.context&&(A.context=null),r.execute(),A.hidePausedState(),A.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hs(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(A,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var g=u.width,f=u.height,h=document.getElementById(n.elementId),p=h.clientWidth?h.clientWidth:an.DEFAULT_WIDTH,w=Math.max(h.clientHeight?h.clientHeight:f,an.FILE_SCAN_MIN_HEIGHT),y=n.computeCanvasDrawConfig(g,f,p,w);if(r){var C=n.createCanvasElement(p,w,"qr-canvas-visible");C.style.display="inline-block",h.appendChild(C);var b=C.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=p,b.canvas.height=w,b.drawImage(u,0,0,g,f,y.x,y.y,y.width,y.height)}var F=an.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(u.width,y.width),N=Math.max(u.height,y.height),v=I+2*F,_=N+2*F,S=n.createCanvasElement(v,_);h.appendChild(S);var j=S.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=v,j.canvas.height=_,j.drawImage(u,0,0,g,f,F,F,I,N);try{n.qrcode.decodeRobustlyAsync(S).then(function(Q){A(qm.createFromQrcodeResult(Q))}).catch(a)}catch(Q){a("QR code parse error, error = ".concat(Q))}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return PU.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!_v.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],A=0,a=t.formatsToSupport;A<a.length;A++){var u=a[A];EU(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(hs(t))return!0;if(!hs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(hs(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return hs(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var A=this,a=n.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(t,r,a),g=function(h){if(h<an.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(an.MIN_QR_BOX_SIZE,"px.")},f=function(h){return h>t&&(A.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),h=t),h};g(u.width),g(u.height),u.width=f(u.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(A){throw new Error("qrbox config was passed as a function but it failed with unknown error"+A)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var A=hs(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(A);var a=this.toQrdimensions(t,r,A);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&a.height<=r,g={x:0,y:0,width:t,height:r},f=u?this.getShadedRegionBounds(t,r,a):g,h=this.createCanvasElement(f.width,f.height),p={willReadFrequently:!0},w=h.getContext("2d",p);w.canvas.width=f.width,w.canvas.height=f.height,this.element.append(h),u&&this.possiblyInsertShadingElement(this.element,t,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=w,this.canvasElement=h},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Gi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(A){return t(A.text,qm.createFromQrcodeResult(A)),n.possiblyUpdateShaders(!0),!0}).catch(function(A){n.possiblyUpdateShaders(!1);var a=Gi.codeParseError(A);return r(a,_U.createFrom(a)),!1})},e.prototype.foreverScan=function(t,r,n){var A=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,g=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*u,h=this.qrRegion.height*g,p=this.qrRegion.x*u,w=this.qrRegion.y*g;this.context.drawImage(a,p,w,f,h,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){A.foreverScanTimeout=setTimeout(function(){A.foreverScan(t,r,n)},A.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(C){!C&&t.disableFlip!==!0?(A.context.translate(A.context.canvas.width,0),A.context.scale(-1,1),A.scanContext(r,n).finally(function(){y()})):y()}).catch(function(C){A.logger.logError("Error happend while scanning context",C),y()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",A={user:!0,environment:!0},a="exact",u=function(b){if(b in A)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(b,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var f=Object.keys(t)[0];if(f!==r&&f!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(f===r){var h=t.facingMode;if(typeof h=="string"){if(u(h))return{facingMode:h}}else if(typeof h=="object")if(a in h){if(u(h["".concat(a)]))return{facingMode:{exact:h["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var p=typeof h;throw"Invalid type of 'facingMode' = ".concat(p)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(a in w)return{deviceId:{exact:w["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var y=typeof w;throw"Invalid type of 'deviceId' = ".concat(y)}}}var C=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},e.prototype.computeCanvasDrawConfig=function(t,r,n,A){if(t<=n&&r<=A){var a=(n-t)/2,u=(A-r)/2;return{x:a,y:u,width:t,height:r}}else{var g=t,f=r;return t>n&&(r=n/t*r,t=n),r>A&&(t=A/r*t,r=A),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(f)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,A)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?an.BORDER_SHADER_MATCH_COLOR:an.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var A=t,a=r,u=document.createElement("canvas");return u.style.width="".concat(A,"px"),u.style.height="".concat(a,"px"),u.style.display="none",u.id=hs(n)?"qr-canvas":n,u},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,A){if(!(r-A.width<1||n-A.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(r-A.width)/2,g=(n-A.height)/2;if(a.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(an.SHADED_REGION_ELEMENT_ID),r-A.width<11||n-A.height<11)this.hasBorderShaders=!1;else{var f=5,h=40;this.insertShaderBorders(a,h,f,-f,null,0,!0),this.insertShaderBorders(a,h,f,-f,null,0,!1),this.insertShaderBorders(a,h,f,null,-f,0,!0),this.insertShaderBorders(a,h,f,null,-f,0,!1),this.insertShaderBorders(a,f,h+f,-f,null,-f,!0),this.insertShaderBorders(a,f,h+f,null,-f,-f,!0),this.insertShaderBorders(a,f,h+f,-f,null,-f,!1),this.insertShaderBorders(a,f,h+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,r,n,A,a,u,g){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=an.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(r,"px"),f.style.height="".concat(n,"px"),A!==null&&(f.style.top="".concat(A,"px")),a!==null&&(f.style.bottom="".concat(a,"px")),g?f.style.left="".concat(u,"px"):f.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),rw;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(rw||(rw={}));const Fv=({onScanSuccess:e,onScanError:t})=>{const[r,n]=H.useState(!1),[A,a]=H.useState(null),u="qr-reader";H.useEffect(()=>{const h=new XU(u);return a(h),()=>{h.isScanning&&h.stop().catch(p=>console.error("Erreur lors de l'arrêt du scanner:",p))}},[]);const g=()=>{if(!A)return;n(!0);const h={fps:10,qrbox:{width:250,height:250}};A.start({facingMode:"environment"},h,p=>{e(p),f()},p=>{t&&t(p)}).catch(p=>{console.error("Erreur lors du démarrage du scanner:",p),n(!1),t&&t("Impossible d'accéder à la caméra. Vérifiez les permissions.")})},f=()=>{A&&A.isScanning&&A.stop().then(()=>{n(!1)}).catch(h=>{console.error("Erreur lors de l'arrêt du scanner:",h)})};return o.jsxs("div",{className:"qr-scanner-container",children:[o.jsx("div",{id:u,className:"qr-scanner-element",style:{width:"100%",maxWidth:"500px",margin:"0 auto"}}),o.jsx("div",{className:"mt-4 flex justify-center",children:r?o.jsx(he,{variant:"outline",size:"lg",onClick:f,icon:o.jsx(v_,{className:"h-5 w-5 mr-2"}),children:"Arrêter le scan"}):o.jsx(he,{variant:"primary",size:"lg",onClick:g,icon:o.jsx(Z8,{className:"h-5 w-5 mr-2"}),children:"Scanner un QR code"})})]})},qU=()=>{const{user:e}=lt(),t=kt(),[r,n]=H.useState(""),[A,a]=H.useState(!1),[u,g]=H.useState(null),[f,h]=H.useState(null),[p,w]=H.useState("camera");if(!e||e.role!=="relayPoint")return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsx(J,{children:o.jsx(J.Content,{children:o.jsxs("div",{className:"p-4 text-center",children:[o.jsx(Cr,{className:"h-12 w-12 text-error mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Accès non autorisé"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez être connecté en tant que point relais pour accéder à cette page."}),o.jsx(he,{variant:"primary",onClick:()=>t("/login"),children:"Se connecter"})]})})})})});const y=async b=>{a(!0),g(null),h(null);try{const F=await Za.validateQRCode(b,e.id);if(F.valid&&F.repairId){const I=JSON.parse(b),N=(I==null?void 0:I.code)||"";await Za.markCodeAsUsed(F.repairId,N),await gs.processDropOff(F.repairId,e.id),console.log(`Dépôt traité pour la réparation ${F.repairId} par le point relais ${e.id}`),h({repairId:F.repairId,message:"Appareil reçu avec succès! La demande de réparation a été mise à jour."})}else g(F.message||"QR code invalide")}catch(F){console.error("Erreur lors de la validation du QR code:",F),g("Une erreur est survenue lors de la validation du QR code")}finally{a(!1)}},C=async b=>{if(b.preventDefault(),!!r.trim()){a(!0),g(null),h(null);try{const F=await Za.validateRepairCode(r.trim(),e.id);F.valid&&F.repairId?(await Za.markCodeAsUsed(F.repairId,r.trim()),await gs.processDropOff(F.repairId,e.id),console.log(`Dépôt traité pour la réparation ${F.repairId} par le point relais ${e.id}`),h({repairId:F.repairId,message:"Appareil reçu avec succès! La demande de réparation a été mise à jour."})):g(F.message||"Code invalide")}catch(F){console.error("Erreur lors de la validation du code:",F),g("Une erreur est survenue lors de la validation du code")}finally{a(!1)}}};return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsxs(J,{children:[o.jsxs(J.Header,{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Scanner un QR code"}),o.jsx("p",{className:"text-gray-600",children:"Scannez le QR code du client ou saisissez le code manuellement pour enregistrer le dépôt d'un appareil."})]}),o.jsxs(J.Content,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsx(he,{variant:p==="camera"?"primary":"outline",onClick:()=>w("camera"),icon:o.jsx(iu,{className:"h-5 w-5 mr-2"}),children:"Scanner"}),o.jsx(he,{variant:p==="manual"?"primary":"outline",onClick:()=>w("manual"),icon:o.jsx(iu,{className:"h-5 w-5 mr-2"}),children:"Code manuel"})]}),p==="camera"?o.jsx(Fv,{onScanSuccess:y,onScanError:b=>g(b)}):o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsx(ur,{label:"Code de réparation",type:"text",value:r,onChange:b=>n(b.target.value),placeholder:"Saisissez le code à 6 caractères",required:!0,fullWidth:!0}),o.jsx("div",{className:"flex justify-center",children:o.jsx(he,{type:"submit",variant:"primary",size:"lg",disabled:A||!r.trim(),children:A?"Vérification...":"Valider le code"})})]})]}),u&&o.jsxs("div",{className:"p-4 mb-4 bg-error/10 border border-error/20 rounded-lg flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-error mr-2 mt-0.5"}),o.jsx("div",{className:"text-error",children:u})]}),f&&o.jsxs("div",{className:"p-4 mb-4 bg-success/10 border border-success/20 rounded-lg flex items-start",children:[o.jsx(Tr,{className:"h-5 w-5 text-success mr-2 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-success font-medium",children:f.message}),o.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["ID de réparation: ",f.repairId]}),o.jsx("div",{className:"mt-3",children:o.jsx(he,{variant:"outline",size:"sm",onClick:()=>t(`/repair/${f.repairId}`),children:"Voir les détails"})})]})]})]})]})})})},$U=()=>{const{user:e}=lt(),t=kt(),[r,n]=H.useState(!0),[A,a]=H.useState(null),[u,g]=H.useState(null);H.useEffect(()=>{(async()=>{if(!e||e.role!=="relayPoint"){t("/dashboard");return}try{n(!0);const p=await vs.getRelayPointById(e.id);p?g(p):a("Impossible de charger les informations du point relais.")}catch(p){console.error("Erreur lors du chargement du point relais:",p),a("Une erreur est survenue lors du chargement des données.")}finally{n(!1)}})()},[e,t]);const f=h=>{if(!h)return"Non spécifiés";const p=[{id:"monday",label:"Lundi"},{id:"tuesday",label:"Mardi"},{id:"wednesday",label:"Mercredi"},{id:"thursday",label:"Jeudi"},{id:"friday",label:"Vendredi"},{id:"saturday",label:"Samedi"},{id:"sunday",label:"Dimanche"}];return o.jsx("div",{className:"space-y-1",children:p.map(w=>{const y=h[w.id];return!y||!y.open&&!y.close?o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"font-medium",children:[w.label,":"]}),o.jsx("span",{className:"text-gray-500",children:"Fermé"})]},w.id):o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"font-medium",children:[w.label,":"]}),o.jsxs("span",{children:[y.open," - ",y.close]})]},w.id)})})};return!e||e.role!=="relayPoint"?o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsx(J,{children:o.jsx(J.Content,{children:o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Accès non autorisé"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Cette page est réservée aux points relais."}),o.jsx(he,{variant:"primary",onClick:()=>t("/dashboard"),children:"Retour au tableau de bord"})]})})})})}):o.jsx(Nr,{children:o.jsxs("div",{className:"container mx-auto py-8",children:[o.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Profil du point relais"}),o.jsx(he,{variant:"outline",onClick:()=>t(`/admin/relay-points/${e.id}/edit`),icon:o.jsx(J1,{className:"h-4 w-4 mr-2"}),children:"Modifier mes informations"})]}),r?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"}),o.jsx("p",{className:"mt-4 text-gray-500",children:"Chargement des informations..."})]}):A?o.jsx(J,{children:o.jsx(J.Content,{children:o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("p",{className:"text-error mb-4",children:A}),o.jsx(he,{variant:"primary",onClick:()=>window.location.reload(),children:"Réessayer"})]})})}):u?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(J,{className:"md:col-span-2",children:o.jsxs(J.Content,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(sB,{className:"h-8 w-8 text-primary mr-3"}),o.jsx("h2",{className:"text-xl font-semibold",children:u.businessName})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx(Mr,{className:"h-5 w-5 text-gray-500 mr-3 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-700",children:"Adresse"}),o.jsx("p",{className:"text-gray-600",children:u.address}),u.coordinates&&o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Coordonnées: ",parseFloat(String(u.coordinates.latitude)).toFixed(6),",",parseFloat(String(u.coordinates.longitude)).toFixed(6)]})]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx(ol,{className:"h-5 w-5 text-gray-500 mr-3 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-700",children:"Email"}),o.jsx("p",{className:"text-gray-600",children:u.email})]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx(Wu,{className:"h-5 w-5 text-gray-500 mr-3 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-700",children:"Téléphone"}),o.jsx("p",{className:"text-gray-600",children:u.phoneNumber||"Non spécifié"})]})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Xu,{className:"h-5 w-5 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Paramètres du point relais"})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Commission: ",o.jsxs("span",{className:"font-semibold",children:[u.commission||0,"%"]})," par réparation"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Cette commission est appliquée sur chaque réparation traitée par votre point relais."})]})]})]})]})}),o.jsx(J,{children:o.jsxs(J.Content,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Gn,{className:"h-5 w-5 text-gray-500 mr-2"}),o.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Horaires d'ouverture"})]}),o.jsx("div",{className:"mt-3",children:f(u.openingHours)}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Ces horaires sont affichés aux clients lorsqu'ils choisissent un point relais pour déposer ou récupérer leur appareil."})})]})})]}):o.jsx(J,{children:o.jsx(J.Content,{children:o.jsx("div",{className:"p-4 text-center",children:o.jsx("p",{className:"text-gray-600 mb-4",children:"Aucune information trouvée pour ce point relais."})})})})]})})},YU=()=>{const{user:e}=lt(),t=kt(),[r,n]=H.useState(!1),[A,a]=H.useState("list"),[u,g]=H.useState(null),[f,h]=H.useState(null),[p,w]=H.useState([]),[y,C]=H.useState([]),[b,F]=H.useState(new Map);if(!e||e.role!=="technician")return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsx(J,{children:o.jsx(J.Content,{children:o.jsxs("div",{className:"p-4 text-center",children:[o.jsx(Cr,{className:"h-12 w-12 text-error mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Accès non autorisé"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez être connecté en tant que technicien pour accéder à cette page."}),o.jsx(he,{variant:"primary",onClick:()=>t("/login"),children:"Se connecter"})]})})})})});H.useEffect(()=>{(async()=>{try{n(!0);const j=await Ji.getDevicesReadyForPickup(e.id);w(j);const Q=new Map;j.forEach(D=>{var M;const L=D.dropOffRelayId||"";Q.has(L)||Q.set(L,{name:D.relayName||"Point relais inconnu",address:D.relayAddress||"Adresse inconnue",devices:[]}),(M=Q.get(L))==null||M.devices.push(D)}),F(Q),n(!1)}catch(j){console.error("Erreur lors du chargement des appareils:",j),g("Impossible de charger les appareils en attente de récupération."),n(!1)}})()},[e.id]);const I=async S=>{try{n(!0),g(null),h(null);let j="";try{j=JSON.parse(S).relayPointId||""}catch{g("QR code invalide. Format incorrect."),n(!1);return}if(!j){g("QR code invalide. ID du point relais manquant."),n(!1);return}const Q=p.filter(M=>M.dropOffRelayId===j);if(Q.length===0){g("Aucun appareil à récupérer dans ce point relais."),n(!1);return}const D=Q.map(M=>M.id);if(await Ji.pickupDevicesFromRelay(D,e.id)){h({message:`${D.length} appareil(s) récupéré(s) avec succès du point relais.`}),w(k=>k.filter(P=>!D.includes(P.id)));const M=new Map(b);M.delete(j),F(M)}else g("Erreur lors de la récupération des appareils. Veuillez réessayer.")}catch(j){console.error("Erreur lors du scan du QR code:",j),g("Une erreur est survenue lors du scan du QR code.")}finally{n(!1)}},N=S=>{C(j=>j.includes(S)?j.filter(Q=>Q!==S):[...j,S])},v=S=>{var D;const Q=(((D=b.get(S))==null?void 0:D.devices)||[]).map(L=>L.id);C(L=>{if(Q.every(k=>L.includes(k)))return L.filter(k=>!Q.includes(k));{const k=[...L];return Q.forEach(P=>{k.includes(P)||k.push(P)}),k}})},_=async()=>{if(y.length===0){g("Veuillez sélectionner au moins un appareil à récupérer.");return}try{if(n(!0),g(null),h(null),await Ji.pickupDevicesFromRelay(y,e.id)){h({message:`${y.length} appareil(s) récupéré(s) avec succès.`}),w(Q=>Q.filter(D=>!y.includes(D.id)));const j=new Map;for(const[Q,D]of b.entries()){const L=D.devices.filter(M=>!y.includes(M.id));L.length>0&&j.set(Q,{...D,devices:L})}F(j),C([])}else g("Erreur lors de la récupération des appareils. Veuillez réessayer.")}catch(S){console.error("Erreur lors de la récupération des appareils:",S),g("Une erreur est survenue lors de la récupération des appareils.")}finally{n(!1)}};return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsxs(J,{children:[o.jsxs(J.Header,{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Récupération des appareils"}),o.jsx("p",{className:"text-gray-600",children:"Récupérez les appareils déposés dans les points relais en scannant leur QR code ou en les sélectionnant dans la liste."})]}),o.jsxs(J.Content,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsx(he,{variant:A==="camera"?"primary":"outline",onClick:()=>a("camera"),icon:o.jsx(iu,{className:"h-5 w-5 mr-2"}),children:"Scanner QR code"}),o.jsx(he,{variant:A==="list"?"primary":"outline",onClick:()=>a("list"),icon:o.jsx(yA,{className:"h-5 w-5 mr-2"}),children:"Liste des appareils"})]}),A==="camera"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-lg mb-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5"}),o.jsx("div",{children:o.jsx("p",{className:"text-sm text-blue-800",children:"Scannez le QR code du point relais pour récupérer tous les appareils qui y sont déposés."})})]})}),o.jsx(Fv,{onScanSuccess:I,onScanError:S=>g(S)})]}):o.jsx("div",{className:"space-y-6",children:b.size===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(yA,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucun appareil à récupérer"}),o.jsx("p",{className:"text-gray-500",children:"Tous les appareils ont été récupérés ou aucun n'est prêt pour la récupération."})]}):o.jsxs(o.Fragment,{children:[y.length>0&&o.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 rounded-lg",children:[o.jsxs("span",{className:"text-blue-800 font-medium",children:[y.length," appareil(s) sélectionné(s)"]}),o.jsx(he,{variant:"primary",size:"sm",onClick:_,disabled:r,icon:o.jsx(AB,{className:"h-4 w-4 mr-1"}),children:"Récupérer la sélection"})]}),Array.from(b.entries()).map(([S,j])=>o.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:j.name}),o.jsx("p",{className:"text-sm text-gray-500",children:j.address})]}),o.jsx(he,{variant:"outline",size:"sm",onClick:()=>v(S),children:j.devices.every(Q=>y.includes(Q.id))?"Tout désélectionner":"Tout sélectionner"})]})}),o.jsx("div",{className:"divide-y divide-gray-100",children:j.devices.map(Q=>o.jsxs("div",{className:`p-4 flex items-center hover:bg-gray-50 cursor-pointer ${y.includes(Q.id)?"bg-blue-50":""}`,onClick:()=>N(Q.id),children:[o.jsx("input",{type:"checkbox",checked:y.includes(Q.id),onChange:()=>{},className:"h-5 w-5 text-primary border-gray-300 rounded focus:ring-primary mr-3"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"font-medium text-gray-900",children:[Q.brand," ",Q.model]}),o.jsx("span",{className:"text-sm text-gray-500",children:new Date(Q.createdAt).toLocaleDateString()})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[Q.deviceType," - ",Q.clientName]})]})]},Q.id))})]},S))]})})]}),u&&o.jsxs("div",{className:"p-4 mb-4 bg-error/10 border border-error/20 rounded-lg flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-error mr-2 mt-0.5"}),o.jsx("div",{className:"text-error",children:u})]}),f&&o.jsxs("div",{className:"p-4 mb-4 bg-success/10 border border-success/20 rounded-lg flex items-start",children:[o.jsx(Tr,{className:"h-5 w-5 text-success mr-2 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-success font-medium",children:f.message}),o.jsx("div",{className:"mt-3",children:o.jsx(he,{variant:"outline",size:"sm",onClick:()=>t("/technician/dashboard"),children:"Retour au tableau de bord"})})]})]})]})]})})})},ZU=()=>{const{user:e}=lt(),t=kt(),{repairId:r}=Al(),[n,A]=H.useState(!1),[a,u]=H.useState(null),[g,f]=H.useState(null),[h,p]=H.useState(null),[w,y]=H.useState(""),[C,b]=H.useState(""),[F,I]=H.useState(""),[N,v]=H.useState("");if(!e||e.role!=="technician")return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsx(J,{children:o.jsx(J.Content,{children:o.jsxs("div",{className:"p-4 text-center",children:[o.jsx(Cr,{className:"h-12 w-12 text-error mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Accès non autorisé"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez être connecté en tant que technicien pour accéder à cette page."}),o.jsx(he,{variant:"primary",onClick:()=>t("/login"),children:"Se connecter"})]})})})})});H.useEffect(()=>{(async()=>{if(r)try{A(!0);const Q=(await Ji.getTechnicianRepairs(e.id)).find(D=>D.id===r);Q?(p(Q),Q.preDiagnosis&&y(Q.preDiagnosis),Q.estimatedCost&&b(Q.estimatedCost),Q.notes&&v(Q.notes)):u("Réparation non trouvée ou non assignée à ce technicien.")}catch(j){console.error("Erreur lors du chargement des détails de la réparation:",j),u("Impossible de charger les détails de la réparation.")}finally{A(!1)}})()},[r,e.id]);const _=async S=>{if(S.preventDefault(),!w||!C||!F){u("Veuillez remplir tous les champs obligatoires.");return}try{A(!0),u(null),await Ji.updateDiagnosticAndSendQuote(r,{preDiagnosis:w,estimatedCost:typeof C=="string"?parseFloat(C):C,estimatedTime:F,notes:N})?f({message:"Diagnostic et devis envoyés avec succès au client."}):u("Erreur lors de l'envoi du diagnostic et du devis.")}catch(j){console.error("Erreur lors de l'envoi du diagnostic:",j),u("Une erreur est survenue lors de l'envoi du diagnostic.")}finally{A(!1)}};return o.jsx(Nr,{children:o.jsx("div",{className:"container mx-auto py-8",children:o.jsxs(J,{children:[o.jsxs(J.Header,{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Diagnostic et devis"}),o.jsx("p",{className:"text-gray-600",children:"Établissez un diagnostic et proposez un devis pour la réparation."})]}),o.jsxs(J.Content,{children:[n&&!h?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"}),o.jsx("p",{className:"mt-4 text-gray-500",children:"Chargement des détails..."})]}):h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h2",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Informations sur l'appareil"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Type d'appareil"}),o.jsx("p",{className:"font-medium",children:h.deviceType})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Marque et modèle"}),o.jsxs("p",{className:"font-medium",children:[h.brand," ",h.model]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),o.jsx("p",{className:"font-medium",children:h.clientName})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Date de dépôt"}),o.jsx("p",{className:"font-medium",children:new Date(h.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Description du problème"}),o.jsx("p",{className:"mt-1",children:h.problemDescription})]})]}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"diagnosis",className:"block text-sm font-medium text-gray-700 mb-1",children:["Diagnostic ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsx("textarea",{id:"diagnosis",rows:4,value:w,onChange:S=>y(S.target.value),className:"block w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Décrivez le problème identifié et les réparations nécessaires",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"estimatedCost",className:"block text-sm font-medium text-gray-700 mb-1",children:["Coût estimé (€) ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(s_,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"number",id:"estimatedCost",value:C,onChange:S=>b(S.target.value?parseFloat(S.target.value):""),className:"block w-full rounded-md border border-gray-300 bg-white pl-10 pr-4 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"0.00",min:"0",step:"0.01",required:!0})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"estimatedTime",className:"block text-sm font-medium text-gray-700 mb-1",children:["Délai estimé ",o.jsx("span",{className:"text-error",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Gn,{className:"h-5 w-5 text-gray-400"})}),o.jsxs("select",{id:"estimatedTime",value:F,onChange:S=>I(S.target.value),className:"block w-full rounded-md border border-gray-300 bg-white pl-10 pr-4 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",required:!0,children:[o.jsx("option",{value:"",children:"Sélectionnez un délai"}),o.jsx("option",{value:"24 heures",children:"24 heures"}),o.jsx("option",{value:"2-3 jours",children:"2-3 jours"}),o.jsx("option",{value:"1 semaine",children:"1 semaine"}),o.jsx("option",{value:"2 semaines",children:"2 semaines"}),o.jsx("option",{value:"3-4 semaines",children:"3-4 semaines"}),o.jsx("option",{value:"Plus d'un mois",children:"Plus d'un mois"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"technicianNotes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes techniques (non visibles par le client)"}),o.jsx("textarea",{id:"technicianNotes",rows:3,value:N,onChange:S=>v(S.target.value),className:"block w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Notes internes pour vous ou d'autres techniciens"})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5"}),o.jsx("div",{children:o.jsx("p",{className:"text-sm text-blue-800",children:"Le client recevra une notification avec votre diagnostic et le devis. Il pourra accepter ou refuser le devis."})})]})}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(he,{variant:"outline",type:"button",onClick:()=>t("/technician/dashboard"),disabled:n,children:"Annuler"}),o.jsx(he,{variant:"primary",type:"submit",disabled:n||!w||!C||!F,icon:o.jsx(ll,{className:"h-5 w-5 mr-2"}),children:n?"Envoi en cours...":"Envoyer le devis"})]})]})]}):o.jsxs("div",{className:"text-center py-16",children:[o.jsx(Cr,{className:"h-12 w-12 text-error mx-auto mb-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Réparation non trouvée"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Cette réparation n'existe pas ou n'est pas assignée à votre compte."}),o.jsx(he,{variant:"primary",onClick:()=>t("/technician/dashboard"),children:"Retour au tableau de bord"})]}),a&&o.jsxs("div",{className:"p-4 mt-6 bg-error/10 border border-error/20 rounded-lg flex items-start",children:[o.jsx(Cr,{className:"h-5 w-5 text-error mr-2 mt-0.5"}),o.jsx("div",{className:"text-error",children:a})]}),g&&o.jsxs("div",{className:"p-4 mt-6 bg-success/10 border border-success/20 rounded-lg flex items-start",children:[o.jsx(Tr,{className:"h-5 w-5 text-success mr-2 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-success font-medium",children:g.message}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Vous serez notifié lorsque le client aura accepté ou refusé le devis."}),o.jsx("div",{className:"mt-3",children:o.jsx(he,{variant:"outline",size:"sm",onClick:()=>t("/technician/dashboard"),children:"Retour au tableau de bord"})})]})]})]})]})})})},JU=()=>{lt();const e=kt(),[t,r]=H.useState([]),[n,A]=H.useState([]),[a,u]=H.useState(""),[g,f]=H.useState(!0),[h,p]=H.useState(null),[w,y]=H.useState([]),[C,b]=H.useState(""),[F,I]=H.useState(!1);H.useEffect(()=>{v(),N()},[]),H.useEffect(()=>{_()},[a,C,t]);const N=async()=>{try{const{data:Q,error:D}=await Z.from("repair_statuses").select("*").order("id");if(D)throw D;if(Q){const L=Q.map(M=>{let k;switch(M.code){case"SUBMITTED":k="blue";break;case"RECEIVED":k="purple";break;case"TO_DIAGNOSE":k="pink";break;case"IN_REPAIR":k="orange";break;case"REPAIRED":k="teal";break;case"READY_FOR_PICKUP":k="indigo";break;case"COMPLETED":k="green";break;case"CANCELLED":k="red";break;default:k="gray"}return{...M,color:k}});y(L)}}catch(Q){console.error("Erreur lors de la récupération des statuts:",Q)}},v=async()=>{try{f(!0),p(null);const{data:Q,error:D}=await Z.from("repair_requests").select("*").order("created_at",{ascending:!1});if(D)throw D;if(!Q){r([]);return}const L=[];for(const M of Q){const{data:k}=await Z.from("repair_statuses").select("*").eq("id",M.status_id).maybeSingle(),{data:P}=await Z.from("profiles").select("first_name, last_name, email").eq("id",M.client_id).maybeSingle();let z=null;if(M.technician_id){const{data:re}=await Z.from("profiles").select("first_name, last_name").eq("id",M.technician_id).maybeSingle();z=re}let X=null;if(M.drop_off_relay_id){const{data:re}=await Z.from("profiles").select("first_name, last_name").eq("id",M.drop_off_relay_id).maybeSingle();X=re}let ce=null;if(M.pickup_relay_id){const{data:re}=await Z.from("profiles").select("first_name, last_name").eq("id",M.pickup_relay_id).maybeSingle();ce=re}const G={...M,status:k||void 0,client_first_name:P==null?void 0:P.first_name,client_last_name:P==null?void 0:P.last_name,client_email:P==null?void 0:P.email,technician_first_name:z==null?void 0:z.first_name,technician_last_name:z==null?void 0:z.last_name,drop_off_relay_name:X?`${X.first_name} ${X.last_name}`:void 0,pickup_relay_name:ce?`${ce.first_name} ${ce.last_name}`:void 0};L.push(G)}r(L),A(L)}catch(Q){console.error("Erreur lors de la récupération des réparations:",Q),p(Q.message||"Erreur lors de la récupération des réparations.")}finally{f(!1)}},_=()=>{let Q=[...t];if(a){const D=a.toLowerCase();Q=Q.filter(L=>L.code.toLowerCase().includes(D)||L.device_type.toLowerCase().includes(D)||L.device_brand.toLowerCase().includes(D)||L.device_model.toLowerCase().includes(D)||L.issue_description.toLowerCase().includes(D)||L.client_first_name&&L.client_first_name.toLowerCase().includes(D)||L.client_last_name&&L.client_last_name.toLowerCase().includes(D)||L.client_email&&L.client_email.toLowerCase().includes(D)||L.technician_first_name&&L.technician_first_name.toLowerCase().includes(D)||L.technician_last_name&&L.technician_last_name.toLowerCase().includes(D)||L.drop_off_relay_name&&L.drop_off_relay_name.toLowerCase().includes(D)||L.pickup_relay_name&&L.pickup_relay_name.toLowerCase().includes(D))}C&&(Q=Q.filter(D=>D.status_id===C)),A(Q)},S=Q=>{if(!Q)return o.jsx(Jt,{variant:"default",children:"Inconnu"});let D="default";switch(Q.code){case"SUBMITTED":D="blue";break;case"RECEIVED":D="purple";break;case"TO_DIAGNOSE":D="pink";break;case"IN_REPAIR":D="orange";break;case"REPAIRED":D="teal";break;case"READY_FOR_PICKUP":D="indigo";break;case"COMPLETED":D="success";break;case"CANCELLED":D="error";break;default:D="default"}return o.jsx(Jt,{variant:D,children:Q.name})},j=Q=>{if(!Q)return o.jsx(Cr,{className:"h-5 w-5 text-gray-400"});switch(Q.code){case"SUBMITTED":return o.jsx(Gn,{className:"h-5 w-5 text-blue-500"});case"RECEIVED":return o.jsx(Mr,{className:"h-5 w-5 text-purple-500"});case"TO_DIAGNOSE":return o.jsx(Cr,{className:"h-5 w-5 text-pink-500"});case"IN_REPAIR":return o.jsx(ll,{className:"h-5 w-5 text-orange-500"});case"REPAIRED":return o.jsx(Tr,{className:"h-5 w-5 text-teal-500"});case"READY_FOR_PICKUP":return o.jsx(Mr,{className:"h-5 w-5 text-indigo-500"});case"COMPLETED":return o.jsx(Tr,{className:"h-5 w-5 text-green-500"});case"CANCELLED":return o.jsx(xA,{className:"h-5 w-5 text-red-500"});default:return o.jsx(Cr,{className:"h-5 w-5 text-gray-400"})}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsxs(he,{variant:"ghost",onClick:()=>e("/admin"),className:"mr-4",children:[o.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Retour"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des réparations"})]}),h&&o.jsx("div",{className:"mb-6 p-4 bg-error/10 border border-error/20 rounded-md text-error",children:h}),o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[o.jsxs("div",{className:"relative w-full md:w-64",children:[o.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx("input",{type:"text",placeholder:"Rechercher une réparation...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:a,onChange:Q=>u(Q.target.value)})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(he,{variant:"outline",onClick:()=>I(!F),children:[o.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Filtres ",F?"(Masquer)":"(Afficher)"]}),o.jsxs(he,{variant:"outline",onClick:v,disabled:g,children:[o.jsx(Vn,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Actualiser"]})]})]}),F&&o.jsx(J,{className:"mb-6",children:o.jsx(J.Content,{className:"p-4",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",value:C,onChange:Q=>b(Q.target.value),children:[o.jsx("option",{value:"",children:"Tous les statuts"}),w.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]})})})}),o.jsx(J,{children:o.jsx(J.Content,{className:"p-0",children:g?o.jsx("div",{className:"p-6 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.length===0?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune réparation trouvée."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appareil"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Technicien"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.code})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"text-sm text-gray-900",children:[Q.device_brand," ",Q.device_model]}),o.jsx("div",{className:"text-xs text-gray-500",children:Q.device_type})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Q.client_first_name," ",Q.client_last_name]}),o.jsx("div",{className:"text-xs text-gray-500",children:Q.client_email})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[j(Q.status),o.jsx("span",{className:"ml-2",children:S(Q.status)})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:Q.technician_first_name&&Q.technician_last_name?`${Q.technician_first_name} ${Q.technician_last_name}`:"Non assigné"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(Q.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>e(`/repair/${Q.id}`),children:[o.jsx(i_,{className:"h-4 w-4 mr-2"}),"Détails"]})})]},Q.id))})]})})})})]})},Yt=({children:e})=>{const{isAuthenticated:t,loading:r}=lt();return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Chargement..."}):t?o.jsx(o.Fragment,{children:e}):o.jsx(Fy,{to:"/login"})};function eQ(){return o.jsx(W8,{children:o.jsx(_3,{children:o.jsxs(w3,{children:[o.jsx(wt,{path:"/",element:o.jsx(T_,{})}),o.jsx(wt,{path:"/login",element:o.jsx(R_,{})}),o.jsx(wt,{path:"/register",element:o.jsx(j_,{})}),o.jsx(wt,{path:"/request-repair",element:o.jsx(iU,{})}),o.jsx(wt,{path:"/dashboard",element:o.jsx(Yt,{children:o.jsx(V_,{})})}),o.jsx(wt,{path:"/repair/:id",element:o.jsx(Yt,{children:o.jsx(Gm,{})})}),o.jsx(wt,{path:"/tech/repair/:id",element:o.jsx(Yt,{children:o.jsx(Gm,{})})}),o.jsx(wt,{path:"/chat/:id",element:o.jsx(Yt,{children:o.jsx(fU,{})})}),o.jsx(wt,{path:"/notifications",element:o.jsx(Yt,{children:o.jsx(xU,{})})}),o.jsx(wt,{path:"/profile",element:o.jsx(Yt,{children:o.jsx(gU,{})})}),o.jsx(wt,{path:"/relay/scan",element:o.jsx(Yt,{children:o.jsx(qU,{})})}),o.jsx(wt,{path:"/relay/profile",element:o.jsx(Yt,{children:o.jsx($U,{})})}),o.jsx(wt,{path:"/technician/pickup",element:o.jsx(Yt,{children:o.jsx(YU,{})})}),o.jsx(wt,{path:"/technician/repair/:repairId",element:o.jsx(Yt,{children:o.jsx(ZU,{})})}),o.jsx(wt,{path:"/admin/relay-points",element:o.jsx(Yt,{children:o.jsx(pU,{})})}),o.jsx(wt,{path:"/admin/relay-points/new",element:o.jsx(Yt,{children:o.jsx(zm,{})})}),o.jsx(wt,{path:"/admin/relay-points/edit/:id",element:o.jsx(Yt,{children:o.jsx(zm,{})})}),o.jsx(wt,{path:"/admin/technicians",element:o.jsx(Yt,{children:o.jsx(wU,{})})}),o.jsx(wt,{path:"/admin/technicians/edit/:id",element:o.jsx(Yt,{children:o.jsx(yU,{})})}),o.jsx(wt,{path:"/admin/users",element:o.jsx(Yt,{children:o.jsx(BU,{})})}),o.jsx(wt,{path:"/admin/settings",element:o.jsx(Yt,{children:o.jsx(vU,{})})}),o.jsx(wt,{path:"/admin/reports",element:o.jsx(Yt,{children:o.jsx(CU,{})})}),o.jsx(wt,{path:"/admin/repairs",element:o.jsx(Yt,{children:o.jsx(JU,{})})}),o.jsx(wt,{path:"*",element:o.jsx(Fy,{to:"/"})})]})})})}my(document.getElementById("root")).render(o.jsx(H.StrictMode,{children:o.jsx(eQ,{})}));export{sw as g};
